var s0=Object.defineProperty;var i0=(r,e,t)=>e in r?s0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var vd=(r,e,t)=>i0(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function v_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wd={exports:{}},Qa={},xd={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function o0(){if(kg)return Re;kg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,$={};function U(j,G,Se){this.props=j,this.context=G,this.refs=$,this.updater=Se||O}U.prototype.isReactComponent={},U.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},U.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function K(){}K.prototype=U.prototype;function ne(j,G,Se){this.props=j,this.context=G,this.refs=$,this.updater=Se||O}var ee=ne.prototype=new K;ee.constructor=ne,H(ee,U.prototype),ee.isPureReactComponent=!0;var q=Array.isArray,se=Object.prototype.hasOwnProperty,oe={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(j,G,Se){var Ae,Ne={},ke=null,Le=null;if(G!=null)for(Ae in G.ref!==void 0&&(Le=G.ref),G.key!==void 0&&(ke=""+G.key),G)se.call(G,Ae)&&!C.hasOwnProperty(Ae)&&(Ne[Ae]=G[Ae]);var Fe=arguments.length-2;if(Fe===1)Ne.children=Se;else if(1<Fe){for(var He=Array(Fe),bt=0;bt<Fe;bt++)He[bt]=arguments[bt+2];Ne.children=He}if(j&&j.defaultProps)for(Ae in Fe=j.defaultProps,Fe)Ne[Ae]===void 0&&(Ne[Ae]=Fe[Ae]);return{$$typeof:r,type:j,key:ke,ref:Le,props:Ne,_owner:oe.current}}function N(j,G){return{$$typeof:r,type:j.type,key:G,ref:j.ref,props:j.props,_owner:j._owner}}function P(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function R(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Se){return G[Se]})}var F=/\/+/g;function b(j,G){return typeof j=="object"&&j!==null&&j.key!=null?R(""+j.key):G.toString(36)}function Ue(j,G,Se,Ae,Ne){var ke=typeof j;(ke==="undefined"||ke==="boolean")&&(j=null);var Le=!1;if(j===null)Le=!0;else switch(ke){case"string":case"number":Le=!0;break;case"object":switch(j.$$typeof){case r:case e:Le=!0}}if(Le)return Le=j,Ne=Ne(Le),j=Ae===""?"."+b(Le,0):Ae,q(Ne)?(Se="",j!=null&&(Se=j.replace(F,"$&/")+"/"),Ue(Ne,G,Se,"",function(bt){return bt})):Ne!=null&&(P(Ne)&&(Ne=N(Ne,Se+(!Ne.key||Le&&Le.key===Ne.key?"":(""+Ne.key).replace(F,"$&/")+"/")+j)),G.push(Ne)),1;if(Le=0,Ae=Ae===""?".":Ae+":",q(j))for(var Fe=0;Fe<j.length;Fe++){ke=j[Fe];var He=Ae+b(ke,Fe);Le+=Ue(ke,G,Se,He,Ne)}else if(He=S(j),typeof He=="function")for(j=He.call(j),Fe=0;!(ke=j.next()).done;)ke=ke.value,He=Ae+b(ke,Fe++),Le+=Ue(ke,G,Se,He,Ne);else if(ke==="object")throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Le}function ft(j,G,Se){if(j==null)return j;var Ae=[],Ne=0;return Ue(j,Ae,"","",function(ke){return G.call(Se,ke,Ne++)}),Ae}function ot(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(Se){(j._status===0||j._status===-1)&&(j._status=1,j._result=Se)},function(Se){(j._status===0||j._status===-1)&&(j._status=2,j._result=Se)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var Qe={current:null},ie={transition:null},me={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:ie,ReactCurrentOwner:oe};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:ft,forEach:function(j,G,Se){ft(j,function(){G.apply(this,arguments)},Se)},count:function(j){var G=0;return ft(j,function(){G++}),G},toArray:function(j){return ft(j,function(G){return G})||[]},only:function(j){if(!P(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Re.Component=U,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=ne,Re.StrictMode=i,Re.Suspense=y,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Re.act=ue,Re.cloneElement=function(j,G,Se){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ae=H({},j.props),Ne=j.key,ke=j.ref,Le=j._owner;if(G!=null){if(G.ref!==void 0&&(ke=G.ref,Le=oe.current),G.key!==void 0&&(Ne=""+G.key),j.type&&j.type.defaultProps)var Fe=j.type.defaultProps;for(He in G)se.call(G,He)&&!C.hasOwnProperty(He)&&(Ae[He]=G[He]===void 0&&Fe!==void 0?Fe[He]:G[He])}var He=arguments.length-2;if(He===1)Ae.children=Se;else if(1<He){Fe=Array(He);for(var bt=0;bt<He;bt++)Fe[bt]=arguments[bt+2];Ae.children=Fe}return{$$typeof:r,type:j.type,key:Ne,ref:ke,props:Ae,_owner:Le}},Re.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Re.createElement=T,Re.createFactory=function(j){var G=T.bind(null,j);return G.type=j,G},Re.createRef=function(){return{current:null}},Re.forwardRef=function(j){return{$$typeof:p,render:j}},Re.isValidElement=P,Re.lazy=function(j){return{$$typeof:w,_payload:{_status:-1,_result:j},_init:ot}},Re.memo=function(j,G){return{$$typeof:v,type:j,compare:G===void 0?null:G}},Re.startTransition=function(j){var G=ie.transition;ie.transition={};try{j()}finally{ie.transition=G}},Re.unstable_act=ue,Re.useCallback=function(j,G){return Qe.current.useCallback(j,G)},Re.useContext=function(j){return Qe.current.useContext(j)},Re.useDebugValue=function(){},Re.useDeferredValue=function(j){return Qe.current.useDeferredValue(j)},Re.useEffect=function(j,G){return Qe.current.useEffect(j,G)},Re.useId=function(){return Qe.current.useId()},Re.useImperativeHandle=function(j,G,Se){return Qe.current.useImperativeHandle(j,G,Se)},Re.useInsertionEffect=function(j,G){return Qe.current.useInsertionEffect(j,G)},Re.useLayoutEffect=function(j,G){return Qe.current.useLayoutEffect(j,G)},Re.useMemo=function(j,G){return Qe.current.useMemo(j,G)},Re.useReducer=function(j,G,Se){return Qe.current.useReducer(j,G,Se)},Re.useRef=function(j){return Qe.current.useRef(j)},Re.useState=function(j){return Qe.current.useState(j)},Re.useSyncExternalStore=function(j,G,Se){return Qe.current.useSyncExternalStore(j,G,Se)},Re.useTransition=function(){return Qe.current.useTransition()},Re.version="18.3.1",Re}var Rg;function xf(){return Rg||(Rg=1,xd.exports=o0()),xd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function a0(){if(Pg)return Qa;Pg=1;var r=xf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,y,v){var w,E={},S=null,O=null;v!==void 0&&(S=""+v),y.key!==void 0&&(S=""+y.key),y.ref!==void 0&&(O=y.ref);for(w in y)i.call(y,w)&&!l.hasOwnProperty(w)&&(E[w]=y[w]);if(p&&p.defaultProps)for(w in y=p.defaultProps,y)E[w]===void 0&&(E[w]=y[w]);return{$$typeof:e,type:p,key:S,ref:O,props:E,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=h,Qa.jsxs=h,Qa}var Dg;function l0(){return Dg||(Dg=1,wd.exports=a0()),wd.exports}var f=l0(),Y=xf();const ul=v_(Y);var Hu={},Ed={exports:{}},hn={},Td={exports:{}},Id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function u0(){return jg||(jg=1,(function(r){function e(ie,me){var ue=ie.length;ie.push(me);e:for(;0<ue;){var j=ue-1>>>1,G=ie[j];if(0<o(G,me))ie[j]=me,ie[ue]=G,ue=j;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var me=ie[0],ue=ie.pop();if(ue!==me){ie[0]=ue;e:for(var j=0,G=ie.length,Se=G>>>1;j<Se;){var Ae=2*(j+1)-1,Ne=ie[Ae],ke=Ae+1,Le=ie[ke];if(0>o(Ne,ue))ke<G&&0>o(Le,Ne)?(ie[j]=Le,ie[ke]=ue,j=ke):(ie[j]=Ne,ie[Ae]=ue,j=Ae);else if(ke<G&&0>o(Le,ue))ie[j]=Le,ie[ke]=ue,j=ke;else break e}}return me}function o(ie,me){var ue=ie.sortIndex-me.sortIndex;return ue!==0?ue:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var y=[],v=[],w=1,E=null,S=3,O=!1,H=!1,$=!1,U=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(ie){for(var me=t(v);me!==null;){if(me.callback===null)i(v);else if(me.startTime<=ie)i(v),me.sortIndex=me.expirationTime,e(y,me);else break;me=t(v)}}function q(ie){if($=!1,ee(ie),!H)if(t(y)!==null)H=!0,ot(se);else{var me=t(v);me!==null&&Qe(q,me.startTime-ie)}}function se(ie,me){H=!1,$&&($=!1,K(T),T=-1),O=!0;var ue=S;try{for(ee(me),E=t(y);E!==null&&(!(E.expirationTime>me)||ie&&!R());){var j=E.callback;if(typeof j=="function"){E.callback=null,S=E.priorityLevel;var G=j(E.expirationTime<=me);me=r.unstable_now(),typeof G=="function"?E.callback=G:E===t(y)&&i(y),ee(me)}else i(y);E=t(y)}if(E!==null)var Se=!0;else{var Ae=t(v);Ae!==null&&Qe(q,Ae.startTime-me),Se=!1}return Se}finally{E=null,S=ue,O=!1}}var oe=!1,C=null,T=-1,N=5,P=-1;function R(){return!(r.unstable_now()-P<N)}function F(){if(C!==null){var ie=r.unstable_now();P=ie;var me=!0;try{me=C(!0,ie)}finally{me?b():(oe=!1,C=null)}}else oe=!1}var b;if(typeof ne=="function")b=function(){ne(F)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,ft=Ue.port2;Ue.port1.onmessage=F,b=function(){ft.postMessage(null)}}else b=function(){U(F,0)};function ot(ie){C=ie,oe||(oe=!0,b())}function Qe(ie,me){T=U(function(){ie(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){H||O||(H=!0,ot(se))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(ie){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var ue=S;S=me;try{return ie()}finally{S=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=S;S=ie;try{return me()}finally{S=ue}},r.unstable_scheduleCallback=function(ie,me,ue){var j=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?j+ue:j):ue=j,ie){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ue+G,ie={id:w++,callback:me,priorityLevel:ie,startTime:ue,expirationTime:G,sortIndex:-1},ue>j?(ie.sortIndex=ue,e(v,ie),t(y)===null&&ie===t(v)&&($?(K(T),T=-1):$=!0,Qe(q,ue-j))):(ie.sortIndex=G,e(y,ie),H||O||(H=!0,ot(se))),ie},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(ie){var me=S;return function(){var ue=S;S=me;try{return ie.apply(this,arguments)}finally{S=ue}}}})(Id)),Id}var Fg;function c0(){return Fg||(Fg=1,Td.exports=u0()),Td.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function h0(){if(Vg)return hn;Vg=1;var r=xf(),e=c0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function S(n){return y.call(E,n)?!0:y.call(w,n)?!1:v.test(n)?E[n]=!0:(w[n]=!0,!1)}function O(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,s,a,c){if(s===null||typeof s>"u"||O(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,c,d,m,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=x}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(K,ne);U[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(K,ne);U[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(K,ne);U[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function ee(n,s,a,c){var d=U.hasOwnProperty(s)?U[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(H(s,a,d,c)&&(a=null),c||d===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),oe=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),R=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Object.assign,j;function G(n){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+n}var Se=!1;function Ae(n,s){if(!n||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){c=z}n.call(s.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),m=c.stack.split(`
`),x=d.length-1,A=m.length-1;1<=x&&0<=A&&d[x]!==m[A];)A--;for(;1<=x&&0<=A;x--,A--)if(d[x]!==m[A]){if(x!==1||A!==1)do if(x--,A--,0>A||d[x]!==m[A]){var k=`
`+d[x].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=x&&0<=A);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Ne(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function ke(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case oe:return"Portal";case N:return"Profiler";case T:return"StrictMode";case b:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case R:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case F:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ft:return s=n.displayName||null,s!==null?s:ke(n.type)||"Memo";case ot:s=n._payload,n=n._init;try{return ke(n(s))}catch{}}return null}function Le(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bt(n){var s=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,m.call(this,x)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ds(n){n._valueTracker||(n._valueTracker=bt(n))}function ri(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=He(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Ln(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fs(n,s){var a=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function si(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ps(n,s){s=s.checked,s!=null&&ee(n,"checked",s,!1)}function Dr(n,s){ps(n,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?at(n,s.type,a):s.hasOwnProperty("defaultValue")&&at(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ii(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function at(n,s,a){(s!=="number"||Ln(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Xe=Array.isArray;function mn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function oi(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ms(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Xe(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Fe(a)}}function aa(n,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function er(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ai(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jr(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ai(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gn,li=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(gn=gn||document.createElement("div"),gn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=gn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Fr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xi=["Webkit","ms","Moz","O"];Object.keys(tr).forEach(function(n){Xi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),tr[s]=tr[n]})});function nr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||tr.hasOwnProperty(n)&&tr[n]?(""+s).trim():s+"px"}function Vr(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=nr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var ui=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yn(n,s){if(s){if(ui[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function gs(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rr=null;function Or(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mn=null,Un=null,rt=null;function ci(n){if(n=ja(n)){if(typeof Mn!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ou(s),Mn(n.stateNode,n.type,s))}}function ge(n){Un?rt?rt.push(n):rt=[n]:Un=n}function we(){if(Un){var n=Un,s=rt;if(rt=Un=null,ci(n),s)for(n=0;n<s.length;n++)ci(s[n])}}function st(n,s){return n(s)}function wt(){}var lt=!1;function sr(n,s,a){if(lt)return n(s,a);lt=!0;try{return st(n,s,a)}finally{lt=!1,(Un!==null||rt!==null)&&(wt(),we())}}function ir(n,s){var a=n.stateNode;if(a===null)return null;var c=ou(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var sn=!1;if(p)try{var $t={};Object.defineProperty($t,"passive",{get:function(){sn=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{sn=!1}function Ol(n,s,a,c,d,m,x,A,k){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(J){this.onError(J)}}var Lr=!1,or=null,Yi=!1,bn=null,Ll={onError:function(n){Lr=!0,or=n}};function Ml(n,s,a,c,d,m,x,A,k){Lr=!1,or=null,Ol.apply(Ll,arguments)}function la(n,s,a,c,d,m,x,A,k){if(Ml.apply(this,arguments),Lr){if(Lr){var z=or;Lr=!1,or=null}else throw Error(t(198));Yi||(Yi=!0,bn=z)}}function zn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ua(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Ul(n){if(zn(n)!==n)throw Error(t(188))}function zl(n){var s=n.alternate;if(!s){if(s=zn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Ul(d),n;if(m===c)return Ul(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var x=!1,A=d.child;A;){if(A===a){x=!0,a=d,c=m;break}if(A===c){x=!0,c=d,a=m;break}A=A.sibling}if(!x){for(A=m.child;A;){if(A===a){x=!0,a=m,c=d;break}if(A===c){x=!0,c=m,a=d;break}A=A.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Bl(n){return n=zl(n),n!==null?hi(n):null}function hi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=hi(n);if(s!==null)return s;n=n.sibling}return null}var ca=e.unstable_scheduleCallback,Ji=e.unstable_cancelCallback,di=e.unstable_shouldYield,Mr=e.unstable_requestPaint,Ze=e.unstable_now,Xc=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,ha=e.unstable_UserBlockingPriority,fi=e.unstable_NormalPriority,da=e.unstable_LowPriority,eo=e.unstable_IdlePriority,pi=null,_n=null;function $l(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(pi,n,void 0,(n.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:mi,ar=Math.log,Nn=Math.LN2;function mi(n){return n>>>=0,n===0?32:31-(ar(n)/Nn|0)|0}var lr=64,ys=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ur(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,x=a&268435455;if(x!==0){var A=x&~d;A!==0?c=$e(A):(m&=x,m!==0&&(c=$e(m)))}else x=a&~d,x!==0?c=$e(x):m!==0&&(c=$e(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-vn(s),d=1<<a,c|=n[a],s&=~d;return c}function gi(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var x=31-vn(m),A=1<<x,k=d[x];k===-1?((A&a)===0||(A&c)!==0)&&(d[x]=gi(A,s)):k<=s&&(n.expiredLanes|=A),m&=~A}}function fa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function pa(){var n=lr;return lr<<=1,(lr&4194240)===0&&(lr=64),n}function ma(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function _i(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-vn(s),n[s]=a}function Yc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-vn(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function ga(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-vn(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Ve=0;function ur(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ya,to,_a,va,wa,cr=!1,no=[],hr=null,dr=null,Vt=null,vi=new Map,zr=new Map,wn=[],ql="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _s(n,s){switch(n){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":vi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(s.pointerId)}}function Bn(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=ja(s),s!==null&&to(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Hl(n,s,a,c,d){switch(s){case"focusin":return hr=Bn(hr,n,s,a,c,d),!0;case"dragenter":return dr=Bn(dr,n,s,a,c,d),!0;case"mouseover":return Vt=Bn(Vt,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return vi.set(m,Bn(vi.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,zr.set(m,Bn(zr.get(m)||null,n,s,a,c,d)),!0}return!1}function ro(n){var s=Ti(n.target);if(s!==null){var a=zn(s);if(a!==null){if(s=a.tag,s===13){if(s=ua(a),s!==null){n.blockedOn=s,wa(n.priority,function(){_a(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ge(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=so(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);rr=c,a.target.dispatchEvent(c),rr=null}else return s=ja(a),s!==null&&to(s),n.blockedOn=a,!1;s.shift()}return!0}function Wl(n,s,a){Ge(n)&&a.delete(s)}function Jc(){cr=!1,hr!==null&&Ge(hr)&&(hr=null),dr!==null&&Ge(dr)&&(dr=null),Vt!==null&&Ge(Vt)&&(Vt=null),vi.forEach(Wl),zr.forEach(Wl)}function vs(n,s){n.blockedOn===s&&(n.blockedOn=null,cr||(cr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jc)))}function ws(n){function s(d){return vs(d,n)}if(0<no.length){vs(no[0],n);for(var a=1;a<no.length;a++){var c=no[a];c.blockedOn===n&&(c.blockedOn=null)}}for(hr!==null&&vs(hr,n),dr!==null&&vs(dr,n),Vt!==null&&vs(Vt,n),vi.forEach(s),zr.forEach(s),a=0;a<wn.length;a++)c=wn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<wn.length&&(a=wn[0],a.blockedOn===null);)ro(a),a.blockedOn===null&&wn.shift()}var Br=q.ReactCurrentBatchConfig,$r=!0;function fr(n,s,a,c){var d=Ve,m=Br.transition;Br.transition=null;try{Ve=1,xa(n,s,a,c)}finally{Ve=d,Br.transition=m}}function Kl(n,s,a,c){var d=Ve,m=Br.transition;Br.transition=null;try{Ve=4,xa(n,s,a,c)}finally{Ve=d,Br.transition=m}}function xa(n,s,a,c){if($r){var d=so(n,s,a,c);if(d===null)uh(n,s,c,pr,a),_s(n,c);else if(Hl(d,n,s,a,c))c.stopPropagation();else if(_s(n,c),s&4&&-1<ql.indexOf(n)){for(;d!==null;){var m=ja(d);if(m!==null&&ya(m),m=so(n,s,a,c),m===null&&uh(n,s,c,pr,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else uh(n,s,c,null,a)}}var pr=null;function so(n,s,a,c){if(pr=null,n=Or(c),n=Ti(n),n!==null)if(s=zn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ua(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return pr=n,null}function io(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xc()){case Zi:return 1;case ha:return 4;case fi:case da:return 16;case eo:return 536870912;default:return 16}default:return 16}}var xn=null,oo=null,qr=null;function Gl(){if(qr)return qr;var n,s=oo,a=s.length,c,d="value"in xn?xn.value:xn.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var x=a-n;for(c=1;c<=x&&s[a-c]===d[m-c];c++);return qr=d.slice(n,1<c?1-c:void 0)}function wi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function mr(){return!0}function Ea(){return!1}function qt(n){function s(a,c,d,m,x){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?mr:Ea,this.isPropagationStopped=Ea,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),s}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=qt(gr),xs=ue({},gr,{view:0,detail:0}),ao=qt(xs),lo,uo,En,Ei=ue({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==En&&(En&&n.type==="mousemove"?(lo=n.screenX-En.screenX,uo=n.screenY-En.screenY):uo=lo=0,En=n),lo)},movementY:function(n){return"movementY"in n?n.movementY:uo}}),Ta=qt(Ei),Ql=ue({},Ei,{dataTransfer:0}),Xl=qt(Ql),co=ue({},xs,{relatedTarget:0}),Ot=qt(co),Yl=ue({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jl=qt(Yl),Es=ue({},gr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=qt(Es),g=ue({},gr,{data:0}),_=qt(g),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function re(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=B[n])?!!s[n]:!1}function Ce(){return re}var yt=ue({},xs,{key:function(n){if(n.key){var s=I[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=wi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?L[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(n){return n.type==="keypress"?wi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?wi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ke=qt(yt),xt=ue({},Ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tn=qt(xt),Hr=ue({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),yr=qt(Hr),_r=ue({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ho=qt(_r),Ia=ue({},Ei,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Jw=qt(Ia),Zw=[9,13,27,32],Zc=p&&"CompositionEvent"in window,Sa=null;p&&"documentMode"in document&&(Sa=document.documentMode);var ex=p&&"TextEvent"in window&&!Sa,Ep=p&&(!Zc||Sa&&8<Sa&&11>=Sa),Tp=" ",Ip=!1;function Sp(n,s){switch(n){case"keyup":return Zw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fo=!1;function tx(n,s){switch(n){case"compositionend":return Ap(s);case"keypress":return s.which!==32?null:(Ip=!0,Tp);case"textInput":return n=s.data,n===Tp&&Ip?null:n;default:return null}}function nx(n,s){if(fo)return n==="compositionend"||!Zc&&Sp(n,s)?(n=Gl(),qr=oo=xn=null,fo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ep&&s.locale!=="ko"?null:s.data;default:return null}}var rx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!rx[n.type]:s==="textarea"}function bp(n,s,a,c){ge(c),s=ru(s,"onChange"),0<s.length&&(a=new xi("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Aa=null,Ca=null;function sx(n){Wp(n,0)}function Zl(n){var s=_o(n);if(ri(s))return n}function ix(n,s){if(n==="change")return s}var Np=!1;if(p){var eh;if(p){var th="oninput"in document;if(!th){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),th=typeof kp.oninput=="function"}eh=th}else eh=!1;Np=eh&&(!document.documentMode||9<document.documentMode)}function Rp(){Aa&&(Aa.detachEvent("onpropertychange",Pp),Ca=Aa=null)}function Pp(n){if(n.propertyName==="value"&&Zl(Ca)){var s=[];bp(s,Ca,n,Or(n)),sr(sx,s)}}function ox(n,s,a){n==="focusin"?(Rp(),Aa=s,Ca=a,Aa.attachEvent("onpropertychange",Pp)):n==="focusout"&&Rp()}function ax(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zl(Ca)}function lx(n,s){if(n==="click")return Zl(s)}function ux(n,s){if(n==="input"||n==="change")return Zl(s)}function cx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var $n=typeof Object.is=="function"?Object.is:cx;function ba(n,s){if($n(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!y.call(s,d)||!$n(n[d],s[d]))return!1}return!0}function Dp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,s){var a=Dp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dp(a)}}function Fp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Fp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Vp(){for(var n=window,s=Ln();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Ln(n.document)}return s}function nh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function hx(n){var s=Vp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Fp(a.ownerDocument.documentElement,a)){if(c!==null&&nh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=jp(a,m);var x=jp(a,c);d&&x&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dx=p&&"documentMode"in document&&11>=document.documentMode,po=null,rh=null,Na=null,sh=!1;function Op(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sh||po==null||po!==Ln(c)||(c=po,"selectionStart"in c&&nh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Na&&ba(Na,c)||(Na=c,c=ru(rh,"onSelect"),0<c.length&&(s=new xi("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=po)))}function eu(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var mo={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},ih={},Lp={};p&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function tu(n){if(ih[n])return ih[n];if(!mo[n])return n;var s=mo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Lp)return ih[n]=s[a];return n}var Mp=tu("animationend"),Up=tu("animationiteration"),zp=tu("animationstart"),Bp=tu("transitionend"),$p=new Map,qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(n,s){$p.set(n,s),l(s,[n])}for(var oh=0;oh<qp.length;oh++){var ah=qp[oh],fx=ah.toLowerCase(),px=ah[0].toUpperCase()+ah.slice(1);Ts(fx,"on"+px)}Ts(Mp,"onAnimationEnd"),Ts(Up,"onAnimationIteration"),Ts(zp,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(Bp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Hp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,la(c,s,void 0,n),n.currentTarget=null}function Wp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var x=c.length-1;0<=x;x--){var A=c[x],k=A.instance,z=A.currentTarget;if(A=A.listener,k!==m&&d.isPropagationStopped())break e;Hp(d,A,z),m=k}else for(x=0;x<c.length;x++){if(A=c[x],k=A.instance,z=A.currentTarget,A=A.listener,k!==m&&d.isPropagationStopped())break e;Hp(d,A,z),m=k}}}if(Yi)throw n=bn,Yi=!1,bn=null,n}function et(n,s){var a=s[mh];a===void 0&&(a=s[mh]=new Set);var c=n+"__bubble";a.has(c)||(Kp(s,n,2,!1),a.add(c))}function lh(n,s,a){var c=0;s&&(c|=4),Kp(a,n,c,s)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Ra(n){if(!n[nu]){n[nu]=!0,i.forEach(function(a){a!=="selectionchange"&&(mx.has(a)||lh(a,!1,n),lh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[nu]||(s[nu]=!0,lh("selectionchange",!1,s))}}function Kp(n,s,a,c){switch(io(s)){case 1:var d=fr;break;case 4:d=Kl;break;default:d=xa}a=d.bind(null,s,a,n),d=void 0,!sn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function uh(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(x===4)for(x=c.return;x!==null;){var k=x.tag;if((k===3||k===4)&&(k=x.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;x=x.return}for(;A!==null;){if(x=Ti(A),x===null)return;if(k=x.tag,k===5||k===6){c=m=x;continue e}A=A.parentNode}}c=c.return}sr(function(){var z=m,J=Or(a),Z=[];e:{var X=$p.get(n);if(X!==void 0){var le=xi,de=n;switch(n){case"keypress":if(wi(a)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":de="focus",le=Ot;break;case"focusout":de="blur",le=Ot;break;case"beforeblur":case"afterblur":le=Ot;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=yr;break;case Mp:case Up:case zp:le=Jl;break;case Bp:le=ho;break;case"scroll":le=ao;break;case"wheel":le=Jw;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Tn}var fe=(s&4)!==0,_t=!fe&&n==="scroll",V=fe?X!==null?X+"Capture":null:X;fe=[];for(var D=z,M;D!==null;){M=D;var te=M.stateNode;if(M.tag===5&&te!==null&&(M=te,V!==null&&(te=ir(D,V),te!=null&&fe.push(Pa(D,te,M)))),_t)break;D=D.return}0<fe.length&&(X=new le(X,de,null,a,J),Z.push({event:X,listeners:fe}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",X&&a!==rr&&(de=a.relatedTarget||a.fromElement)&&(Ti(de)||de[Wr]))break e;if((le||X)&&(X=J.window===J?J:(X=J.ownerDocument)?X.defaultView||X.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=z,de=de?Ti(de):null,de!==null&&(_t=zn(de),de!==_t||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=z),le!==de)){if(fe=Ta,te="onMouseLeave",V="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(fe=Tn,te="onPointerLeave",V="onPointerEnter",D="pointer"),_t=le==null?X:_o(le),M=de==null?X:_o(de),X=new fe(te,D+"leave",le,a,J),X.target=_t,X.relatedTarget=M,te=null,Ti(J)===z&&(fe=new fe(V,D+"enter",de,a,J),fe.target=M,fe.relatedTarget=_t,te=fe),_t=te,le&&de)t:{for(fe=le,V=de,D=0,M=fe;M;M=go(M))D++;for(M=0,te=V;te;te=go(te))M++;for(;0<D-M;)fe=go(fe),D--;for(;0<M-D;)V=go(V),M--;for(;D--;){if(fe===V||V!==null&&fe===V.alternate)break t;fe=go(fe),V=go(V)}fe=null}else fe=null;le!==null&&Gp(Z,X,le,fe,!1),de!==null&&_t!==null&&Gp(Z,_t,de,fe,!0)}}e:{if(X=z?_o(z):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var pe=ix;else if(Cp(X))if(Np)pe=ux;else{pe=ax;var _e=ox}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=lx);if(pe&&(pe=pe(n,z))){bp(Z,pe,a,J);break e}_e&&_e(n,X,z),n==="focusout"&&(_e=X._wrapperState)&&_e.controlled&&X.type==="number"&&at(X,"number",X.value)}switch(_e=z?_o(z):window,n){case"focusin":(Cp(_e)||_e.contentEditable==="true")&&(po=_e,rh=z,Na=null);break;case"focusout":Na=rh=po=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,Op(Z,a,J);break;case"selectionchange":if(dx)break;case"keydown":case"keyup":Op(Z,a,J)}var ve;if(Zc)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else fo?Sp(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ep&&a.locale!=="ko"&&(fo||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&fo&&(ve=Gl()):(xn=J,oo="value"in xn?xn.value:xn.textContent,fo=!0)),_e=ru(z,Ee),0<_e.length&&(Ee=new _(Ee,n,null,a,J),Z.push({event:Ee,listeners:_e}),ve?Ee.data=ve:(ve=Ap(a),ve!==null&&(Ee.data=ve)))),(ve=ex?tx(n,a):nx(n,a))&&(z=ru(z,"onBeforeInput"),0<z.length&&(J=new _("onBeforeInput","beforeinput",null,a,J),Z.push({event:J,listeners:z}),J.data=ve))}Wp(Z,s)})}function Pa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ru(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ir(n,a),m!=null&&c.unshift(Pa(n,m,d)),m=ir(n,s),m!=null&&c.push(Pa(n,m,d))),n=n.return}return c}function go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gp(n,s,a,c,d){for(var m=s._reactName,x=[];a!==null&&a!==c;){var A=a,k=A.alternate,z=A.stateNode;if(k!==null&&k===c)break;A.tag===5&&z!==null&&(A=z,d?(k=ir(a,m),k!=null&&x.unshift(Pa(a,k,A))):d||(k=ir(a,m),k!=null&&x.push(Pa(a,k,A)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var gx=/\r\n?/g,yx=/\u0000|\uFFFD/g;function Qp(n){return(typeof n=="string"?n:""+n).replace(gx,`
`).replace(yx,"")}function su(n,s,a){if(s=Qp(s),Qp(n)!==s&&a)throw Error(t(425))}function iu(){}var ch=null,hh=null;function dh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,_x=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,vx=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp<"u"?function(n){return Xp.resolve(null).then(n).catch(wx)}:fh;function wx(n){setTimeout(function(){throw n})}function ph(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ws(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ws(s)}function Is(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Yp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var yo=Math.random().toString(36).slice(2),vr="__reactFiber$"+yo,Da="__reactProps$"+yo,Wr="__reactContainer$"+yo,mh="__reactEvents$"+yo,xx="__reactListeners$"+yo,Ex="__reactHandles$"+yo;function Ti(n){var s=n[vr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Wr]||a[vr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Yp(n);n!==null;){if(a=n[vr])return a;n=Yp(n)}return s}n=a,a=n.parentNode}return null}function ja(n){return n=n[vr]||n[Wr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function _o(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ou(n){return n[Da]||null}var gh=[],vo=-1;function Ss(n){return{current:n}}function tt(n){0>vo||(n.current=gh[vo],gh[vo]=null,vo--)}function Ye(n,s){vo++,gh[vo]=n.current,n.current=s}var As={},Ht=Ss(As),on=Ss(!1),Ii=As;function wo(n,s){var a=n.type.contextTypes;if(!a)return As;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function an(n){return n=n.childContextTypes,n!=null}function au(){tt(on),tt(Ht)}function Jp(n,s,a){if(Ht.current!==As)throw Error(t(168));Ye(Ht,s),Ye(on,a)}function Zp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Le(n)||"Unknown",d));return ue({},a,c)}function lu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||As,Ii=Ht.current,Ye(Ht,n),Ye(on,on.current),!0}function em(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Zp(n,s,Ii),c.__reactInternalMemoizedMergedChildContext=n,tt(on),tt(Ht),Ye(Ht,n)):tt(on),Ye(on,a)}var Kr=null,uu=!1,yh=!1;function tm(n){Kr===null?Kr=[n]:Kr.push(n)}function Tx(n){uu=!0,tm(n)}function Cs(){if(!yh&&Kr!==null){yh=!0;var n=0,s=Ve;try{var a=Kr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Kr=null,uu=!1}catch(d){throw Kr!==null&&(Kr=Kr.slice(n+1)),ca(Zi,Cs),d}finally{Ve=s,yh=!1}}return null}var xo=[],Eo=0,cu=null,hu=0,kn=[],Rn=0,Si=null,Gr=1,Qr="";function Ai(n,s){xo[Eo++]=hu,xo[Eo++]=cu,cu=n,hu=s}function nm(n,s,a){kn[Rn++]=Gr,kn[Rn++]=Qr,kn[Rn++]=Si,Si=n;var c=Gr;n=Qr;var d=32-vn(c)-1;c&=~(1<<d),a+=1;var m=32-vn(s)+d;if(30<m){var x=d-d%5;m=(c&(1<<x)-1).toString(32),c>>=x,d-=x,Gr=1<<32-vn(s)+d|a<<d|c,Qr=m+n}else Gr=1<<m|a<<d|c,Qr=n}function _h(n){n.return!==null&&(Ai(n,1),nm(n,1,0))}function vh(n){for(;n===cu;)cu=xo[--Eo],xo[Eo]=null,hu=xo[--Eo],xo[Eo]=null;for(;n===Si;)Si=kn[--Rn],kn[Rn]=null,Qr=kn[--Rn],kn[Rn]=null,Gr=kn[--Rn],kn[Rn]=null}var In=null,Sn=null,it=!1,qn=null;function rm(n,s){var a=Fn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function sm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,In=n,Sn=Is(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,In=n,Sn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Si!==null?{id:Gr,overflow:Qr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Fn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,In=n,Sn=null,!0):!1;default:return!1}}function wh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xh(n){if(it){var s=Sn;if(s){var a=s;if(!sm(n,s)){if(wh(n))throw Error(t(418));s=Is(a.nextSibling);var c=In;s&&sm(n,s)?rm(c,a):(n.flags=n.flags&-4097|2,it=!1,In=n)}}else{if(wh(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,In=n}}}function im(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;In=n}function du(n){if(n!==In)return!1;if(!it)return im(n),it=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!dh(n.type,n.memoizedProps)),s&&(s=Sn)){if(wh(n))throw om(),Error(t(418));for(;s;)rm(n,s),s=Is(s.nextSibling)}if(im(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Sn=Is(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Sn=null}}else Sn=In?Is(n.stateNode.nextSibling):null;return!0}function om(){for(var n=Sn;n;)n=Is(n.nextSibling)}function To(){Sn=In=null,it=!1}function Eh(n){qn===null?qn=[n]:qn.push(n)}var Ix=q.ReactCurrentBatchConfig;function Fa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(x){var A=d.refs;x===null?delete A[m]:A[m]=x},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function fu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function am(n){var s=n._init;return s(n._payload)}function lm(n){function s(V,D){if(n){var M=V.deletions;M===null?(V.deletions=[D],V.flags|=16):M.push(D)}}function a(V,D){if(!n)return null;for(;D!==null;)s(V,D),D=D.sibling;return null}function c(V,D){for(V=new Map;D!==null;)D.key!==null?V.set(D.key,D):V.set(D.index,D),D=D.sibling;return V}function d(V,D){return V=Fs(V,D),V.index=0,V.sibling=null,V}function m(V,D,M){return V.index=M,n?(M=V.alternate,M!==null?(M=M.index,M<D?(V.flags|=2,D):M):(V.flags|=2,D)):(V.flags|=1048576,D)}function x(V){return n&&V.alternate===null&&(V.flags|=2),V}function A(V,D,M,te){return D===null||D.tag!==6?(D=fd(M,V.mode,te),D.return=V,D):(D=d(D,M),D.return=V,D)}function k(V,D,M,te){var pe=M.type;return pe===C?J(V,D,M.props.children,te,M.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ot&&am(pe)===D.type)?(te=d(D,M.props),te.ref=Fa(V,D,M),te.return=V,te):(te=Ou(M.type,M.key,M.props,null,V.mode,te),te.ref=Fa(V,D,M),te.return=V,te)}function z(V,D,M,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==M.containerInfo||D.stateNode.implementation!==M.implementation?(D=pd(M,V.mode,te),D.return=V,D):(D=d(D,M.children||[]),D.return=V,D)}function J(V,D,M,te,pe){return D===null||D.tag!==7?(D=ji(M,V.mode,te,pe),D.return=V,D):(D=d(D,M),D.return=V,D)}function Z(V,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return D=fd(""+D,V.mode,M),D.return=V,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case se:return M=Ou(D.type,D.key,D.props,null,V.mode,M),M.ref=Fa(V,null,D),M.return=V,M;case oe:return D=pd(D,V.mode,M),D.return=V,D;case ot:var te=D._init;return Z(V,te(D._payload),M)}if(Xe(D)||me(D))return D=ji(D,V.mode,M,null),D.return=V,D;fu(V,D)}return null}function X(V,D,M,te){var pe=D!==null?D.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return pe!==null?null:A(V,D,""+M,te);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case se:return M.key===pe?k(V,D,M,te):null;case oe:return M.key===pe?z(V,D,M,te):null;case ot:return pe=M._init,X(V,D,pe(M._payload),te)}if(Xe(M)||me(M))return pe!==null?null:J(V,D,M,te,null);fu(V,M)}return null}function le(V,D,M,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return V=V.get(M)||null,A(D,V,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case se:return V=V.get(te.key===null?M:te.key)||null,k(D,V,te,pe);case oe:return V=V.get(te.key===null?M:te.key)||null,z(D,V,te,pe);case ot:var _e=te._init;return le(V,D,M,_e(te._payload),pe)}if(Xe(te)||me(te))return V=V.get(M)||null,J(D,V,te,pe,null);fu(D,te)}return null}function de(V,D,M,te){for(var pe=null,_e=null,ve=D,Ee=D=0,jt=null;ve!==null&&Ee<M.length;Ee++){ve.index>Ee?(jt=ve,ve=null):jt=ve.sibling;var ze=X(V,ve,M[Ee],te);if(ze===null){ve===null&&(ve=jt);break}n&&ve&&ze.alternate===null&&s(V,ve),D=m(ze,D,Ee),_e===null?pe=ze:_e.sibling=ze,_e=ze,ve=jt}if(Ee===M.length)return a(V,ve),it&&Ai(V,Ee),pe;if(ve===null){for(;Ee<M.length;Ee++)ve=Z(V,M[Ee],te),ve!==null&&(D=m(ve,D,Ee),_e===null?pe=ve:_e.sibling=ve,_e=ve);return it&&Ai(V,Ee),pe}for(ve=c(V,ve);Ee<M.length;Ee++)jt=le(ve,V,Ee,M[Ee],te),jt!==null&&(n&&jt.alternate!==null&&ve.delete(jt.key===null?Ee:jt.key),D=m(jt,D,Ee),_e===null?pe=jt:_e.sibling=jt,_e=jt);return n&&ve.forEach(function(Vs){return s(V,Vs)}),it&&Ai(V,Ee),pe}function fe(V,D,M,te){var pe=me(M);if(typeof pe!="function")throw Error(t(150));if(M=pe.call(M),M==null)throw Error(t(151));for(var _e=pe=null,ve=D,Ee=D=0,jt=null,ze=M.next();ve!==null&&!ze.done;Ee++,ze=M.next()){ve.index>Ee?(jt=ve,ve=null):jt=ve.sibling;var Vs=X(V,ve,ze.value,te);if(Vs===null){ve===null&&(ve=jt);break}n&&ve&&Vs.alternate===null&&s(V,ve),D=m(Vs,D,Ee),_e===null?pe=Vs:_e.sibling=Vs,_e=Vs,ve=jt}if(ze.done)return a(V,ve),it&&Ai(V,Ee),pe;if(ve===null){for(;!ze.done;Ee++,ze=M.next())ze=Z(V,ze.value,te),ze!==null&&(D=m(ze,D,Ee),_e===null?pe=ze:_e.sibling=ze,_e=ze);return it&&Ai(V,Ee),pe}for(ve=c(V,ve);!ze.done;Ee++,ze=M.next())ze=le(ve,V,Ee,ze.value,te),ze!==null&&(n&&ze.alternate!==null&&ve.delete(ze.key===null?Ee:ze.key),D=m(ze,D,Ee),_e===null?pe=ze:_e.sibling=ze,_e=ze);return n&&ve.forEach(function(r0){return s(V,r0)}),it&&Ai(V,Ee),pe}function _t(V,D,M,te){if(typeof M=="object"&&M!==null&&M.type===C&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case se:e:{for(var pe=M.key,_e=D;_e!==null;){if(_e.key===pe){if(pe=M.type,pe===C){if(_e.tag===7){a(V,_e.sibling),D=d(_e,M.props.children),D.return=V,V=D;break e}}else if(_e.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ot&&am(pe)===_e.type){a(V,_e.sibling),D=d(_e,M.props),D.ref=Fa(V,_e,M),D.return=V,V=D;break e}a(V,_e);break}else s(V,_e);_e=_e.sibling}M.type===C?(D=ji(M.props.children,V.mode,te,M.key),D.return=V,V=D):(te=Ou(M.type,M.key,M.props,null,V.mode,te),te.ref=Fa(V,D,M),te.return=V,V=te)}return x(V);case oe:e:{for(_e=M.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===M.containerInfo&&D.stateNode.implementation===M.implementation){a(V,D.sibling),D=d(D,M.children||[]),D.return=V,V=D;break e}else{a(V,D);break}else s(V,D);D=D.sibling}D=pd(M,V.mode,te),D.return=V,V=D}return x(V);case ot:return _e=M._init,_t(V,D,_e(M._payload),te)}if(Xe(M))return de(V,D,M,te);if(me(M))return fe(V,D,M,te);fu(V,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,D!==null&&D.tag===6?(a(V,D.sibling),D=d(D,M),D.return=V,V=D):(a(V,D),D=fd(M,V.mode,te),D.return=V,V=D),x(V)):a(V,D)}return _t}var Io=lm(!0),um=lm(!1),pu=Ss(null),mu=null,So=null,Th=null;function Ih(){Th=So=mu=null}function Sh(n){var s=pu.current;tt(pu),n._currentValue=s}function Ah(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Ao(n,s){mu=n,Th=So=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(ln=!0),n.firstContext=null)}function Pn(n){var s=n._currentValue;if(Th!==n)if(n={context:n,memoizedValue:s,next:null},So===null){if(mu===null)throw Error(t(308));So=n,mu.dependencies={lanes:0,firstContext:n}}else So=So.next=n;return s}var Ci=null;function Ch(n){Ci===null?Ci=[n]:Ci.push(n)}function cm(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Ch(s)):(a.next=d.next,d.next=a),s.interleaved=a,Xr(n,c)}function Xr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var bs=!1;function bh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Yr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ns(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Me&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Xr(n,a)}return d=c.interleaved,d===null?(s.next=s,Ch(c)):(s.next=d.next,d.next=s),c.interleaved=s,Xr(n,a)}function gu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ga(n,a)}}function dm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function yu(n,s,a,c){var d=n.updateQueue;bs=!1;var m=d.firstBaseUpdate,x=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var k=A,z=k.next;k.next=null,x===null?m=z:x.next=z,x=k;var J=n.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==x&&(A===null?J.firstBaseUpdate=z:A.next=z,J.lastBaseUpdate=k))}if(m!==null){var Z=d.baseState;x=0,J=z=k=null,A=m;do{var X=A.lane,le=A.eventTime;if((c&X)===X){J!==null&&(J=J.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=n,fe=A;switch(X=s,le=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){Z=de.call(le,Z,X);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,X=typeof de=="function"?de.call(le,Z,X):de,X==null)break e;Z=ue({},Z,X);break e;case 2:bs=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[A]:X.push(A))}else le={eventTime:le,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(z=J=le,k=Z):J=J.next=le,x|=X;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;X=A,A=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(J===null&&(k=Z),d.baseState=k,d.firstBaseUpdate=z,d.lastBaseUpdate=J,s=d.shared.interleaved,s!==null){d=s;do x|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);ki|=x,n.lanes=x,n.memoizedState=Z}}function fm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Va={},wr=Ss(Va),Oa=Ss(Va),La=Ss(Va);function bi(n){if(n===Va)throw Error(t(174));return n}function Nh(n,s){switch(Ye(La,s),Ye(Oa,n),Ye(wr,Va),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:jr(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=jr(s,n)}tt(wr),Ye(wr,s)}function Co(){tt(wr),tt(Oa),tt(La)}function pm(n){bi(La.current);var s=bi(wr.current),a=jr(s,n.type);s!==a&&(Ye(Oa,n),Ye(wr,a))}function kh(n){Oa.current===n&&(tt(wr),tt(Oa))}var ut=Ss(0);function _u(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Rh=[];function Ph(){for(var n=0;n<Rh.length;n++)Rh[n]._workInProgressVersionPrimary=null;Rh.length=0}var vu=q.ReactCurrentDispatcher,Dh=q.ReactCurrentBatchConfig,Ni=0,ct=null,Nt=null,Pt=null,wu=!1,Ma=!1,Ua=0,Sx=0;function Wt(){throw Error(t(321))}function jh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!$n(n[a],s[a]))return!1;return!0}function Fh(n,s,a,c,d,m){if(Ni=m,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,vu.current=n===null||n.memoizedState===null?Nx:kx,n=a(c,d),Ma){m=0;do{if(Ma=!1,Ua=0,25<=m)throw Error(t(301));m+=1,Pt=Nt=null,s.updateQueue=null,vu.current=Rx,n=a(c,d)}while(Ma)}if(vu.current=Tu,s=Nt!==null&&Nt.next!==null,Ni=0,Pt=Nt=ct=null,wu=!1,s)throw Error(t(300));return n}function Vh(){var n=Ua!==0;return Ua=0,n}function xr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ct.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Dn(){if(Nt===null){var n=ct.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var s=Pt===null?ct.memoizedState:Pt.next;if(s!==null)Pt=s,Nt=n;else{if(n===null)throw Error(t(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Pt===null?ct.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function za(n,s){return typeof s=="function"?s(n):s}function Oh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Nt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var x=d.next;d.next=m.next,m.next=x}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var A=x=null,k=null,z=m;do{var J=z.lane;if((Ni&J)===J)k!==null&&(k=k.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var Z={lane:J,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};k===null?(A=k=Z,x=c):k=k.next=Z,ct.lanes|=J,ki|=J}z=z.next}while(z!==null&&z!==m);k===null?x=c:k.next=A,$n(c,s.memoizedState)||(ln=!0),s.memoizedState=c,s.baseState=x,s.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,ct.lanes|=m,ki|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Lh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do m=n(m,x.action),x=x.next;while(x!==d);$n(m,s.memoizedState)||(ln=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function mm(){}function gm(n,s){var a=ct,c=Dn(),d=s(),m=!$n(c.memoizedState,d);if(m&&(c.memoizedState=d,ln=!0),c=c.queue,Mh(vm.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||Pt!==null&&Pt.memoizedState.tag&1){if(a.flags|=2048,Ba(9,_m.bind(null,a,c,d,s),void 0,null),Dt===null)throw Error(t(349));(Ni&30)!==0||ym(a,s,d)}return d}function ym(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function _m(n,s,a,c){s.value=a,s.getSnapshot=c,wm(s)&&xm(n)}function vm(n,s,a){return a(function(){wm(s)&&xm(n)})}function wm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!$n(n,a)}catch{return!0}}function xm(n){var s=Xr(n,1);s!==null&&Gn(s,n,1,-1)}function Em(n){var s=xr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:n},s.queue=n,n=n.dispatch=bx.bind(null,ct,n),[s.memoizedState,n]}function Ba(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Tm(){return Dn().memoizedState}function xu(n,s,a,c){var d=xr();ct.flags|=n,d.memoizedState=Ba(1|s,a,void 0,c===void 0?null:c)}function Eu(n,s,a,c){var d=Dn();c=c===void 0?null:c;var m=void 0;if(Nt!==null){var x=Nt.memoizedState;if(m=x.destroy,c!==null&&jh(c,x.deps)){d.memoizedState=Ba(s,a,m,c);return}}ct.flags|=n,d.memoizedState=Ba(1|s,a,m,c)}function Im(n,s){return xu(8390656,8,n,s)}function Mh(n,s){return Eu(2048,8,n,s)}function Sm(n,s){return Eu(4,2,n,s)}function Am(n,s){return Eu(4,4,n,s)}function Cm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function bm(n,s,a){return a=a!=null?a.concat([n]):null,Eu(4,4,Cm.bind(null,s,n),a)}function Uh(){}function Nm(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&jh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function km(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&jh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Rm(n,s,a){return(Ni&21)===0?(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=a):($n(a,s)||(a=pa(),ct.lanes|=a,ki|=a,n.baseState=!0),s)}function Ax(n,s){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=Dh.transition;Dh.transition={};try{n(!1),s()}finally{Ve=a,Dh.transition=c}}function Pm(){return Dn().memoizedState}function Cx(n,s,a){var c=Ds(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Dm(n))jm(s,a);else if(a=cm(n,s,a,c),a!==null){var d=tn();Gn(a,n,c,d),Fm(a,s,c)}}function bx(n,s,a){var c=Ds(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dm(n))jm(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var x=s.lastRenderedState,A=m(x,a);if(d.hasEagerState=!0,d.eagerState=A,$n(A,x)){var k=s.interleaved;k===null?(d.next=d,Ch(s)):(d.next=k.next,k.next=d),s.interleaved=d;return}}catch{}finally{}a=cm(n,s,d,c),a!==null&&(d=tn(),Gn(a,n,c,d),Fm(a,s,c))}}function Dm(n){var s=n.alternate;return n===ct||s!==null&&s===ct}function jm(n,s){Ma=wu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Fm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ga(n,a)}}var Tu={readContext:Pn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},Nx={readContext:Pn,useCallback:function(n,s){return xr().memoizedState=[n,s===void 0?null:s],n},useContext:Pn,useEffect:Im,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,xu(4194308,4,Cm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return xu(4194308,4,n,s)},useInsertionEffect:function(n,s){return xu(4,2,n,s)},useMemo:function(n,s){var a=xr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=xr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Cx.bind(null,ct,n),[c.memoizedState,n]},useRef:function(n){var s=xr();return n={current:n},s.memoizedState=n},useState:Em,useDebugValue:Uh,useDeferredValue:function(n){return xr().memoizedState=n},useTransition:function(){var n=Em(!1),s=n[0];return n=Ax.bind(null,n[1]),xr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=ct,d=xr();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Dt===null)throw Error(t(349));(Ni&30)!==0||ym(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Im(vm.bind(null,c,m,n),[n]),c.flags|=2048,Ba(9,_m.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=xr(),s=Dt.identifierPrefix;if(it){var a=Qr,c=Gr;a=(c&~(1<<32-vn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Sx++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},kx={readContext:Pn,useCallback:Nm,useContext:Pn,useEffect:Mh,useImperativeHandle:bm,useInsertionEffect:Sm,useLayoutEffect:Am,useMemo:km,useReducer:Oh,useRef:Tm,useState:function(){return Oh(za)},useDebugValue:Uh,useDeferredValue:function(n){var s=Dn();return Rm(s,Nt.memoizedState,n)},useTransition:function(){var n=Oh(za)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:mm,useSyncExternalStore:gm,useId:Pm,unstable_isNewReconciler:!1},Rx={readContext:Pn,useCallback:Nm,useContext:Pn,useEffect:Mh,useImperativeHandle:bm,useInsertionEffect:Sm,useLayoutEffect:Am,useMemo:km,useReducer:Lh,useRef:Tm,useState:function(){return Lh(za)},useDebugValue:Uh,useDeferredValue:function(n){var s=Dn();return Nt===null?s.memoizedState=n:Rm(s,Nt.memoizedState,n)},useTransition:function(){var n=Lh(za)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:mm,useSyncExternalStore:gm,useId:Pm,unstable_isNewReconciler:!1};function Hn(n,s){if(n&&n.defaultProps){s=ue({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function zh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ue({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Iu={isMounted:function(n){return(n=n._reactInternals)?zn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=tn(),d=Ds(n),m=Yr(c,d);m.payload=s,a!=null&&(m.callback=a),s=Ns(n,m,d),s!==null&&(Gn(s,n,d,c),gu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=tn(),d=Ds(n),m=Yr(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Ns(n,m,d),s!==null&&(Gn(s,n,d,c),gu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=tn(),c=Ds(n),d=Yr(a,c);d.tag=2,s!=null&&(d.callback=s),s=Ns(n,d,c),s!==null&&(Gn(s,n,c,a),gu(s,n,c))}};function Vm(n,s,a,c,d,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):s.prototype&&s.prototype.isPureReactComponent?!ba(a,c)||!ba(d,m):!0}function Om(n,s,a){var c=!1,d=As,m=s.contextType;return typeof m=="object"&&m!==null?m=Pn(m):(d=an(s)?Ii:Ht.current,c=s.contextTypes,m=(c=c!=null)?wo(n,d):As),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Iu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function Lm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Iu.enqueueReplaceState(s,s.state,null)}function Bh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},bh(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=Pn(m):(m=an(s)?Ii:Ht.current,d.context=wo(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(zh(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Iu.enqueueReplaceState(d,d.state,null),yu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function bo(n,s){try{var a="",c=s;do a+=Ne(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function $h(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function qh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Px=typeof WeakMap=="function"?WeakMap:Map;function Mm(n,s,a){a=Yr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Ru||(Ru=!0,id=c),qh(n,s)},a}function Um(n,s,a){a=Yr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){qh(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){qh(n,s),typeof c!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function zm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Px;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=Wx.bind(null,n,s,a),s.then(n,n))}function Bm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function $m(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Yr(-1,1),s.tag=2,Ns(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Dx=q.ReactCurrentOwner,ln=!1;function en(n,s,a,c){s.child=n===null?um(s,null,a,c):Io(s,n.child,a,c)}function qm(n,s,a,c,d){a=a.render;var m=s.ref;return Ao(s,d),c=Fh(n,s,a,c,m,d),a=Vh(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Jr(n,s,d)):(it&&a&&_h(s),s.flags|=1,en(n,s,c,d),s.child)}function Hm(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!dd(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Wm(n,s,m,c,d)):(n=Ou(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(x,c)&&n.ref===s.ref)return Jr(n,s,d)}return s.flags|=1,n=Fs(m,c),n.ref=s.ref,n.return=s,s.child=n}function Wm(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(ba(m,c)&&n.ref===s.ref)if(ln=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(ln=!0);else return s.lanes=n.lanes,Jr(n,s,d)}return Hh(n,s,a,c,d)}function Km(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ko,An),An|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ye(ko,An),An|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Ye(ko,An),An|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,Ye(ko,An),An|=c;return en(n,s,d,a),s.child}function Gm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Hh(n,s,a,c,d){var m=an(a)?Ii:Ht.current;return m=wo(s,m),Ao(s,d),a=Fh(n,s,a,c,m,d),c=Vh(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Jr(n,s,d)):(it&&c&&_h(s),s.flags|=1,en(n,s,a,d),s.child)}function Qm(n,s,a,c,d){if(an(a)){var m=!0;lu(s)}else m=!1;if(Ao(s,d),s.stateNode===null)Au(n,s),Om(s,a,c),Bh(s,a,c,d),c=!0;else if(n===null){var x=s.stateNode,A=s.memoizedProps;x.props=A;var k=x.context,z=a.contextType;typeof z=="object"&&z!==null?z=Pn(z):(z=an(a)?Ii:Ht.current,z=wo(s,z));var J=a.getDerivedStateFromProps,Z=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function";Z||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==c||k!==z)&&Lm(s,x,c,z),bs=!1;var X=s.memoizedState;x.state=X,yu(s,c,x,d),k=s.memoizedState,A!==c||X!==k||on.current||bs?(typeof J=="function"&&(zh(s,a,J,c),k=s.memoizedState),(A=bs||Vm(s,a,A,c,X,k,z))?(Z||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=k),x.props=c,x.state=k,x.context=z,c=A):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{x=s.stateNode,hm(n,s),A=s.memoizedProps,z=s.type===s.elementType?A:Hn(s.type,A),x.props=z,Z=s.pendingProps,X=x.context,k=a.contextType,typeof k=="object"&&k!==null?k=Pn(k):(k=an(a)?Ii:Ht.current,k=wo(s,k));var le=a.getDerivedStateFromProps;(J=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==Z||X!==k)&&Lm(s,x,c,k),bs=!1,X=s.memoizedState,x.state=X,yu(s,c,x,d);var de=s.memoizedState;A!==Z||X!==de||on.current||bs?(typeof le=="function"&&(zh(s,a,le,c),de=s.memoizedState),(z=bs||Vm(s,a,z,c,X,de,k)||!1)?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,de,k),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,de,k)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=de),x.props=c,x.state=de,x.context=k,c=z):(typeof x.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),c=!1)}return Wh(n,s,a,c,m,d)}function Wh(n,s,a,c,d,m){Gm(n,s);var x=(s.flags&128)!==0;if(!c&&!x)return d&&em(s,a,!1),Jr(n,s,m);c=s.stateNode,Dx.current=s;var A=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&x?(s.child=Io(s,n.child,null,m),s.child=Io(s,null,A,m)):en(n,s,A,m),s.memoizedState=c.state,d&&em(s,a,!0),s.child}function Xm(n){var s=n.stateNode;s.pendingContext?Jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Jp(n,s.context,!1),Nh(n,s.containerInfo)}function Ym(n,s,a,c,d){return To(),Eh(d),s.flags|=256,en(n,s,a,c),s.child}var Kh={dehydrated:null,treeContext:null,retryLane:0};function Gh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jm(n,s,a){var c=s.pendingProps,d=ut.current,m=!1,x=(s.flags&128)!==0,A;if((A=x)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(ut,d&1),n===null)return xh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=c.children,n=c.fallback,m?(c=s.mode,m=s.child,x={mode:"hidden",children:x},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=x):m=Lu(x,c,0,null),n=ji(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Gh(a),s.memoizedState=Kh,n):Qh(s,x));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return jx(n,s,x,c,A,d,a);if(m){m=c.fallback,x=s.mode,d=n.child,A=d.sibling;var k={mode:"hidden",children:c.children};return(x&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=k,s.deletions=null):(c=Fs(d,k),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?m=Fs(A,m):(m=ji(m,x,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,x=n.child.memoizedState,x=x===null?Gh(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=n.childLanes&~a,s.memoizedState=Kh,c}return m=n.child,n=m.sibling,c=Fs(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Qh(n,s){return s=Lu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Su(n,s,a,c){return c!==null&&Eh(c),Io(s,n.child,null,a),n=Qh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function jx(n,s,a,c,d,m,x){if(a)return s.flags&256?(s.flags&=-257,c=$h(Error(t(422))),Su(n,s,x,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=Lu({mode:"visible",children:c.children},d,0,null),m=ji(m,d,x,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&Io(s,n.child,null,x),s.child.memoizedState=Gh(x),s.memoizedState=Kh,m);if((s.mode&1)===0)return Su(n,s,x,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,m=Error(t(419)),c=$h(m,c,void 0),Su(n,s,x,c)}if(A=(x&n.childLanes)!==0,ln||A){if(c=Dt,c!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|x))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Xr(n,d),Gn(c,n,d,-1))}return hd(),c=$h(Error(t(421))),Su(n,s,x,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=Kx.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,Sn=Is(d.nextSibling),In=s,it=!0,qn=null,n!==null&&(kn[Rn++]=Gr,kn[Rn++]=Qr,kn[Rn++]=Si,Gr=n.id,Qr=n.overflow,Si=s),s=Qh(s,c.children),s.flags|=4096,s)}function Zm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ah(n.return,s,a)}function Xh(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function eg(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(en(n,s,c.children,a),c=ut.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zm(n,a,s);else if(n.tag===19)Zm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(ut,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&_u(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Xh(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&_u(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Xh(s,!0,a,null,m);break;case"together":Xh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Au(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Jr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ki|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Fs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Fs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Fx(n,s,a){switch(s.tag){case 3:Xm(s),To();break;case 5:pm(s);break;case 1:an(s.type)&&lu(s);break;case 4:Nh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ye(pu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ye(ut,ut.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Jm(n,s,a):(Ye(ut,ut.current&1),n=Jr(n,s,a),n!==null?n.sibling:null);Ye(ut,ut.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return eg(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(ut,ut.current),c)break;return null;case 22:case 23:return s.lanes=0,Km(n,s,a)}return Jr(n,s,a)}var tg,Yh,ng,rg;tg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Yh=function(){},ng=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,bi(wr.current);var m=null;switch(a){case"input":d=fs(n,d),c=fs(n,c),m=[];break;case"select":d=ue({},d,{value:void 0}),c=ue({},c,{value:void 0}),m=[];break;case"textarea":d=oi(n,d),c=oi(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=iu)}yn(a,c);var x;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var A=d[z];for(x in A)A.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?m||(m=[]):(m=m||[]).push(z,null));for(z in c){var k=c[z];if(A=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&k!==A&&(k!=null||A!=null))if(z==="style")if(A){for(x in A)!A.hasOwnProperty(x)||k&&k.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in k)k.hasOwnProperty(x)&&A[x]!==k[x]&&(a||(a={}),a[x]=k[x])}else a||(m||(m=[]),m.push(z,a)),a=k;else z==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(m=m||[]).push(z,k)):z==="children"?typeof k!="string"&&typeof k!="number"||(m=m||[]).push(z,""+k):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(k!=null&&z==="onScroll"&&et("scroll",n),m||A===k||(m=[])):(m=m||[]).push(z,k))}a&&(m=m||[]).push("style",a);var z=m;(s.updateQueue=z)&&(s.flags|=4)}},rg=function(n,s,a,c){a!==c&&(s.flags|=4)};function $a(n,s){if(!it)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Vx(n,s,a){var c=s.pendingProps;switch(vh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(s),null;case 1:return an(s.type)&&au(),Kt(s),null;case 3:return c=s.stateNode,Co(),tt(on),tt(Ht),Ph(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(du(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,qn!==null&&(ld(qn),qn=null))),Yh(n,s),Kt(s),null;case 5:kh(s);var d=bi(La.current);if(a=s.type,n!==null&&s.stateNode!=null)ng(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Kt(s),null}if(n=bi(wr.current),du(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[vr]=s,c[Da]=m,n=(s.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<ka.length;d++)et(ka[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":si(c,m),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},et("invalid",c);break;case"textarea":ms(c,m),et("invalid",c)}yn(a,m),d=null;for(var x in m)if(m.hasOwnProperty(x)){var A=m[x];x==="children"?typeof A=="string"?c.textContent!==A&&(m.suppressHydrationWarning!==!0&&su(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&su(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(x)&&A!=null&&x==="onScroll"&&et("scroll",c)}switch(a){case"input":ds(c),ii(c,m,!0);break;case"textarea":ds(c),er(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=iu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ai(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=x.createElement(a,{is:c.is}):(n=x.createElement(a),a==="select"&&(x=n,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):n=x.createElementNS(n,a),n[vr]=s,n[Da]=c,tg(n,s,!1,!1),s.stateNode=n;e:{switch(x=gs(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<ka.length;d++)et(ka[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":si(n,c),d=fs(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ue({},c,{value:void 0}),et("invalid",n);break;case"textarea":ms(n,c),d=oi(n,c),et("invalid",n);break;default:d=c}yn(a,d),A=d;for(m in A)if(A.hasOwnProperty(m)){var k=A[m];m==="style"?Vr(n,k):m==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&li(n,k)):m==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&Fr(n,k):typeof k=="number"&&Fr(n,""+k):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?k!=null&&m==="onScroll"&&et("scroll",n):k!=null&&ee(n,m,k,x))}switch(a){case"input":ds(n),ii(n,c,!1);break;case"textarea":ds(n),er(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?mn(n,!!c.multiple,m,!1):c.defaultValue!=null&&mn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=iu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kt(s),null;case 6:if(n&&s.stateNode!=null)rg(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=bi(La.current),bi(wr.current),du(s)){if(c=s.stateNode,a=s.memoizedProps,c[vr]=s,(m=c.nodeValue!==a)&&(n=In,n!==null))switch(n.tag){case 3:su(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&su(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[vr]=s,s.stateNode=c}return Kt(s),null;case 13:if(tt(ut),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&Sn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)om(),To(),s.flags|=98560,m=!1;else if(m=du(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[vr]=s}else To(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kt(s),m=!1}else qn!==null&&(ld(qn),qn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ut.current&1)!==0?kt===0&&(kt=3):hd())),s.updateQueue!==null&&(s.flags|=4),Kt(s),null);case 4:return Co(),Yh(n,s),n===null&&Ra(s.stateNode.containerInfo),Kt(s),null;case 10:return Sh(s.type._context),Kt(s),null;case 17:return an(s.type)&&au(),Kt(s),null;case 19:if(tt(ut),m=s.memoizedState,m===null)return Kt(s),null;if(c=(s.flags&128)!==0,x=m.rendering,x===null)if(c)$a(m,!1);else{if(kt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=_u(n),x!==null){for(s.flags|=128,$a(m,!1),c=x.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,n=x.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(ut,ut.current&1|2),s.child}n=n.sibling}m.tail!==null&&Ze()>Ro&&(s.flags|=128,c=!0,$a(m,!1),s.lanes=4194304)}else{if(!c)if(n=_u(x),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$a(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!it)return Kt(s),null}else 2*Ze()-m.renderingStartTime>Ro&&a!==1073741824&&(s.flags|=128,c=!0,$a(m,!1),s.lanes=4194304);m.isBackwards?(x.sibling=s.child,s.child=x):(a=m.last,a!==null?a.sibling=x:s.child=x,m.last=x)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ze(),s.sibling=null,a=ut.current,Ye(ut,c?a&1|2:a&1),s):(Kt(s),null);case 22:case 23:return cd(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(An&1073741824)!==0&&(Kt(s),s.subtreeFlags&6&&(s.flags|=8192)):Kt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Ox(n,s){switch(vh(s),s.tag){case 1:return an(s.type)&&au(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Co(),tt(on),tt(Ht),Ph(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return kh(s),null;case 13:if(tt(ut),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));To()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ut),null;case 4:return Co(),null;case 10:return Sh(s.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Cu=!1,Gt=!1,Lx=typeof WeakSet=="function"?WeakSet:Set,he=null;function No(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){pt(n,s,c)}else a.current=null}function Jh(n,s,a){try{a()}catch(c){pt(n,s,c)}}var sg=!1;function Mx(n,s){if(ch=$r,n=Vp(),nh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,A=-1,k=-1,z=0,J=0,Z=n,X=null;t:for(;;){for(var le;Z!==a||d!==0&&Z.nodeType!==3||(A=x+d),Z!==m||c!==0&&Z.nodeType!==3||(k=x+c),Z.nodeType===3&&(x+=Z.nodeValue.length),(le=Z.firstChild)!==null;)X=Z,Z=le;for(;;){if(Z===n)break t;if(X===a&&++z===d&&(A=x),X===m&&++J===c&&(k=x),(le=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=le}a=A===-1||k===-1?null:{start:A,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(hh={focusedElem:n,selectionRange:a},$r=!1,he=s;he!==null;)if(s=he,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,he=n;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,_t=de.memoizedState,V=s.stateNode,D=V.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Hn(s.type,fe),_t);V.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var M=s.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){pt(s,s.return,te)}if(n=s.sibling,n!==null){n.return=s.return,he=n;break}he=s.return}return de=sg,sg=!1,de}function qa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Jh(s,a,m)}d=d.next}while(d!==c)}}function bu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Zh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ig(n){var s=n.alternate;s!==null&&(n.alternate=null,ig(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[vr],delete s[Da],delete s[mh],delete s[xx],delete s[Ex])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function og(n){return n.tag===5||n.tag===3||n.tag===4}function ag(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||og(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=iu));else if(c!==4&&(n=n.child,n!==null))for(ed(n,s,a),n=n.sibling;n!==null;)ed(n,s,a),n=n.sibling}function td(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(td(n,s,a),n=n.sibling;n!==null;)td(n,s,a),n=n.sibling}var Lt=null,Wn=!1;function ks(n,s,a){for(a=a.child;a!==null;)lg(n,s,a),a=a.sibling}function lg(n,s,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(pi,a)}catch{}switch(a.tag){case 5:Gt||No(a,s);case 6:var c=Lt,d=Wn;Lt=null,ks(n,s,a),Lt=c,Wn=d,Lt!==null&&(Wn?(n=Lt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Lt.removeChild(a.stateNode));break;case 18:Lt!==null&&(Wn?(n=Lt,a=a.stateNode,n.nodeType===8?ph(n.parentNode,a):n.nodeType===1&&ph(n,a),ws(n)):ph(Lt,a.stateNode));break;case 4:c=Lt,d=Wn,Lt=a.stateNode.containerInfo,Wn=!0,ks(n,s,a),Lt=c,Wn=d;break;case 0:case 11:case 14:case 15:if(!Gt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,x=m.destroy;m=m.tag,x!==void 0&&((m&2)!==0||(m&4)!==0)&&Jh(a,s,x),d=d.next}while(d!==c)}ks(n,s,a);break;case 1:if(!Gt&&(No(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){pt(a,s,A)}ks(n,s,a);break;case 21:ks(n,s,a);break;case 22:a.mode&1?(Gt=(c=Gt)||a.memoizedState!==null,ks(n,s,a),Gt=c):ks(n,s,a);break;default:ks(n,s,a)}}function ug(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Lx),s.forEach(function(c){var d=Gx.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Kn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,x=s,A=x;e:for(;A!==null;){switch(A.tag){case 5:Lt=A.stateNode,Wn=!1;break e;case 3:Lt=A.stateNode.containerInfo,Wn=!0;break e;case 4:Lt=A.stateNode.containerInfo,Wn=!0;break e}A=A.return}if(Lt===null)throw Error(t(160));lg(m,x,d),Lt=null,Wn=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch(z){pt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)cg(s,n),s=s.sibling}function cg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Kn(s,n),Er(n),c&4){try{qa(3,n,n.return),bu(3,n)}catch(fe){pt(n,n.return,fe)}try{qa(5,n,n.return)}catch(fe){pt(n,n.return,fe)}}break;case 1:Kn(s,n),Er(n),c&512&&a!==null&&No(a,a.return);break;case 5:if(Kn(s,n),Er(n),c&512&&a!==null&&No(a,a.return),n.flags&32){var d=n.stateNode;try{Fr(d,"")}catch(fe){pt(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,x=a!==null?a.memoizedProps:m,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&ps(d,m),gs(A,x);var z=gs(A,m);for(x=0;x<k.length;x+=2){var J=k[x],Z=k[x+1];J==="style"?Vr(d,Z):J==="dangerouslySetInnerHTML"?li(d,Z):J==="children"?Fr(d,Z):ee(d,J,Z,z)}switch(A){case"input":Dr(d,m);break;case"textarea":aa(d,m);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var le=m.value;le!=null?mn(d,!!m.multiple,le,!1):X!==!!m.multiple&&(m.defaultValue!=null?mn(d,!!m.multiple,m.defaultValue,!0):mn(d,!!m.multiple,m.multiple?[]:"",!1))}d[Da]=m}catch(fe){pt(n,n.return,fe)}}break;case 6:if(Kn(s,n),Er(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(fe){pt(n,n.return,fe)}}break;case 3:if(Kn(s,n),Er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ws(s.containerInfo)}catch(fe){pt(n,n.return,fe)}break;case 4:Kn(s,n),Er(n);break;case 13:Kn(s,n),Er(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(sd=Ze())),c&4&&ug(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(Gt=(z=Gt)||J,Kn(s,n),Gt=z):Kn(s,n),Er(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!J&&(n.mode&1)!==0)for(he=n,J=n.child;J!==null;){for(Z=he=J;he!==null;){switch(X=he,le=X.child,X.tag){case 0:case 11:case 14:case 15:qa(4,X,X.return);break;case 1:No(X,X.return);var de=X.stateNode;if(typeof de.componentWillUnmount=="function"){c=X,a=X.return;try{s=c,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){pt(c,a,fe)}}break;case 5:No(X,X.return);break;case 22:if(X.memoizedState!==null){fg(Z);continue}}le!==null?(le.return=X,he=le):fg(Z)}J=J.sibling}e:for(J=null,Z=n;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,z?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=Z.stateNode,k=Z.memoizedProps.style,x=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=nr("display",x))}catch(fe){pt(n,n.return,fe)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(fe){pt(n,n.return,fe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Kn(s,n),Er(n),c&4&&ug(n);break;case 21:break;default:Kn(s,n),Er(n)}}function Er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(og(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Fr(d,""),c.flags&=-33);var m=ag(n);td(n,m,d);break;case 3:case 4:var x=c.stateNode.containerInfo,A=ag(n);ed(n,A,x);break;default:throw Error(t(161))}}catch(k){pt(n,n.return,k)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ux(n,s,a){he=n,hg(n)}function hg(n,s,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,m=d.child;if(d.tag===22&&c){var x=d.memoizedState!==null||Cu;if(!x){var A=d.alternate,k=A!==null&&A.memoizedState!==null||Gt;A=Cu;var z=Gt;if(Cu=x,(Gt=k)&&!z)for(he=d;he!==null;)x=he,k=x.child,x.tag===22&&x.memoizedState!==null?pg(d):k!==null?(k.return=x,he=k):pg(d);for(;m!==null;)he=m,hg(m),m=m.sibling;he=d,Cu=A,Gt=z}dg(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,he=m):dg(n)}}function dg(n){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Gt||bu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Gt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Hn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&fm(s,m,c);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}fm(s,x,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var J=z.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&ws(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||s.flags&512&&Zh(s)}catch(X){pt(s,s.return,X)}}if(s===n){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function fg(n){for(;he!==null;){var s=he;if(s===n){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function pg(n){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{bu(4,s)}catch(k){pt(s,a,k)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(k){pt(s,d,k)}}var m=s.return;try{Zh(s)}catch(k){pt(s,m,k)}break;case 5:var x=s.return;try{Zh(s)}catch(k){pt(s,x,k)}}}catch(k){pt(s,s.return,k)}if(s===n){he=null;break}var A=s.sibling;if(A!==null){A.return=s.return,he=A;break}he=s.return}}var zx=Math.ceil,Nu=q.ReactCurrentDispatcher,nd=q.ReactCurrentOwner,jn=q.ReactCurrentBatchConfig,Me=0,Dt=null,Et=null,Mt=0,An=0,ko=Ss(0),kt=0,Ha=null,ki=0,ku=0,rd=0,Wa=null,un=null,sd=0,Ro=1/0,Zr=null,Ru=!1,id=null,Rs=null,Pu=!1,Ps=null,Du=0,Ka=0,od=null,ju=-1,Fu=0;function tn(){return(Me&6)!==0?Ze():ju!==-1?ju:ju=Ze()}function Ds(n){return(n.mode&1)===0?1:(Me&2)!==0&&Mt!==0?Mt&-Mt:Ix.transition!==null?(Fu===0&&(Fu=pa()),Fu):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:io(n.type)),n)}function Gn(n,s,a,c){if(50<Ka)throw Ka=0,od=null,Error(t(185));_i(n,a,c),((Me&2)===0||n!==Dt)&&(n===Dt&&((Me&2)===0&&(ku|=a),kt===4&&js(n,Mt)),cn(n,c),a===1&&Me===0&&(s.mode&1)===0&&(Ro=Ze()+500,uu&&Cs()))}function cn(n,s){var a=n.callbackNode;yi(n,s);var c=Ur(n,n===Dt?Mt:0);if(c===0)a!==null&&Ji(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Ji(a),s===1)n.tag===0?Tx(gg.bind(null,n)):tm(gg.bind(null,n)),vx(function(){(Me&6)===0&&Cs()}),a=null;else{switch(ur(c)){case 1:a=Zi;break;case 4:a=ha;break;case 16:a=fi;break;case 536870912:a=eo;break;default:a=fi}a=Ig(a,mg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function mg(n,s){if(ju=-1,Fu=0,(Me&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Po()&&n.callbackNode!==a)return null;var c=Ur(n,n===Dt?Mt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Vu(n,c);else{s=c;var d=Me;Me|=2;var m=_g();(Dt!==n||Mt!==s)&&(Zr=null,Ro=Ze()+500,Pi(n,s));do try{qx();break}catch(A){yg(n,A)}while(!0);Ih(),Nu.current=m,Me=d,Et!==null?s=0:(Dt=null,Mt=0,s=kt)}if(s!==0){if(s===2&&(d=fa(n),d!==0&&(c=d,s=ad(n,d))),s===1)throw a=Ha,Pi(n,0),js(n,c),cn(n,Ze()),a;if(s===6)js(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Bx(d)&&(s=Vu(n,c),s===2&&(m=fa(n),m!==0&&(c=m,s=ad(n,m))),s===1))throw a=Ha,Pi(n,0),js(n,c),cn(n,Ze()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Di(n,un,Zr);break;case 3:if(js(n,c),(c&130023424)===c&&(s=sd+500-Ze(),10<s)){if(Ur(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){tn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=fh(Di.bind(null,n,un,Zr),s);break}Di(n,un,Zr);break;case 4:if(js(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var x=31-vn(c);m=1<<x,x=s[x],x>d&&(d=x),c&=~m}if(c=d,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*zx(c/1960))-c,10<c){n.timeoutHandle=fh(Di.bind(null,n,un,Zr),c);break}Di(n,un,Zr);break;case 5:Di(n,un,Zr);break;default:throw Error(t(329))}}}return cn(n,Ze()),n.callbackNode===a?mg.bind(null,n):null}function ad(n,s){var a=Wa;return n.current.memoizedState.isDehydrated&&(Pi(n,s).flags|=256),n=Vu(n,s),n!==2&&(s=un,un=a,s!==null&&ld(s)),n}function ld(n){un===null?un=n:un.push.apply(un,n)}function Bx(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!$n(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function js(n,s){for(s&=~rd,s&=~ku,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-vn(s),c=1<<a;n[a]=-1,s&=~c}}function gg(n){if((Me&6)!==0)throw Error(t(327));Po();var s=Ur(n,0);if((s&1)===0)return cn(n,Ze()),null;var a=Vu(n,s);if(n.tag!==0&&a===2){var c=fa(n);c!==0&&(s=c,a=ad(n,c))}if(a===1)throw a=Ha,Pi(n,0),js(n,s),cn(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Di(n,un,Zr),cn(n,Ze()),null}function ud(n,s){var a=Me;Me|=1;try{return n(s)}finally{Me=a,Me===0&&(Ro=Ze()+500,uu&&Cs())}}function Ri(n){Ps!==null&&Ps.tag===0&&(Me&6)===0&&Po();var s=Me;Me|=1;var a=jn.transition,c=Ve;try{if(jn.transition=null,Ve=1,n)return n()}finally{Ve=c,jn.transition=a,Me=s,(Me&6)===0&&Cs()}}function cd(){An=ko.current,tt(ko)}function Pi(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,_x(a)),Et!==null)for(a=Et.return;a!==null;){var c=a;switch(vh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&au();break;case 3:Co(),tt(on),tt(Ht),Ph();break;case 5:kh(c);break;case 4:Co();break;case 13:tt(ut);break;case 19:tt(ut);break;case 10:Sh(c.type._context);break;case 22:case 23:cd()}a=a.return}if(Dt=n,Et=n=Fs(n.current,null),Mt=An=s,kt=0,Ha=null,rd=ku=ki=0,un=Wa=null,Ci!==null){for(s=0;s<Ci.length;s++)if(a=Ci[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var x=m.next;m.next=d,c.next=x}a.pending=c}Ci=null}return n}function yg(n,s){do{var a=Et;try{if(Ih(),vu.current=Tu,wu){for(var c=ct.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}wu=!1}if(Ni=0,Pt=Nt=ct=null,Ma=!1,Ua=0,nd.current=null,a===null||a.return===null){kt=1,Ha=s,Et=null;break}e:{var m=n,x=a.return,A=a,k=s;if(s=Mt,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var z=k,J=A,Z=J.tag;if((J.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=J.alternate;X?(J.updateQueue=X.updateQueue,J.memoizedState=X.memoizedState,J.lanes=X.lanes):(J.updateQueue=null,J.memoizedState=null)}var le=Bm(x);if(le!==null){le.flags&=-257,$m(le,x,A,m,s),le.mode&1&&zm(m,z,s),s=le,k=z;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(k),s.updateQueue=fe}else de.add(k);break e}else{if((s&1)===0){zm(m,z,s),hd();break e}k=Error(t(426))}}else if(it&&A.mode&1){var _t=Bm(x);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),$m(_t,x,A,m,s),Eh(bo(k,A));break e}}m=k=bo(k,A),kt!==4&&(kt=2),Wa===null?Wa=[m]:Wa.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var V=Mm(m,k,s);dm(m,V);break e;case 1:A=k;var D=m.type,M=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Rs===null||!Rs.has(M)))){m.flags|=65536,s&=-s,m.lanes|=s;var te=Um(m,A,s);dm(m,te);break e}}m=m.return}while(m!==null)}wg(a)}catch(pe){s=pe,Et===a&&a!==null&&(Et=a=a.return);continue}break}while(!0)}function _g(){var n=Nu.current;return Nu.current=Tu,n===null?Tu:n}function hd(){(kt===0||kt===3||kt===2)&&(kt=4),Dt===null||(ki&268435455)===0&&(ku&268435455)===0||js(Dt,Mt)}function Vu(n,s){var a=Me;Me|=2;var c=_g();(Dt!==n||Mt!==s)&&(Zr=null,Pi(n,s));do try{$x();break}catch(d){yg(n,d)}while(!0);if(Ih(),Me=a,Nu.current=c,Et!==null)throw Error(t(261));return Dt=null,Mt=0,kt}function $x(){for(;Et!==null;)vg(Et)}function qx(){for(;Et!==null&&!di();)vg(Et)}function vg(n){var s=Tg(n.alternate,n,An);n.memoizedProps=n.pendingProps,s===null?wg(n):Et=s,nd.current=null}function wg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Vx(a,s,An),a!==null){Et=a;return}}else{if(a=Ox(a,s),a!==null){a.flags&=32767,Et=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,Et=null;return}}if(s=s.sibling,s!==null){Et=s;return}Et=s=n}while(s!==null);kt===0&&(kt=5)}function Di(n,s,a){var c=Ve,d=jn.transition;try{jn.transition=null,Ve=1,Hx(n,s,a,c)}finally{jn.transition=d,Ve=c}return null}function Hx(n,s,a,c){do Po();while(Ps!==null);if((Me&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Yc(n,m),n===Dt&&(Et=Dt=null,Mt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pu||(Pu=!0,Ig(fi,function(){return Po(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=jn.transition,jn.transition=null;var x=Ve;Ve=1;var A=Me;Me|=4,nd.current=null,Mx(n,a),cg(a,n),hx(hh),$r=!!ch,hh=ch=null,n.current=a,Ux(a),Mr(),Me=A,Ve=x,jn.transition=m}else n.current=a;if(Pu&&(Pu=!1,Ps=n,Du=d),m=n.pendingLanes,m===0&&(Rs=null),$l(a.stateNode),cn(n,Ze()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Ru)throw Ru=!1,n=id,id=null,n;return(Du&1)!==0&&n.tag!==0&&Po(),m=n.pendingLanes,(m&1)!==0?n===od?Ka++:(Ka=0,od=n):Ka=0,Cs(),null}function Po(){if(Ps!==null){var n=ur(Du),s=jn.transition,a=Ve;try{if(jn.transition=null,Ve=16>n?16:n,Ps===null)var c=!1;else{if(n=Ps,Ps=null,Du=0,(Me&6)!==0)throw Error(t(331));var d=Me;for(Me|=4,he=n.current;he!==null;){var m=he,x=m.child;if((he.flags&16)!==0){var A=m.deletions;if(A!==null){for(var k=0;k<A.length;k++){var z=A[k];for(he=z;he!==null;){var J=he;switch(J.tag){case 0:case 11:case 15:qa(8,J,m)}var Z=J.child;if(Z!==null)Z.return=J,he=Z;else for(;he!==null;){J=he;var X=J.sibling,le=J.return;if(ig(J),J===z){he=null;break}if(X!==null){X.return=le,he=X;break}he=le}}}var de=m.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var _t=fe.sibling;fe.sibling=null,fe=_t}while(fe!==null)}}he=m}}if((m.subtreeFlags&2064)!==0&&x!==null)x.return=m,he=x;else e:for(;he!==null;){if(m=he,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:qa(9,m,m.return)}var V=m.sibling;if(V!==null){V.return=m.return,he=V;break e}he=m.return}}var D=n.current;for(he=D;he!==null;){x=he;var M=x.child;if((x.subtreeFlags&2064)!==0&&M!==null)M.return=x,he=M;else e:for(x=D;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:bu(9,A)}}catch(pe){pt(A,A.return,pe)}if(A===x){he=null;break e}var te=A.sibling;if(te!==null){te.return=A.return,he=te;break e}he=A.return}}if(Me=d,Cs(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(pi,n)}catch{}c=!0}return c}finally{Ve=a,jn.transition=s}}return!1}function xg(n,s,a){s=bo(a,s),s=Mm(n,s,1),n=Ns(n,s,1),s=tn(),n!==null&&(_i(n,1,s),cn(n,s))}function pt(n,s,a){if(n.tag===3)xg(n,n,a);else for(;s!==null;){if(s.tag===3){xg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Rs===null||!Rs.has(c))){n=bo(a,n),n=Um(s,n,1),s=Ns(s,n,1),n=tn(),s!==null&&(_i(s,1,n),cn(s,n));break}}s=s.return}}function Wx(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=tn(),n.pingedLanes|=n.suspendedLanes&a,Dt===n&&(Mt&a)===a&&(kt===4||kt===3&&(Mt&130023424)===Mt&&500>Ze()-sd?Pi(n,0):rd|=a),cn(n,s)}function Eg(n,s){s===0&&((n.mode&1)===0?s=1:(s=ys,ys<<=1,(ys&130023424)===0&&(ys=4194304)));var a=tn();n=Xr(n,s),n!==null&&(_i(n,s,a),cn(n,a))}function Kx(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Eg(n,a)}function Gx(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Eg(n,a)}var Tg;Tg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||on.current)ln=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return ln=!1,Fx(n,s,a);ln=(n.flags&131072)!==0}else ln=!1,it&&(s.flags&1048576)!==0&&nm(s,hu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Au(n,s),n=s.pendingProps;var d=wo(s,Ht.current);Ao(s,a),d=Fh(null,s,c,n,d,a);var m=Vh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,an(c)?(m=!0,lu(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,bh(s),d.updater=Iu,s.stateNode=d,d._reactInternals=s,Bh(s,c,n,a),s=Wh(null,s,c,!0,m,a)):(s.tag=0,it&&m&&_h(s),en(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Au(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=Xx(c),n=Hn(c,n),d){case 0:s=Hh(null,s,c,n,a);break e;case 1:s=Qm(null,s,c,n,a);break e;case 11:s=qm(null,s,c,n,a);break e;case 14:s=Hm(null,s,c,Hn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Hn(c,d),Hh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Hn(c,d),Qm(n,s,c,d,a);case 3:e:{if(Xm(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,hm(n,s),yu(s,c,null,a);var x=s.memoizedState;if(c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=bo(Error(t(423)),s),s=Ym(n,s,c,a,d);break e}else if(c!==d){d=bo(Error(t(424)),s),s=Ym(n,s,c,a,d);break e}else for(Sn=Is(s.stateNode.containerInfo.firstChild),In=s,it=!0,qn=null,a=um(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(To(),c===d){s=Jr(n,s,a);break e}en(n,s,c,a)}s=s.child}return s;case 5:return pm(s),n===null&&xh(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,x=d.children,dh(c,d)?x=null:m!==null&&dh(c,m)&&(s.flags|=32),Gm(n,s),en(n,s,x,a),s.child;case 6:return n===null&&xh(s),null;case 13:return Jm(n,s,a);case 4:return Nh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Io(s,null,c,a):en(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Hn(c,d),qm(n,s,c,d,a);case 7:return en(n,s,s.pendingProps,a),s.child;case 8:return en(n,s,s.pendingProps.children,a),s.child;case 12:return en(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,x=d.value,Ye(pu,c._currentValue),c._currentValue=x,m!==null)if($n(m.value,x)){if(m.children===d.children&&!on.current){s=Jr(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var A=m.dependencies;if(A!==null){x=m.child;for(var k=A.firstContext;k!==null;){if(k.context===c){if(m.tag===1){k=Yr(-1,a&-a),k.tag=2;var z=m.updateQueue;if(z!==null){z=z.shared;var J=z.pending;J===null?k.next=k:(k.next=J.next,J.next=k),z.pending=k}}m.lanes|=a,k=m.alternate,k!==null&&(k.lanes|=a),Ah(m.return,a,s),A.lanes|=a;break}k=k.next}}else if(m.tag===10)x=m.type===s.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(t(341));x.lanes|=a,A=x.alternate,A!==null&&(A.lanes|=a),Ah(x,a,s),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===s){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}en(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Ao(s,a),d=Pn(d),c=c(d),s.flags|=1,en(n,s,c,a),s.child;case 14:return c=s.type,d=Hn(c,s.pendingProps),d=Hn(c.type,d),Hm(n,s,c,d,a);case 15:return Wm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Hn(c,d),Au(n,s),s.tag=1,an(c)?(n=!0,lu(s)):n=!1,Ao(s,a),Om(s,c,d),Bh(s,c,d,a),Wh(null,s,c,!0,n,a);case 19:return eg(n,s,a);case 22:return Km(n,s,a)}throw Error(t(156,s.tag))};function Ig(n,s){return ca(n,s)}function Qx(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(n,s,a,c){return new Qx(n,s,a,c)}function dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xx(n){if(typeof n=="function")return dd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===F)return 11;if(n===ft)return 14}return 2}function Fs(n,s){var a=n.alternate;return a===null?(a=Fn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ou(n,s,a,c,d,m){var x=2;if(c=n,typeof n=="function")dd(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case C:return ji(a.children,d,m,s);case T:x=8,d|=8;break;case N:return n=Fn(12,a,s,d|2),n.elementType=N,n.lanes=m,n;case b:return n=Fn(13,a,s,d),n.elementType=b,n.lanes=m,n;case Ue:return n=Fn(19,a,s,d),n.elementType=Ue,n.lanes=m,n;case Qe:return Lu(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:x=10;break e;case R:x=9;break e;case F:x=11;break e;case ft:x=14;break e;case ot:x=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Fn(x,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function ji(n,s,a,c){return n=Fn(7,n,c,s),n.lanes=a,n}function Lu(n,s,a,c){return n=Fn(22,n,c,s),n.elementType=Qe,n.lanes=a,n.stateNode={isHidden:!1},n}function fd(n,s,a){return n=Fn(6,n,null,s),n.lanes=a,n}function pd(n,s,a){return s=Fn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Yx(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function md(n,s,a,c,d,m,x,A,k){return n=new Yx(n,s,a,A,k),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Fn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(m),n}function Jx(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Sg(n){if(!n)return As;n=n._reactInternals;e:{if(zn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(an(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(an(a))return Zp(n,a,s)}return s}function Ag(n,s,a,c,d,m,x,A,k){return n=md(a,c,!0,n,d,m,x,A,k),n.context=Sg(null),a=n.current,c=tn(),d=Ds(a),m=Yr(c,d),m.callback=s??null,Ns(a,m,d),n.current.lanes=d,_i(n,d,c),cn(n,c),n}function Mu(n,s,a,c){var d=s.current,m=tn(),x=Ds(d);return a=Sg(a),s.context===null?s.context=a:s.pendingContext=a,s=Yr(m,x),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Ns(d,s,x),n!==null&&(Gn(n,d,x,m),gu(n,d,x)),x}function Uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function gd(n,s){Cg(n,s),(n=n.alternate)&&Cg(n,s)}function Zx(){return null}var bg=typeof reportError=="function"?reportError:function(n){console.error(n)};function yd(n){this._internalRoot=n}zu.prototype.render=yd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Mu(n,s,null,null)},zu.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ri(function(){Mu(null,n,null,null)}),s[Wr]=null}};function zu(n){this._internalRoot=n}zu.prototype.unstable_scheduleHydration=function(n){if(n){var s=va();n={blockedOn:null,target:n,priority:s};for(var a=0;a<wn.length&&s!==0&&s<wn[a].priority;a++);wn.splice(a,0,n),a===0&&ro(n)}};function _d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ng(){}function e0(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var z=Uu(x);m.call(z)}}var x=Ag(s,c,n,0,null,!1,!1,"",Ng);return n._reactRootContainer=x,n[Wr]=x.current,Ra(n.nodeType===8?n.parentNode:n),Ri(),x}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var z=Uu(k);A.call(z)}}var k=md(n,0,!1,null,null,!1,!1,"",Ng);return n._reactRootContainer=k,n[Wr]=k.current,Ra(n.nodeType===8?n.parentNode:n),Ri(function(){Mu(s,k,a,c)}),k}function $u(n,s,a,c,d){var m=a._reactRootContainer;if(m){var x=m;if(typeof d=="function"){var A=d;d=function(){var k=Uu(x);A.call(k)}}Mu(s,x,n,d)}else x=e0(a,s,n,d,c);return Uu(x)}ya=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=$e(s.pendingLanes);a!==0&&(ga(s,a|1),cn(s,Ze()),(Me&6)===0&&(Ro=Ze()+500,Cs()))}break;case 13:Ri(function(){var c=Xr(n,1);if(c!==null){var d=tn();Gn(c,n,1,d)}}),gd(n,1)}},to=function(n){if(n.tag===13){var s=Xr(n,134217728);if(s!==null){var a=tn();Gn(s,n,134217728,a)}gd(n,134217728)}},_a=function(n){if(n.tag===13){var s=Ds(n),a=Xr(n,s);if(a!==null){var c=tn();Gn(a,n,s,c)}gd(n,s)}},va=function(){return Ve},wa=function(n,s){var a=Ve;try{return Ve=n,s()}finally{Ve=a}},Mn=function(n,s,a){switch(s){case"input":if(Dr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=ou(c);if(!d)throw Error(t(90));ri(c),Dr(c,d)}}}break;case"textarea":aa(n,a);break;case"select":s=a.value,s!=null&&mn(n,!!a.multiple,s,!1)}},st=ud,wt=Ri;var t0={usingClientEntryPoint:!1,Events:[ja,_o,ou,ge,we,ud]},Ga={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n0={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Bl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||Zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{pi=qu.inject(n0),_n=qu}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t0,hn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(s))throw Error(t(200));return Jx(n,s,null,a)},hn.createRoot=function(n,s){if(!_d(n))throw Error(t(299));var a=!1,c="",d=bg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=md(n,1,!1,null,null,a,!1,c,d),n[Wr]=s.current,Ra(n.nodeType===8?n.parentNode:n),new yd(s)},hn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Bl(s),n=n===null?null:n.stateNode,n},hn.flushSync=function(n){return Ri(n)},hn.hydrate=function(n,s,a){if(!Bu(s))throw Error(t(200));return $u(null,n,s,!0,a)},hn.hydrateRoot=function(n,s,a){if(!_d(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",x=bg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=Ag(s,null,n,1,a??null,d,!1,m,x),n[Wr]=s.current,Ra(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new zu(s)},hn.render=function(n,s,a){if(!Bu(s))throw Error(t(200));return $u(null,n,s,!1,a)},hn.unmountComponentAtNode=function(n){if(!Bu(n))throw Error(t(40));return n._reactRootContainer?(Ri(function(){$u(null,null,n,!1,function(){n._reactRootContainer=null,n[Wr]=null})}),!0):!1},hn.unstable_batchedUpdates=ud,hn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Bu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return $u(n,s,a,!1,c)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var Og;function d0(){if(Og)return Ed.exports;Og=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ed.exports=h0(),Ed.exports}var Lg;function f0(){if(Lg)return Hu;Lg=1;var r=d0();return Hu.createRoot=r.createRoot,Hu.hydrateRoot=r.hydrateRoot,Hu}var p0=f0();const m0=v_(p0),Sd={" ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","",""]},Ef=[{id:"qualitative",name:"",desc:""},{id:"emotional",name:"",desc:""},{id:"friendly",name:"",desc:""},{id:"humorous",name:"",desc:""},{id:"internal",name:"",desc:""},{id:"philosophical",name:"",desc:""},{id:"practical",name:"",desc:""},{id:"resonance",name:"",desc:""},{id:"blessing",name:"",desc:""},{id:"scenario",name:"",desc:""},{id:"milestone",name:"",desc:""},{id:"journey",name:"",desc:""}],w_=()=>localStorage.getItem("gemini_api_key")||"",Mg=()=>!!w_(),Ug=async(r,e,t=[],i)=>{var H,$,U,K,ne;const o=w_();if(!o)return"  API Key Gemini API Key";const l=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${o}`;let h="";t.length>0?h=t.map(ee=>{const q=Ef.find(se=>se.id===ee);return q?`${q.name}${q.desc}`:""}).join(`
`):h="";const y=`${{normal:"",casual:"",formal:""}[i.tone]||""}`,v=` ${i.wordCount||80} `,w=`""

${r}
${e||""}

****
1. ${y}
2. ${v}

 ${t.length||1} 
${h}

****
1. 
2. 
3. ** Markdown ** ******# 
4. ****
5. 
6. 

...
()

...
`;let E=0;const S=5,O=[1e3,2e3,4e3,8e3,16e3];for(;E<=S;)try{const ee=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:w}]}]})});if(!ee.ok){if(ee.status===400||ee.status===401||ee.status===403)return" API Key ";throw new Error(`API Error: ${ee.status}`)}return((ne=(K=(U=($=(H=(await ee.json()).candidates)==null?void 0:H[0])==null?void 0:$.content)==null?void 0:U.parts)==null?void 0:K[0])==null?void 0:ne.text)||""}catch(ee){if(E===S)return console.error("Gemini API Failed:",ee),"";await new Promise(q=>setTimeout(q,O[E])),E++}};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x_=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Y.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...p},y)=>Y.createElement("svg",{ref:y,...y0,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:x_("lucide",o),...p},[...h.map(([v,w])=>Y.createElement(v,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(r,e)=>{const t=Y.forwardRef(({className:i,...o},l)=>Y.createElement(_0,{ref:l,iconNode:e,className:x_(`lucide-${g0(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=Be("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=Be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=Be("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=Be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Be("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=Be("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Be("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=Be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=Be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Be("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=Be("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b_=Y.createContext(null),zg={success:{bg:"bg-[#1DD1A1]",icon:Bd,iconColor:"text-white"},error:{bg:"bg-[#FF6B6B]",icon:E_,iconColor:"text-white"},warning:{bg:"bg-[#FECA57]",icon:zd,iconColor:"text-[#2D3436]"},info:{bg:"bg-[#54A0FF]",icon:T_,iconColor:"text-white"}},F0=({id:r,message:e,type:t,onRemove:i})=>{const o=zg[t]||zg.info,l=o.icon;return f.jsxs("div",{className:`${o.bg} text-white px-4 py-3 rounded-lg shadow-lg border-2 border-[#2D3436] 
                       flex items-center gap-3 min-w-[280px] max-w-[400px] animate-in 
                       slide-in-from-right-5 duration-300`,role:"alert",children:[f.jsx(l,{size:20,className:o.iconColor}),f.jsx("span",{className:"flex-1 font-medium text-sm",children:e}),f.jsx("button",{onClick:()=>i(r),className:"p-1 hover:bg-white/20 rounded transition-colors",children:f.jsx(On,{size:16})})]})},V0=({toasts:r,onRemove:e})=>r.length===0?null:f.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2",children:r.map(t=>f.jsx(F0,{...t,onRemove:e},t.id))}),O0=({children:r})=>{const[e,t]=Y.useState([]),i=Y.useCallback(h=>{t(p=>p.filter(y=>y.id!==h))},[]),o=Y.useCallback((h,p="info",y=3e3)=>{const v=Date.now()+Math.random();return t(w=>[...w,{id:v,message:h,type:p}]),y>0&&setTimeout(()=>i(v),y),v},[i]),l={success:(h,p)=>o(h,"success",p),error:(h,p)=>o(h,"error",p??5e3),warning:(h,p)=>o(h,"warning",p),info:(h,p)=>o(h,"info",p)};return f.jsxs(b_.Provider,{value:{showToast:o,toast:l,removeToast:i},children:[r,f.jsx(V0,{toasts:e,onRemove:i})]})},L0=()=>{const r=Y.useContext(b_);if(!r)throw new Error("useToast  ToastProvider ");return r},M0=(r,e)=>{let t="";e==="csv"?(t=`\uFEFF,,
`,r.forEach(h=>{const y=[...h.selectedTags,h.manualTraits].filter(Boolean).join("").replace(/,/g,""),v=h.comment.replace(/,/g,"").replace(/\n/g," ");t+=`${h.name},"${y}","${v}"
`})):r.forEach(h=>{const p=[...h.selectedTags,h.manualTraits].filter(Boolean).join("");t+=`${h.name}
${p||""}

${h.comment}
-------------------
`});const i=new Blob([t],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`_${new Date().toLocaleDateString()}.${e}`,l.click(),URL.revokeObjectURL(o)},U0=()=>{const[r,e]=Y.useState({isOpen:!1,type:"info",title:"",message:"",onConfirm:null}),t=Y.useCallback(()=>{e(l=>({...l,isOpen:!1}))},[]),i=Y.useCallback((l,h,p)=>{e({isOpen:!0,type:"confirm",title:l,message:h,onConfirm:p})},[]),o=Y.useCallback(l=>{e({isOpen:!0,type:"info",title:"",message:l,onConfirm:null})},[]);return{dialog:r,closeDialog:t,showConfirm:i,showAlert:o}},z0=()=>{};var Bg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},B0=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],y=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,w=l>>2,E=(l&3)<<4|p>>4;let S=(p&15)<<2|v>>6,O=v&63;y||(O=64,h||(S=64)),i.push(t[w],t[E],t[S],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(N_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):B0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||E==null)throw new $0;const S=l<<2|p>>4;if(i.push(S),v!==64){const O=p<<4&240|v>>2;if(i.push(O),E!==64){const H=v<<6&192|E;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class $0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q0=function(r){const e=N_(r);return k_.encodeByteArray(e,!0)},uc=function(r){return q0(r).replace(/\./g,"")},R_=function(r){try{return k_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=()=>H0().__FIREBASE_DEFAULTS__,K0=()=>{if(typeof process>"u"||typeof Bg>"u")return;const r=Bg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},G0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&R_(r[1]);return e&&JSON.parse(e)},Nc=()=>{try{return z0()||W0()||K0()||G0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},P_=r=>{var e,t;return(t=(e=Nc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Q0=r=>{const e=P_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},D_=()=>{var r;return(r=Nc())==null?void 0:r.config},j_=r=>{var e;return(e=Nc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function F_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[uc(JSON.stringify(t)),uc(JSON.stringify(h)),""].join(".")}const nl={};function J0(){const r={prod:[],emulator:[]};for(const e of Object.keys(nl))nl[e]?r.emulator.push(e):r.prod.push(e);return r}function Z0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let $g=!1;function V_(r,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||nl[r]===e||nl[r]||$g)return;nl[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=J0().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{$g=!0,h()},S}function w(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=Z0(i),O=t("text"),H=document.getElementById(O)||document.createElement("span"),$=t("learnmore"),U=document.getElementById($)||document.createElement("a"),K=t("preprendIcon"),ne=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;p(ee),w(U,$);const q=v();y(ne,K),ee.append(ne,H,U,q),document.body.appendChild(ee)}l?(H.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function tE(){var e;const r=(e=Nc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function sE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iE(){const r=Zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function oE(){return!tE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aE(){try{return typeof indexedDB=="object"}catch{return!1}}function lE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="FirebaseError";class hs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=uE,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xl.prototype.create)}}class xl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?cE(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new hs(o,p,i)}}function cE(r,e){return r.replace(hE,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const hE=/\{\$([^}]+)}/g;function dE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Bi(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(qg(l)&&qg(h)){if(!Bi(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function qg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fE(r,e){const t=new pE(r,e);return t.subscribe.bind(t)}class pE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");mE(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ad),o.error===void 0&&(o.error=Ad),o.complete===void 0&&(o.complete=Ad);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ad(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(r){return r&&r._delegate?r._delegate:r}class $i{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new X0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_E(e))try{this.getOrInitializeService({instanceIdentifier:Fi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fi){return this.instances.has(e)}getOptions(e=Fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yE(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fi){return this.component?this.component.multipleInstances?e:Fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yE(r){return r===Fi?void 0:r}function _E(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const wE={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},xE=Pe.INFO,EE={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},TE=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=EE[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tf{constructor(e){this.name=e,this._logLevel=xE,this._logHandler=TE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const IE=(r,e)=>e.some(t=>r instanceof t);let Hg,Wg;function SE(){return Hg||(Hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AE(){return Wg||(Wg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O_=new WeakMap,qd=new WeakMap,L_=new WeakMap,Cd=new WeakMap,If=new WeakMap;function CE(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t($s(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&O_.set(t,r)}).catch(()=>{}),If.set(e,r),e}function bE(r){if(qd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});qd.set(r,e)}let Hd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return qd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||L_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $s(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function NE(r){Hd=r(Hd)}function kE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(bd(this),e,...t);return L_.set(i,e.sort?e.sort():[e]),$s(i)}:AE().includes(r)?function(...e){return r.apply(bd(this),e),$s(O_.get(this))}:function(...e){return $s(r.apply(bd(this),e))}}function RE(r){return typeof r=="function"?kE(r):(r instanceof IDBTransaction&&bE(r),IE(r,SE())?new Proxy(r,Hd):r)}function $s(r){if(r instanceof IDBRequest)return CE(r);if(Cd.has(r))return Cd.get(r);const e=RE(r);return e!==r&&(Cd.set(r,e),If.set(e,r)),e}const bd=r=>If.get(r);function PE(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=$s(h);return i&&h.addEventListener("upgradeneeded",y=>{i($s(h.result),y.oldVersion,y.newVersion,$s(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const DE=["get","getKey","getAll","getAllKeys","count"],jE=["put","add","delete","clear"],Nd=new Map;function Kg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=jE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||DE.includes(t)))return;const l=async function(h,...p){const y=this.transaction(h,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&y.done]))[0]};return Nd.set(e,l),l}NE(r=>({...r,get:(e,t,i)=>Kg(e,t)||r.get(e,t,i),has:(e,t)=>!!Kg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function VE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",Gg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Tf("@firebase/app"),OE="@firebase/app-compat",LE="@firebase/analytics-compat",ME="@firebase/analytics",UE="@firebase/app-check-compat",zE="@firebase/app-check",BE="@firebase/auth",$E="@firebase/auth-compat",qE="@firebase/database",HE="@firebase/data-connect",WE="@firebase/database-compat",KE="@firebase/functions",GE="@firebase/functions-compat",QE="@firebase/installations",XE="@firebase/installations-compat",YE="@firebase/messaging",JE="@firebase/messaging-compat",ZE="@firebase/performance",e1="@firebase/performance-compat",t1="@firebase/remote-config",n1="@firebase/remote-config-compat",r1="@firebase/storage",s1="@firebase/storage-compat",i1="@firebase/firestore",o1="@firebase/ai",a1="@firebase/firestore-compat",l1="firebase",u1="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="[DEFAULT]",c1={[Wd]:"fire-core",[OE]:"fire-core-compat",[ME]:"fire-analytics",[LE]:"fire-analytics-compat",[zE]:"fire-app-check",[UE]:"fire-app-check-compat",[BE]:"fire-auth",[$E]:"fire-auth-compat",[qE]:"fire-rtdb",[HE]:"fire-data-connect",[WE]:"fire-rtdb-compat",[KE]:"fire-fn",[GE]:"fire-fn-compat",[QE]:"fire-iid",[XE]:"fire-iid-compat",[YE]:"fire-fcm",[JE]:"fire-fcm-compat",[ZE]:"fire-perf",[e1]:"fire-perf-compat",[t1]:"fire-rc",[n1]:"fire-rc-compat",[r1]:"fire-gcs",[s1]:"fire-gcs-compat",[i1]:"fire-fst",[a1]:"fire-fst-compat",[o1]:"fire-vertex","fire-js":"fire-js",[l1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,h1=new Map,Gd=new Map;function Qg(r,e){try{r.container.addComponent(e)}catch(t){as.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function qo(r){const e=r.name;if(Gd.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;Gd.set(e,r);for(const t of cc.values())Qg(t,r);for(const t of h1.values())Qg(t,r);return!0}function Sf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Qn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qs=new xl("app","Firebase",d1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=u1;function M_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Kd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw qs.create("bad-app-name",{appName:String(o)});if(t||(t=D_()),!t)throw qs.create("no-options");const l=cc.get(o);if(l){if(Bi(t,l.options)&&Bi(i,l.config))return l;throw qs.create("duplicate-app",{appName:o})}const h=new vE(o);for(const y of Gd.values())h.addComponent(y);const p=new f1(t,i,h);return cc.set(o,p),p}function U_(r=Kd){const e=cc.get(r);if(!e&&r===Kd&&D_())return M_();if(!e)throw qs.create("no-app",{appName:r});return e}function Hs(r,e,t){let i=c1[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(h.join(" "));return}qo(new $i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="firebase-heartbeat-database",m1=1,hl="firebase-heartbeat-store";let kd=null;function z_(){return kd||(kd=PE(p1,m1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(hl)}catch(t){console.warn(t)}}}}).catch(r=>{throw qs.create("idb-open",{originalErrorMessage:r.message})})),kd}async function g1(r){try{const t=(await z_()).transaction(hl),i=await t.objectStore(hl).get(B_(r));return await t.done,i}catch(e){if(e instanceof hs)as.warn(e.message);else{const t=qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(t.message)}}}async function Xg(r,e){try{const i=(await z_()).transaction(hl,"readwrite");await i.objectStore(hl).put(e,B_(r)),await i.done}catch(t){if(t instanceof hs)as.warn(t.message);else{const i=qs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});as.warn(i.message)}}}function B_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=1024,_1=30;class v1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new x1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Yg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>_1){const h=E1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){as.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yg(),{heartbeatsToSend:i,unsentEntries:o}=w1(this._heartbeatsCache.heartbeats),l=uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return as.warn(t),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function w1(r,e=y1){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Jg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Jg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class x1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aE()?lE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await g1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jg(r){return uc(JSON.stringify({version:2,heartbeats:r})).length}function E1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(r){qo(new $i("platform-logger",e=>new FE(e),"PRIVATE")),qo(new $i("heartbeat",e=>new v1(e),"PRIVATE")),Hs(Wd,Gg,r),Hs(Wd,Gg,"esm2020"),Hs("fire-js","")}T1("");var I1="firebase",S1="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(I1,S1,"app");var Zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,$_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function N(){}N.prototype=T.prototype,C.F=T.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(P,R,F){for(var b=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)b[Ue-2]=arguments[Ue];return T.prototype[R].apply(P,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,N){N||(N=0);const P=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)P[R]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(R=0;R<16;++R)P[R]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=C.g[0],N=C.g[1],R=C.g[2];let F=C.g[3],b;b=T+(F^N&(R^F))+P[0]+3614090360&4294967295,T=N+(b<<7&4294967295|b>>>25),b=F+(R^T&(N^R))+P[1]+3905402710&4294967295,F=T+(b<<12&4294967295|b>>>20),b=R+(N^F&(T^N))+P[2]+606105819&4294967295,R=F+(b<<17&4294967295|b>>>15),b=N+(T^R&(F^T))+P[3]+3250441966&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(F^N&(R^F))+P[4]+4118548399&4294967295,T=N+(b<<7&4294967295|b>>>25),b=F+(R^T&(N^R))+P[5]+1200080426&4294967295,F=T+(b<<12&4294967295|b>>>20),b=R+(N^F&(T^N))+P[6]+2821735955&4294967295,R=F+(b<<17&4294967295|b>>>15),b=N+(T^R&(F^T))+P[7]+4249261313&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(F^N&(R^F))+P[8]+1770035416&4294967295,T=N+(b<<7&4294967295|b>>>25),b=F+(R^T&(N^R))+P[9]+2336552879&4294967295,F=T+(b<<12&4294967295|b>>>20),b=R+(N^F&(T^N))+P[10]+4294925233&4294967295,R=F+(b<<17&4294967295|b>>>15),b=N+(T^R&(F^T))+P[11]+2304563134&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(F^N&(R^F))+P[12]+1804603682&4294967295,T=N+(b<<7&4294967295|b>>>25),b=F+(R^T&(N^R))+P[13]+4254626195&4294967295,F=T+(b<<12&4294967295|b>>>20),b=R+(N^F&(T^N))+P[14]+2792965006&4294967295,R=F+(b<<17&4294967295|b>>>15),b=N+(T^R&(F^T))+P[15]+1236535329&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(R^F&(N^R))+P[1]+4129170786&4294967295,T=N+(b<<5&4294967295|b>>>27),b=F+(N^R&(T^N))+P[6]+3225465664&4294967295,F=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(F^T))+P[11]+643717713&4294967295,R=F+(b<<14&4294967295|b>>>18),b=N+(F^T&(R^F))+P[0]+3921069994&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^F&(N^R))+P[5]+3593408605&4294967295,T=N+(b<<5&4294967295|b>>>27),b=F+(N^R&(T^N))+P[10]+38016083&4294967295,F=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(F^T))+P[15]+3634488961&4294967295,R=F+(b<<14&4294967295|b>>>18),b=N+(F^T&(R^F))+P[4]+3889429448&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^F&(N^R))+P[9]+568446438&4294967295,T=N+(b<<5&4294967295|b>>>27),b=F+(N^R&(T^N))+P[14]+3275163606&4294967295,F=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(F^T))+P[3]+4107603335&4294967295,R=F+(b<<14&4294967295|b>>>18),b=N+(F^T&(R^F))+P[8]+1163531501&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^F&(N^R))+P[13]+2850285829&4294967295,T=N+(b<<5&4294967295|b>>>27),b=F+(N^R&(T^N))+P[2]+4243563512&4294967295,F=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(F^T))+P[7]+1735328473&4294967295,R=F+(b<<14&4294967295|b>>>18),b=N+(F^T&(R^F))+P[12]+2368359562&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(N^R^F)+P[5]+4294588738&4294967295,T=N+(b<<4&4294967295|b>>>28),b=F+(T^N^R)+P[8]+2272392833&4294967295,F=T+(b<<11&4294967295|b>>>21),b=R+(F^T^N)+P[11]+1839030562&4294967295,R=F+(b<<16&4294967295|b>>>16),b=N+(R^F^T)+P[14]+4259657740&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^F)+P[1]+2763975236&4294967295,T=N+(b<<4&4294967295|b>>>28),b=F+(T^N^R)+P[4]+1272893353&4294967295,F=T+(b<<11&4294967295|b>>>21),b=R+(F^T^N)+P[7]+4139469664&4294967295,R=F+(b<<16&4294967295|b>>>16),b=N+(R^F^T)+P[10]+3200236656&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^F)+P[13]+681279174&4294967295,T=N+(b<<4&4294967295|b>>>28),b=F+(T^N^R)+P[0]+3936430074&4294967295,F=T+(b<<11&4294967295|b>>>21),b=R+(F^T^N)+P[3]+3572445317&4294967295,R=F+(b<<16&4294967295|b>>>16),b=N+(R^F^T)+P[6]+76029189&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^F)+P[9]+3654602809&4294967295,T=N+(b<<4&4294967295|b>>>28),b=F+(T^N^R)+P[12]+3873151461&4294967295,F=T+(b<<11&4294967295|b>>>21),b=R+(F^T^N)+P[15]+530742520&4294967295,R=F+(b<<16&4294967295|b>>>16),b=N+(R^F^T)+P[2]+3299628645&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(R^(N|~F))+P[0]+4096336452&4294967295,T=N+(b<<6&4294967295|b>>>26),b=F+(N^(T|~R))+P[7]+1126891415&4294967295,F=T+(b<<10&4294967295|b>>>22),b=R+(T^(F|~N))+P[14]+2878612391&4294967295,R=F+(b<<15&4294967295|b>>>17),b=N+(F^(R|~T))+P[5]+4237533241&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~F))+P[12]+1700485571&4294967295,T=N+(b<<6&4294967295|b>>>26),b=F+(N^(T|~R))+P[3]+2399980690&4294967295,F=T+(b<<10&4294967295|b>>>22),b=R+(T^(F|~N))+P[10]+4293915773&4294967295,R=F+(b<<15&4294967295|b>>>17),b=N+(F^(R|~T))+P[1]+2240044497&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~F))+P[8]+1873313359&4294967295,T=N+(b<<6&4294967295|b>>>26),b=F+(N^(T|~R))+P[15]+4264355552&4294967295,F=T+(b<<10&4294967295|b>>>22),b=R+(T^(F|~N))+P[6]+2734768916&4294967295,R=F+(b<<15&4294967295|b>>>17),b=N+(F^(R|~T))+P[13]+1309151649&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~F))+P[4]+4149444226&4294967295,T=N+(b<<6&4294967295|b>>>26),b=F+(N^(T|~R))+P[11]+3174756917&4294967295,F=T+(b<<10&4294967295|b>>>22),b=R+(T^(F|~N))+P[2]+718787259&4294967295,R=F+(b<<15&4294967295|b>>>17),b=N+(F^(R|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+F&4294967295}i.prototype.v=function(C,T){T===void 0&&(T=C.length);const N=T-this.blockSize,P=this.C;let R=this.h,F=0;for(;F<T;){if(R==0)for(;F<=N;)o(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<T;)if(P[R++]=C.charCodeAt(F++),R==this.blockSize){o(this,P),R=0;break}}else for(;F<T;)if(P[R++]=C[F++],R==this.blockSize){o(this,P),R=0;break}}this.h=R,this.o+=T},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)C[T++]=this.g[N]>>>P&255;return C};function l(C,T){var N=p;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=T(C)}function h(C,T){this.h=T;const N=[];let P=!0;for(let R=C.length-1;R>=0;R--){const F=C[R]|0;P&&F==T||(N[R]=F,P=!1)}this.g=N}var p={};function y(C){return-128<=C&&C<128?l(C,function(T){return new h([T|0],T<0?-1:0)}):new h([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return U(v(-C));const T=[];let N=1;for(let P=0;C>=N;P++)T[P]=C/N|0,N*=4294967296;return new h(T,0)}function w(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return U(w(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=v(Math.pow(T,8));let P=E;for(let F=0;F<C.length;F+=8){var R=Math.min(8,C.length-F);const b=parseInt(C.substring(F,F+R),T);R<8?(R=v(Math.pow(T,R)),P=P.j(R).add(v(b))):(P=P.j(N),P=P.add(v(b)))}return P}var E=y(0),S=y(1),O=y(16777216);r=h.prototype,r.m=function(){if($(this))return-U(this).m();let C=0,T=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);C+=(P>=0?P:4294967296+P)*T,T*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(H(this))return"0";if($(this))return"-"+U(this).toString(C);const T=v(Math.pow(C,6));var N=this;let P="";for(;;){const R=q(N,T).g;N=K(N,R.j(T));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=R,H(N))return F+P;for(;F.length<6;)F="0"+F;P=F+P}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function H(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function $(C){return C.h==-1}r.l=function(C){return C=K(this,C),$(C)?-1:H(C)?0:1};function U(C){const T=C.g.length,N=[];for(let P=0;P<T;P++)N[P]=~C.g[P];return new h(N,~C.h).add(S)}r.abs=function(){return $(this)?U(this):this},r.add=function(C){const T=Math.max(this.g.length,C.g.length),N=[];let P=0;for(let R=0;R<=T;R++){let F=P+(this.i(R)&65535)+(C.i(R)&65535),b=(F>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);P=b>>>16,F&=65535,b&=65535,N[R]=b<<16|F}return new h(N,N[N.length-1]&-2147483648?-1:0)};function K(C,T){return C.add(U(T))}r.j=function(C){if(H(this)||H(C))return E;if($(this))return $(C)?U(this).j(U(C)):U(U(this).j(C));if($(C))return U(this.j(U(C)));if(this.l(O)<0&&C.l(O)<0)return v(this.m()*C.m());const T=this.g.length+C.g.length,N=[];for(var P=0;P<2*T;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let R=0;R<C.g.length;R++){const F=this.i(P)>>>16,b=this.i(P)&65535,Ue=C.i(R)>>>16,ft=C.i(R)&65535;N[2*P+2*R]+=b*ft,ne(N,2*P+2*R),N[2*P+2*R+1]+=F*ft,ne(N,2*P+2*R+1),N[2*P+2*R+1]+=b*Ue,ne(N,2*P+2*R+1),N[2*P+2*R+2]+=F*Ue,ne(N,2*P+2*R+2)}for(C=0;C<T;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=T;C<2*T;C++)N[C]=0;return new h(N,0)};function ne(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function ee(C,T){this.g=C,this.h=T}function q(C,T){if(H(T))throw Error("division by zero");if(H(C))return new ee(E,E);if($(C))return T=q(U(C),T),new ee(U(T.g),U(T.h));if($(T))return T=q(C,U(T)),new ee(U(T.g),T.h);if(C.g.length>30){if($(C)||$(T))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=T;P.l(C)<=0;)N=se(N),P=se(P);var R=oe(N,1),F=oe(P,1);for(P=oe(P,2),N=oe(N,2);!H(P);){var b=F.add(P);b.l(C)<=0&&(R=R.add(N),F=b),P=oe(P,1),N=oe(N,1)}return T=K(C,R.j(T)),new ee(R,T)}for(R=E;C.l(T)>=0;){for(N=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),F=v(N),b=F.j(T);$(b)||b.l(C)>0;)N-=P,F=v(N),b=F.j(T);H(F)&&(F=S),R=R.add(F),C=K(C,b)}return new ee(R,C)}r.B=function(C){return q(this,C).h},r.and=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)&C.i(P);return new h(N,this.h&C.h)},r.or=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)|C.i(P);return new h(N,this.h|C.h)},r.xor=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)^C.i(P);return new h(N,this.h^C.h)};function se(C){const T=C.g.length+1,N=[];for(let P=0;P<T;P++)N[P]=C.i(P)<<1|C.i(P-1)>>>31;return new h(N,C.h)}function oe(C,T){const N=T>>5;T%=32;const P=C.g.length-N,R=[];for(let F=0;F<P;F++)R[F]=T>0?C.i(F+N)>>>T|C.i(F+N+1)<<32-T:C.i(F+N);return new h(R,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,$_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Ws=h}).apply(typeof Zg<"u"?Zg:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q_,Xa,H_,Ju,Qd,W_,K_,G_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in _))break e;_=_[L]}u=u[u.length-1],I=_[u],g=g(I),g!=I&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],I;for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&_.push([I,g[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,_){return u.call.apply(u.bind,arguments)}function v(u,g,_){return v=y,v.apply(null,arguments)}function w(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function E(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(I,L,B){for(var re=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)re[Ce-2]=arguments[Ce];return g.prototype[L].apply(I,re)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const g=u.length;if(g>0){const _=Array(g);for(let I=0;I<g;I++)_[I]=u[I];return _}return[]}function H(u,g){for(let I=1;I<arguments.length;I++){const L=arguments[I];var _=typeof L;if(_=_!="object"?_:L?Array.isArray(L)?"array":_:"null",_=="array"||_=="object"&&typeof L.length=="number"){_=u.length||0;const B=L.length||0;u.length=_+B;for(let re=0;re<B;re++)u[_+re]=L[re]}else u.push(L)}}class ${constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function U(u){h.setTimeout(()=>{throw u},0)}function K(){var u=C;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,_){const I=ee.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var ee=new $(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,oe=!1,C=new ne,T=()=>{const u=Promise.resolve(void 0);se=()=>{u.then(N)}};function N(){for(var u;u=K();){try{u.h.call(u.g)}catch(_){U(_)}var g=ee;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}oe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return u})();function b(u){return/^[\s\xa0]*$/.test(u)}function Ue(u,g){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(Ue,R),Ue.prototype.init=function(u,g){const _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),ot=0;function Qe(u,g,_,I,L){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=L,this.key=++ot,this.da=this.fa=!1}function ie(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,g,_){for(const I in u)g.call(_,u[I],I,u)}function ue(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function j(u){const g={};for(const _ in u)g[_]=u[_];return g}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,g){let _,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(_ in I)u[_]=I[_];for(let B=0;B<G.length;B++)_=G[B],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function Ae(u){this.src=u,this.g={},this.h=0}Ae.prototype.add=function(u,g,_,I,L){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const re=ke(u,g,I,L);return re>-1?(g=u[re],_||(g.fa=!1)):(g=new Qe(g,this.src,B,!!I,L),g.fa=_,u.push(g)),g};function Ne(u,g){const _=g.type;if(_ in u.g){var I=u.g[_],L=Array.prototype.indexOf.call(I,g,void 0),B;(B=L>=0)&&Array.prototype.splice.call(I,L,1),B&&(ie(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ke(u,g,_,I){for(let L=0;L<u.length;++L){const B=u[L];if(!B.da&&B.listener==g&&B.capture==!!_&&B.ha==I)return L}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),Fe={};function He(u,g,_,I,L){if(Array.isArray(g)){for(let B=0;B<g.length;B++)He(u,g[B],_,I,L);return null}return _=ii(_),u&&u[ft]?u.J(g,_,p(I)?!!I.capture:!1,L):bt(u,g,_,!1,I,L)}function bt(u,g,_,I,L,B){if(!g)throw Error("Invalid event type");const re=p(L)?!!L.capture:!!L;let Ce=ps(u);if(Ce||(u[Le]=Ce=new Ae(u)),_=Ce.add(g,_,I,re,B),_.proxy)return _;if(I=ds(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)F||(L=re),L===void 0&&(L=!1),u.addEventListener(g.toString(),I,L);else if(u.attachEvent)u.attachEvent(fs(g.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ds(){function u(_){return g.call(u.src,u.listener,_)}const g=si;return u}function ri(u,g,_,I,L){if(Array.isArray(g))for(var B=0;B<g.length;B++)ri(u,g[B],_,I,L);else I=p(I)?!!I.capture:!!I,_=ii(_),u&&u[ft]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],_=ke(g,_,I,L),_>-1&&(ie(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=ps(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ke(g,_,I,L)),(_=u>-1?g[u]:null)&&Ln(_))}function Ln(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ft])Ne(g.i,u);else{var _=u.type,I=u.proxy;g.removeEventListener?g.removeEventListener(_,I,u.capture):g.detachEvent?g.detachEvent(fs(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=ps(g))?(Ne(_,u),_.h==0&&(_.src=null,g[Le]=null)):ie(u)}}}function fs(u){return u in Fe?Fe[u]:Fe[u]="on"+u}function si(u,g){if(u.da)u=!0;else{g=new Ue(g,this);const _=u.listener,I=u.ha||u.src;u.fa&&Ln(u),u=_.call(I,g)}return u}function ps(u){return u=u[Le],u instanceof Ae?u:null}var Dr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ii(u){return typeof u=="function"?u:(u[Dr]||(u[Dr]=function(g){return u.handleEvent(g)}),u[Dr])}function at(){P.call(this),this.i=new Ae(this),this.M=this,this.G=null}E(at,P),at.prototype[ft]=!0,at.prototype.removeEventListener=function(u,g,_,I){ri(this,u,g,_,I)};function Xe(u,g){var _,I=u.G;if(I)for(_=[];I;I=I.G)_.push(I);if(u=u.M,I=g.type||g,typeof g=="string")g=new R(g,u);else if(g instanceof R)g.target=g.target||u;else{var L=g;g=new R(I,u),Se(g,L)}L=!0;let B,re;if(_)for(re=_.length-1;re>=0;re--)B=g.g=_[re],L=mn(B,I,!0,g)&&L;if(B=g.g=u,L=mn(B,I,!0,g)&&L,L=mn(B,I,!1,g)&&L,_)for(re=0;re<_.length;re++)B=g.g=_[re],L=mn(B,I,!1,g)&&L}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let I=0;I<_.length;I++)ie(_[I]);delete u.g[g],u.h--}}this.G=null},at.prototype.J=function(u,g,_,I){return this.i.add(String(u),g,!1,_,I)},at.prototype.K=function(u,g,_,I){return this.i.add(String(u),g,!0,_,I)};function mn(u,g,_,I){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let B=0;B<g.length;++B){const re=g[B];if(re&&!re.da&&re.capture==_){const Ce=re.listener,yt=re.ha||re.src;re.fa&&Ne(u.i,re),L=Ce.call(yt,I)!==!1&&L}}return L&&!I.defaultPrevented}function oi(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:h.setTimeout(u,g||0)}function ms(u){u.g=oi(()=>{u.g=null,u.i&&(u.i=!1,ms(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class aa extends P{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ms(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(u){P.call(this),this.h=u,this.g={}}E(er,P);var ai=[];function jr(u){me(u.g,function(g,_){this.g.hasOwnProperty(_)&&Ln(g)},u),u.g={}}er.prototype.N=function(){er.Z.N.call(this),jr(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=h.JSON.stringify,li=h.JSON.parse,Fr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function tr(){}function Xi(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vr(){R.call(this,"d")}E(Vr,R);function ui(){R.call(this,"c")}E(ui,R);var yn={},gs=null;function rr(){return gs=gs||new at}yn.Ia="serverreachability";function Or(u){R.call(this,yn.Ia,u)}E(Or,R);function Mn(u){const g=rr();Xe(g,new Or(g))}yn.STAT_EVENT="statevent";function Un(u,g){R.call(this,yn.STAT_EVENT,u),this.stat=g}E(Un,R);function rt(u){const g=rr();Xe(g,new Un(g,u))}yn.Ja="timingevent";function ci(u,g){R.call(this,yn.Ja,u),this.size=g}E(ci,R);function ge(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function we(){this.g=!0}we.prototype.ua=function(){this.g=!1};function st(u,g,_,I,L,B){u.info(function(){if(u.g)if(B){var re="",Ce=B.split("&");for(let Ke=0;Ke<Ce.length;Ke++){var yt=Ce[Ke].split("=");if(yt.length>1){const xt=yt[0];yt=yt[1];const Tn=xt.split("_");re=Tn.length>=2&&Tn[1]=="type"?re+(xt+"="+yt+"&"):re+(xt+"=redacted&")}}}else re=null;else re=B;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+g+`
`+_+`
`+re})}function wt(u,g,_,I,L,B,re){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+g+`
`+_+`
`+B+" "+re})}function lt(u,g,_,I){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ir(u,_)+(I?" "+I:"")})}function sr(u,g){u.info(function(){return"TIMEOUT: "+g})}we.prototype.info=function(){};function ir(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var _=B[u];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let re=1;re<I.length;re++)I[re]=""}}}}return gn(B)}catch{return g}}var sn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$t={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ol;function Lr(){}E(Lr,tr),Lr.prototype.g=function(){return new XMLHttpRequest},Ol=new Lr;function or(u){return encodeURIComponent(String(u))}function Yi(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function bn(u,g,_,I){this.j=u,this.i=g,this.l=_,this.S=I||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var Ml={},la={};function zn(u,g,_){u.M=1,u.A=Ur(Nn(g)),u.u=_,u.R=!0,ua(u,null)}function ua(u,g){u.F=Date.now(),hi(u),u.B=Nn(u.A);var _=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),va(_.i,"t",I),u.C=0,_=u.j.L,u.h=new Ll,u.g=Ql(u.j,_?g:null,!u.u),u.P>0&&(u.O=new aa(v(u.Y,u,u.g),u.P)),g=u.V,_=u.g,I=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(ai[0]=L.toString()),L=ai);for(let B=0;B<L.length;B++){const re=He(_,L[B],I||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Mn(),st(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const g=this.O;g&&fr(u)==3?g.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const Ce=fr(this.g),yt=this.g.ya(),Ke=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Kl(this.g)))){this.K||Ce!=4||yt==7||(yt==8||Ke<=0?Mn(3):Mn(2)),Ji(this);var g=this.g.ca();this.X=g;var _=Ul(this);if(this.o=g==200,wt(this.i,this.v,this.B,this.l,this.S,Ce,g),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(I)){var B=I;break t}}B=null}if(u=B)lt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,u);else{this.o=!1,this.m=3,rt(12),Mr(this),di(this);break e}}if(this.R){u=!0;let xt;for(;!this.K&&this.C<_.length;)if(xt=Bl(this,_),xt==la){Ce==4&&(this.m=4,rt(14),u=!1),lt(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Ml){this.m=4,rt(15),lt(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else lt(this.i,this.l,xt,null),Ze(this,xt);if(zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||_.length!=0||this.h.h||(this.m=1,rt(16),u=!1),this.o=this.o&&u,!u)lt(this.i,this.l,_,"[Invalid Chunked Response]"),Mr(this),di(this);else if(_.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),xi(re),re.P=!0,rt(11))}}else lt(this.i,this.l,_,null),Ze(this,_);Ce==4&&Mr(this),this.o&&!this.K&&(Ce==4?lo(this.j,this):(this.o=!1,hi(this)))}else xa(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),Mr(this),di(this)}}}catch{}finally{}};function Ul(u){if(!zl(u))return u.g.la();const g=Kl(u.g);if(g==="")return"";let _="";const I=g.length,L=fr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Mr(u),di(u),"";u.h.i=new h.TextDecoder}for(let B=0;B<I;B++)u.h.h=!0,_+=u.h.i.decode(g[B],{stream:!(L&&B==I-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function zl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Bl(u,g){var _=u.C,I=g.indexOf(`
`,_);return I==-1?la:(_=Number(g.substring(_,I)),isNaN(_)?Ml:(I+=1,I+_>g.length?la:(g=g.slice(I,I+_),u.C=I+_,g)))}bn.prototype.cancel=function(){this.K=!0,Mr(this)};function hi(u){u.T=Date.now()+u.H,ca(u,u.H)}function ca(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ge(v(u.aa,u),g)}function Ji(u){u.D&&(h.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(sr(this.i,this.B),this.M!=2&&(Mn(),rt(17)),Mr(this),this.m=2,di(this)):ca(this,this.T-u)};function di(u){u.j.I==0||u.K||lo(u.j,u)}function Mr(u){Ji(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,jr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ze(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||da(_.h,u))){if(!u.L&&da(_.h,u)&&_.I==3){try{var I=_.Ba.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ao(_),xn(_);else break e;gr(_),rt(18)}}else _.xa=L[1],0<_.xa-_.K&&L[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ge(v(_.Va,_),6e3));fi(_.h)<=1&&_.ta&&(_.ta=void 0)}else En(_,11)}else if((u.L||_.g==u)&&ao(_),!b(g))for(L=_.Ba.g.parse(g),g=0;g<L.length;g++){let Ke=L[g];const xt=Ke[0];if(!(xt<=_.K))if(_.K=xt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const Tn=Ke[3];Tn!=null&&(_.ka=Tn,_.j.info("VER="+_.ka));const Hr=Ke[4];Hr!=null&&(_.za=Hr,_.j.info("SVER="+_.za));const yr=Ke[5];yr!=null&&typeof yr=="number"&&yr>0&&(I=1.5*yr,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const _r=u.g;if(_r){const ho=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ho){var B=I.h;B.g||ho.indexOf("spdy")==-1&&ho.indexOf("quic")==-1&&ho.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(eo(B,B.h),B.h=null))}if(I.G){const Ia=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(I.wa=Ia,$e(I.J,I.G,Ia))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var re=u;if(I.na=Ta(I,I.L?I.ba:null,I.W),re.L){pi(I.h,re);var Ce=re,yt=I.O;yt&&(Ce.H=yt),Ce.D&&(Ji(Ce),hi(Ce)),I.g=re}else qt(I);_.i.length>0&&qr(_)}else Ke[0]!="stop"&&Ke[0]!="close"||En(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?En(_,7):io(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}Mn(4)}catch{}}var Xc=class{constructor(u,g){this.g=u,this.map=g}};function Zi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ha(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fi(u){return u.h?1:u.g?u.g.size:0}function da(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function eo(u,g){u.g?u.g.add(g):u.h=g}function pi(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Zi.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _n(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return O(u.i)}var $l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vn(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const I=u[_].indexOf("=");let L,B=null;I>=0?(L=u[_].substring(0,I),B=u[_].substring(I+1)):L=u[_],g(L,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function ar(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof ar?(this.l=u.l,mi(this,u.j),this.o=u.o,this.g=u.g,lr(this,u.u),this.h=u.h,ys(this,wa(u.i)),this.m=u.m):u&&(g=String(u).match($l))?(this.l=!1,mi(this,g[1]||"",!0),this.o=gi(g[2]||""),this.g=gi(g[3]||"",!0),lr(this,g[4]),this.h=gi(g[5]||"",!0),ys(this,g[6]||"",!0),this.m=gi(g[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}ar.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(yi(g,pa,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(yi(g,pa,!0),"@"),u.push(or(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(yi(_,_.charAt(0)=="/"?_i:ma,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",yi(_,ga)),u.join("")},ar.prototype.resolve=function(u){const g=Nn(this);let _=!!u.j;_?mi(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var I=u.h;if(_)lr(g,u.u);else if(_=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=g.h.lastIndexOf("/");L!=-1&&(I=g.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const B=[];for(let re=0;re<L.length;){const Ce=L[re++];Ce=="."?I&&re==L.length&&B.push(""):Ce==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),I&&re==L.length&&B.push("")):(B.push(Ce),I=!0)}I=B.join("/")}else I=L}return _?g.h=I:_=u.i.toString()!=="",_?ys(g,wa(u.i)):_=!!u.m,_&&(g.m=u.m),g};function Nn(u){return new ar(u)}function mi(u,g,_){u.j=_?gi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function lr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ys(u,g,_){g instanceof Ve?(u.i=g,no(u.i,u.l)):(_||(g=yi(g,Yc)),u.i=new Ve(g,u.l))}function $e(u,g,_){u.i.set(g,_)}function Ur(u){return $e(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function gi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yi(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,fa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var pa=/[#\/\?@]/g,ma=/[#\?:]/g,_i=/[#\?]/g,Yc=/[#\?@]/g,ga=/#/g;function Ve(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ur(u){u.g||(u.g=new Map,u.h=0,u.i&&vn(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Ve.prototype,r.add=function(u,g){ur(this),this.i=null,u=cr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function ya(u,g){ur(u),g=cr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function to(u,g){return ur(u),g=cr(u,g),u.g.has(g)}r.forEach=function(u,g){ur(this),this.g.forEach(function(_,I){_.forEach(function(L){u.call(g,L,I,this)},this)},this)};function _a(u,g){ur(u);let _=[];if(typeof g=="string")to(u,g)&&(_=_.concat(u.g.get(cr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}r.set=function(u,g){return ur(this),this.i=null,u=cr(this,u),to(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=_a(this,u),u.length>0?String(u[0]):g):g};function va(u,g,_){ya(u,g),_.length>0&&(u.i=null,u.g.set(cr(u,g),O(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let I=0;I<g.length;I++){var _=g[I];const L=or(_);_=_a(this,_);for(let B=0;B<_.length;B++){let re=L;_[B]!==""&&(re+="="+or(_[B])),u.push(re)}}return this.i=u.join("&")};function wa(u){const g=new Ve;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function cr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function no(u,g){g&&!u.j&&(ur(u),u.i=null,u.g.forEach(function(_,I){const L=I.toLowerCase();I!=L&&(ya(this,I),va(this,L,_))},u)),u.j=g}function hr(u,g){const _=new we;if(h.Image){const I=new Image;I.onload=w(Vt,_,"TestLoadImage: loaded",!0,g,I),I.onerror=w(Vt,_,"TestLoadImage: error",!1,g,I),I.onabort=w(Vt,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=w(Vt,_,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else g(!1)}function dr(u,g){const _=new we,I=new AbortController,L=setTimeout(()=>{I.abort(),Vt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:I.signal}).then(B=>{clearTimeout(L),B.ok?Vt(_,"TestPingServer: ok",!0,g):Vt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Vt(_,"TestPingServer: error",!1,g)})}function Vt(u,g,_,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(_)}catch{}}function vi(){this.g=new Fr}function zr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(zr,tr),zr.prototype.g=function(){return new wn(this.i,this.h)};function wn(u,g){at.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(wn,at),r=wn.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Bn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||h).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ql(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ql(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?_s(this):Bn(this),this.readyState==3&&ql(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,_s(this))},r.Na=function(u){this.g&&(this.response=u,_s(this))},r.ga=function(){this.g&&_s(this)};function _s(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Bn(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Bn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Hl(u){let g="";return me(u,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function ro(u,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Hl(_),typeof u=="string"?_!=null&&or(_):$e(u,g,_))}function Ge(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ge,at);var Wl=/^https?$/i,Jc=["POST","PUT"];r=Ge.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ol.g(),this.g.onreadystatechange=S(v(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){vs(this,B);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)_.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const B of I.keys())_.set(B,I.get(B));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),L=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Jc,g,void 0)>=0)||I||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,re]of _)this.g.setRequestHeader(B,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){vs(this,B)}};function vs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ws(u),$r(u)}function ws(u){u.A||(u.A=!0,Xe(u,"complete"),Xe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Xe(this,"complete"),Xe(this,"abort"),$r(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$r(this,!0)),Ge.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Br(this):this.Xa())},r.Xa=function(){Br(this)};function Br(u){if(u.h&&typeof l<"u"){if(u.v&&fr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Xe(u,"readystatechange"),fr(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=B===0){let re=String(u.D).match($l)[1]||null;!re&&h.self&&h.self.location&&(re=h.self.location.protocol.slice(0,-1)),I=!Wl.test(re?re.toLowerCase():"")}_=I}if(_)Xe(u,"complete"),Xe(u,"success");else{u.o=6;try{var L=fr(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",ws(u)}}finally{$r(u)}}}}function $r(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||Xe(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function fr(u){return u.g?u.g.readyState:0}r.ca=function(){try{return fr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),li(g)}};function Kl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(u){const g={};u=(u.g&&fr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(b(u[I]))continue;var _=Yi(u[I]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=g[L]||[];g[L]=B,B.push(_)}ue(g,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function so(u){this.za=0,this.i=[],this.j=new we,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pr("baseRetryDelayMs",5e3,u),this.Za=pr("retryDelaySeedMs",1e4,u),this.Ta=pr("forwardChannelMaxRetries",2,u),this.va=pr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Zi(u&&u.concurrentRequestLimit),this.Ba=new vi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=so.prototype,r.ka=8,r.I=1,r.connect=function(u,g,_,I){rt(0),this.W=u,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Ta(this,null,this.W),qr(this)};function io(u){if(oo(u),u.I==3){var g=u.V++,_=Nn(u.J);if($e(_,"SID",u.M),$e(_,"RID",g),$e(_,"TYPE","terminate"),mr(u,_),g=new bn(u,u.j,g),g.M=2,g.A=Ur(Nn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.A,_=!0),_||(g.g=Ql(g.j,null),g.g.ea(g.A)),g.F=Date.now(),hi(g)}Ei(u)}function xn(u){u.g&&(xi(u),u.g.cancel(),u.g=null)}function oo(u){xn(u),u.v&&(h.clearTimeout(u.v),u.v=null),ao(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function qr(u){if(!ha(u.h)&&!u.m){u.m=!0;var g=u.Ea;se||T(),oe||(se(),oe=!0),C.add(g,u),u.D=0}}function Gl(u,g){return fi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ge(v(u.Ea,u,g),uo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new bn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=j(B),Se(B,this.U)):B=this.U),this.u!==null||this.R||(L.J=B,B=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ea(this,L,g),_=Nn(this.J),$e(_,"RID",u),$e(_,"CVER",22),this.G&&$e(_,"X-HTTP-Session-Id",this.G),mr(this,_),B&&(this.R?g="headers="+or(Hl(B))+"&"+g:this.u&&ro(_,this.u,B)),eo(this.h,L),this.Ra&&$e(_,"TYPE","init"),this.S?($e(_,"$req",g),$e(_,"SID","null"),L.U=!0,zn(L,_,null)):zn(L,_,g),this.I=2}}else this.I==3&&(u?wi(this,u):this.i.length==0||ha(this.h)||wi(this))};function wi(u,g){var _;g?_=g.l:_=u.V++;const I=Nn(u.J);$e(I,"SID",u.M),$e(I,"RID",_),$e(I,"AID",u.K),mr(u,I),u.u&&u.o&&ro(I,u.u,u.o),_=new bn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ea(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),eo(u.h,_),zn(_,I,g)}function mr(u,g){u.H&&me(u.H,function(_,I){$e(g,I,_)}),u.l&&me({},function(_,I){$e(g,I,_)})}function Ea(u,g,_){_=Math.min(u.i.length,_);const I=u.l?v(u.l.Ka,u.l,u):null;e:{var L=u.i;let Ce=-1;for(;;){const yt=["count="+_];Ce==-1?_>0?(Ce=L[0].g,yt.push("ofs="+Ce)):Ce=0:yt.push("ofs="+Ce);let Ke=!0;for(let xt=0;xt<_;xt++){var B=L[xt].g;const Tn=L[xt].map;if(B-=Ce,B<0)Ce=Math.max(0,L[xt].g-100),Ke=!1;else try{B="req"+B+"_"||"";try{var re=Tn instanceof Map?Tn:Object.entries(Tn);for(const[Hr,yr]of re){let _r=yr;p(yr)&&(_r=gn(yr)),yt.push(B+Hr+"="+encodeURIComponent(_r))}}catch(Hr){throw yt.push(B+"type="+encodeURIComponent("_badmap")),Hr}}catch{I&&I(Tn)}}if(Ke){re=yt.join("&");break e}}re=void 0}return u=u.i.splice(0,_),g.G=u,re}function qt(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;se||T(),oe||(se(),oe=!0),C.add(g,u),u.A=0}}function gr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ge(v(u.Da,u),uo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,xs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ge(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),xn(this),xs(this))};function xi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function xs(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Nn(u.na);$e(g,"RID","rpc"),$e(g,"SID",u.M),$e(g,"AID",u.K),$e(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&$e(g,"TO",u.ia),$e(g,"TYPE","xmlhttp"),mr(u,g),u.u&&u.o&&ro(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ur(Nn(g)),_.u=null,_.R=!0,ua(_,u)}r.Va=function(){this.C!=null&&(this.C=null,xn(this),gr(this),rt(19))};function ao(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function lo(u,g){var _=null;if(u.g==g){ao(u),xi(u),u.g=null;var I=2}else if(da(u.h,g))_=g.G,pi(u.h,g),I=1;else return;if(u.I!=0){if(g.o)if(I==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;I=rr(),Xe(I,new ci(I,_)),qr(u)}else qt(u);else if(L=g.m,L==3||L==0&&g.X>0||!(I==1&&Gl(u,g)||I==2&&gr(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),L){case 1:En(u,5);break;case 4:En(u,10);break;case 3:En(u,6);break;default:En(u,2)}}}function uo(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function En(u,g){if(u.j.info("Error code "+g),g==2){var _=v(u.bb,u),I=u.Ua;const L=!I;I=new ar(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||mi(I,"https"),Ur(I),L?hr(I.toString(),_):dr(I.toString(),_)}else rt(2);u.I=0,u.l&&u.l.pa(g),Ei(u),oo(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Ei(u){if(u.I=0,u.ja=[],u.l){const g=_n(u.h);(g.length!=0||u.i.length!=0)&&(H(u.ja,g),H(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Ta(u,g,_){var I=_ instanceof ar?Nn(_):new ar(_);if(I.g!="")g&&(I.g=g+"."+I.g),lr(I,I.u);else{var L=h.location;I=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const B=new ar(null);I&&mi(B,I),g&&(B.g=g),L&&lr(B,L),_&&(B.h=_),I=B}return _=u.G,g=u.wa,_&&g&&$e(I,_,g),$e(I,"VER",u.ka),mr(u,I),I}function Ql(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Ge(new zr({ab:_})):new Ge(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}r=Xl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function co(){}co.prototype.g=function(u,g){return new Ot(u,g)};function Ot(u,g){at.call(this),this.g=new so(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!b(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Es(this)}E(Ot,at),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){io(this.g)},Ot.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=gn(u),u=_);g.i.push(new Xc(g.Ya++,u)),g.I==3&&qr(g)},Ot.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,Ot.Z.N.call(this)};function Yl(u){Vr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Yl,Vr);function Jl(){ui.call(this),this.status=1}E(Jl,ui);function Es(u){this.g=u}E(Es,Xl),Es.prototype.ra=function(){Xe(this.g,"a")},Es.prototype.qa=function(u){Xe(this.g,new Yl(u))},Es.prototype.pa=function(u){Xe(this.g,new Jl)},Es.prototype.oa=function(){Xe(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,G_=function(){return new co},K_=function(){return rr()},W_=yn,Qd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sn.NO_ERROR=0,sn.TIMEOUT=8,sn.HTTP_ERROR=6,Ju=sn,$t.COMPLETE="complete",H_=$t,Xi.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",at.prototype.listen=at.prototype.J,Xa=Xi,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,q_=Ge}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const ey="@firebase/firestore",ty="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Tf("@firebase/firestore");function jo(){return qi.logLevel}function ce(r,...e){if(qi.logLevel<=Pe.DEBUG){const t=e.map(Af);qi.debug(`Firestore (${ta}): ${r}`,...t)}}function ls(r,...e){if(qi.logLevel<=Pe.ERROR){const t=e.map(Af);qi.error(`Firestore (${ta}): ${r}`,...t)}}function Ho(r,...e){if(qi.logLevel<=Pe.WARN){const t=e.map(Af);qi.warn(`Firestore (${ta}): ${r}`,...t)}}function Af(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Q_(r,i,t)}function Q_(r,e,t){let i=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ls(i),new Error(i)}function We(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||Q_(e,o,i)}function be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends hs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Xt.UNAUTHENTICATED)))}shutdown(){}}class C1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class b1{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new os;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new os,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new os)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new X_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class N1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class k1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new N1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ny{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ny(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ny(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=P1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function De(r,e){return r<e?-1:r>e?1:0}function Xd(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return Rd(o)===Rd(l)?De(o,l):Rd(o)?1:-1}return De(r.length,e.length)}const D1=55296,j1=57343;function Rd(r){const e=r.charCodeAt(0);return e>=D1&&e<=j1}function Wo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="__name__";class Tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&xe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const i=Tr.isNumericId(e),o=Tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):Xd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class Je extends Tr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const F1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Tr{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return F1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ry}static keyField(){return new zt([ry])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ae(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ae(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new ae(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Je.fromString(e))}static fromName(e){return new ye(Je.fromString(e).popFirst(5))}static empty(){return new ye(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(r,e,t){if(!t)throw new ae(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function V1(r,e,t,i){if(e===!0&&i===!0)throw new ae(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function sy(r){if(!ye.isDocumentKey(r))throw new ae(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function iy(r){if(ye.isDocumentKey(r))throw new ae(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function J_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function kc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xe(12329,{type:typeof r})}function nn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kc(r);throw new ae(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r,e){const t={typeString:r};return e&&(t.value=e),t}function Tl(r,e){if(!J_(r))throw new ae(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-62135596800,ay=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ay);return new nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oy)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ay}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tl(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:At("string",nt._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new nt(0,0))}static max(){return new Ie(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function O1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new Gs(o,ye.empty(),e)}function L1(r){return new Gs(r.readTime,r.key,dl)}class Gs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Gs(Ie.min(),ye.empty(),dl)}static max(){return new Gs(Ie.max(),ye.empty(),dl)}}function M1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==U1)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,i)=>{t(e)}))}static reject(e){return new Q(((t,i)=>{i(e)}))}static waitFor(e){return new Q(((t,i)=>{let o=0,l=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++l,h&&l===o&&t()}),(y=>i(y)))})),h=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next((o=>o?Q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Q(((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((w=>{h[v]=w,++p,p===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new Q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function B1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ra(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=-1;function Pc(r){return r==null}function hc(r){return r===0&&1/r==-1/0}function $1(r){return typeof r=="number"&&Number.isInteger(r)&&!hc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="";function q1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ly(e)),e=H1(r.get(t),e);return ly(e)}function H1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Z_:t+="";break;default:t+=l}}return t}function ly(r){return r+Z_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ei(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ev(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ut.RED,this.left=o??Ut.EMPTY,this.right=l??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ut(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cy(this.data.getIterator())}getIteratorFrom(e){return new cy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rt(this.comparator);return t.data=e,t}}class cy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new Rt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tv("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const W1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=W1.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vt(r.seconds),nanos:vt(r.nanos)}}function vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Xs(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="server_timestamp",rv="__type__",sv="__previous_value__",iv="__local_write_time__";function Nf(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[rv])==null?void 0:i.stringValue)===nv}function Dc(r){const e=r.mapValue.fields[sv];return Nf(e)?Dc(e):e}function fl(r){const e=Qs(r.mapValue.fields[iv].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t,i,o,l,h,p,y,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=w}}const dc="(default)";class pl{constructor(e,t){this.projectId=e,this.database=t||dc}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database===dc}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="__type__",G1="__max__",Gu={mapValue:{}},av="__vector__",fc="value";function Ys(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Nf(r)?4:X1(r)?9007199254740991:Q1(r)?10:11:xe(28295,{value:r})}function kr(r,e){if(r===e)return!0;const t=Ys(r);if(t!==Ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return fl(r).isEqual(fl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Qs(o.timestampValue),p=Qs(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Xs(o.bytesValue).isEqual(Xs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return vt(o.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return vt(o.integerValue)===vt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=vt(o.doubleValue),p=vt(l.doubleValue);return h===p?hc(h)===hc(p):isNaN(h)&&isNaN(p)}return!1})(r,e);case 9:return Wo(r.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(uy(h)!==uy(p))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(p[y]===void 0||!kr(h[y],p[y])))return!1;return!0})(r,e);default:return xe(52216,{left:r})}}function ml(r,e){return(r.values||[]).find((t=>kr(t,e)))!==void 0}function Ko(r,e){if(r===e)return 0;const t=Ys(r),i=Ys(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const p=vt(l.integerValue||l.doubleValue),y=vt(h.integerValue||h.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,e);case 3:return hy(r.timestampValue,e.timestampValue);case 4:return hy(fl(r),fl(e));case 5:return Xd(r.stringValue,e.stringValue);case 6:return(function(l,h){const p=Xs(l),y=Xs(h);return p.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const p=l.split("/"),y=h.split("/");for(let v=0;v<p.length&&v<y.length;v++){const w=De(p[v],y[v]);if(w!==0)return w}return De(p.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const p=De(vt(l.latitude),vt(h.latitude));return p!==0?p:De(vt(l.longitude),vt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return dy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var S,O,H,$;const p=l.fields||{},y=h.fields||{},v=(S=p[fc])==null?void 0:S.arrayValue,w=(O=y[fc])==null?void 0:O.arrayValue,E=De(((H=v==null?void 0:v.values)==null?void 0:H.length)||0,(($=w==null?void 0:w.values)==null?void 0:$.length)||0);return E!==0?E:dy(v,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Gu.mapValue&&h===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(h===Gu.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),v=h.fields||{},w=Object.keys(v);y.sort(),w.sort();for(let E=0;E<y.length&&E<w.length;++E){const S=Xd(y[E],w[E]);if(S!==0)return S;const O=Ko(p[y[E]],v[w[E]]);if(O!==0)return O}return De(y.length,w.length)})(r.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function hy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=Qs(r),i=Qs(e),o=De(t.seconds,i.seconds);return o!==0?o:De(t.nanos,i.nanos)}function dy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ko(t[o],i[o]);if(l)return l}return De(t.length,i.length)}function Go(r){return Yd(r)}function Yd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Qs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Xs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Yd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Yd(t.fields[h])}`;return o+"}"})(r.mapValue):xe(61005,{value:r})}function Zu(r){switch(Ys(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Xs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Zu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ei(i.fields,((l,h)=>{o+=l.length+Zu(h)})),o})(r.mapValue);default:throw xe(13486,{value:r})}}function fy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Jd(r){return!!r&&"integerValue"in r}function kf(r){return!!r&&"arrayValue"in r}function py(r){return!!r&&"nullValue"in r}function my(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function Q1(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[ov])==null?void 0:i.stringValue)===av}function rl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ei(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=rl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rl(r.arrayValue.values[t]);return e}return{...r}}function X1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===G1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(t)}setAll(e){let t=zt.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=rl(h):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ei(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new fn(rl(this.value))}}function lv(r){const e=[];return ei(r.fields,((t,i)=>{const o=new zt([t]);if(ec(i)){const l=lv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Jt(e,0,Ie.min(),Ie.min(),Ie.min(),fn.empty(),0)}static newFoundDocument(e,t,i,o){return new Jt(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new Jt(e,2,t,Ie.min(),Ie.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Ie.min(),Ie.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.position=e,this.inclusive=t}}function gy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=Ko(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function yy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{}class St extends uv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Z1(e,t,i):t==="array-contains"?new nT(e,i):t==="in"?new rT(e,i):t==="not-in"?new sT(e,i):t==="array-contains-any"?new iT(e,i):new St(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eT(e,i):new tT(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ko(t,this.value)):t!==null&&Ys(this.value)===Ys(t)&&this.matchesComparison(Ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends uv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Jn(e,t)}matches(e){return cv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cv(r){return r.op==="and"}function hv(r){return J1(r)&&cv(r)}function J1(r){for(const e of r.filters)if(e instanceof Jn)return!1;return!0}function Zd(r){if(r instanceof St)return r.field.canonicalString()+r.op.toString()+Go(r.value);if(hv(r))return r.filters.map((e=>Zd(e))).join(",");{const e=r.filters.map((t=>Zd(t))).join(",");return`${r.op}(${e})`}}function dv(r,e){return r instanceof St?(function(i,o){return o instanceof St&&i.op===o.op&&i.field.isEqual(o.field)&&kr(i.value,o.value)})(r,e):r instanceof Jn?(function(i,o){return o instanceof Jn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,p)=>l&&dv(h,o.filters[p])),!0):!1})(r,e):void xe(19439)}function fv(r){return r instanceof St?(function(t){return`${t.field.canonicalString()} ${t.op} ${Go(t.value)}`})(r):r instanceof Jn?(function(t){return t.op.toString()+" {"+t.getFilters().map(fv).join(" ,")+"}"})(r):"Filter"}class Z1 extends St{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class eT extends St{constructor(e,t){super(e,"in",t),this.keys=pv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tT extends St{constructor(e,t){super(e,"not-in",t),this.keys=pv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function pv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class nT extends St{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kf(t)&&ml(t.arrayValue,this.value)}}class rT extends St{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ml(this.value.arrayValue,t)}}class sT extends St{constructor(e,t){super(e,"not-in",t)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ml(this.value.arrayValue,t)}}class iT extends St{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ml(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Te=null}}function _y(r,e=null,t=[],i=[],o=null,l=null,h=null){return new oT(r,e,t,i,o,l,h)}function Rf(r){const e=be(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Zd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Go(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Go(i))).join(",")),e.Te=t}return e.Te}function Pf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Y1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!dv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!yy(r.startAt,e.startAt)&&yy(r.endAt,e.endAt)}function ef(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aT(r,e,t,i,o,l,h,p){return new sa(r,e,t,i,o,l,h,p)}function jc(r){return new sa(r)}function vy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function mv(r){return r.collectionGroup!==null}function sl(r){const e=be(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Rt(zt.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new gl(l,i))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new gl(zt.keyField(),i))}return e.Ie}function Sr(r){const e=be(r);return e.Ee||(e.Ee=lT(e,sl(r))),e.Ee}function lT(r,e){if(r.limitType==="F")return _y(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new gl(o.field,l)}));const t=r.endAt?new pc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new pc(r.startAt.position,r.startAt.inclusive):null;return _y(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function tf(r,e){const t=r.filters.concat([e]);return new sa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function nf(r,e,t){return new sa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Fc(r,e){return Pf(Sr(r),Sr(e))&&r.limitType===e.limitType}function gv(r){return`${Rf(Sr(r))}|lt:${r.limitType}`}function Fo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>fv(o))).join(", ")}]`),Pc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Go(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Go(o))).join(",")),`Target(${i})`})(Sr(r))}; limitType=${r.limitType})`}function Vc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of sl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,y){const v=gy(h,p,y);return h.inclusive?v<=0:v<0})(i.startAt,sl(i),o)||i.endAt&&!(function(h,p,y){const v=gy(h,p,y);return h.inclusive?v>=0:v>0})(i.endAt,sl(i),o))})(r,e)}function uT(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function yv(r){return(e,t)=>{let i=!1;for(const o of sl(r)){const l=cT(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function cT(r,e,t){const i=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,p){const y=h.data.field(l),v=p.data.field(l);return y!==null&&v!==null?Ko(y,v):xe(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return ev(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=new dt(ye.comparator);function us(){return hT}const _v=new dt(ye.comparator);function Ya(...r){let e=_v;for(const t of r)e=e.insert(t.key,t);return e}function vv(r){let e=_v;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Vi(){return il()}function wv(){return il()}function il(){return new Ki((r=>r.toString()),((r,e)=>r.isEqual(e)))}const dT=new dt(ye.comparator),fT=new Rt(ye.comparator);function je(...r){let e=fT;for(const t of r)e=e.add(t);return e}const pT=new Rt(De);function mT(){return pT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function xv(r){return{integerValue:""+r}}function gT(r,e){return $1(e)?xv(e):Df(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function yT(r,e,t){return r instanceof yl?(function(o,l){const h={fields:{[rv]:{stringValue:nv},[iv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Nf(l)&&(l=Dc(l)),l&&(h.fields[sv]=l),{mapValue:h}})(t,e):r instanceof _l?Tv(r,e):r instanceof vl?Iv(r,e):(function(o,l){const h=Ev(o,l),p=wy(h)+wy(o.Ae);return Jd(h)&&Jd(o.Ae)?xv(p):Df(o.serializer,p)})(r,e)}function _T(r,e,t){return r instanceof _l?Tv(r,e):r instanceof vl?Iv(r,e):t}function Ev(r,e){return r instanceof mc?(function(i){return Jd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class yl extends Oc{}class _l extends Oc{constructor(e){super(),this.elements=e}}function Tv(r,e){const t=Sv(e);for(const i of r.elements)t.some((o=>kr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class vl extends Oc{constructor(e){super(),this.elements=e}}function Iv(r,e){let t=Sv(e);for(const i of r.elements)t=t.filter((o=>!kr(o,i)));return{arrayValue:{values:t}}}class mc extends Oc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wy(r){return vt(r.integerValue||r.doubleValue)}function Sv(r){return kf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.field=e,this.transform=t}}function wT(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof _l&&o instanceof _l||i instanceof vl&&o instanceof vl?Wo(i.elements,o.elements,kr):i instanceof mc&&o instanceof mc?kr(i.Ae,o.Ae):i instanceof yl&&o instanceof yl})(r.transform,e.transform)}class xT{constructor(e,t){this.version=e,this.transformResults=t}}class rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Lc{}function Av(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Mc(r.key,rn.none()):new Il(r.key,r.data,rn.none());{const t=r.data,i=fn.empty();let o=new Rt(zt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new ti(r.key,i,new Cn(o.toArray()),rn.none())}}function ET(r,e,t){r instanceof Il?(function(o,l,h){const p=o.value.clone(),y=Ey(o.fieldTransforms,l,h.transformResults);p.setAll(y),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):r instanceof ti?(function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=Ey(o.fieldTransforms,l,h.transformResults),y=l.data;y.setAll(Cv(o)),y.setAll(p),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ol(r,e,t,i){return r instanceof Il?(function(l,h,p,y){if(!tc(l.precondition,h))return p;const v=l.value.clone(),w=Ty(l.fieldTransforms,y,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof ti?(function(l,h,p,y){if(!tc(l.precondition,h))return p;const v=Ty(l.fieldTransforms,y,h),w=h.data;return w.setAll(Cv(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(l,h,p){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(r,e,t)}function TT(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=Ev(i.transform,o||null);l!=null&&(t===null&&(t=fn.empty()),t.set(i.field,l))}return t||null}function xy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Wo(i,o,((l,h)=>wT(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Il extends Lc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ti extends Lc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Cv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Ey(r,e,t){const i=new Map;We(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,_T(h,p,t[o]))}return i}function Ty(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,yT(l,h,e))}return i}class Mc extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IT extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&ET(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ol(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ol(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=wv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const y=Av(h,p);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,((t,i)=>xy(t,i)))&&Wo(this.baseMutations,e.baseMutations,((t,i)=>xy(t,i)))}}class jf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return dT})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new jf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Oe;function bT(r){switch(r){case W.OK:return xe(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return xe(15467,{code:r})}}function bv(r){if(r===void 0)return ls("GRPC error has no .code"),W.UNKNOWN;switch(r){case Tt.OK:return W.OK;case Tt.CANCELLED:return W.CANCELLED;case Tt.UNKNOWN:return W.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return W.INTERNAL;case Tt.UNAVAILABLE:return W.UNAVAILABLE;case Tt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Tt.NOT_FOUND:return W.NOT_FOUND;case Tt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Tt.ABORTED:return W.ABORTED;case Tt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Tt.DATA_LOSS:return W.DATA_LOSS;default:return xe(39323,{code:r})}}(Oe=Tt||(Tt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Ws([4294967295,4294967295],0);function Iy(r){const e=NT().encode(r),t=new $_;return t.update(e),new Uint8Array(t.digest())}function Sy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ws([t,i],0),new Ws([o,l],0)]}class Ff{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ja(`Invalid padding: ${t}`);if(i<0)throw new Ja(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ws.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ws.fromNumber(i)));return o.compare(kT)===1&&(o=new Ws([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Iy(e),[i,o]=Sy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Ff(l,o,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=Iy(e),[i,o]=Sy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Uc(Ie.min(),o,new dt(De),us(),je())}}class Sl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Sl(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Nv{constructor(e,t){this.targetId=e,this.Ce=t}}class kv{constructor(e,t,i=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ay{constructor(){this.ve=0,this.Fe=Cy(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:xe(38017,{changeType:l})}})),new Sl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Cy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RT{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=Qu(),this.He=Qu(),this.Ye=new dt(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(ef(l))if(i===0){const h=new ye(l.path);this.et(t,h,Jt.newNoDocument(h,Ie.min()))}else We(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const p=this.ut(e),y=p?this.ct(p,e,h):1;if(y!==0){this.it(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=Xs(i).toUint8Array()}catch(y){if(y instanceof tv)return Ho("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Ff(h,o,l)}catch(y){return Ho(y instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const p=this.ot(h);if(p){if(l.current&&ef(p.target)){const y=new ye(p.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,Jt.newNoDocument(y,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=je();this.He.forEach(((l,h)=>{let p=!0;h.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Uc(e,t,this.Ye,this.je,i);return this.je=us(),this.Je=Qu(),this.He=Qu(),this.Ye=new dt(De),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ay,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rt(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rt(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ay),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qu(){return new dt(ye.comparator)}function Cy(){return new dt(ye.comparator)}const PT={asc:"ASCENDING",desc:"DESCENDING"},DT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jT={and:"AND",or:"OR"};class FT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rf(r,e){return r.useProto3Json||Pc(e)?e:{value:e}}function gc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function VT(r,e){return gc(r,e.toTimestamp())}function Ar(r){return We(!!r,49232),Ie.fromTimestamp((function(t){const i=Qs(t);return new nt(i.seconds,i.nanos)})(r))}function Vf(r,e){return sf(r,e).canonicalString()}function sf(r,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Pv(r){const e=Je.fromString(r);return We(Ov(e),10190,{key:e.toString()}),e}function of(r,e){return Vf(r.databaseId,e.path)}function Pd(r,e){const t=Pv(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(jv(t))}function Dv(r,e){return Vf(r.databaseId,e)}function OT(r){const e=Pv(r);return e.length===4?Je.emptyPath():jv(e)}function af(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jv(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function by(r,e,t){return{name:of(r,e),fields:t.value.mapValue.fields}}function LT(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:xe(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(We(w===void 0||typeof w=="string",58123),Bt.fromBase64String(w||"")):(We(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Bt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(v){const w=v.code===void 0?W.UNKNOWN:bv(v.code);return new ae(w,v.message||"")})(h);t=new kv(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Pd(r,i.document.name),l=Ar(i.document.updateTime),h=i.document.createTime?Ar(i.document.createTime):Ie.min(),p=new fn({mapValue:{fields:i.document.fields}}),y=Jt.newFoundDocument(o,l,h,p),v=i.targetIds||[],w=i.removedTargetIds||[];t=new nc(v,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Pd(r,i.document),l=i.readTime?Ar(i.readTime):Ie.min(),h=Jt.newNoDocument(o,l),p=i.removedTargetIds||[];t=new nc([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Pd(r,i.document),l=i.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new CT(o,l),p=i.targetId;t=new Nv(p,h)}}return t}function MT(r,e){let t;if(e instanceof Il)t={update:by(r,e.key,e.value)};else if(e instanceof Mc)t={delete:of(r,e.key)};else if(e instanceof ti)t={update:by(r,e.key,e.data),updateMask:GT(e.fieldMask)};else{if(!(e instanceof IT))return xe(16599,{Vt:e.type});t={verify:of(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const p=h.transform;if(p instanceof yl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof _l)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof vl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof mc)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw xe(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:VT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(r,e.precondition)),t}function UT(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Ar(o.updateTime):Ar(l);return h.isEqual(Ie.min())&&(h=Ar(l)),new xT(h,o.transformResults||[])})(t,e)))):[]}function zT(r,e){return{documents:[Dv(r,e.path)]}}function BT(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Dv(r,o);const l=(function(v){if(v.length!==0)return Vv(Jn.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(S){return{field:Vo(S.field),direction:HT(S.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=rf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function $T(r){let e=OT(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const S=Fv(E);return S instanceof Jn&&hv(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((S=>(function(H){return new gl(Oo(H.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let S;return S=typeof E=="object"?E.value:E,Pc(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,O=E.values||[];return new pc(O,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const S=!E.before,O=E.values||[];return new pc(O,S)})(t.endAt)),aT(e,o,h,l,p,"F",y,v)}function qT(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Fv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Oo(t.unaryFilter.field);return St.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(t.unaryFilter.field);return St.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oo(t.unaryFilter.field);return St.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Oo(t.unaryFilter.field);return St.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return St.create(Oo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Jn.create(t.compositeFilter.filters.map((i=>Fv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(r):xe(30097,{filter:r})}function HT(r){return PT[r]}function WT(r){return DT[r]}function KT(r){return jT[r]}function Vo(r){return{fieldPath:r.canonicalString()}}function Oo(r){return zt.fromServerFormat(r.fieldPath)}function Vv(r){return r instanceof St?(function(t){if(t.op==="=="){if(my(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NAN"}};if(py(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(my(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NAN"}};if(py(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(t.field),op:WT(t.op),value:t.value}}})(r):r instanceof Jn?(function(t){const i=t.getFilters().map((o=>Vv(o)));return i.length===1?i[0]:{compositeFilter:{op:KT(t.op),filters:i}}})(r):xe(54877,{filter:r})}function GT(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ov(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,i,o,l=Ie.min(),h=Ie.min(),p=Bt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.yt=e}}function XT(r){const e=$T({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.Cn=new JT}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Gs.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class JT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Rt(Je.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Rt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lv=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(Lv,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qo(0)}static cr(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="LruGarbageCollector",ZT=1048576;function Ry([r,e],[t,i]){const o=De(r,t);return o===0?De(e,i):o}class e2{constructor(e){this.Ir=e,this.buffer=new Rt(Ry),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ry(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class t2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(ky,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ra(t)?ce(ky,"Ignoring IndexedDB error during garbage collection: ",t):await na(t)}await this.Vr(3e5)}))}}class n2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(Rc.ce);const i=new e2(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Ny)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ny):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,p,y,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(v=Date.now(),jo()<=Pe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${E} documents in `+(v-y)+`ms
Total Duration: ${v-w}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function r2(r,e){return new n2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.changes=new Ki((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ol(i.mutation,o,Cn.empty(),nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const o=Vi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ya();return l.forEach(((p,y)=>{h=h.insert(p,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Vi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,o){let l=us();const h=il(),p=(function(){return il()})();return t.forEach(((y,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof ti)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),ol(w.mutation,v,w.mutation.getFieldMask(),nt.now())):h.set(v.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>p.set(v,new i2(w,h.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=il();let o=new dt(((h,p)=>h-p)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let w=i.get(y)||Cn.empty();w=p.applyToLocalView(v,w),i.set(y,w);const E=(o.get(p.batchId)||je()).add(y);o=o.insert(p.batchId,E)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,w=y.value,E=wv();w.forEach((S=>{if(!l.has(S)){const O=Av(t.get(S),i.get(S));O!==null&&E.set(S,O),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,E))}return Q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Q.resolve(Vi());let p=dl,y=l;return h.next((v=>Q.forEach(v,((w,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(w)?Q.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{y=y.insert(w,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,je()))).next((w=>({batchId:p,changes:vv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let o=Ya();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ya();return this.indexManager.getCollectionParents(e,l).next((p=>Q.forEach(p,(y=>{const v=(function(E,S){return new sa(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((E,S)=>{h=h.insert(E,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((y,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Jt.newInvalidDocument(w)))}));let p=Ya();return h.forEach(((y,v)=>{const w=l.get(y);w!==void 0&&ol(w.mutation,v,Cn.empty(),nt.now()),Vc(t,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ar(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:XT(o.bundledQuery),readTime:Ar(o.readTime)}})(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.overlays=new dt(ye.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Vi();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=Vi(),l=t.length+1,h=new ye(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new dt(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=Vi(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=Vi(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,w)=>p.set(v,w))),!(p.size()>=o)););return Q.resolve(p)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new AT(t,i));let l=this.qr.get(t);l===void 0&&(l=je(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.Qr=new Rt(Ft.$r),this.Ur=new Rt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ye(new Je([])),i=new Ft(t,e),o=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Je([])),i=new Ft(t,e),o=new Ft(t,e+1);let l=je();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ft(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rt(Ft.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ST(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new Ft(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Q.resolve(h)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?bf:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const p=this.Xr(h.Yr);l.push(p)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Rt(De);return t.forEach((o=>{const l=new Ft(o,0),h=new Ft(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(p=>{i=i.add(p.Yr)}))})),Q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const h=new Ft(new ye(l),0);let p=new Rt(De);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(y.Yr)),!0)}),h),Q.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Q.forEach(t.mutations,(o=>{const l=new Ft(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ft(t,0),o=this.Zr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.ri=e,this.docs=(function(){return new dt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let i=us();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Jt.newInvalidDocument(o))})),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=us();const h=t.path,p=new ye(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:w}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||M1(L1(w),i)<=0||(o.has(w.key)||Vc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){xe(9500)}ii(e,t){return Q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new d2(this)}getSize(e){return Q.resolve(this.size)}}class d2 extends s2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.persistence=e,this.si=new Ki((t=>Rf(t)),Pf),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Of,this.targetCount=0,this.ai=Qo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Qo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rc(0),this.li=!1,this.li=!0,this.hi=new u2,this.referenceDelegate=e(this),this.Pi=new f2(this),this.indexManager=new YT,this.remoteDocumentCache=(function(o){return new h2(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new QT(t),this.Ii=new a2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new l2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new c2(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const o=new p2(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return Q.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class p2 extends z1{constructor(e){super(),this.currentSequenceNumber=e}}class Lf{constructor(e){this.persistence=e,this.Ri=new Of,this.Vi=null}static mi(e){return new Lf(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(i=>{const o=ye.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class yc{constructor(e,t){this.persistence=e,this.pi=new Ki((i=>q1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=r2(this,t)}static mi(e,t){return new yc(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return Q.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((p=>{p||(i++,l.removeEntry(h,Ie.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}br(e,t,i){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Mf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oE()?8:B1(Zt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new m2;return this.Ss(e,t,h).next((p=>{if(l.result=p,this.Vs)return this.bs(e,t,h,p.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(jo()<=Pe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(jo()<=Pe.DEBUG&&ce("QueryEngine","Query:",Fo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(jo()<=Pe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):Q.resolve())}ys(e,t){if(vy(t))return Q.resolve(null);let i=Sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=nf(t,null,"F"),i=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=je(...l);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.Ds(t,p);return this.Cs(t,v,h,y.readTime)?this.ys(e,nf(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ws(e,t,i,o){return vy(t)||o.isEqual(Ie.min())?Q.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?Q.resolve(null):(jo()<=Pe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.vs(e,h,t,O1(o,dl)).next((p=>p)))}))}Ds(e,t){let i=new Rt(yv(e));return t.forEach(((o,l)=>{Vc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return jo()<=Pe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.ps.getDocumentsMatchingQuery(e,t,Gs.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="LocalStore",y2=3e8;class _2{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new dt(De),this.xs=new Ki((l=>Rf(l)),Pf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function v2(r,e,t,i){return new _2(r,e,t,i)}async function Uv(r,e){const t=be(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],p=[];let y=je();for(const v of o){h.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:p})))}))}))}function w2(r,e){const t=be(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,w){const E=v.batch,S=E.keys();let O=Q.resolve();return S.forEach((H=>{O=O.next((()=>w.getEntry(y,H))).next(($=>{const U=v.docVersions.get(H);We(U!==null,48541),$.version.compareTo(U)<0&&(E.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),w.addEntry($)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(y,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let y=je();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function zv(r){const e=be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function x2(r,e){const t=be(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const p=[];e.targetChanges.forEach(((w,E)=>{const S=o.get(E);if(!S)return;p.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,E))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Bt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),o=o.insert(E,O),(function($,U,K){return $.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=y2?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,O,w)&&p.push(t.Pi.updateTargetData(l,O))}));let y=us(),v=je();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(E2(l,h,e.documentUpdates).next((w=>{y=w.ks,v=w.qs}))),!i.isEqual(Ie.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(w)}return Q.waitFor(p).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Ms=o,l)))}function E2(r,e,t){let i=je(),o=je();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=us();return t.forEach(((p,y)=>{const v=l.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(Ie.min())?(e.removeEntry(p,y.readTime),h=h.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(p,y)):ce(Uf,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function T2(r,e){const t=be(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=bf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function I2(r,e){const t=be(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,Q.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Bs(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function lf(r,e,t){const i=be(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ra(h))throw h;ce(Uf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Py(r,e,t){const i=be(r);let o=Ie.min(),l=je();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,v,w){const E=be(y),S=E.xs.get(w);return S!==void 0?Q.resolve(E.Ms.get(S)):E.Pi.getTargetData(v,w)})(i,h,Sr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,p.targetId).next((y=>{l=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Ie.min(),t?l:je()))).next((p=>(S2(i,uT(e),p),{documents:p,Qs:l})))))}function S2(r,e,t){let i=r.Os.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Dy{constructor(){this.activeTargetIds=mT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A2{constructor(){this.Mo=new Dy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="ConnectivityMonitor";class Fy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(jy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu=null;function uf(){return Xu===null?Xu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xu++,"0x"+Xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="RestConnection",b2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===dc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=uf(),p=this.zo(e,t.toUriEncodedString());ce(Dd,`Sending RPC '${e}' ${h}:`,p,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,l);const{host:v}=new URL(p),w=Zo(v);return this.Jo(e,p,y,i,w).then((E=>(ce(Dd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Ho(Dd,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ta})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=b2[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class R2 extends N2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=uf();return new Promise(((p,y)=>{const v=new q_;v.setWithCredentials(!0),v.listenOnce(H_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Ju.NO_ERROR:const E=v.getResponseJson();ce(Qt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case Ju.TIMEOUT:ce(Qt,`RPC '${e}' ${h} timed out`),y(new ae(W.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const S=v.getStatus();if(ce(Qt,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let O=v.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O==null?void 0:O.error;if(H&&H.status&&H.message){const $=(function(K){const ne=K.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ne)>=0?ne:W.UNKNOWN})(H.status);y(new ae($,H.message))}else y(new ae(W.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ae(W.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ce(Qt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ce(Qt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=uf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=G_(),p=K_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const w=l.join("");ce(Qt,`Creating RPC '${e}' stream ${o}: ${w}`,y);const E=h.createWebChannel(w,y);this.I_(E);let S=!1,O=!1;const H=new k2({Yo:U=>{O?ce(Qt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(ce(Qt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ce(Qt,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),$=(U,K,ne)=>{U.listen(K,(ee=>{try{ne(ee)}catch(q){setTimeout((()=>{throw q}),0)}}))};return $(E,Xa.EventType.OPEN,(()=>{O||(ce(Qt,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),$(E,Xa.EventType.CLOSE,(()=>{O||(O=!0,ce(Qt,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(E))})),$(E,Xa.EventType.ERROR,(U=>{O||(O=!0,Ho(Qt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),H.a_(new ae(W.UNAVAILABLE,"The operation could not be completed")))})),$(E,Xa.EventType.MESSAGE,(U=>{var K;if(!O){const ne=U.data[0];We(!!ne,16349);const ee=ne,q=(ee==null?void 0:ee.error)||((K=ee[0])==null?void 0:K.error);if(q){ce(Qt,`RPC '${e}' stream ${o} received error:`,q);const se=q.status;let oe=(function(N){const P=Tt[N];if(P!==void 0)return bv(P)})(se),C=q.message;oe===void 0&&(oe=W.INTERNAL,C="Unknown error status: "+se+" with message "+q.message),O=!0,H.a_(new ae(oe,C)),E.close()}else ce(Qt,`RPC '${e}' stream ${o} received:`,ne),H.u_(ne)}})),$(p,W_.STAT_EVENT,(U=>{U.stat===Qd.PROXY?ce(Qt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Qd.NOPROXY&&ce(Qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r){return new FT(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="PersistentStream";class $v{constructor(e,t,i,o,l,h,p,y){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(ls(t.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ae(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class P2 extends $v{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LT(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ie.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?Ar(h.readTime):Ie.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=af(this.serializer),t.addTarget=(function(l,h){let p;const y=h.target;if(p=ef(y)?{documents:zT(l,y)}:{query:BT(l,y).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=Rv(l,h.resumeToken);const v=rf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ie.min())>0){p.readTime=gc(l,h.snapshotVersion.toTimestamp());const v=rf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=qT(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=af(this.serializer),t.removeTarget=e,this.q_(t)}}class D2 extends $v{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=UT(e.writeResults,e.commitTime),i=Ar(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=af(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>MT(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{}class F2 extends j2{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,sf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(W.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,sf(t,i),o,h,p,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class V2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ls(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="RemoteStore";class O2{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Gi(this)&&(ce(Hi,"Restarting streams for network reachability change."),await(async function(y){const v=be(y);v.Ea.add(4),await Al(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Bc(v)})(this))}))})),this.Ra=new V2(i,o)}}async function Bc(r){if(Gi(r))for(const e of r.da)await e(!0)}async function Al(r){for(const e of r.da)await e(!1)}function qv(r,e){const t=be(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qf(t)?$f(t):ia(t).O_()&&Bf(t,e))}function zf(r,e){const t=be(r),i=ia(t);t.Ia.delete(e),i.O_()&&Hv(t,e),t.Ia.size===0&&(i.O_()?i.L_():Gi(t)&&t.Ra.set("Unknown"))}function Bf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ia(r).Y_(e)}function Hv(r,e){r.Va.Ue(e),ia(r).Z_(e)}function $f(r){r.Va=new RT({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ia(r).start(),r.Ra.ua()}function qf(r){return Gi(r)&&!ia(r).x_()&&r.Ia.size>0}function Gi(r){return be(r).Ea.size===0}function Wv(r){r.Va=void 0}async function L2(r){r.Ra.set("Online")}async function M2(r){r.Ia.forEach(((e,t)=>{Bf(r,e)}))}async function U2(r,e){Wv(r),qf(r)?(r.Ra.ha(e),$f(r)):r.Ra.set("Unknown")}async function z2(r,e,t){if(r.Ra.set("Online"),e instanceof kv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const p of l.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(i){ce(Hi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _c(r,i)}else if(e instanceof nc?r.Va.Ze(e):e instanceof Nv?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ie.min()))try{const i=await zv(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const p=l.Va.Tt(h);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const w=l.Ia.get(v);w&&l.Ia.set(v,w.withResumeToken(y.resumeToken,h))}})),p.targetMismatches.forEach(((y,v)=>{const w=l.Ia.get(y);if(!w)return;l.Ia.set(y,w.withResumeToken(Bt.EMPTY_BYTE_STRING,w.snapshotVersion)),Hv(l,y);const E=new Bs(w.target,y,v,w.sequenceNumber);Bf(l,E)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ce(Hi,"Failed to raise snapshot:",i),await _c(r,i)}}async function _c(r,e,t){if(!ra(e))throw e;r.Ea.add(1),await Al(r),r.Ra.set("Offline"),t||(t=()=>zv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(Hi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Bc(r)}))}function Kv(r,e){return e().catch((t=>_c(r,t,e)))}async function $c(r){const e=be(r),t=Js(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bf;for(;B2(e);)try{const o=await T2(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,$2(e,o)}catch(o){await _c(e,o)}Gv(e)&&Qv(e)}function B2(r){return Gi(r)&&r.Ta.length<10}function $2(r,e){r.Ta.push(e);const t=Js(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Gv(r){return Gi(r)&&!Js(r).x_()&&r.Ta.length>0}function Qv(r){Js(r).start()}async function q2(r){Js(r).ra()}async function H2(r){const e=Js(r);for(const t of r.Ta)e.ea(t.mutations)}async function W2(r,e,t){const i=r.Ta.shift(),o=jf.from(i,e,t);await Kv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await $c(r)}async function K2(r,e){e&&Js(r).X_&&await(async function(i,o){if((function(h){return bT(h)&&h!==W.ABORTED})(o.code)){const l=i.Ta.shift();Js(i).B_(),await Kv(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await $c(i)}})(r,e),Gv(r)&&Qv(r)}async function Oy(r,e){const t=be(r);t.asyncQueue.verifyOperationInProgress(),ce(Hi,"RemoteStore received new credentials");const i=Gi(t);t.Ea.add(3),await Al(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bc(t)}async function G2(r,e){const t=be(r);e?(t.Ea.delete(2),await Bc(t)):e||(t.Ea.add(2),await Al(t),t.Ra.set("Unknown"))}function ia(r){return r.ma||(r.ma=(function(t,i,o){const l=be(t);return l.sa(),new P2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:L2.bind(null,r),t_:M2.bind(null,r),r_:U2.bind(null,r),H_:z2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),qf(r)?$f(r):r.Ra.set("Unknown")):(await r.ma.stop(),Wv(r))}))),r.ma}function Js(r){return r.fa||(r.fa=(function(t,i,o){const l=be(t);return l.sa(),new D2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:q2.bind(null,r),r_:K2.bind(null,r),ta:H2.bind(null,r),na:W2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await $c(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(Hi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new Hf(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(r,e){if(ls("AsyncQueue",`${e}: ${r}`),ra(r))return new ae(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ya(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(){this.ga=new dt(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Xo{constructor(e,t,i,o,l,h,p,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Xo(e,t,Mo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class X2{constructor(){this.queries=My(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=be(t),l=o.queries;o.queries=My(),l.forEach(((h,p)=>{for(const y of p.Sa)y.onError(i)}))})(this,new ae(W.ABORTED,"Firestore shutting down"))}}function My(){return new Ki((r=>gv(r)),Fc)}async function Kf(r,e){const t=be(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new Q2,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Wf(h,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Qf(t)}async function Gf(r,e){const t=be(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Y2(r,e){const t=be(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.Sa)p.Fa(o)&&(i=!0);h.wa=o}}i&&Qf(t)}function J2(r,e,t){const i=be(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Qf(r){r.Ca.forEach((e=>{e.next()}))}var cf,Uy;(Uy=cf||(cf={})).Ma="default",Uy.Cache="cache";class Xf{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.key=e}}class Yv{constructor(e){this.key=e}}class Z2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=yv(e),this.tu=new Mo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Ly,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const S=o.get(w),O=Vc(this.query,E)?E:null,H=!!S&&this.mutatedKeys.has(S.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;S&&O?S.data.isEqual(O.data)?H!==$&&(i.track({type:3,doc:O}),U=!0):this.su(S,O)||(i.track({type:2,doc:O}),U=!0,(y&&this.eu(O,y)>0||v&&this.eu(O,v)<0)&&(p=!0)):!S&&O?(i.track({type:0,doc:O}),U=!0):S&&!O&&(i.track({type:1,doc:S}),U=!0,(y||v)&&(p=!0)),U&&(O?(h=h.add(O),l=$?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Cs:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,E)=>(function(O,H){const $=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:U})}};return $(O)-$(H)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(i),o=o??!1;const p=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,v=y!==this.Za;return this.Za=y,h.length!==0||v?{snapshot:new Xo(this.query,e.tu,l,h,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ly,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Yv(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Xv(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yf="SyncEngine";class eI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tI{constructor(e){this.key=e,this.hu=!1}}class nI{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ki((p=>gv(p)),Fc),this.Iu=new Map,this.Eu=new Set,this.du=new dt(ye.comparator),this.Au=new Map,this.Ru=new Of,this.Vu={},this.mu=new Map,this.fu=Qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rI(r,e,t=!0){const i=rw(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Jv(i,e,t,!0),o}async function sI(r,e){const t=rw(r);await Jv(t,e,!0,!1)}async function Jv(r,e,t,i){const o=await I2(r.localStore,Sr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await iI(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&qv(r.remoteStore,o),p}async function iI(r,e,t,i,o){r.pu=(E,S,O)=>(async function($,U,K,ne){let ee=U.view.ru(K);ee.Cs&&(ee=await Py($.localStore,U.query,!1).then((({documents:C})=>U.view.ru(C,ee))));const q=ne&&ne.targetChanges.get(U.targetId),se=ne&&ne.targetMismatches.get(U.targetId)!=null,oe=U.view.applyChanges(ee,$.isPrimaryClient,q,se);return By($,U.targetId,oe.au),oe.snapshot})(r,E,S,O);const l=await Py(r.localStore,e,!0),h=new Z2(e,l.Qs),p=h.ru(l.documents),y=Sl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(p,r.isPrimaryClient,y);By(r,t,v.au);const w=new eI(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function oI(r,e,t){const i=be(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Fc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await lf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&zf(i.remoteStore,o.targetId),hf(i,o.targetId)})).catch(na)):(hf(i,o.targetId),await lf(i.localStore,o.targetId,!0))}async function aI(r,e){const t=be(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),zf(t.remoteStore,i.targetId))}async function lI(r,e,t){const i=mI(r);try{const o=await(function(h,p){const y=be(h),v=nt.now(),w=p.reduce(((O,H)=>O.add(H.key)),je());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let H=us(),$=je();return y.Ns.getEntries(O,w).next((U=>{H=U,H.forEach(((K,ne)=>{ne.isValidDocument()||($=$.add(K))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,H))).next((U=>{E=U;const K=[];for(const ne of p){const ee=TT(ne,E.get(ne.key).overlayedDocument);ee!=null&&K.push(new ti(ne.key,ee,lv(ee.value.mapValue),rn.exists(!0)))}return y.mutationQueue.addMutationBatch(O,v,K,p)})).next((U=>{S=U;const K=U.applyToLocalDocumentSet(E,$);return y.documentOverlayCache.saveOverlays(O,U.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:vv(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,y){let v=h.Vu[h.currentUser.toKey()];v||(v=new dt(De)),v=v.insert(p,y),h.Vu[h.currentUser.toKey()]=v})(i,o.batchId,t),await Cl(i,o.changes),await $c(i.remoteStore)}catch(o){const l=Wf(o,"Failed to persist write");t.reject(l)}}async function Zv(r,e){const t=be(r);try{const i=await x2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))})),await Cl(t,i,e)}catch(i){await na(i)}}function zy(r,e,t){const i=be(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const y=be(h);y.onlineState=p;let v=!1;y.queries.forEach(((w,E)=>{for(const S of E.Sa)S.va(p)&&(v=!0)})),v&&Qf(y)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uI(r,e,t){const i=be(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new dt(ye.comparator);h=h.insert(l,Jt.newNoDocument(l,Ie.min()));const p=je().add(l),y=new Uc(Ie.min(),new Map,new dt(De),h,p);await Zv(i,y),i.du=i.du.remove(l),i.Au.delete(e),Jf(i)}else await lf(i.localStore,e,!1).then((()=>hf(i,e,t))).catch(na)}async function cI(r,e){const t=be(r),i=e.batch.batchId;try{const o=await w2(t.localStore,e);tw(t,i,null),ew(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Cl(t,o)}catch(o){await na(o)}}async function hI(r,e,t){const i=be(r);try{const o=await(function(h,p){const y=be(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return y.mutationQueue.lookupMutationBatch(v,p).next((E=>(We(E!==null,37113),w=E.keys(),y.mutationQueue.removeMutationBatch(v,E)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,w,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>y.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);tw(i,e,t),ew(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Cl(i,o)}catch(o){await na(o)}}function ew(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function tw(r,e,t){const i=be(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function hf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||nw(r,i)}))}function nw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(zf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Jf(r))}function By(r,e,t){for(const i of t)i instanceof Xv?(r.Ru.addReference(i.key,e),dI(r,i)):i instanceof Yv?(ce(Yf,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||nw(r,i.key)):xe(19791,{wu:i})}function dI(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ce(Yf,"New document in limbo: "+t),r.Eu.add(i),Jf(r))}function Jf(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Je.fromString(e)),i=r.fu.next();r.Au.set(i,new tI(t)),r.du=r.du.insert(t,i),qv(r.remoteStore,new Bs(Sr(jc(t.path)),i,"TargetPurposeLimboResolution",Rc.ce))}}async function Cl(r,e,t){const i=be(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,y)=>{h.push(i.pu(y,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const E=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(v){o.push(v);const E=Mf.As(y.targetId,v);l.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(y,v){const w=be(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Q.forEach(v,(S=>Q.forEach(S.Es,(O=>w.persistence.referenceDelegate.addReference(E,S.targetId,O))).next((()=>Q.forEach(S.ds,(O=>w.persistence.referenceDelegate.removeReference(E,S.targetId,O)))))))))}catch(E){if(!ra(E))throw E;ce(Uf,"Failed to update sequence numbers: "+E)}for(const E of v){const S=E.targetId;if(!E.fromCache){const O=w.Ms.get(S),H=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(H);w.Ms=w.Ms.insert(S,$)}}})(i.localStore,l))}async function fI(r,e){const t=be(r);if(!t.currentUser.isEqual(e)){ce(Yf,"User change. New user:",e.toKey());const i=await Uv(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((p=>{p.forEach((y=>{y.reject(new ae(W.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cl(t,i.Ls)}}function pI(r,e){const t=be(r),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let o=je();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const p=t.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function rw(r){const e=be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uI.bind(null,e),e.Pu.H_=Y2.bind(null,e.eventManager),e.Pu.yu=J2.bind(null,e.eventManager),e}function mI(r){const e=be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hI.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return v2(this.persistence,new g2,e.initialUser,this.serializer)}Cu(e){return new Mv(Lf.mi,this.serializer)}Du(e){return new A2}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class gI extends vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof yc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new t2(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Mv((i=>yc.mi(i,t)),this.serializer)}}class df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fI.bind(null,this.syncEngine),await G2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new X2})()}createDatastore(e){const t=zc(e.databaseInfo.databaseId),i=(function(l){return new R2(l)})(e.databaseInfo);return(function(l,h,p,y){return new F2(l,h,p,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,p){return new O2(i,o,l,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>zy(this.syncEngine,t,0)),(function(){return Fy.v()?new Fy:new C2})())}createSyncEngine(e,t){return(function(o,l,h,p,y,v,w){const E=new nI(o,l,h,p,y,v);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=be(o);ce(Hi,"RemoteStore shutting down."),l.Ea.add(5),await Al(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}df.provider={build:()=>new df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class yI{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=Cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ce(Zs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ce(Zs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Wf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Fd(r,e){r.asyncQueue.verifyOperationInProgress(),ce(Zs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Uv(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function $y(r,e){r.asyncQueue.verifyOperationInProgress();const t=await _I(r);ce(Zs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Oy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Oy(e.remoteStore,o))),r._onlineComponents=e}async function _I(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(Zs,"Using user provided OfflineComponentProvider");try{await Fd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ho("Error using user provided cache. Falling back to memory cache: "+t),await Fd(r,new vc)}}else ce(Zs,"Using default OfflineComponentProvider"),await Fd(r,new gI(void 0));return r._offlineComponents}async function sw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(Zs,"Using user provided OnlineComponentProvider"),await $y(r,r._uninitializedComponentsProvider._online)):(ce(Zs,"Using default OnlineComponentProvider"),await $y(r,new df))),r._onlineComponents}function vI(r){return sw(r).then((e=>e.syncEngine))}async function wc(r){const e=await sw(r),t=e.eventManager;return t.onListen=rI.bind(null,e.syncEngine),t.onUnlisten=oI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aI.bind(null,e.syncEngine),t}function wI(r,e,t={}){const i=new os;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,y,v){const w=new Zf({next:S=>{w.Nu(),h.enqueueAndForget((()=>Gf(l,E)));const O=S.docs.has(p);!O&&S.fromCache?v.reject(new ae(W.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&y&&y.source==="server"?v.reject(new ae(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Xf(jc(p.path),w,{includeMetadataChanges:!0,qa:!0});return Kf(l,E)})(await wc(r),r.asyncQueue,e,t,i))),i.promise}function xI(r,e,t={}){const i=new os;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,y,v){const w=new Zf({next:S=>{w.Nu(),h.enqueueAndForget((()=>Gf(l,E))),S.fromCache&&y.source==="server"?v.reject(new ae(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Xf(p,w,{includeMetadataChanges:!0,qa:!0});return Kf(l,E)})(await wc(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="firestore.googleapis.com",Hy=!0;class Wy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ow,this.ssl=Hy}else this.host=e.host,this.ssl=e.ssl??Hy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZT)throw new ae(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new A1;switch(i.type){case"firstParty":return new k1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=qy.get(t);i&&(ce("ComponentProvider","Removing Datastore"),qy.delete(t),i.terminate())})(this),Promise.resolve()}}function EI(r,e,t,i={}){var v;r=nn(r,qc);const o=Zo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;o&&(F_(`https://${p}`),V_("Firestore",!0)),l.host!==ow&&l.host!==p&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:p,ssl:o,emulatorOptions:i};if(!Bi(y,h)&&(r._setSettings(y),i.mockUserToken)){let w,E;if(typeof i.mockUserToken=="string")w=i.mockUserToken,E=Xt.MOCK_USER;else{w=Y0(i.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ae(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xt(S)}r._authCredentials=new C1(new X_(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class gt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Tl(t,gt._jsonSchema))return new gt(e,i||null,new ye(Je.fromString(t.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:At("string",gt._jsonSchemaVersion),referencePath:At("string")};class Ks extends ni{constructor(e,t,i){super(e,t,jc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ye(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function Li(r,e,...t){if(r=Ct(r),Y_("collection","path",e),r instanceof qc){const i=Je.fromString(e,...t);return iy(i),new Ks(r,null,i)}{if(!(r instanceof gt||r instanceof Ks))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return iy(i),new Ks(r.firestore,null,i)}}function pn(r,e,...t){if(r=Ct(r),arguments.length===1&&(e=Cf.newId()),Y_("doc","path",e),r instanceof qc){const i=Je.fromString(e,...t);return sy(i),new gt(r,null,new ye(i))}{if(!(r instanceof gt||r instanceof Ks))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return sy(i),new gt(r.firestore,r instanceof Ks?r.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="AsyncQueue";class Gy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bv(this,"async_queue_retry"),this._c=()=>{const i=jd();i&&ce(Ky,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=jd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ra(e))throw e;ce(Ky,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ls("INTERNAL UNHANDLED ERROR: ",Qy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Hf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:Qy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Qy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Rr extends qc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Gy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,await e}}}function TI(r,e){const t=typeof r=="object"?r:U_(),i=typeof r=="string"?r:dc,o=Sf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Q0("firestore");l&&EI(o,...l)}return o}function bl(r){if(r._terminated)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||II(r),r._firestoreClient}function II(r){var i,o,l;const e=r._freezeSettings(),t=(function(p,y,v,w){return new K1(p,y,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,iw(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new yI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Bt.fromBase64String(e))}catch(t){throw new ae(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tl(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:At("string",Vn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(Tl(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:At("string",Cr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tl(e,br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new br(e.vectorValues);throw new ae(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}br._jsonSchemaVersion="firestore/vectorValue/1.0",br._jsonSchema={type:At("string",br._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=/^__.*__$/;class AI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class aw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:r})}}class ep{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ep({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lw(this.Ac)&&SI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zc(e)}Cc(e,t,i,o=!1){return new ep({Ac:e,methodName:t,Dc:i,path:zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kl(r){const e=r._freezeSettings(),t=zc(r._databaseId);return new CI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function tp(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);rp("Data must be an object, but it was:",h,i);const p=hw(i,h);let y,v;if(l.merge)y=new Cn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const S=ff(e,E,t);if(!h.contains(S))throw new ae(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);fw(w,S)||w.push(S)}y=new Cn(w),v=h.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,v=h.fieldTransforms;return new AI(new fn(p),y,v)}class Wc extends Hc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}class np extends Hc{_toFieldTransform(e){return new vT(e.path,new yl)}isEqual(e){return e instanceof np}}function uw(r,e,t,i){const o=r.Cc(1,e,t);rp("Data must be an object, but it was:",o,i);const l=[],h=fn.empty();ei(i,((y,v)=>{const w=sp(e,y,t);v=Ct(v);const E=o.yc(w);if(v instanceof Wc)l.push(w);else{const S=Rl(v,E);S!=null&&(l.push(w),h.set(w,S))}}));const p=new Cn(l);return new aw(h,p,o.fieldTransforms)}function cw(r,e,t,i,o,l){const h=r.Cc(1,e,t),p=[ff(e,i,t)],y=[o];if(l.length%2!=0)throw new ae(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)p.push(ff(e,l[S])),y.push(l[S+1]);const v=[],w=fn.empty();for(let S=p.length-1;S>=0;--S)if(!fw(v,p[S])){const O=p[S];let H=y[S];H=Ct(H);const $=h.yc(O);if(H instanceof Wc)v.push(O);else{const U=Rl(H,$);U!=null&&(v.push(O),w.set(O,U))}}const E=new Cn(v);return new aw(w,E,h.fieldTransforms)}function bI(r,e,t,i=!1){return Rl(t,r.Cc(i?4:3,e))}function Rl(r,e){if(dw(r=Ct(r)))return rp("Unsupported field value:",e,r),hw(r,e);if(r instanceof Hc)return(function(i,o){if(!lw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const p of i){let y=Rl(p,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gT(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=nt.fromDate(i);return{timestampValue:gc(o.serializer,l)}}if(i instanceof nt){const l=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gc(o.serializer,l)}}if(i instanceof Cr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vn)return{bytesValue:Rv(o.serializer,i._byteString)};if(i instanceof gt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Vf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof br)return(function(h,p){return{mapValue:{fields:{[ov]:{stringValue:av},[fc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return Df(p.serializer,v)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${kc(i)}`)})(r,e)}function hw(r,e){const t={};return ev(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(r,((i,o)=>{const l=Rl(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function dw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof Cr||r instanceof Vn||r instanceof gt||r instanceof Hc||r instanceof br)}function rp(r,e,t){if(!dw(t)||!J_(t)){const i=kc(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function ff(r,e,t){if((e=Ct(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return sp(r,e);throw xc("Field path arguments must be of type string or ",r,!1,void 0,t)}const NI=new RegExp("[~\\*/\\[\\]]");function sp(r,e,t){if(e.search(NI)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function xc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||h)&&(y+=" (found",l&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new ae(W.INVALID_ARGUMENT,p+r+y)}function fw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ip("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kI extends pw{data(){return super.data()}}function ip(r,e){return typeof e=="string"?sp(r,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class gw extends op{}function RI(r,e,...t){let i=[];e instanceof op&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((y=>y instanceof lp)).length,p=l.filter((y=>y instanceof ap)).length;if(h>1||h>0&&p>0)throw new ae(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class ap extends gw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ap(e,t,i)}_apply(e){const t=this._parse(e);return yw(e._query,t),new ni(e.firestore,e.converter,tf(e._query,t))}_parse(e){const t=kl(e.firestore);return(function(l,h,p,y,v,w,E){let S;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ae(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Jy(E,w);const H=[];for(const $ of E)H.push(Yy(y,l,$));S={arrayValue:{values:H}}}else S=Yy(y,l,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Jy(E,w),S=bI(p,h,E,w==="in"||w==="not-in");return St.create(v,w,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class lp extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const p=l.getFlattenedFilters();for(const y of p)yw(h,y),h=tf(h,y)})(e._query,t),new ni(e.firestore,e.converter,tf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class up extends gw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new up(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new ae(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gl(l,h)})(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new sa(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function PI(r,e="asc"){const t=e,i=ip("orderBy",r);return up._create(i,t)}function Yy(r,e,t){if(typeof(t=Ct(t))=="string"){if(t==="")throw new ae(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mv(e)&&t.indexOf("/")!==-1)throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!ye.isDocumentKey(i))throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fy(r,new ye(i))}if(t instanceof gt)return fy(r,t._key);throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kc(t)}.`)}function Jy(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yw(r,e){const t=(function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class DI{convertValue(e,t="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ei(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[fc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>vt(h.doubleValue)));return new br(t)}convertGeoPoint(e){return new Cr(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Dc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const t=Qs(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);We(Ov(i),9688,{name:e});const o=new pl(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||ls(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mi extends pw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ip("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mi._jsonSchema={type:At("string",Mi._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class rc extends Mi{data(e={}){return super.data(e)}}class Ui{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Za(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new rc(this._firestore,this._userDataWriter,i.key,i,new Za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const y=new rc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Za(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new rc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Za(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:jI(p.type),doc:y,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ui._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(r){r=nn(r,gt);const e=nn(r.firestore,Rr);return wI(bl(e),r._key).then((t=>vw(e,r,t)))}Ui._jsonSchemaVersion="firestore/querySnapshot/1.0",Ui._jsonSchema={type:At("string",Ui._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class hp extends DI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function _w(r){r=nn(r,ni);const e=nn(r.firestore,Rr),t=bl(e),i=new hp(e);return mw(r._query),xI(t,r._query).then((o=>new Ui(e,i,r,o)))}function Zn(r,e,t){r=nn(r,gt);const i=nn(r.firestore,Rr),o=cp(r.converter,e,t);return Dl(i,[tp(kl(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,rn.none())])}function Vd(r,e,t,...i){r=nn(r,gt);const o=nn(r.firestore,Rr),l=kl(o);let h;return h=typeof(e=Ct(e))=="string"||e instanceof Nl?cw(l,"updateDoc",r._key,e,t,i):uw(l,"updateDoc",r._key,e),Dl(o,[h.toMutation(r._key,rn.exists(!0))])}function Pl(r){return Dl(nn(r.firestore,Rr),[new Mc(r._key,rn.none())])}function FI(r,e){const t=nn(r.firestore,Rr),i=pn(r),o=cp(r.converter,e);return Dl(t,[tp(kl(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,rn.exists(!1))]).then((()=>i))}function Qi(r,...e){var y,v,w;r=Ct(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Xy(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Xy(e[i])){const E=e[i];e[i]=(y=E.next)==null?void 0:y.bind(E),e[i+1]=(v=E.error)==null?void 0:v.bind(E),e[i+2]=(w=E.complete)==null?void 0:w.bind(E)}let l,h,p;if(r instanceof gt)h=nn(r.firestore,Rr),p=jc(r._key.path),l={next:E=>{e[i]&&e[i](vw(h,r,E))},error:e[i+1],complete:e[i+2]};else{const E=nn(r,ni);h=nn(E.firestore,Rr),p=E._query;const S=new hp(h);l={next:O=>{e[i]&&e[i](new Ui(h,S,E,O))},error:e[i+1],complete:e[i+2]},mw(r._query)}return(function(S,O,H,$){const U=new Zf($),K=new Xf(O,U,H);return S.asyncQueue.enqueueAndForget((async()=>Kf(await wc(S),K))),()=>{U.Nu(),S.asyncQueue.enqueueAndForget((async()=>Gf(await wc(S),K)))}})(bl(h),p,o,l)}function Dl(r,e){return(function(i,o){const l=new os;return i.asyncQueue.enqueueAndForget((async()=>lI(await vI(i),o,l))),l.promise})(bl(r),e)}function vw(r,e,t){const i=t.docs.get(e._key),o=new hp(r);return new Mi(r,o,e._key,i,new Za(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kl(e)}set(e,t,i){this._verifyNotCommitted();const o=Od(e,this._firestore),l=cp(o.converter,t,i),h=tp(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,rn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=Od(e,this._firestore);let h;return h=typeof(t=Ct(t))=="string"||t instanceof Nl?cw(this._dataReader,"WriteBatch.update",l._key,t,i,o):uw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Od(e,this._firestore);return this._mutations=this._mutations.concat(new Mc(t._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Od(r,e){if((r=Ct(r)).firestore!==e)throw new ae(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function mt(){return new np("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(r){return bl(r=nn(r,Rr)),new VI(r,(e=>Dl(r,e)))}(function(e,t=!0){(function(o){ta=o})(ea),qo(new $i("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new Rr(new b1(i.getProvider("auth-internal")),new R1(h,i.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ae(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(v.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Hs(ey,ty,e),Hs(ey,ty,"esm2020")})();function ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OI=ww,xw=new xl("auth","Firebase",ww());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Tf("@firebase/auth");function LI(r,...e){Ec.logLevel<=Pe.WARN&&Ec.warn(`Auth (${ea}): ${r}`,...e)}function sc(r,...e){Ec.logLevel<=Pe.ERROR&&Ec.error(`Auth (${ea}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(r,...e){throw fp(r,...e)}function Yn(r,...e){return fp(r,...e)}function dp(r,e,t){const i={...OI(),[e]:t};return new xl("auth","Firebase",i).create(e,{appName:r.name})}function zi(r){return dp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Pr(r,"argument-error"),dp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return xw.create(r,...e)}function Te(r,e,...t){if(!r)throw fp(e,...t)}function ns(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sc(e),new Error(e)}function cs(r,e){r||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function UI(){return Zy()==="http:"||Zy()==="https:"}function Zy(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UI()||rE()||"connection"in navigator)?navigator.onLine:!0}function BI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t){this.shortDelay=e,this.longDelay=t,cs(t>e,"Short delay should be less than long delay!"),this.isMobile=eE()||sE()}get(){return zI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(r,e){cs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HI=new jl(3e4,6e4);function mp(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function oa(r,e,t,i,o={}){return Tw(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=El({key:r.config.apiKey,...h}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:y,...l};return nE()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(v.credentials="include"),Ew.fetch()(await Iw(r,r.config.apiHost,t,p),v)})}async function Tw(r,e,t){r._canInitEmulator=!1;const i={...$I,...e};try{const o=new KI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Yu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yu(r,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw Yu(r,"email-already-in-use",h);if(y==="USER_DISABLED")throw Yu(r,"user-disabled",h);const w=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw dp(r,w,v);Pr(r,w)}}catch(o){if(o instanceof hs)throw o;Pr(r,"network-request-failed",{message:String(o)})}}async function WI(r,e,t,i,o={}){const l=await oa(r,e,t,i,o);return"mfaPendingCredential"in l&&Pr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Iw(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?pp(r.config,o):`${r.config.apiScheme}://${o}`;return qI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class KI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Yn(this.auth,"network-request-failed")),HI.get())})}}function Yu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Yn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(r,e){return oa(r,"POST","/v1/accounts:delete",e)}async function Tc(r,e){return oa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QI(r,e=!1){const t=Ct(r),i=await t.getIdToken(e),o=gp(i);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:al(Md(o.auth_time)),issuedAtTime:al(Md(o.iat)),expirationTime:al(Md(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Md(r){return Number(r)*1e3}function gp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const o=R_(t);return o?JSON.parse(o):(sc("Failed to decode base64 JWT payload"),null)}catch(o){return sc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function e_(r){const e=gp(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hs&&XI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function XI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=al(this.lastLoginAt),this.creationTime=al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(r){var E;const e=r.auth,t=await r.getIdToken(),i=await wl(r,Tc(e,{idToken:t}));Te(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?Sw(o.providerUserInfo):[],h=ZI(r.providerData,l),p=r.isAnonymous,y=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),v=p?y:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new gf(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,w)}async function JI(r){const e=Ct(r);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Sw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(r,e){const t=await Tw(r,{},async()=>{const i=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Iw(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:i};return r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(y.credentials="include"),Ew.fetch()(h,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tS(r,e){return oa(r,"POST","/v2/accounts:revokeToken",mp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=e_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await eS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Uo;return i&&(Te(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Te(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Te(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new YI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await wl(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QI(this,e)}reload(){return JI(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ic(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(zi(this.auth));const e=await this.getIdToken();return await wl(this,GI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,y=t._redirectEventId??void 0,v=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:O,providerData:H,stsTokenManager:$}=t;Te(E&&$,e,"internal-error");const U=Uo.fromJSON(this.name,$);Te(typeof E=="string",e,"internal-error"),Os(i,e.name),Os(o,e.name),Te(typeof S=="boolean",e,"internal-error"),Te(typeof O=="boolean",e,"internal-error"),Os(l,e.name),Os(h,e.name),Os(p,e.name),Os(y,e.name),Os(v,e.name),Os(w,e.name);const K=new Xn({uid:E,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:p,stsTokenManager:U,createdAt:v,lastLoginAt:w});return H&&Array.isArray(H)&&(K.providerData=H.map(ne=>({...ne}))),y&&(K._redirectEventId=y),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new Uo;o.updateFromServerResponse(t);const l=new Xn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ic(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Sw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Uo;p.updateFromIdToken(i);const y=new Xn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new gf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function rs(r){cs(r instanceof Function,"Expected a class definition");let e=t_.get(r);return e?(cs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,t_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Aw.type="NONE";const n_=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(r,e,t){return`firebase:${r}:${e}:${t}`}class zo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ic(this.userKey,o.apiKey,l),this.fullPersistenceKey=ic("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tc(this.auth,{idToken:e}).catch(()=>{});return t?Xn._fromGetAccountInfoResponse(this.auth,t,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new zo(rs(n_),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||rs(n_);const h=ic(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(h);if(w){let E;if(typeof w=="string"){const S=await Tc(e,{idToken:w}).catch(()=>{});if(!S)break;E=await Xn._fromGetAccountInfoResponse(e,S,w)}else E=Xn._fromJSON(e,w);v!==l&&(p=E),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new zo(l,e,i):(l=y[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new zo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pw(e))return"Blackberry";if(Dw(e))return"Webos";if(bw(e))return"Safari";if((e.includes("chrome/")||Nw(e))&&!e.includes("edge/"))return"Chrome";if(Rw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Cw(r=Zt()){return/firefox\//i.test(r)}function bw(r=Zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nw(r=Zt()){return/crios\//i.test(r)}function kw(r=Zt()){return/iemobile/i.test(r)}function Rw(r=Zt()){return/android/i.test(r)}function Pw(r=Zt()){return/blackberry/i.test(r)}function Dw(r=Zt()){return/webos/i.test(r)}function yp(r=Zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function nS(r=Zt()){var e;return yp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function rS(){return iE()&&document.documentMode===10}function jw(r=Zt()){return yp(r)||Rw(r)||Dw(r)||Pw(r)||/windows phone/i.test(r)||kw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(r,e=[]){let t;switch(r){case"Browser":t=r_(Zt());break;case"Worker":t=`${r_(Zt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const y=e(l);h(y)}catch(y){p(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(r,e={}){return oa(r,"GET","/v2/passwordPolicy",mp(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=6;class aS{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s_(this),this.idTokenSubscription=new s_(this),this.beforeStateQueue=new sS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rs(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tc(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Qn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,p=i==null?void 0:i._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===p)&&(y!=null&&y.user)&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(zi(this));const t=e?Ct(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iS(this),t=new aS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await tS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rs(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&LI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Kc(r){return Ct(r)}class s_{constructor(e){this.auth=e,this.observer=null,this.addObserver=fE(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uS(r){_p=r}function cS(r){return _p.loadJS(r)}function hS(){return _p.gapiScript}function dS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(r,e){const t=Sf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Bi(l,e??{}))return o;Pr(o,"already-initialized")}return t.initialize({options:e})}function pS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(rs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function mS(r,e,t){const i=Kc(r);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Vw(e),{host:h,port:p}=gS(e),y=p===null?"":`:${p}`,v={url:`${l}//${h}${y}/`},w=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(Bi(v,i.config.emulator)&&Bi(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Zo(h)?(F_(`${l}//${h}${y}`),V_("Auth",!0)):yS()}function Vw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function gS(r){const e=Vw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:i_(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:i_(h)}}}function i_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function yS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(r,e){return WI(r,"POST","/v1/accounts:signInWithIdp",mp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="http://localhost";class Wi extends Ow{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new Wi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Bo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bo(e,t)}buildRequest(){const e={requestUri:_S,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends vp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Fl{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ts.credential(t,i)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Fl{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.GITHUB_SIGN_IN_METHOD="github.com";Ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Fl{constructor(){super("twitter.com")}static credential(e,t){return Wi._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Us.credential(t,i)}catch{return null}}}Us.TWITTER_SIGN_IN_METHOD="twitter.com";Us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Xn._fromIdTokenResponse(e,i,o),h=o_(i);return new Yo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=o_(i);return new Yo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function o_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends hs{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Sc(e,t,i,o)}}function Lw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(r,l,e,i):l})}async function vS(r,e,t=!1){const i=await wl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Yo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(r,e,t=!1){const{auth:i}=r;if(Qn(i.app))return Promise.reject(zi(i));const o="reauthenticate";try{const l=await wl(r,Lw(i,o,e,r),t);Te(l.idToken,i,"internal-error");const h=gp(l.idToken);Te(h,i,"internal-error");const{sub:p}=h;return Te(r.uid===p,i,"user-mismatch"),Yo._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Pr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(r,e,t=!1){if(Qn(r.app))return Promise.reject(zi(r));const i="signIn",o=await Lw(r,i,e),l=await Yo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function ES(r,e,t,i){return Ct(r).onIdTokenChanged(e,t,i)}function TS(r,e,t){return Ct(r).beforeAuthStateChanged(e,t)}function IS(r,e,t,i){return Ct(r).onAuthStateChanged(e,t,i)}function SS(r){return Ct(r).signOut()}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=1e3,CS=10;class Uw extends Mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,y)=>{this.notifyListeners(h,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);rS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,CS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},AS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uw.type="LOCAL";const bS=Uw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw extends Mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zw.type="SESSION";const Bw=zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Gc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async v=>v(t.origin,l)),y=await NS(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,y)=>{const v=wp("",20);o.port1.start();const w=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(w),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function RS(r){Nr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function PS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function jS(){return $w()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebaseLocalStorageDb",FS=1,Cc="firebaseLocalStorage",Hw="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qc(r,e){return r.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function VS(){const r=indexedDB.deleteDatabase(qw);return new Vl(r).toPromise()}function yf(){const r=indexedDB.open(qw,FS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Cc,{keyPath:Hw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Cc)?e(i):(i.close(),await VS(),e(await yf()))})})}async function a_(r,e,t){const i=Qc(r,!0).put({[Hw]:e,value:t});return new Vl(i).toPromise()}async function OS(r,e){const t=Qc(r,!1).get(e),i=await new Vl(t).toPromise();return i===void 0?null:i.value}function l_(r,e){const t=Qc(r,!0).delete(e);return new Vl(t).toPromise()}const LS=800,MS=3;class Ww{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>MS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $w()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(jS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await PS(),!this.activeServiceWorker)return;this.sender=new kS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yf();return await a_(e,Ac,"1"),await l_(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>a_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>OS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>l_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Qc(o,!1).getAll();return new Vl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ww.type="LOCAL";const US=Ww;new jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r,e){return e?rs(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends Ow{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zS(r){return xS(r.auth,new xp(r),r.bypassAuthState)}function BS(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),wS(t,new xp(r),r.bypassAuthState)}async function $S(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),vS(t,new xp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zS;case"linkViaPopup":case"linkViaRedirect":return $S;case"reauthViaPopup":case"reauthViaRedirect":return BS;default:Pr(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new jl(2e3,1e4);async function HS(r,e,t){if(Qn(r.app))return Promise.reject(Yn(r,"operation-not-supported-in-this-environment"));const i=Kc(r);MI(r,e,vp);const o=Kw(i,t);return new Oi(i,"signInViaPopup",e,o).executeNotNull()}class Oi extends Gw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Oi.currentPopupAction&&Oi.currentPopupAction.cancel(),Oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qS.get())};e()}}Oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="pendingRedirect",oc=new Map;class KS extends Gw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const i=await GS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GS(r,e){const t=YS(e),i=XS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function QS(r,e){oc.set(r._key(),e)}function XS(r){return rs(r._redirectPersistence)}function YS(r){return ic(WS,r.config.apiKey,r.name)}async function JS(r,e,t=!1){if(Qn(r.app))return Promise.reject(zi(r));const i=Kc(r),o=Kw(i,e),h=await new KS(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=600*1e3;class eA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Qw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Yn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZS&&this.cachedEventUids.clear(),this.cachedEventUids.has(u_(e))}saveEventToCache(e){this.cachedEventUids.add(u_(e)),this.lastProcessedEventTime=Date.now()}}function u_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Qw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(r,e={}){return oa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sA=/^https?/;async function iA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await nA(r);for(const t of e)try{if(oA(t))return}catch{}Pr(r,"unauthorized-domain")}function oA(r){const e=mf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!sA.test(t))return!1;if(rA.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=new jl(3e4,6e4);function c_(){const r=Nr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function lA(r){return new Promise((e,t)=>{var o,l,h;function i(){c_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c_(),t(Yn(r,"network-request-failed"))},timeout:aA.get()})}if((l=(o=Nr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Nr().gapi)!=null&&h.load)i();else{const p=dS("iframefcb");return Nr()[p]=()=>{gapi.load?i():t(Yn(r,"network-request-failed"))},cS(`${hS()}?onload=${p}`).catch(y=>t(y))}}).catch(e=>{throw ac=null,e})}let ac=null;function uA(r){return ac=ac||lA(r),ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new jl(5e3,15e3),hA="__/auth/iframe",dA="emulator/auth/iframe",fA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mA(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?pp(e,dA):`https://${r.config.authDomain}/${hA}`,i={apiKey:e.apiKey,appName:r.name,v:ea},o=pA.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${El(i).slice(1)}`}async function gA(r){const e=await uA(r),t=Nr().gapi;return Te(t,r,"internal-error"),e.open({where:document.body,url:mA(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fA,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Yn(r,"network-request-failed"),p=Nr().setTimeout(()=>{l(h)},cA.get());function y(){Nr().clearTimeout(p),o(i)}i.ping(y).then(y,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_A=500,vA=600,wA="_blank",xA="http://localhost";class h_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EA(r,e,t,i=_A,o=vA){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const y={...yA,width:i.toString(),height:o.toString(),top:l,left:h},v=Zt().toLowerCase();t&&(p=Nw(v)?wA:t),Cw(v)&&(e=e||xA,y.scrollbars="yes");const w=Object.entries(y).reduce((S,[O,H])=>`${S}${O}=${H},`,"");if(nS(v)&&p!=="_self")return TA(e||"",p),new h_(null);const E=window.open(e||"",p,w);Te(E,r,"popup-blocked");try{E.focus()}catch{}return new h_(E)}function TA(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__/auth/handler",SA="emulator/auth/handler",AA=encodeURIComponent("fac");async function d_(r,e,t,i,o,l){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ea,eventId:o};if(e instanceof vp){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",dE(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof Fl){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const y=await r._getAppCheckToken(),v=y?`#${AA}=${encodeURIComponent(y)}`:"";return`${CA(r)}?${El(p).slice(1)}${v}`}function CA({config:r}){return r.emulator?pp(r,SA):`https://${r.authDomain}/${IA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="webStorageSupport";class bA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bw,this._completeRedirectFn=JS,this._overrideRedirectResult=QS}async _openPopup(e,t,i,o){var h;cs((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await d_(e,t,i,mf(),o);return EA(e,l,wp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await d_(e,t,i,mf(),o);return RS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(cs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await gA(e),i=new eA(e);return t.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ud,{type:Ud},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Ud];l!==void 0&&t(!!l),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jw()||bw()||yp()}}const NA=bA;var f_="@firebase/auth",p_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PA(r){qo(new $i("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Te(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fw(r)},v=new lS(i,o,l,y);return pS(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),qo(new $i("auth-internal",e=>{const t=Kc(e.getProvider("auth").getImmediate());return(i=>new kA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(f_,p_,RA(r)),Hs(f_,p_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=300,jA=j_("authIdTokenMaxAge")||DA;let m_=null;const FA=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>jA)return;const o=t==null?void 0:t.token;m_!==o&&(m_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function VA(r=U_()){const e=Sf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=fS(r,{popupRedirectResolver:NA,persistence:[US,bS,Bw]}),i=j_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=FA(l.toString());TS(t,h,()=>h(t.currentUser)),ES(t,p=>h(p))}}const o=P_("auth");return o&&mS(t,`http://${o}`),t}function OA(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}uS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Yn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",OA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PA("Browser");const LA={apiKey:"AIzaSyBBfpg8D4bqcqOTTuO5ONIQRInRCPOZM5k",authDomain:"comments-67079.firebaseapp.com",projectId:"comments-67079",storageBucket:"comments-67079.firebasestorage.app",messagingSenderId:"36001866008",appId:"1:36001866008:web:448de13685ad843551be6d"},Xw=M_(LA),ht=TI(Xw),Lo=VA(Xw),Yw=new ts;Yw.setCustomParameters({prompt:"select_account"});let Yt=null;const MA=r=>{Yt=r},qe={USERS:"users",STUDENTS:"students",SETTINGS:"settings",TEMPLATES:"templates",CLASSES:"classes",SCHOOLS:"schools"},_f=r=>{if(!Yt)throw new Error(" ID  setCurrentUserId()");return Li(ht,qe.USERS,Yt,r)},Ir=(r,e)=>{if(!Yt)throw new Error(" ID  setCurrentUserId()");return pn(ht,qe.USERS,Yt,r,e)},es={subscribe:(r,e=null)=>{if(!Yt)return console.error(" ID "),r([]),()=>{};const t=_f(qe.STUDENTS);return Qi(t,i=>{let o=[];i.forEach(l=>{const h={id:l.id,...l.data()};(!e||h.classId===e)&&o.push(h)}),o.sort((l,h)=>{var p,y,v,w;return(((y=(p=l.createdAt)==null?void 0:p.toMillis)==null?void 0:y.call(p))||0)-(((w=(v=h.createdAt)==null?void 0:v.toMillis)==null?void 0:w.call(v))||0)}),r(o)},i=>{console.error("Firestore :",i),r([])})},add:async r=>{try{const e=Ir(qe.STUDENTS,r.id.toString());await Zn(e,{...r,createdAt:mt(),updatedAt:mt()})}catch(e){throw console.error(":",e),e}},addBatch:async r=>{try{const e=Ld(ht);r.forEach(t=>{const i=Ir(qe.STUDENTS,t.id.toString());e.set(i,{...t,createdAt:mt(),updatedAt:mt()})}),await e.commit()}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=Ir(qe.STUDENTS,r.toString());await Zn(t,{...e,updatedAt:mt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=Ir(qe.STUDENTS,r.toString());await Pl(e)}catch(e){throw console.error(":",e),e}},deleteBatch:async r=>{try{const e=Ld(ht);r.forEach(t=>{const i=Ir(qe.STUDENTS,t.toString());e.delete(i)}),await e.commit()}catch(e){throw console.error(":",e),e}},deleteAll:async()=>{try{const r=_f(qe.STUDENTS),e=await _w(r),t=Ld(ht);e.forEach(i=>{t.delete(i.ref)}),await t.commit()}catch(r){throw console.error(":",r),r}}},el={subscribe:r=>{if(!Yt)return console.error(" ID "),r({}),()=>{};const e=Ir(qe.SETTINGS,"user");return Qi(e,t=>{t.exists()?r(t.data()):r({})},t=>{console.error(":",t),r({})})},save:async r=>{try{const e=Ir(qe.SETTINGS,"user");await Zn(e,{...r,updatedAt:mt()},{merge:!0})}catch(e){throw console.error(":",e),e}}},ll={subscribe:r=>{if(!Yt)return console.error(" ID "),r([]),()=>{};const e=_f(qe.TEMPLATES);return Qi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,p,y,v;return(((p=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:p.call(h))||0)-(((v=(y=o.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)}),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=Ir(qe.TEMPLATES,e);return await Zn(t,{...r,createdAt:mt(),usageCount:0}),e}catch(e){throw console.error(":",e),e}},delete:async r=>{try{const e=Ir(qe.TEMPLATES,r.toString());await Pl(e)}catch(e){throw console.error(":",e),e}},incrementUsage:async r=>{try{const e=Ir(qe.TEMPLATES,r.toString()),t=await pf(e);t.exists()&&await Zn(e,{usageCount:(t.data().usageCount||0)+1,updatedAt:mt()},{merge:!0})}catch(e){console.error(":",e)}}},ss={subscribe:r=>{const e=Li(ht,qe.CLASSES);return Qi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,p,y,v;return(((p=(h=o.createdAt)==null?void 0:h.toMillis)==null?void 0:p.call(h))||0)-(((v=(y=l.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)}),r(i)},t=>{console.error(":",t)})},add:async r=>{try{const e=Date.now().toString(),t=pn(ht,qe.CLASSES,e);return await Zn(t,{...r,createdAt:mt(),updatedAt:mt()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=pn(ht,qe.CLASSES,r.toString());await Zn(t,{...e,updatedAt:mt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=pn(ht,qe.CLASSES,r.toString());await Pl(e)}catch(e){throw console.error(":",e),e}}},lc={subscribe:r=>{const e=Li(ht,qe.SCHOOLS);return Qi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>(o.name||"").localeCompare(l.name||"","zh-TW")),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=pn(ht,qe.SCHOOLS,e);return await Zn(t,{...r,createdAt:mt(),updatedAt:mt()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=pn(ht,qe.SCHOOLS,r.toString());await Zn(t,{...e,updatedAt:mt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=pn(ht,qe.SCHOOLS,r.toString());await Pl(e)}catch(e){throw console.error(":",e),e}}},vf={subscribe:(r,e)=>{if(!Yt)return console.error(" ID "),e([]),()=>{};const t=Li(ht,qe.USERS,Yt,qe.STUDENTS,r.toString(),"history");return Qi(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),o.sort((l,h)=>{var p,y,v,w;return(((y=(p=h.createdAt)==null?void 0:p.toMillis)==null?void 0:y.call(p))||0)-(((w=(v=l.createdAt)==null?void 0:v.toMillis)==null?void 0:w.call(v))||0)}),e(o)},i=>{console.error(":",i),e([])})},add:async(r,e,t=[])=>{if(!Yt)throw new Error(" ID ");try{const i=Li(ht,qe.USERS,Yt,qe.STUDENTS,r.toString(),"history");await FI(i,{comment:e,styles:t,createdAt:mt()})}catch(i){throw console.error(":",i),i}},getAll:async r=>{if(!Yt)return console.error(" ID "),[];try{const e=Li(ht,qe.USERS,Yt,qe.STUDENTS,r.toString(),"history"),t=await _w(e),i=[];return t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,p,y,v;return(((p=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:p.call(h))||0)-(((v=(y=o.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)})}catch(e){return console.error(":",e),[]}},delete:async(r,e)=>{if(!Yt)throw new Error(" ID ");try{const t=pn(ht,qe.USERS,Yt,qe.STUDENTS,r.toString(),"history",e);await Pl(t)}catch(t){throw console.error(":",t),t}}},UA="cagooo@gmail.com",Do={USERS:"users"},It={ADMIN:"admin",TEACHER:"teacher",PENDING:"pending"},wf={getCurrentUser:()=>Lo.currentUser,onAuthStateChange:r=>IS(Lo,async e=>{if(e){const t=await is.getOrCreate(e);r({...e,...t})}else r(null)}),signInWithGoogle:async()=>{try{const e=(await HS(Lo,Yw)).user;return await is.getOrCreate(e),{success:!0,user:e}}catch(r){return console.error("Google :",r),{success:!1,error:r.message}}},signOut:async()=>{try{return await SS(Lo),{success:!0}}catch(r){return console.error(":",r),{success:!1,error:r.message}}}},is={getOrCreate:async r=>{const e=pn(ht,Do.USERS,r.uid),t=await pf(e);if(t.exists())return await Zn(e,{lastLoginAt:mt()},{merge:!0}),{id:t.id,...t.data()};const i=r.email===UA,o={uid:r.uid,email:r.email,displayName:r.displayName||"",photoURL:r.photoURL||null,role:i?It.ADMIN:It.PENDING,assignedClasses:[],createdAt:mt(),lastLoginAt:mt(),approvedAt:i?mt():null,approvedBy:i?"system":null};return await Zn(e,o),{id:r.uid,...o}},get:async r=>{const e=pn(ht,Do.USERS,r),t=await pf(e);return t.exists()?{id:t.id,...t.data()}:null},subscribeAll:r=>{const e=Li(ht,Do.USERS),t=RI(e,PI("createdAt","desc"));return Qi(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),r(o)},i=>{console.error(":",i)})},approve:async(r,e=[],t=null)=>{var i;try{const o=pn(ht,Do.USERS,r),l={role:It.TEACHER,assignedClasses:e,approvedAt:mt(),approvedBy:((i=Lo.currentUser)==null?void 0:i.uid)||"unknown"};return t&&(l.schoolId=t),await Vd(o,l),{success:!0}}catch(o){return console.error(":",o),{success:!1,error:o.message}}},updateAssignedClasses:async(r,e,t=null)=>{try{const i=pn(ht,Do.USERS,r),o={assignedClasses:e,updatedAt:mt()};return t!==void 0&&(o.schoolId=t),await Vd(i,o),{success:!0}}catch(i){return console.error(":",i),{success:!1,error:i.message}}},reject:async r=>{var e;try{const t=pn(ht,Do.USERS,r);return await Vd(t,{role:It.PENDING,assignedClasses:[],rejectedAt:mt(),rejectedBy:((e=Lo.currentUser)==null?void 0:e.uid)||"unknown"}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},isAdmin:r=>(r==null?void 0:r.role)===It.ADMIN,isApproved:r=>(r==null?void 0:r.role)===It.ADMIN||(r==null?void 0:r.role)===It.TEACHER},zA=r=>{const[e,t]=Y.useState([]),[i,o]=Y.useState(new Set),[l,h]=Y.useState(!0),[p,y]=Y.useState(!1);Y.useEffect(()=>{if(!r){t([]),h(!1);return}MA(r),h(!0);const q=es.subscribe(se=>{const oe=se.map(C=>({...C,id:parseInt(C.id)||C.id,selectedTags:C.selectedTags||[],manualTraits:C.manualTraits||"",comment:C.comment||""}));t(oe),h(!1)});return()=>q()},[r]);const v=Y.useCallback(async q=>{const se=q.split(`
`).map(C=>C.trim()).filter(C=>C!=="");if(se.length===0)return[];const oe=se.map((C,T)=>({id:Date.now()+T,name:C,selectedTags:[],manualTraits:"",comment:""}));y(!0);try{await es.addBatch(oe)}catch(C){console.error(":",C)}return y(!1),oe},[]),w=Y.useCallback(async(q,se,oe)=>{t(C=>C.map(T=>T.id===q?{...T,[se]:oe}:T));try{const C=e.find(T=>T.id===q);C&&await es.update(q,{...C,[se]:oe})}catch(C){console.error(":",C)}},[e]),E=Y.useCallback(async q=>{t(se=>se.filter(oe=>oe.id!==q)),o(se=>{const oe=new Set(se);return oe.delete(q),oe});try{await es.delete(q)}catch(se){console.error(":",se)}},[]),S=Y.useCallback(async()=>{const q=Array.from(i);t(se=>se.filter(oe=>!i.has(oe.id))),o(new Set);try{await es.deleteBatch(q)}catch(se){console.error(":",se)}},[i]),O=Y.useCallback(async()=>{t([]),o(new Set);try{await es.deleteAll()}catch(q){console.error(":",q)}},[]),H=Y.useCallback(q=>{o(se=>{const oe=new Set(se);return oe.has(q)?oe.delete(q):oe.add(q),oe})},[]),$=Y.useCallback(()=>{if(i.size===e.length&&e.length>0)o(new Set);else{const q=new Set(e.map(se=>se.id));o(q)}},[i.size,e]),U=Y.useCallback(async(q,se)=>{t(oe=>oe.map(C=>q.includes(C.id)?C.selectedTags.includes(se)?C:{...C,selectedTags:[...C.selectedTags,se]}:C));try{for(const oe of q){const C=e.find(T=>T.id===oe);C&&!C.selectedTags.includes(se)&&await es.update(oe,{selectedTags:[...C.selectedTags,se]})}}catch(oe){console.error(":",oe)}},[e]),K=Y.useCallback(async(q,se)=>{t(oe=>oe.map(C=>C.id===q?{...C,selectedTags:C.selectedTags.filter(T=>T!==se)}:C));try{const oe=e.find(C=>C.id===q);oe&&await es.update(q,{selectedTags:oe.selectedTags.filter(C=>C!==se)})}catch(oe){console.error(":",oe)}},[e]),ne=Y.useCallback(q=>{t(se=>typeof q=="function"?q(se):q)},[]),ee=Y.useCallback(async(q,se)=>{try{await es.update(q,{comment:se})}catch(oe){console.error(":",oe)}},[]);return{students:e,setStudents:ne,selectedIds:i,isLoading:l,isSyncing:p,generateStudents:v,updateStudent:w,deleteStudent:E,deleteSelected:S,resetStudents:O,toggleSelection:H,toggleAllSelection:$,addTagToStudents:U,removeTag:K,syncComment:ee}},BA=({isSidebarOpen:r,setIsSidebarOpen:e,onOpenSettings:t,onOpenTemplates:i,onOpenClasses:o,onOpenAdmin:l,onLogout:h,hasApiKey:p,templateCount:y=0,currentClassName:v="",currentUser:w,isAdmin:E})=>f.jsxs("header",{className:"bg-[#FFF9E6] border-b-4 border-[#2D3436] h-16 sm:h-20 flex items-center justify-between px-3 sm:px-6 shrink-0 z-20 sticky top-0 shadow-[0_4px_0_#2D3436]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[f.jsx("div",{className:"bg-[#FECA57] text-[#2D3436] p-2 sm:p-3 border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] transform rotate-[-2deg] rounded-lg",children:f.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-lg sm:text-2xl font-black text-[#2D3436] tracking-wide",children:[f.jsxs("span",{className:"hidden sm:inline relative",children:[f.jsx("span",{className:"relative z-10",children:""}),f.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]}),f.jsx("span",{className:"hidden sm:inline ml-1",children:""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsxs("button",{onClick:o,className:"text-xs font-bold text-[#636E72] hover:text-[#A29BFE] transition-colors flex items-center gap-1 mt-0.5",children:[f.jsx(cl,{size:12}),v,f.jsx("span",{className:"text-[10px]",children:""})]})]})]}),f.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[E&&f.jsxs("button",{onClick:l,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#FF6B9D] text-white flex items-center gap-1 text-sm",title:"",children:[f.jsx(A_,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:""})]}),f.jsxs("button",{onClick:i,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#A29BFE] text-white flex items-center gap-1 text-sm relative",title:"",children:[f.jsx(bc,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:""}),y>0&&f.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[#2D3436] text-white text-xs font-bold rounded-full flex items-center justify-center",children:y>9?"9+":y})]}),f.jsxs("button",{onClick:t,className:`btn-pop p-2 sm:px-3 sm:py-2 flex items-center gap-1 text-sm
            ${p?"bg-[#1DD1A1] text-white":"bg-[#FF6B6B] text-white animate-pulse"}`,title:p?"API Key ":" API Key",children:[f.jsx(P0,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:p?"":""})]}),f.jsxs("button",{onClick:()=>e(!r),className:`btn-pop px-3 sm:px-4 py-2 flex items-center gap-1 sm:gap-2 text-sm sm:text-base
            ${r?"bg-[#FF6B9D] text-white":"bg-[#54A0FF] text-white"}`,children:[r?f.jsx(On,{size:18}):f.jsx(C0,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:r?"":""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsxs("div",{className:"relative group",children:[w!=null&&w.photoURL?f.jsx("img",{src:w.photoURL,alt:w.displayName,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 border-[#2D3436] cursor-pointer hover:ring-2 hover:ring-[#FECA57] transition-all"}):f.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center cursor-pointer",children:f.jsx("span",{className:"text-lg",children:""})}),f.jsxs("div",{className:"absolute right-0 top-12 bg-white border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] p-3 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[f.jsx("div",{className:"text-sm font-bold text-[#2D3436] truncate",children:w==null?void 0:w.displayName}),f.jsx("div",{className:"text-xs text-[#636E72] truncate",children:w==null?void 0:w.email}),(w==null?void 0:w.schoolName)&&f.jsx("div",{className:"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]",children:f.jsxs("div",{className:"text-xs text-[#636E72] flex items-center gap-1",children:[" ",f.jsx("span",{className:"font-bold text-[#A29BFE]",children:w.schoolName})]})}),(w==null?void 0:w.assignedClassNames)&&w.assignedClassNames.length>0&&f.jsx("div",{className:`${w!=null&&w.schoolName?"mt-1":"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]"}`,children:f.jsxs("div",{className:"text-xs text-[#636E72] flex items-start gap-1",children:[f.jsx(cl,{size:12,className:"mt-0.5 shrink-0"}),f.jsx("span",{className:"font-bold text-[#54A0FF]",children:w.assignedClassNames.join("")})]})}),f.jsxs("button",{onClick:h,className:"w-full btn-pop px-3 py-2 bg-[#636E72] text-white text-xs font-bold flex items-center justify-center gap-2 mt-3",children:[f.jsx(A0,{size:14}),""]})]})]})]})]}),$A=()=>f.jsx("footer",{className:"bg-[#FECA57] text-[#2D3436] text-xs sm:text-sm py-3 sm:py-4 text-center border-t-4 border-[#2D3436] shrink-0 font-bold",children:f.jsxs("p",{className:"flex items-center justify-center gap-2",children:[f.jsx("span",{children:""}),f.jsx("span",{children:" "}),f.jsx("span",{children:""})]})}),qA=({dialog:r,closeDialog:e})=>r.isOpen?f.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-sm overflow-hidden animate-in",children:[f.jsx("div",{className:"p-4 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436]",children:f.jsxs("h3",{className:"font-black text-lg sm:text-xl text-white flex items-center gap-2",children:[r.type==="confirm"?f.jsx(C_,{size:24}):f.jsx(T_,{size:24}),r.title]})}),f.jsx("div",{className:"p-4 sm:p-6 bg-[#FFFDF5] text-[#2D3436] font-bold text-base sm:text-lg",children:r.message}),f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFF9E6] flex justify-end gap-2 sm:gap-3 border-t-2 border-dashed border-[#E8DCC8]",children:r.type==="confirm"?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-white text-[#2D3436] text-sm sm:text-base",children:" "}),f.jsx("button",{onClick:r.onConfirm,className:"btn-pop px-4 sm:px-6 py-2 bg-[#FF6B6B] text-white text-sm sm:text-base",children:" "})]}):f.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-[#1DD1A1] text-white text-sm sm:text-base",children:" "})})]})}):null,HA=({progress:r})=>{const e=r.total>0?r.current/r.total*100:0;return f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#2D3436]/70 backdrop-blur-md p-4",children:f.jsxs("div",{className:"card-pop w-[95%] sm:w-[90%] max-w-2xl flex flex-col items-center justify-center p-6 sm:p-10 text-center animate-in bg-[#FFF9E6]",children:[f.jsx("div",{className:"mb-4 sm:mb-6 text-6xl sm:text-8xl animate-bounce-soft",children:""}),f.jsxs("h2",{className:"text-2xl sm:text-4xl md:text-5xl font-black text-[#2D3436] mb-4 sm:mb-6",children:[f.jsxs("span",{className:"relative inline-block",children:["",f.jsx("span",{className:"absolute bottom-1 left-0 right-0 h-3 bg-[#FECA57] -z-10 transform rotate-1"})]}),f.jsx("span",{className:"animate-pulse",children:"..."})]}),f.jsx("div",{className:"w-full max-w-md bg-white border-3 border-[#2D3436] h-8 sm:h-10 mb-3 sm:mb-4 overflow-hidden rounded-full shadow-[4px_4px_0_#2D3436]",children:f.jsx("div",{className:"h-full transition-all duration-300 ease-out bg-gradient-to-r from-[#FF6B9D] via-[#FECA57] to-[#1DD1A1]",style:{width:`${e}%`}})}),f.jsxs("p",{className:"text-lg sm:text-2xl text-[#2D3436] font-bold mb-4 sm:mb-6",children:[" ",r.current," / ",r.total," "]}),f.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-[#FF6B9D] font-black",children:" "})]})})},WA=({isOpen:r,onClose:e,globalStyles:t,toggleGlobalStyle:i})=>{if(!r)return null;const o=["#FF6B9D","#FF9F43","#FECA57","#1DD1A1","#54A0FF","#A29BFE","#FF6B6B","#FF6B9D","#FF9F43","#FECA57","#1DD1A1","#54A0FF"];return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-3xl max-h-[95vh] sm:max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#A29BFE] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 sm:gap-3 text-lg sm:text-2xl",children:[f.jsx("span",{className:"text-2xl",children:""}),f.jsx("span",{className:"hidden sm:inline",children:""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(On,{size:20})})]}),f.jsxs("div",{className:"p-3 sm:p-6 overflow-y-auto flex-1 mobile-scroll-hide",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 sm:p-3 bg-[#FECA57] border-2 border-[#2D3436] rounded-lg text-sm sm:text-base font-bold text-[#2D3436]",children:[f.jsx("span",{className:"text-xl",children:""})," 2 "]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:Ef.map((l,h)=>{const p=t.includes(l.id),y=!p&&t.length>=2,v=o[h%o.length];return f.jsx("div",{onClick:()=>!y&&i(l.id),className:`
                    p-3 sm:p-4 cursor-pointer transition-all border-3 border-[#2D3436] rounded-lg
                    ${p?"shadow-[4px_4px_0_#2D3436] transform -translate-y-1":"shadow-[2px_2px_0_#2D3436]"}
                    ${y?"opacity-50 cursor-not-allowed":"hover:-translate-y-1 hover:shadow-[4px_4px_0_#2D3436]"}
                  `,style:{backgroundColor:p?v:"#FFFDF5"},children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:`w-6 h-6 sm:w-7 sm:h-7 border-2 border-[#2D3436] rounded flex items-center justify-center shrink-0
                      ${p?"bg-[#2D3436] text-white":"bg-white"}`,children:p&&f.jsx("span",{className:"text-sm",children:""})}),f.jsxs("div",{children:[f.jsx("h4",{className:`font-black text-base sm:text-lg ${p?"text-white":"text-[#2D3436]"}`,children:l.name}),f.jsx("p",{className:`text-xs sm:text-sm mt-1 leading-relaxed ${p?"text-white/90":"text-[#636E72]"}`,children:l.desc})]})]})},l.id)})})]}),f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FFF9E6] flex justify-between items-center border-t-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("span",{className:"text-sm sm:text-lg font-bold text-[#2D3436]",children:[" ",t.length," / 2  "]}),f.jsx("button",{onClick:e,className:"btn-pop bg-[#1DD1A1] text-white px-6 sm:px-8 py-2 sm:py-3 text-sm sm:text-base",children:" "})]})]})})},KA=({rawInput:r,setRawInput:e,numberCount:t,setNumberCount:i,onGenerateStudents:o,onGenerateNumbers:l,onResetList:h,isGenerating:p})=>f.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 p-3 sm:p-4 bg-[#FF9F43] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[-0.5deg]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl mb-1",children:[f.jsx("span",{className:"text-2xl",children:""}),"1. "]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[f.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[f.jsx("textarea",{className:"flex-1 min-h-[100px] sm:min-h-[120px] p-3 sm:p-4 border-3 border-[#2D3436] rounded-lg outline-none text-sm sm:text-base resize-none font-medium placeholder:text-[#2D3436]/40 text-[#2D3436] leading-relaxed bg-white shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1)]",placeholder:`...


`,value:r,onChange:y=>e(y.target.value),disabled:p}),f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 bg-white p-2 sm:p-3 border-2 border-[#2D3436] rounded-lg",children:[f.jsxs("span",{className:"text-[#2D3436] font-bold text-xs sm:text-sm flex items-center gap-1",children:[f.jsx(I0,{size:14})," "]}),f.jsx("input",{type:"number",min:"1",max:"100",value:t,onChange:y=>i(Number(y.target.value)),className:"w-14 sm:w-16 text-center border-2 border-[#2D3436] text-[#2D3436] font-bold text-xs sm:text-sm py-1.5 outline-none rounded"}),f.jsx("span",{className:"text-[#2D3436] text-xs sm:text-sm font-bold",children:""}),f.jsx("button",{onClick:l,className:"btn-pop ml-auto bg-[#FECA57] text-[#2D3436] px-3 py-1 text-xs sm:text-sm",children:" "})]})]}),f.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 sm:gap-3 sm:w-24",children:[f.jsxs("button",{onClick:o,disabled:p,className:"flex-1 btn-pop bg-[#1DD1A1] text-white font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(I_,{size:20}),f.jsx("span",{children:""})]}),f.jsxs("button",{onClick:h,disabled:p,className:"flex-1 btn-pop bg-white text-[#FF6B6B] font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(S_,{size:18}),f.jsx("span",{children:""})]})]})]})]}),GA=({students:r,selectedIds:e,isGenerating:t,extraSettings:i,setExtraSettings:o,onGenerateSelected:l,onGenerateAll:h,onDownload:p,onDeleteSelected:y,onResetList:v})=>f.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 sm:gap-4 p-3 sm:p-4 bg-[#54A0FF] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[0.5deg]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl",children:[f.jsx("span",{className:"text-2xl",children:""}),"2. AI "]}),f.jsxs("div",{className:"bg-white/90 border-2 border-[#2D3436] rounded-lg p-2 sm:p-3 flex flex-col gap-2 sm:gap-3",children:[f.jsx("div",{className:"flex items-center justify-between text-xs sm:text-sm font-bold text-[#2D3436] border-b-2 border-dashed border-[#E8DCC8] pb-2",children:f.jsx("span",{className:"flex items-center gap-1",children:" "})}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[f.jsx("div",{className:"flex bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg overflow-hidden",children:[{val:"normal",label:"",emoji:""},{val:"casual",label:"",emoji:""},{val:"formal",label:"",emoji:""}].map(w=>f.jsxs("button",{onClick:()=>o(E=>({...E,tone:w.val})),className:`px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-bold transition-colors 
                  ${i.tone===w.val?"bg-[#FF6B9D] text-white":"text-[#2D3436] hover:bg-[#FECA57]"}`,children:[f.jsx("span",{className:"hidden sm:inline",children:w.emoji})," ",w.label]},w.val))}),f.jsxs("div",{className:"flex items-center gap-2 bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg px-2 sm:px-3 py-1.5 ml-auto",children:[f.jsx("span",{className:"text-xs sm:text-sm font-bold text-[#2D3436]",children:" "}),f.jsx("input",{type:"number",min:"20",max:"500",step:"10",value:i.wordCount,onChange:w=>o(E=>({...E,wordCount:Number(w.target.value)})),className:"w-12 text-xs sm:text-sm font-bold text-[#2D3436] text-center outline-none bg-white border-2 border-[#2D3436] rounded"})]})]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[f.jsxs("button",{onClick:l,disabled:e.size===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2 
            ${e.size>0&&!t?"bg-white text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[f.jsx(D0,{size:18}),t?"...":` (${e.size})`]}),f.jsxs("button",{onClick:h,disabled:r.length===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2
            ${r.length>0&&!t?"bg-[#FECA57] text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[f.jsx("span",{className:"text-xl",children:""}),t?"AI ...":""]})]}),f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs sm:text-sm pt-2 border-t-2 border-dashed border-white/50",children:[f.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[f.jsxs("button",{onClick:()=>p("txt"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[f.jsx($d,{size:14})," TXT"]}),f.jsxs("button",{onClick:()=>p("csv"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[f.jsx($d,{size:14})," CSV"]})]}),f.jsxs("div",{className:"flex gap-2",children:[e.size>0&&f.jsxs("button",{onClick:y,disabled:t,className:"btn-pop bg-[#FF6B6B] text-white px-2 sm:px-3 py-1 flex items-center gap-1 text-xs sm:text-sm disabled:opacity-50",children:[f.jsx(Jo,{size:12}),"  (",e.size,")"]}),f.jsx("button",{onClick:v,disabled:t||r.length===0,className:"text-white/80 hover:text-white font-bold transition-colors disabled:opacity-50",children:" "})]})]})]}),QA=({globalStyles:r,onOpenStyleModal:e,isGenerating:t})=>{const i={qualitative:"#FF6B9D",emotional:"#FF9F43",friendly:"#FECA57",humorous:"#1DD1A1",internal:"#54A0FF",philosophical:"#A29BFE",practical:"#FF6B6B",resonance:"#FF6B9D",blessing:"#FF9F43",scenario:"#FECA57",milestone:"#1DD1A1",journey:"#54A0FF"};return f.jsxs("div",{className:"mb-4 sm:mb-6 bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 shadow-[4px_4px_0_#2D3436]",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-[#2D3436] text-sm sm:text-base font-black",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsx("span",{children:""}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:r.length>0?r.map(o=>{var l;return f.jsx("span",{className:"px-3 py-1 border-2 border-[#2D3436] rounded-full text-xs sm:text-sm font-bold text-white shadow-[2px_2px_0_#2D3436]",style:{backgroundColor:i[o]||"#A29BFE"},children:(l=Ef.find(h=>h.id===o))==null?void 0:l.name},o)}):f.jsx("span",{className:"text-[#636E72] font-medium text-xs sm:text-sm bg-[#E8DCC8] px-3 py-1 rounded-full",children:" (: )"})})]}),f.jsxs("button",{onClick:e,disabled:t,className:"btn-pop w-full sm:w-auto bg-[#A29BFE] text-white px-4 sm:px-6 py-2 text-xs sm:text-sm font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(b0,{size:14})," "]})]})},XA=({student:r,isSelected:e,isFocused:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:h,onOpenSidebar:p,onRemoveTag:y,onUpdateStudent:v,onDeleteStudent:w,onGenerateSingle:E,onSaveTemplate:S,onOpenHistory:O})=>{const H=["-1deg","0.5deg","-0.5deg","1deg","0deg"],$=H[r.id%H.length],U=o===r.id,K=ne=>ne<50?"text-[#FF6B6B]":ne>120?"text-[#FF9F43]":"text-[#1DD1A1]";return f.jsxs("div",{className:`bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg overflow-hidden shadow-[4px_4px_0_#2D3436] transition-all
        ${e?"ring-4 ring-[#FF6B9D]":""}
        ${t?"ring-4 ring-[#54A0FF]":""}
        ${U?"ring-4 ring-[#FECA57] animate-pulse":""}`,style:{transform:`rotate(${$})`},children:[f.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FECA57] border-b-2 border-[#2D3436]",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>l(r.id),disabled:i||U,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center
              ${e?"bg-[#FF6B9D] text-white":"bg-white"}`,children:e&&f.jsx("span",{className:"text-sm font-bold",children:""})}),f.jsxs("span",{className:"font-black text-[#2D3436] text-base",children:[" ",r.name]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("button",{onClick:()=>E(r.id),disabled:i||U,className:"btn-pop px-2 py-1 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50",children:[U?f.jsx(tl,{size:14,className:"animate-spin"}):f.jsx(f.Fragment,{children:""}),f.jsx("span",{className:"hidden sm:inline",children:U?"":""})]}),f.jsx("button",{onClick:()=>w(r.id),disabled:i||U,className:"text-[#2D3436]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30 p-1",children:f.jsx(Jo,{size:18})})]})]}),f.jsxs("div",{className:"p-3 border-b-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{className:"text-xs font-bold text-[#636E72] mb-2",children:" "}),f.jsx("div",{onClick:()=>{h(r.id),p()},className:`p-2 border-2 border-dashed bg-white min-h-[50px] flex flex-col gap-2 cursor-pointer transition-colors rounded-lg
            ${t?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8]"}`,children:r.selectedTags.length>0?f.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.selectedTags.map((ne,ee)=>f.jsxs("span",{className:"tag-handwrite text-xs",children:[ne,f.jsx("button",{onClick:q=>{q.stopPropagation(),y(r.id,ne)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},ee))}):f.jsx("span",{className:"text-[#636E72]/50 text-xs",children:" ..."})}),f.jsx("input",{type:"text",value:r.manualTraits,onChange:ne=>v(r.id,"manualTraits",ne.target.value),placeholder:" ...",disabled:i||U,className:"w-full mt-2 p-2 text-sm font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40"})]}),f.jsxs("div",{className:"p-3 bg-[#FFF9E6]",children:[f.jsxs("div",{className:"text-xs font-bold text-[#636E72] mb-2 flex items-center justify-between",children:[f.jsx("span",{className:"flex items-center gap-1",children:" AI "}),f.jsxs("div",{className:"flex items-center gap-2",children:[O&&f.jsxs("button",{onClick:()=>O(r),className:"flex items-center gap-1 text-[#54A0FF] hover:text-[#2D3436] transition-colors",title:"",children:[f.jsx($o,{size:14}),f.jsx("span",{children:""})]}),r.comment&&!r.comment.includes("")&&!r.comment.includes("")&&f.jsxs("button",{onClick:()=>S(r),className:"flex items-center gap-1 text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors",title:"",children:[f.jsx(bc,{size:14}),f.jsx("span",{children:""})]})]})]}),f.jsx("textarea",{value:r.comment,onChange:ne=>v(r.id,"comment",ne.target.value),placeholder:" AI ...",disabled:U,className:`w-full text-sm p-3 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[100px] leading-relaxed font-medium text-[#2D3436] rounded-lg
            ${U?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),r.comment&&f.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${K(r.comment.length)}`,children:[r.comment.length," "]})]})]})},YA=({students:r,selectedIds:e,focusedStudentId:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onToggleAllSelection:h,onFocusStudent:p,onOpenSidebar:y,onRemoveTag:v,onUpdateStudent:w,onDeleteStudent:E,onGenerateSingle:S,onSaveTemplate:O,onOpenHistory:H})=>{const $=typeof window<"u"&&window.innerWidth<768,U=K=>K<50?"text-[#FF6B6B]":K>120?"text-[#FF9F43]":"text-[#1DD1A1]";return $?f.jsx("div",{className:"space-y-4",children:r.length===0?f.jsxs("div",{className:"p-10 text-center font-bold text-lg bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436]",children:[f.jsx("span",{className:"text-4xl block mb-3",children:""}),f.jsx("span",{className:"text-[#636E72]",children:""})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex items-center justify-between bg-[#A29BFE] text-white border-3 border-[#2D3436] p-3 rounded-lg shadow-[3px_3px_0_#2D3436]",children:f.jsxs("button",{onClick:h,className:"flex items-center gap-2 font-bold text-sm",disabled:i,children:[f.jsx("span",{className:`w-5 h-5 border-2 border-white rounded flex items-center justify-center ${e.size===r.length&&r.length>0?"bg-white text-[#A29BFE]":""}`,children:e.size===r.length&&r.length>0&&f.jsx("span",{className:"text-xs",children:""})})," (",e.size,"/",r.length,")"]})}),r.map(K=>f.jsx(XA,{student:K,isSelected:e.has(K.id),isFocused:t===K.id,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:p,onOpenSidebar:y,onRemoveTag:v,onUpdateStudent:w,onDeleteStudent:E,onGenerateSingle:S,onSaveTemplate:O,onOpenHistory:H},K.id))]})}):f.jsx("div",{className:"card-pop overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left border-collapse min-w-[1000px]",children:[f.jsx("thead",{className:"bg-[#FF6B9D] text-white",children:f.jsxs("tr",{className:"text-base font-black",children:[f.jsx("th",{className:"p-4 lg:p-5 w-12 text-center border-r-2 border-[#2D3436]/20",children:f.jsx("button",{onClick:h,className:"w-6 h-6 border-2 border-white rounded flex items-center justify-center mx-auto bg-white/20 hover:bg-white/40 transition",disabled:i,children:e.size===r.length&&r.length>0&&f.jsx("span",{className:"text-sm",children:""})})}),f.jsx("th",{className:"p-4 lg:p-5 w-32 lg:w-40 border-r-2 border-[#2D3436]/20",children:" "}),f.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20 w-1/4",children:" "}),f.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20",children:" AI "}),f.jsx("th",{className:"p-4 lg:p-5 w-20 text-center",children:""})]})}),f.jsxs("tbody",{className:"bg-[#FFFDF5]",children:[r.length===0&&f.jsx("tr",{children:f.jsxs("td",{colSpan:"5",className:"p-16 lg:p-20 text-center font-bold text-xl text-[#636E72]",children:[f.jsx("span",{className:"text-5xl block mb-4",children:""}),""]})}),r.map(K=>{const ne=o===K.id;return f.jsxs("tr",{className:`border-t-2 border-dashed border-[#E8DCC8] hover:bg-[#FECA57]/20 transition-colors ${e.has(K.id)?"bg-[#FF6B9D]/10":""} ${ne?"bg-[#FECA57]/30":""}`,children:[f.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:f.jsx("button",{onClick:()=>l(K.id),disabled:i||ne,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center mx-auto transition ${e.has(K.id)?"bg-[#FF6B9D] text-white":"bg-white hover:bg-[#FECA57]"}`,children:e.has(K.id)&&f.jsx("span",{className:"text-sm font-bold",children:""})})}),f.jsxs("td",{className:"p-4 lg:p-5 align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{className:"font-black text-[#2D3436] text-base lg:text-lg mb-2",children:K.name}),f.jsx("button",{onClick:()=>S(K.id),disabled:i||ne,className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50 w-full justify-center",children:ne?f.jsxs(f.Fragment,{children:[f.jsx(tl,{size:14,className:"animate-spin"})," ..."]}):f.jsx(f.Fragment,{children:" "})})]}),f.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{onClick:()=>{p(K.id),y()},className:`p-3 border-2 border-dashed bg-white min-h-[80px] lg:min-h-[100px] flex flex-col gap-3 cursor-pointer transition-colors rounded-lg ${t===K.id?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8] hover:border-[#FF9F43]"}`,children:K.selectedTags.length>0?f.jsx("div",{className:"flex flex-wrap gap-2",children:K.selectedTags.map((ee,q)=>f.jsxs("span",{className:"tag-handwrite text-sm",children:[ee,f.jsx("button",{onClick:se=>{se.stopPropagation(),v(K.id,ee)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},q))}):f.jsx("span",{className:"text-[#636E72]/50 text-sm",children:" ..."})}),f.jsx("input",{type:"text",value:K.manualTraits,onChange:ee=>w(K.id,"manualTraits",ee.target.value),placeholder:" ...",disabled:i||ne,className:"w-full mt-3 p-3 text-sm lg:text-base font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40 transition-all"})]}),f.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs font-bold text-[#636E72]",children:""}),f.jsxs("div",{className:"flex items-center gap-2",children:[H&&f.jsxs("button",{onClick:()=>H(K),className:"flex items-center gap-1 text-xs text-[#54A0FF] hover:text-[#2D3436] transition-colors font-bold",title:"",children:[f.jsx($o,{size:12})," "]}),K.comment&&!K.comment.includes("")&&!K.comment.includes("")&&f.jsxs("button",{onClick:()=>O(K),className:"flex items-center gap-1 text-xs text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors font-bold",title:"",children:[f.jsx(bc,{size:12})," "]})]})]}),f.jsx("textarea",{value:K.comment,onChange:ee=>w(K.id,"comment",ee.target.value),placeholder:" AI ...",disabled:ne,className:`w-full text-sm lg:text-base p-3 lg:p-4 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[180px] lg:min-h-[200px] leading-relaxed font-medium text-[#2D3436] rounded-lg transition-all ${ne?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),K.comment&&f.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${U(K.comment.length)}`,children:[K.comment.length," "]})]}),f.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8",children:f.jsx("button",{onClick:()=>E(K.id),disabled:i||ne,className:"text-[#636E72]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30",children:f.jsx(Jo,{size:18})})})]},K.id)})]})]})})},JA=({isOpen:r,onClose:e,selectedIds:t,expandedCategories:i,onToggleCategory:o,onIdiomClick:l})=>{const[h,p]=Y.useState(""),y={" ()":"#1DD1A1"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#FECA57"," ()":"#FF9F43"," ()":"#A29BFE"," ()":"#FF6B9D"," ()":"#1DD1A1"," ()":"#FECA57"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#A29BFE"," ()":"#FF9F43",:"#FF6B9D",:"#636E72"},v=$=>{try{return JSON.parse(localStorage.getItem("idiom_usage")||"{}")[$]||0}catch{return 0}},w=$=>{try{const U=JSON.parse(localStorage.getItem("idiom_usage")||"{}");U[$]=(U[$]||0)+1,localStorage.setItem("idiom_usage",JSON.stringify(U))}catch(U){console.error(":",U)}},E=$=>{w($),l($)},S=Y.useMemo(()=>{if(!h.trim())return Sd;const $=h.trim().toLowerCase(),U={};return Object.entries(Sd).forEach(([K,ne])=>{const ee=ne.filter(q=>q.toLowerCase().includes($));ee.length>0&&(U[K]=ee)}),U},[h]),O=Y.useMemo(()=>Object.values(Sd).flat().map(K=>({idiom:K,count:v(K)})).filter(K=>K.count>0).sort((K,ne)=>ne.count-K.count).slice(0,12).map(K=>K.idiom),[r]),H=Object.values(S).reduce(($,U)=>$+U.length,0);return f.jsxs(f.Fragment,{children:[r&&f.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 backdrop-blur-[2px] transition-opacity",onClick:e}),f.jsxs("div",{className:`fixed top-0 right-0 bottom-0 bg-[#FFF9E6] border-l-4 border-[#2D3436] shadow-[-8px_0_0_#2D3436] transform transition-transform duration-300 ease-in-out flex flex-col z-50
          ${r?"translate-x-0":"translate-x-full"}
          w-full sm:w-[80%] md:w-[50%] lg:w-[35%] xl:w-[30%] max-w-[400px]`,children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#1DD1A1] border-b-3 border-[#2D3436] flex items-center justify-between shrink-0",children:[f.jsxs("h2",{className:"font-black text-white flex items-center gap-2 sm:gap-3 text-base sm:text-xl",children:[f.jsx("span",{className:"text-2xl",children:""})," "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(On,{size:20})})]}),f.jsxs("div",{className:"p-3 sm:p-4 bg-white border-b-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("div",{className:"relative",children:[f.jsx(R0,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#636E72]"}),f.jsx("input",{type:"text",value:h,onChange:$=>p($.target.value),placeholder:" ...",className:"w-full pl-10 pr-4 py-2.5 border-2 border-[#2D3436] rounded-lg text-sm font-medium outline-none focus:border-[#1DD1A1] bg-[#FFFDF5]"}),h&&f.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#636E72] hover:text-[#FF6B6B]",children:""})]}),h&&f.jsxs("div",{className:"mt-2 text-xs text-[#636E72] font-bold",children:[" ",H," "]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 mobile-scroll-hide",children:[f.jsxs("div",{className:"text-sm font-bold text-[#2D3436] bg-[#FECA57] px-3 py-2 border-2 border-[#2D3436] rounded-lg inline-flex items-center gap-2 shadow-[2px_2px_0_#2D3436]",children:[f.jsx("span",{children:""})," "]}),t.size>0&&f.jsxs("div",{className:"bg-[#54A0FF] text-white p-3 sm:p-4 border-2 border-[#2D3436] text-xs sm:text-sm font-bold rounded-lg shadow-[3px_3px_0_#2D3436]",children:[f.jsx("span",{className:"block mb-1 text-white/80",children:" "})," ",f.jsx("strong",{children:t.size})," "]}),O.length>0&&!h&&f.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white bg-[#FF6B9D]",children:[f.jsx("span",{children:" "}),f.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:O.length})]}),f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:O.map(($,U)=>f.jsx("button",{onClick:()=>E($),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-[#FF6B9D] border-2 border-[#2D3436] text-white font-bold rounded-lg hover:bg-[#FF5291] transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5",children:$},`popular-${$}-${U}`))})]}),Object.entries(S).map(([$,U])=>{const K=y[$]||"#A29BFE";return f.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("button",{onClick:()=>o($),className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white transition-colors",style:{backgroundColor:K},children:[f.jsx("span",{children:$}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:U.length}),f.jsx("span",{className:"bg-white/20 rounded-full w-6 h-6 flex items-center justify-center",children:i[$]?"":""})]})]}),(i[$]||h)&&f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:U.map((ne,ee)=>f.jsx("button",{onClick:()=>E(ne),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-white border-2 border-[#2D3436] text-[#2D3436] font-bold rounded-lg hover:text-white transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5 hover:shadow-[3px_3px_0_#2D3436] active:translate-y-0 active:shadow-[1px_1px_0_#2D3436]",style:{"--hover-bg":K},onMouseEnter:q=>q.target.style.backgroundColor=K,onMouseLeave:q=>q.target.style.backgroundColor="white",children:h&&ne.includes(h)?f.jsx("span",{dangerouslySetInnerHTML:{__html:ne.replace(new RegExp(`(${h})`,"gi"),'<mark class="bg-[#FECA57] px-0.5 rounded">$1</mark>')}}):ne},`${ne}-${ee}`))})]},$)}),h&&Object.keys(S).length===0&&f.jsxs("div",{className:"text-center py-10",children:[f.jsx("div",{className:"text-4xl mb-3",children:""}),f.jsxs("p",{className:"text-[#636E72] font-bold",children:["",h,""]})]})]})]})]})},ZA=()=>f.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-[#FFF9E6]",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),f.jsx("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:"..."}),f.jsx("p",{className:"text-[#636E72] font-medium",children:""}),f.jsxs("div",{className:"mt-4 flex justify-center gap-1",children:[f.jsx("span",{className:"w-3 h-3 bg-[#FF6B9D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("span",{className:"w-3 h-3 bg-[#FECA57] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("span",{className:"w-3 h-3 bg-[#1DD1A1] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),eC=({isOpen:r,onClose:e,currentUser:t})=>{const[i,o]=Y.useState(""),[l,h]=Y.useState(!1),[p,y]=Y.useState(!1),[v,w]=Y.useState(null),[E,S]=Y.useState(""),[O,H]=Y.useState(!0);Y.useEffect(()=>{if(!r||!t)return;H(!0);const ee=el.subscribe(q=>{const se=(q==null?void 0:q.apiKey)||"";S(se),o(se),H(!1)});return()=>ee()},[r,t]);const $=async()=>{if(i.trim()){y(!0);try{await el.save({apiKey:i.trim()}),S(i.trim()),w(null),localStorage.setItem("gemini_api_key",i.trim())}catch(ee){console.error(" API Key :",ee),alert("")}y(!1)}},U=async()=>{if(window.confirm(" API Key ")){y(!0);try{await el.save({apiKey:""}),o(""),S(""),w(null),localStorage.removeItem("gemini_api_key")}catch(ee){console.error(" API Key :",ee)}y(!1)}},K=async()=>{if(!i.trim()){w("error");return}h(!0),w(null);try{const ee=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${i.trim()}`;(await fetch(ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:""}]}]})})).ok?(w("success"),await el.save({apiKey:i.trim()}),S(i.trim()),localStorage.setItem("gemini_api_key",i.trim())):w("error")}catch(ee){console.error("API :",ee),w("error")}h(!1)},ne=ee=>!ee||ee.length<10?ee:ee.substring(0,6)+""+ee.substring(ee.length-4);return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF9F43] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(S0,{size:24}),"API Key "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(On,{size:20})})]}),f.jsx("div",{className:"p-4 sm:p-6 space-y-4",children:O?f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsx(tl,{size:32,className:"animate-spin text-[#FF9F43]"})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-[#54A0FF]/20 border-2 border-[#54A0FF] rounded-lg p-3 text-sm text-[#2D3436]",children:[f.jsx("p",{className:"font-bold mb-1",children:"  API Key"}),f.jsx("p",{className:"text-[#636E72]",children:" Google AI Studio  Gemini API Key"}),f.jsxs("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-[#54A0FF] hover:underline font-bold mt-2",children:[f.jsx(T0,{size:14})," API Key"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"font-bold text-[#2D3436]",children:""}),E?f.jsxs("span",{className:"flex items-center gap-1 text-[#1DD1A1] font-bold",children:[f.jsx(Bd,{size:16})," (",ne(E),")"]}):f.jsxs("span",{className:"flex items-center gap-1 text-[#FF6B6B] font-bold",children:[f.jsx(zd,{size:16}),""]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-[#2D3436] mb-2",children:" Gemini API Key"}),f.jsx("input",{type:"password",value:i,onChange:ee=>{o(ee.target.value),w(null)},placeholder:" API Key...",className:"w-full p-3 border-3 border-[#2D3436] rounded-lg text-[#2D3436] font-medium placeholder:text-[#636E72]/50 focus:border-[#FF9F43] outline-none"})]}),v&&f.jsx("div",{className:`p-3 rounded-lg border-2 flex items-center gap-2 text-sm font-bold
                                  ${v==="success"?"bg-[#1DD1A1]/20 border-[#1DD1A1] text-[#1DD1A1]":"bg-[#FF6B6B]/20 border-[#FF6B6B] text-[#FF6B6B]"}`,children:v==="success"?f.jsxs(f.Fragment,{children:[f.jsx(Bd,{size:18}),"API Key  "]}):f.jsxs(f.Fragment,{children:[f.jsx(zd,{size:18})," API Key "]})}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[f.jsx("button",{onClick:K,disabled:!i.trim()||l||p,className:"btn-pop flex-1 py-3 bg-[#54A0FF] text-white font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:l?f.jsxs(f.Fragment,{children:[f.jsx(tl,{size:18,className:"animate-spin"}),"..."]}):f.jsx(f.Fragment,{children:" "})}),f.jsx("button",{onClick:$,disabled:!i.trim()||p,className:"btn-pop flex-1 py-3 bg-[#1DD1A1] text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:p?f.jsxs(f.Fragment,{children:[f.jsx(tl,{size:18,className:"animate-spin"}),"..."]}):f.jsx(f.Fragment,{children:" "})})]}),E&&f.jsx("button",{onClick:U,disabled:p,className:"w-full text-center text-sm text-[#FF6B6B] hover:underline font-bold disabled:opacity-50",children:"  API Key"})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center flex items-center justify-center gap-1",children:[f.jsx(x0,{size:14}),"API Key "]})]})}):null},tC=({isOpen:r,onClose:e,onApplyTemplate:t})=>{const[i,o]=Y.useState([]),[l,h]=Y.useState(!0);Y.useEffect(()=>{if(!r)return;h(!0);const w=ll.subscribe(E=>{o(E),h(!1)});return()=>w()},[r]);const p=async w=>{try{await ll.delete(w)}catch(E){console.error(":",E)}},y=async w=>{try{await ll.incrementUsage(w.id),t(w.content),e()}catch(E){console.error(":",E)}},v=async w=>{try{await navigator.clipboard.writeText(w)}catch(E){console.error(":",E)}};return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-2xl max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(bc,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(On,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:l?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):i.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("p",{className:"text-lg font-bold text-[#636E72]",children:""}),f.jsx("p",{className:"text-sm text-[#636E72]/70 mt-2",children:"   "})]}):f.jsx("div",{className:"space-y-4",children:i.map(w=>f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"p-3 bg-[#FECA57] border-b-2 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-bold text-[#2D3436]",children:w.studentName||""}),w.tags&&w.tags.length>0&&f.jsxs("div",{className:"flex gap-1 flex-wrap",children:[w.tags.slice(0,3).map((E,S)=>f.jsx("span",{className:"px-2 py-0.5 bg-white text-[#2D3436] text-xs rounded-full border border-[#2D3436]",children:E},S)),w.tags.length>3&&f.jsxs("span",{className:"text-xs text-[#2D3436]",children:["+",w.tags.length-3]})]})]}),f.jsxs("span",{className:"text-xs text-[#2D3436]/70",children:[" ",w.usageCount||0," "]})]}),f.jsx("div",{className:"p-3 text-sm text-[#2D3436] leading-relaxed max-h-[120px] overflow-y-auto",children:w.content}),f.jsxs("div",{className:"p-2 bg-[#FFF9E6] border-t border-dashed border-[#E8DCC8] flex items-center justify-end gap-2",children:[f.jsxs("button",{onClick:()=>v(w.content),className:"btn-pop px-3 py-1.5 bg-white text-[#2D3436] text-xs font-bold flex items-center gap-1",children:[f.jsx(E0,{size:12}),""]}),f.jsxs("button",{onClick:()=>y(w),className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(v0,{size:12}),""]}),f.jsxs("button",{onClick:()=>p(w.id),className:"btn-pop px-3 py-1.5 bg-[#FF6B6B] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(Jo,{size:12}),""]})]})]},w.id))})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",i.length,"  | "]})]})}):null},nC=()=>{const[r,e]=Y.useState(null),[t,i]=Y.useState(!1);Y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const p=localStorage.getItem("pwa_install_dismissed");if(p&&Date.now()-parseInt(p)<1e3*60*60*24*7)return;const y=v=>{v.preventDefault(),e(v),i(!0)};return window.addEventListener("beforeinstallprompt",y),()=>window.removeEventListener("beforeinstallprompt",y)},[]);const o=async()=>{if(!r)return;r.prompt();const{outcome:h}=await r.userChoice;h==="accepted"&&i(!1),e(null)},l=()=>{i(!1),localStorage.setItem("pwa_install_dismissed",Date.now().toString())};return t?f.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-sm z-[100] animate-in",children:f.jsxs("div",{className:"bg-[#2D3436] text-white p-4 rounded-lg border-3 border-[#FECA57] shadow-[4px_4px_0_#FECA57] flex items-center gap-3",children:[f.jsx("div",{className:"text-3xl",children:""}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-black text-sm",children:""}),f.jsx("p",{className:"text-xs text-white/70 mt-0.5",children:""})]}),f.jsxs("button",{onClick:o,className:"btn-pop px-3 py-2 bg-[#FECA57] text-[#2D3436] text-xs font-bold flex items-center gap-1",children:[f.jsx($d,{size:14}),""]}),f.jsx("button",{onClick:l,className:"text-white/50 hover:text-white p-1",children:f.jsx(On,{size:16})})]})}):null},rC=({isOpen:r,onClose:e,currentClassId:t,onSelectClass:i})=>{const[o,l]=Y.useState([]),[h,p]=Y.useState(!0),[y,v]=Y.useState(!1),[w,E]=Y.useState(null),[S,O]=Y.useState(""),[H,$]=Y.useState("");Y.useEffect(()=>{if(!r)return;p(!0);const q=ss.subscribe(se=>{l(se),p(!1)});return()=>q()},[r]);const U=async()=>{if(S.trim())try{await ss.add({name:S.trim(),year:new Date().getFullYear()}),O(""),v(!1)}catch(q){console.error(":",q)}},K=async q=>{if(H.trim())try{await ss.update(q,{name:H.trim()}),E(null),$("")}catch(se){console.error(":",se)}},ne=async q=>{if(window.confirm(""))try{await ss.delete(q),t===q&&i(null)}catch(se){console.error(":",se)}},ee=q=>{i(q),e()};return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#A29BFE] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(cl,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(On,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:h?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>ee(null),className:`w-full p-4 border-2 border-[#2D3436] rounded-lg flex items-center justify-between transition-all shadow-[3px_3px_0_#2D3436]
                  ${t?"bg-white hover:bg-[#FECA57]/20":"bg-[#1DD1A1] text-white"}`,children:[f.jsxs("span",{className:"font-bold flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:""})," "]}),!t&&f.jsx(zs,{size:20})]}),o.map(q=>f.jsx("div",{className:`p-4 border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] transition-all
                    ${t===q.id?"bg-[#54A0FF] text-white":"bg-white"}`,children:w===q.id?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:H,onChange:se=>$(se.target.value),className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg text-[#2D3436] font-bold",autoFocus:!0}),f.jsx("button",{onClick:()=>K(q.id),className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:f.jsx(zs,{size:16})}),f.jsx("button",{onClick:()=>E(null),className:"btn-pop p-2 bg-[#636E72] text-white",children:f.jsx(On,{size:16})})]}):f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>ee(q.id),className:"flex-1 text-left font-bold flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:""})," ",q.name,t===q.id&&f.jsx(zs,{size:18})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>{E(q.id),$(q.name)},className:"p-2 hover:text-[#54A0FF] transition-colors",children:f.jsx(N0,{size:16})}),f.jsx("button",{onClick:()=>ne(q.id),className:"p-2 hover:text-[#FF6B6B] transition-colors",children:f.jsx(Jo,{size:16})})]})]})},q.id)),y?f.jsx("div",{className:"p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg bg-[#1DD1A1]/10",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:S,onChange:q=>O(q.target.value),placeholder:"...",className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg font-bold",autoFocus:!0,onKeyDown:q=>q.key==="Enter"&&U()}),f.jsx("button",{onClick:U,className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:f.jsx(zs,{size:16})}),f.jsx("button",{onClick:()=>{v(!1),O("")},className:"btn-pop p-2 bg-[#636E72] text-white",children:f.jsx(On,{size:16})})]})}):f.jsxs("button",{onClick:()=>v(!0),className:"w-full p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg text-[#1DD1A1] font-bold flex items-center justify-center gap-2 hover:bg-[#1DD1A1]/10 transition-colors",children:[f.jsx(I_,{size:20}),""]}),o.length===0&&!y&&f.jsxs("div",{className:"text-center py-8 text-[#636E72]",children:[f.jsx("div",{className:"text-4xl mb-3",children:""}),f.jsx("p",{className:"font-bold",children:""}),f.jsx("p",{className:"text-sm mt-1",children:""})]})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",o.length,"  | "]})]})}):null},sC=({isOpen:r,onClose:e,student:t,onRestore:i})=>{const[o,l]=Y.useState([]),[h,p]=Y.useState(!0);Y.useEffect(()=>{if(!r||!t)return;p(!0);const E=vf.subscribe(t.id,S=>{l(S),p(!1)});return()=>E()},[r,t]);const y=E=>{i(E),e()},v=async E=>{if(window.confirm(""))try{await vf.delete(t.id,E)}catch(S){console.error(":",S)}},w=E=>E!=null&&E.toDate?E.toDate().toLocaleString("zh-TW",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return!r||!t?null:f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#54A0FF] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx($o,{size:24}),t.name," "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(On,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:h?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):o.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("p",{className:"text-lg font-bold text-[#636E72]",children:""}),f.jsx("p",{className:"text-sm text-[#636E72]/70 mt-2",children:""})]}):f.jsx("div",{className:"space-y-3",children:o.map((E,S)=>{var O;return f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"px-3 py-2 bg-[#E8DCC8] border-b border-dashed border-[#2D3436]/20 flex items-center justify-between",children:[f.jsxs("span",{className:"text-xs font-bold text-[#636E72] flex items-center gap-1",children:[f.jsx($o,{size:12}),w(E.createdAt),S===0&&f.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#1DD1A1] text-white rounded-full text-[10px]",children:""})]}),f.jsxs("span",{className:"text-xs text-[#636E72]",children:[((O=E.comment)==null?void 0:O.length)||0," "]})]}),f.jsx("div",{className:"p-3 text-sm text-[#2D3436] leading-relaxed max-h-[120px] overflow-y-auto",children:E.comment}),f.jsxs("div",{className:"p-2 bg-[#FFF9E6] border-t border-dashed border-[#E8DCC8] flex items-center justify-end gap-2",children:[f.jsxs("button",{onClick:()=>y(E.comment),className:"btn-pop px-3 py-1.5 bg-[#54A0FF] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(k0,{size:12}),""]}),f.jsx("button",{onClick:()=>v(E.id),className:"btn-pop px-3 py-1.5 bg-[#FF6B6B] text-white text-xs font-bold flex items-center gap-1",children:f.jsx(Jo,{size:12})})]})]},E.id)})})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",o.length,"  | "]})]})})},iC=({isOpen:r,onClose:e,currentUser:t})=>{const[i,o]=Y.useState([]),[l,h]=Y.useState([]),[p,y]=Y.useState([]),[v,w]=Y.useState(!0),[E,S]=Y.useState(null),[O,H]=Y.useState([]),[$,U]=Y.useState(null);Y.useEffect(()=>{if(!r)return;w(!0);const T=is.subscribeAll(R=>{o(R),w(!1)}),N=ss.subscribe(R=>{h(R)}),P=lc.subscribe(R=>{y(R)});return()=>{T(),N(),P()}},[r]);const K=T=>{S(T),H(T.assignedClasses||[]),U(T.schoolId||null)},ne=T=>{H(N=>N.includes(T)?N.filter(P=>P!==T):[...N,T])},ee=async()=>{E&&(await is.approve(E.id,O,$),S(null),H([]),U(null))},q=async()=>{E&&(await is.updateAssignedClasses(E.id,O,$),S(null),H([]),U(null))},se=async T=>{window.confirm("/")&&await is.reject(T)},oe=T=>{switch(T){case It.ADMIN:return f.jsx("span",{className:"px-2 py-0.5 bg-[#FF6B9D] text-white text-xs font-bold rounded-full",children:""});case It.TEACHER:return f.jsx("span",{className:"px-2 py-0.5 bg-[#1DD1A1] text-white text-xs font-bold rounded-full",children:""});default:return f.jsx("span",{className:"px-2 py-0.5 bg-[#FECA57] text-[#2D3436] text-xs font-bold rounded-full",children:""})}},C=T=>T!=null&&T.toDate?T.toDate().toLocaleDateString("zh-TW"):"-";return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-4xl max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(A_,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(On,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:v?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):E?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border-2 border-[#2D3436] rounded-lg",children:[E.photoURL?f.jsx("img",{src:E.photoURL,alt:"",className:"w-12 h-12 rounded-full border-2 border-[#2D3436]"}):f.jsx("div",{className:"w-12 h-12 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center",children:""}),f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-[#2D3436]",children:E.displayName}),f.jsx("div",{className:"text-sm text-[#636E72]",children:E.email})]}),oe(E.role)]}),f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg p-4",children:[f.jsxs("h4",{className:"font-bold text-[#2D3436] mb-3 flex items-center gap-2",children:[f.jsx(w0,{size:18}),""]}),p.length===0?f.jsx(__,{onAdd:async(T,N,P)=>{await lc.add({name:T,city:N,district:P})}}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(T=>f.jsxs("button",{onClick:()=>U($===T.id?null:T.id),className:`px-3 py-2 border-2 border-[#2D3436] rounded-lg font-bold text-sm transition-all
                                                      ${$===T.id?"bg-[#A29BFE] text-white shadow-[2px_2px_0_#2D3436]":"bg-white hover:bg-[#A29BFE]/20"}`,children:[$===T.id&&f.jsx(zs,{size:14,className:"inline mr-1"})," ",T.name,T.city&&f.jsxs("span",{className:"text-xs opacity-70 ml-1",children:["(",T.city,")"]})]},T.id))}),f.jsx(__,{compact:!0,onAdd:async(T,N,P)=>{await lc.add({name:T,city:N,district:P})}})]})]}),f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg p-4",children:[f.jsxs("h4",{className:"font-bold text-[#2D3436] mb-3 flex items-center gap-2",children:[f.jsx(cl,{size:18}),""]}),l.length===0?f.jsx(y_,{onAdd:async T=>{await ss.add({name:T})}}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(T=>f.jsxs("button",{onClick:()=>ne(T.id),className:`px-3 py-2 border-2 border-[#2D3436] rounded-lg font-bold text-sm transition-all
                          ${O.includes(T.id)?"bg-[#54A0FF] text-white shadow-[2px_2px_0_#2D3436]":"bg-white hover:bg-[#FECA57]/20"}`,children:[O.includes(T.id)&&f.jsx(zs,{size:14,className:"inline mr-1"}),T.name]},T.id))}),f.jsx(y_,{compact:!0,onAdd:async T=>{await ss.add({name:T})}})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>{S(null),H([])},className:"btn-pop px-4 py-2 bg-[#636E72] text-white font-bold",children:""}),E.role===It.PENDING?f.jsxs("button",{onClick:ee,className:"btn-pop px-4 py-2 bg-[#1DD1A1] text-white font-bold flex-1 flex items-center justify-center gap-2",children:[f.jsx(zs,{size:18}),""]}):f.jsxs("button",{onClick:q,className:"btn-pop px-4 py-2 bg-[#54A0FF] text-white font-bold flex-1 flex items-center justify-center gap-2",children:[f.jsx(zs,{size:18}),""]})]})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[f.jsxs("div",{className:"bg-[#FECA57] text-[#2D3436] p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===It.PENDING).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]}),f.jsxs("div",{className:"bg-[#1DD1A1] text-white p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===It.TEACHER).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]}),f.jsxs("div",{className:"bg-[#FF6B9D] text-white p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===It.ADMIN).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]})]}),i.filter(T=>T.role===It.PENDING).length>0&&f.jsxs("div",{className:"mb-4",children:[f.jsxs("h4",{className:"font-bold text-[#FECA57] mb-2 flex items-center gap-2",children:[f.jsx($o,{size:18})," (",i.filter(T=>T.role===It.PENDING).length,")"]}),i.filter(T=>T.role===It.PENDING).map(T=>f.jsx(g_,{user:T,onEdit:K,onReject:se,getRoleBadge:oe,formatTime:C,classes:l},T.id))]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-[#1DD1A1] mb-2 flex items-center gap-2",children:[f.jsx(j0,{size:18}),""]}),i.filter(T=>T.role!==It.PENDING).map(T=>f.jsx(g_,{user:T,onEdit:K,onReject:se,getRoleBadge:oe,formatTime:C,classes:l,isCurrentUser:T.id===(t==null?void 0:t.uid)},T.id))]})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",i.length,"  | "]})]})}):null},g_=({user:r,onEdit:e,onReject:t,getRoleBadge:i,formatTime:o,classes:l,isCurrentUser:h})=>{const p=(r.assignedClasses||[]).map(y=>{var v;return(v=l.find(w=>w.id===y))==null?void 0:v.name}).filter(Boolean).join(", ");return f.jsxs("div",{className:`p-3 bg-white border-2 border-[#2D3436] rounded-lg mb-2 flex items-center justify-between
      ${h?"ring-2 ring-[#FF6B9D]":""}`,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[r.photoURL?f.jsx("img",{src:r.photoURL,alt:"",className:"w-10 h-10 rounded-full border-2 border-[#2D3436]"}):f.jsx("div",{className:"w-10 h-10 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center text-lg",children:""}),f.jsxs("div",{children:[f.jsxs("div",{className:"font-bold text-[#2D3436] text-sm flex items-center gap-2",children:[r.displayName,i(r.role),h&&f.jsx("span",{className:"text-xs text-[#636E72]",children:"()"})]}),f.jsx("div",{className:"text-xs text-[#636E72]",children:r.email}),p&&f.jsxs("div",{className:"text-xs text-[#54A0FF] flex items-center gap-1 mt-0.5",children:[f.jsx(cl,{size:10}),p]})]})]}),f.jsx("div",{className:"flex items-center gap-1",children:r.role!==It.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>e(r),className:"btn-pop px-3 py-1.5 bg-[#54A0FF] text-white text-xs font-bold",children:r.role===It.PENDING?"":""}),r.role===It.TEACHER&&f.jsx("button",{onClick:()=>t(r.id),className:"btn-pop p-1.5 bg-[#FF6B6B] text-white",children:f.jsx(E_,{size:14})})]})})]})},y_=({onAdd:r,compact:e=!1})=>{const[t,i]=Y.useState(""),[o,l]=Y.useState(!1),h=async()=>{if(t.trim()){l(!0);try{await r(t.trim()),i("")}catch(y){console.error(":",y)}l(!1)}},p=y=>{y.key==="Enter"&&h()};return e?f.jsxs("div",{className:"flex gap-2 items-center pt-2 border-t border-dashed border-[#2D3436]/20",children:[f.jsx("input",{type:"text",value:t,onChange:y=>i(y.target.value),onKeyDown:p,placeholder:"...",className:"flex-1 px-3 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm",disabled:o}),f.jsx("button",{onClick:h,disabled:!t.trim()||o,className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold disabled:opacity-50",children:o?"...":"+ "})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-[#636E72]",children:""}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:t,onChange:y=>i(y.target.value),onKeyDown:p,placeholder:" ()",className:"flex-1 px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium",disabled:o}),f.jsx("button",{onClick:h,disabled:!t.trim()||o,className:"btn-pop px-4 py-2 bg-[#1DD1A1] text-white font-bold disabled:opacity-50 flex items-center gap-1",children:o?"...":f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"+"})," "]})})]})]})},__=({onAdd:r,compact:e=!1})=>{const[t,i]=Y.useState(""),[o,l]=Y.useState(""),[h,p]=Y.useState(!1),y=async()=>{if(t.trim()){p(!0);try{await r(t.trim(),o.trim()||null,null),i(""),l("")}catch(E){console.error(":",E)}p(!1)}},v=E=>{E.key==="Enter"&&y()},w=["","","","","","","","","","","","","","","","","","","","","",""];return e?f.jsxs("div",{className:"flex gap-2 items-center pt-2 border-t border-dashed border-[#2D3436]/20",children:[f.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"px-2 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm bg-white",disabled:h,children:[f.jsx("option",{value:"",children:""}),w.map(E=>f.jsx("option",{value:E,children:E},E))]}),f.jsx("input",{type:"text",value:t,onChange:E=>i(E.target.value),onKeyDown:v,placeholder:"...",className:"flex-1 px-3 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm",disabled:h}),f.jsx("button",{onClick:y,disabled:!t.trim()||h,className:"btn-pop px-3 py-1.5 bg-[#A29BFE] text-white text-xs font-bold disabled:opacity-50",children:h?"...":"+ "})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-[#636E72]",children:""}),f.jsxs("div",{className:"flex gap-2 flex-wrap",children:[f.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium bg-white",disabled:h,children:[f.jsx("option",{value:"",children:""}),w.map(E=>f.jsx("option",{value:E,children:E},E))]}),f.jsx("input",{type:"text",value:t,onChange:E=>i(E.target.value),onKeyDown:v,placeholder:" ()",className:"flex-1 min-w-[200px] px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium",disabled:h}),f.jsx("button",{onClick:y,disabled:!t.trim()||h,className:"btn-pop px-4 py-2 bg-[#A29BFE] text-white font-bold disabled:opacity-50 flex items-center gap-1",children:h?"...":f.jsxs(f.Fragment,{children:[f.jsx("span",{children:""})," "]})})]})]})},oC=({currentUser:r,onLogout:e,isAdmin:t})=>{const{toast:i}=L0(),{dialog:o,closeDialog:l,showConfirm:h,showAlert:p}=U0(),[y,v]=Y.useState(!1),{students:w,setStudents:E,selectedIds:S,isLoading:O,generateStudents:H,updateStudent:$,deleteStudent:U,deleteSelected:K,resetStudents:ne,toggleSelection:ee,toggleAllSelection:q,addTagToStudents:se,removeTag:oe,syncComment:C}=zA(r==null?void 0:r.uid),[T,N]=Y.useState(`

`),[P,R]=Y.useState(30),[F,b]=Y.useState(!1),[Ue,ft]=Y.useState(!1),[ot,Qe]=Y.useState(null),[ie,me]=Y.useState({current:0,total:0}),[ue,j]=Y.useState(!1),[G,Se]=Y.useState(["qualitative"]),[Ae,Ne]=Y.useState(!1),[ke,Le]=Y.useState(!1),[Fe,He]=Y.useState(Mg()),[bt,ds]=Y.useState({tone:"normal",wordCount:80}),[ri,Ln]=Y.useState(null),[fs,si]=Y.useState(!1),[ps,Dr]=Y.useState(0),[ii,at]=Y.useState(!1),[Xe,mn]=Y.useState(null),[oi,ms]=Y.useState(""),[aa,er]=Y.useState([]),[ai,jr]=Y.useState(!1),[gn,li]=Y.useState(null);Y.useEffect(()=>{if(!r)return;const ge=el.subscribe(we=>{we!=null&&we.apiKey&&(localStorage.setItem("gemini_api_key",we.apiKey),He(!0))});return()=>ge()},[r]),Y.useEffect(()=>{const ge=ll.subscribe(we=>{Dr(we.length)});return()=>ge()},[]),Y.useEffect(()=>{const ge=ss.subscribe(we=>{if(er(we),Xe){const st=we.find(wt=>wt.id===Xe);ms(st?st.name:"")}});return()=>ge()},[Xe]);const[Fr,tr]=Y.useState({" ()":!0," ()":!0});Y.useEffect(()=>{const ge=()=>j(window.innerWidth<768);return ge(),window.addEventListener("resize",ge),()=>window.removeEventListener("resize",ge)},[]);const Xi=()=>{T.trim()&&(H(T),N(""))},nr=()=>{if(P<1)return;const ge=[];for(let st=1;st<=P;st++){const wt=st<10?`0${st}`:`${st}`;ge.push(`${wt}`)}const we=ge.join(`
`);N(st=>st?`${st}
${we}`:we)},Vr=()=>{h("","",()=>{ne(),l()})},ui=()=>{S.size!==0&&h("",` ${S.size} `,()=>{K(),l()})},yn=ge=>{let we=[];if(S.size>0?we=Array.from(S):ot&&(we=[ot]),we.length===0){p("");return}se(we,ge)},gs=ge=>{tr(we=>({...we,[ge]:!we[ge]}))},rr=ge=>{Se(we=>we.includes(ge)?we.filter(wt=>wt!==ge):we.length>=2?we:[...we,ge])},Or=async(ge=!1)=>{ft(!0);const we=w.filter(wt=>ge?S.has(wt.id):!0),st=we.length;if(st===0){ft(!1);return}me({current:0,total:st});for(let wt=0;wt<st;wt++){const lt=we[wt];E(sn=>sn.map($t=>$t.id===lt.id?{...$t,comment:""}:$t));const sr=[...lt.selectedTags,lt.manualTraits].filter(Boolean).join(""),ir=await Ug(lt.name,sr,G,bt);E(sn=>sn.map($t=>$t.id===lt.id?{...$t,comment:ir}:$t)),await C(lt.id,ir),me(sn=>({...sn,current:wt+1}))}ft(!1),me({current:0,total:0}),i.success(`  ${st} `)},Mn=ge=>{M0(w,ge)},Un=async ge=>{const we=w.find(lt=>lt.id===ge);if(!we)return;if(Ln(ge),we.comment&&!we.comment.includes(""))try{await vf.add(ge,we.comment,G)}catch(lt){console.error(":",lt)}const st=[...we.selectedTags,we.manualTraits].filter(Boolean).join(""),wt=await Ug(we.name,st,G,bt);E(lt=>lt.map(sr=>sr.id===ge?{...sr,comment:wt}:sr)),await C(ge,wt),Ln(null),i.success(` ${we.name} `)},rt=async ge=>{try{await ll.add({content:ge.comment,studentName:ge.name,tags:ge.selectedTags,styles:G}),i.success(" ")}catch(we){console.error(":",we),i.error("")}},ci=ge=>{ot&&($(ot,"comment",ge),C(ot,ge))};return f.jsxs("div",{className:"min-h-screen text-[#2D3436] font-sans flex flex-col relative",children:[O&&f.jsx(ZA,{}),f.jsx(qA,{dialog:o,closeDialog:l}),Ue&&f.jsx(HA,{progress:ie}),f.jsx(WA,{isOpen:Ae,onClose:()=>Ne(!1),globalStyles:G,toggleGlobalStyle:rr}),f.jsx(eC,{isOpen:ke,onClose:()=>{Le(!1),He(Mg())},currentUser:r}),f.jsx(tC,{isOpen:fs,onClose:()=>si(!1),onApplyTemplate:ci}),f.jsx(rC,{isOpen:ii,onClose:()=>at(!1),currentClassId:Xe,onSelectClass:ge=>{mn(ge),ge||ms("")}}),f.jsx(sC,{isOpen:ai,onClose:()=>{jr(!1),li(null)},student:gn,onRestore:ge=>{gn&&($(gn.id,"comment",ge),C(gn.id,ge))}}),f.jsx(iC,{isOpen:y,onClose:()=>v(!1),currentUser:r}),f.jsx(BA,{isSidebarOpen:F,setIsSidebarOpen:b,onOpenSettings:()=>Le(!0),onOpenTemplates:()=>si(!0),onOpenClasses:()=>at(!0),onOpenAdmin:()=>v(!0),onLogout:e,hasApiKey:Fe,templateCount:ps,currentClassName:oi,currentUser:r,isAdmin:t}),f.jsxs("div",{className:"flex flex-col flex-1 w-full mx-auto relative",children:[f.jsxs("div",{className:"p-3 sm:p-6 bg-[#FFFDF5] border-b-4 border-[#2D3436] flex flex-col lg:flex-row gap-4 sm:gap-6 items-stretch",children:[f.jsx(KA,{rawInput:T,setRawInput:N,numberCount:P,setNumberCount:R,onGenerateStudents:Xi,onGenerateNumbers:nr,onResetList:Vr,isGenerating:Ue}),f.jsx(GA,{students:w,selectedIds:S,isGenerating:Ue,extraSettings:bt,setExtraSettings:ds,onGenerateSelected:()=>Or(!0),onGenerateAll:()=>Or(!1),onDownload:Mn,onDeleteSelected:ui,onResetList:Vr})]}),f.jsxs("div",{className:"flex-1 p-3 sm:p-6",children:[f.jsx(QA,{globalStyles:G,onOpenStyleModal:()=>Ne(!0),isGenerating:Ue}),f.jsx(YA,{students:w,selectedIds:S,focusedStudentId:ot,isGenerating:Ue,isGeneratingSingle:ri,onToggleSelection:ee,onToggleAllSelection:q,onFocusStudent:Qe,onOpenSidebar:()=>b(!0),onRemoveTag:oe,onUpdateStudent:$,onDeleteStudent:U,onGenerateSingle:Un,onSaveTemplate:rt,onOpenHistory:ge=>{li(ge),jr(!0)}})]}),f.jsx(JA,{isOpen:F,onClose:()=>b(!1),selectedIds:S,expandedCategories:Fr,onToggleCategory:gs,onIdiomClick:yn})]}),f.jsx($A,{}),f.jsx(nC,{})]})},aC=({onLogin:r})=>{const[e,t]=ul.useState(!1),[i,o]=ul.useState(null),l=async()=>{t(!0),o(null);const h=await wf.signInWithGoogle();h.success||o(h.error),t(!1)};return f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"inline-block bg-[#FECA57] text-[#2D3436] p-4 border-3 border-[#2D3436] shadow-[4px_4px_0_#2D3436] transform rotate-[-3deg] rounded-lg mb-4",children:f.jsx("span",{className:"text-5xl",children:""})}),f.jsx("h1",{className:"text-3xl font-black text-[#2D3436]",children:f.jsxs("span",{className:"relative",children:[f.jsx("span",{className:"relative z-10",children:""}),f.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]})}),f.jsx("p",{className:"text-[#636E72] font-bold mt-2",children:"AI "})]}),f.jsx("div",{className:"bg-[#54A0FF]/20 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:f.jsx("p",{className:"text-sm text-[#2D3436] font-medium",children:"  Google "})}),i&&f.jsxs("div",{className:"bg-[#FF6B6B]/20 border-2 border-[#FF6B6B] rounded-lg p-3 mb-4 text-sm text-[#FF6B6B] font-bold",children:[" ",i]}),f.jsx("button",{onClick:l,disabled:e,className:"btn-pop w-full py-4 bg-white text-[#2D3436] font-bold flex items-center justify-center gap-3 text-lg disabled:opacity-50",children:e?f.jsx("span",{className:"animate-spin text-2xl",children:""}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})," Google "]})}),f.jsx("p",{className:"text-xs text-[#636E72]/50 mt-6",children:" 2026 "})]})})},lC=({user:r,onLogout:e})=>f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[f.jsx("div",{className:"mb-6",children:r!=null&&r.photoURL?f.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-20 h-20 rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto"}):f.jsx("div",{className:"w-20 h-20 bg-[#FECA57] rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto flex items-center justify-center",children:f.jsx("span",{className:"text-4xl",children:""})})}),f.jsxs("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:["",(r==null?void 0:r.displayName)||"",""]}),f.jsx("p",{className:"text-[#636E72] text-sm mb-6",children:r==null?void 0:r.email}),f.jsxs("div",{className:"bg-[#FECA57]/30 border-3 border-[#FECA57] rounded-lg p-6 mb-6",children:[f.jsx("div",{className:"text-4xl mb-3 animate-bounce",children:f.jsx($o,{size:48,className:"mx-auto text-[#FF9F43]"})}),f.jsx("h3",{className:"text-xl font-black text-[#2D3436] mb-2",children:" "}),f.jsxs("p",{className:"text-sm text-[#636E72] font-medium",children:["",f.jsx("br",{}),""]})]}),f.jsx("div",{className:"bg-[#54A0FF]/10 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:f.jsxs("p",{className:"text-xs text-[#636E72]",children:[" ",f.jsx("strong",{children:""})," (cagooo@gmail.com) "]})}),f.jsx("button",{onClick:e,className:"btn-pop px-6 py-3 bg-[#636E72] text-white font-bold",children:""})]})}),uC=({children:r})=>{var E;const[e,t]=Y.useState(null),[i,o]=Y.useState(!0),[l,h]=Y.useState([]),[p,y]=Y.useState([]);Y.useEffect(()=>{const S=wf.onAuthStateChange(O=>{t(O),o(!1)});return()=>S()},[]),Y.useEffect(()=>{if(!e||!is.isApproved(e))return;const S=lc.subscribe(H=>{h(H)}),O=ss.subscribe(H=>{y(H)});return()=>{S(),O()}},[e]);const v=e?{...e,schoolName:e.schoolId?(E=l.find(S=>S.id===e.schoolId))==null?void 0:E.name:null,assignedClassNames:(e.assignedClasses||[]).map(S=>{var O;return(O=p.find(H=>H.id===S))==null?void 0:O.name}).filter(Boolean)}:null,w=async()=>{await wf.signOut(),t(null)};return i?f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-6xl animate-bounce mb-4",children:""}),f.jsx("p",{className:"font-bold text-[#2D3436]",children:"..."})]})}):e?is.isApproved(e)?ul.cloneElement(r,{currentUser:v,onLogout:w,isAdmin:is.isAdmin(e)}):f.jsx(lC,{user:e,onLogout:w}):f.jsx(aC,{})};class cC extends ul.Component{constructor(t){super(t);vd(this,"handleReload",()=>{window.location.reload()});vd(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,i){this.setState({errorInfo:i}),console.error(" ErrorBoundary :",t,i)}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#FFF9E6] to-[#FFE4E1] p-4",children:f.jsxs("div",{className:"card-pop max-w-md w-full p-8 bg-white text-center",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-[#FF6B6B]/20 rounded-full mb-4",children:f.jsx(C_,{size:40,className:"text-[#FF6B6B]"})}),f.jsx("div",{className:"text-4xl",children:""})]}),f.jsx("h1",{className:"text-2xl font-black text-[#2D3436] mb-2",children:""}),f.jsx("p",{className:"text-[#636E72] mb-6",children:""}),!1,f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[f.jsx("button",{onClick:this.handleReset,className:"btn-pop flex-1 py-3 px-4 bg-[#636E72] text-white font-bold flex items-center justify-center gap-2",children:""}),f.jsxs("button",{onClick:this.handleReload,className:"btn-pop flex-1 py-3 px-4 bg-[#FF6B9D] text-white font-bold flex items-center justify-center gap-2",children:[f.jsx(S_,{size:18}),""]})]}),f.jsx("p",{className:"mt-6 text-xs text-[#636E72]",children:""})]})}):this.props.children}}m0.createRoot(document.getElementById("root")).render(f.jsx(ul.StrictMode,{children:f.jsx(cC,{children:f.jsx(O0,{children:f.jsx(uC,{children:f.jsx(oC,{})})})})}));
