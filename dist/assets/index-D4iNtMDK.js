(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function y_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vd={exports:{}},Qa={},wd={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function Yx(){if(Cg)return Re;Cg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function U(j,Q,Ae){this.props=j,this.context=Q,this.refs=$,this.updater=Ae||O}U.prototype.isReactComponent={},U.prototype.setState=function(j,Q){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Q,"setState")},U.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function K(){}K.prototype=U.prototype;function ne(j,Q,Ae){this.props=j,this.context=Q,this.refs=$,this.updater=Ae||O}var ee=ne.prototype=new K;ee.constructor=ne,q(ee,U.prototype),ee.isPureReactComponent=!0;var H=Array.isArray,oe=Object.prototype.hasOwnProperty,se={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(j,Q,Ae){var Ie,ke={},Ne=null,Me=null;if(Q!=null)for(Ie in Q.ref!==void 0&&(Me=Q.ref),Q.key!==void 0&&(Ne=""+Q.key),Q)oe.call(Q,Ie)&&!C.hasOwnProperty(Ie)&&(ke[Ie]=Q[Ie]);var Pe=arguments.length-2;if(Pe===1)ke.children=Ae;else if(1<Pe){for(var Be=Array(Pe),jt=0;jt<Pe;jt++)Be[jt]=arguments[jt+2];ke.children=Be}if(j&&j.defaultProps)for(Ie in Pe=j.defaultProps,Pe)ke[Ie]===void 0&&(ke[Ie]=Pe[Ie]);return{$$typeof:r,type:j,key:Ne,ref:Me,props:ke,_owner:se.current}}function N(j,Q){return{$$typeof:r,type:j.type,key:Q,ref:j.ref,props:j.props,_owner:j._owner}}function P(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function R(j){var Q={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ae){return Q[Ae]})}var V=/\/+/g;function b(j,Q){return typeof j=="object"&&j!==null&&j.key!=null?R(""+j.key):Q.toString(36)}function He(j,Q,Ae,Ie,ke){var Ne=typeof j;(Ne==="undefined"||Ne==="boolean")&&(j=null);var Me=!1;if(j===null)Me=!0;else switch(Ne){case"string":case"number":Me=!0;break;case"object":switch(j.$$typeof){case r:case e:Me=!0}}if(Me)return Me=j,ke=ke(Me),j=Ie===""?"."+b(Me,0):Ie,H(ke)?(Ae="",j!=null&&(Ae=j.replace(V,"$&/")+"/"),He(ke,Q,Ae,"",function(jt){return jt})):ke!=null&&(P(ke)&&(ke=N(ke,Ae+(!ke.key||Me&&Me.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+j)),Q.push(ke)),1;if(Me=0,Ie=Ie===""?".":Ie+":",H(j))for(var Pe=0;Pe<j.length;Pe++){Ne=j[Pe];var Be=Ie+b(Ne,Pe);Me+=He(Ne,Q,Ae,Be,ke)}else if(Be=S(j),typeof Be=="function")for(j=Be.call(j),Pe=0;!(Ne=j.next()).done;)Ne=Ne.value,Be=Ie+b(Ne,Pe++),Me+=He(Ne,Q,Ae,Be,ke);else if(Ne==="object")throw Q=String(j),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Me}function Ze(j,Q,Ae){if(j==null)return j;var Ie=[],ke=0;return He(j,Ie,"","",function(Ne){return Q.call(Ae,Ne,ke++)}),Ie}function Nt(j){if(j._status===-1){var Q=j._result;Q=Q(),Q.then(function(Ae){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ae)},function(Ae){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ae)}),j._status===-1&&(j._status=0,j._result=Q)}if(j._status===1)return j._result.default;throw j._result}var Xe={current:null},ie={transition:null},me={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:ie,ReactCurrentOwner:se};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:Ze,forEach:function(j,Q,Ae){Ze(j,function(){Q.apply(this,arguments)},Ae)},count:function(j){var Q=0;return Ze(j,function(){Q++}),Q},toArray:function(j){return Ze(j,function(Q){return Q})||[]},only:function(j){if(!P(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Re.Component=U,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=ne,Re.StrictMode=i,Re.Suspense=y,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Re.act=ue,Re.cloneElement=function(j,Q,Ae){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ie=q({},j.props),ke=j.key,Ne=j.ref,Me=j._owner;if(Q!=null){if(Q.ref!==void 0&&(Ne=Q.ref,Me=se.current),Q.key!==void 0&&(ke=""+Q.key),j.type&&j.type.defaultProps)var Pe=j.type.defaultProps;for(Be in Q)oe.call(Q,Be)&&!C.hasOwnProperty(Be)&&(Ie[Be]=Q[Be]===void 0&&Pe!==void 0?Pe[Be]:Q[Be])}var Be=arguments.length-2;if(Be===1)Ie.children=Ae;else if(1<Be){Pe=Array(Be);for(var jt=0;jt<Be;jt++)Pe[jt]=arguments[jt+2];Ie.children=Pe}return{$$typeof:r,type:j.type,key:ke,ref:Ne,props:Ie,_owner:Me}},Re.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Re.createElement=T,Re.createFactory=function(j){var Q=T.bind(null,j);return Q.type=j,Q},Re.createRef=function(){return{current:null}},Re.forwardRef=function(j){return{$$typeof:g,render:j}},Re.isValidElement=P,Re.lazy=function(j){return{$$typeof:w,_payload:{_status:-1,_result:j},_init:Nt}},Re.memo=function(j,Q){return{$$typeof:v,type:j,compare:Q===void 0?null:Q}},Re.startTransition=function(j){var Q=ie.transition;ie.transition={};try{j()}finally{ie.transition=Q}},Re.unstable_act=ue,Re.useCallback=function(j,Q){return Xe.current.useCallback(j,Q)},Re.useContext=function(j){return Xe.current.useContext(j)},Re.useDebugValue=function(){},Re.useDeferredValue=function(j){return Xe.current.useDeferredValue(j)},Re.useEffect=function(j,Q){return Xe.current.useEffect(j,Q)},Re.useId=function(){return Xe.current.useId()},Re.useImperativeHandle=function(j,Q,Ae){return Xe.current.useImperativeHandle(j,Q,Ae)},Re.useInsertionEffect=function(j,Q){return Xe.current.useInsertionEffect(j,Q)},Re.useLayoutEffect=function(j,Q){return Xe.current.useLayoutEffect(j,Q)},Re.useMemo=function(j,Q){return Xe.current.useMemo(j,Q)},Re.useReducer=function(j,Q,Ae){return Xe.current.useReducer(j,Q,Ae)},Re.useRef=function(j){return Xe.current.useRef(j)},Re.useState=function(j){return Xe.current.useState(j)},Re.useSyncExternalStore=function(j,Q,Ae){return Xe.current.useSyncExternalStore(j,Q,Ae)},Re.useTransition=function(){return Xe.current.useTransition()},Re.version="18.3.1",Re}var bg;function _f(){return bg||(bg=1,wd.exports=Yx()),wd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function Jx(){if(Ng)return Qa;Ng=1;var r=_f(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(g,y,v){var w,E={},S=null,O=null;v!==void 0&&(S=""+v),y.key!==void 0&&(S=""+y.key),y.ref!==void 0&&(O=y.ref);for(w in y)i.call(y,w)&&!l.hasOwnProperty(w)&&(E[w]=y[w]);if(g&&g.defaultProps)for(w in y=g.defaultProps,y)E[w]===void 0&&(E[w]=y[w]);return{$$typeof:e,type:g,key:S,ref:O,props:E,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=h,Qa.jsxs=h,Qa}var kg;function Zx(){return kg||(kg=1,vd.exports=Jx()),vd.exports}var f=Zx(),J=_f();const lc=y_(J);var qu={},xd={exports:{}},hn={},Ed={exports:{}},Td={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function e0(){return Rg||(Rg=1,(function(r){function e(ie,me){var ue=ie.length;ie.push(me);e:for(;0<ue;){var j=ue-1>>>1,Q=ie[j];if(0<o(Q,me))ie[j]=me,ie[ue]=Q,ue=j;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var me=ie[0],ue=ie.pop();if(ue!==me){ie[0]=ue;e:for(var j=0,Q=ie.length,Ae=Q>>>1;j<Ae;){var Ie=2*(j+1)-1,ke=ie[Ie],Ne=Ie+1,Me=ie[Ne];if(0>o(ke,ue))Ne<Q&&0>o(Me,ke)?(ie[j]=Me,ie[Ne]=ue,j=Ne):(ie[j]=ke,ie[Ie]=ue,j=Ie);else if(Ne<Q&&0>o(Me,ue))ie[j]=Me,ie[Ne]=ue,j=Ne;else break e}}return me}function o(ie,me){var ue=ie.sortIndex-me.sortIndex;return ue!==0?ue:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var y=[],v=[],w=1,E=null,S=3,O=!1,q=!1,$=!1,U=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(ie){for(var me=t(v);me!==null;){if(me.callback===null)i(v);else if(me.startTime<=ie)i(v),me.sortIndex=me.expirationTime,e(y,me);else break;me=t(v)}}function H(ie){if($=!1,ee(ie),!q)if(t(y)!==null)q=!0,Nt(oe);else{var me=t(v);me!==null&&Xe(H,me.startTime-ie)}}function oe(ie,me){q=!1,$&&($=!1,K(T),T=-1),O=!0;var ue=S;try{for(ee(me),E=t(y);E!==null&&(!(E.expirationTime>me)||ie&&!R());){var j=E.callback;if(typeof j=="function"){E.callback=null,S=E.priorityLevel;var Q=j(E.expirationTime<=me);me=r.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(y)&&i(y),ee(me)}else i(y);E=t(y)}if(E!==null)var Ae=!0;else{var Ie=t(v);Ie!==null&&Xe(H,Ie.startTime-me),Ae=!1}return Ae}finally{E=null,S=ue,O=!1}}var se=!1,C=null,T=-1,N=5,P=-1;function R(){return!(r.unstable_now()-P<N)}function V(){if(C!==null){var ie=r.unstable_now();P=ie;var me=!0;try{me=C(!0,ie)}finally{me?b():(se=!1,C=null)}}else se=!1}var b;if(typeof ne=="function")b=function(){ne(V)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Ze=He.port2;He.port1.onmessage=V,b=function(){Ze.postMessage(null)}}else b=function(){U(V,0)};function Nt(ie){C=ie,se||(se=!0,b())}function Xe(ie,me){T=U(function(){ie(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){q||O||(q=!0,Nt(oe))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(ie){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var ue=S;S=me;try{return ie()}finally{S=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=S;S=ie;try{return me()}finally{S=ue}},r.unstable_scheduleCallback=function(ie,me,ue){var j=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?j+ue:j):ue=j,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ue+Q,ie={id:w++,callback:me,priorityLevel:ie,startTime:ue,expirationTime:Q,sortIndex:-1},ue>j?(ie.sortIndex=ue,e(v,ie),t(y)===null&&ie===t(v)&&($?(K(T),T=-1):$=!0,Xe(H,ue-j))):(ie.sortIndex=Q,e(y,ie),q||O||(q=!0,Nt(oe))),ie},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(ie){var me=S;return function(){var ue=S;S=me;try{return ie.apply(this,arguments)}finally{S=ue}}}})(Td)),Td}var Pg;function t0(){return Pg||(Pg=1,Ed.exports=e0()),Ed.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function n0(){if(Dg)return hn;Dg=1;var r=_f(),e=t0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function S(n){return y.call(E,n)?!0:y.call(w,n)?!1:v.test(n)?E[n]=!0:(w[n]=!0,!1)}function O(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||O(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,c,d,p,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=p,this.removeEmptyString=x}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(K,ne);U[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(K,ne);U[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(K,ne);U[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function ee(n,s,a,c){var d=U.hasOwnProperty(s)?U[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,d,c)&&(a=null),c||d===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var H=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),se=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),R=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Object.assign,j;function Q(n){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+n}var Ae=!1;function Ie(n,s){if(!n||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){c=z}n.call(s.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),x=d.length-1,A=p.length-1;1<=x&&0<=A&&d[x]!==p[A];)A--;for(;1<=x&&0<=A;x--,A--)if(d[x]!==p[A]){if(x!==1||A!==1)do if(x--,A--,0>A||d[x]!==p[A]){var k=`
`+d[x].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=x&&0<=A);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function ke(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Ie(n.type,!1),n;case 11:return n=Ie(n.type.render,!1),n;case 1:return n=Ie(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case se:return"Portal";case N:return"Profiler";case T:return"StrictMode";case b:return"Suspense";case He:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case R:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ze:return s=n.displayName||null,s!==null?s:Ne(n.type)||"Memo";case Nt:s=n._payload,n=n._init;try{return Ne(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Pe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function jt(n){var s=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,p.call(this,x)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function cs(n){n._valueTracker||(n._valueTracker=jt(n))}function hs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function rr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Dr(n,s){var a=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ki(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Pe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ds(n,s){s=s.checked,s!=null&&ee(n,"checked",s,!1)}function jr(n,s){ds(n,s);var a=Pe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?et(n,s.type,a):s.hasOwnProperty("defaultValue")&&et(n,s.type,Pe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function fs(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function et(n,s,a){(s!=="number"||rr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var at=Array.isArray;function mn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Pe(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function ps(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Gi(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Pe(a)}}function Qi(n,s){var a=Pe(s.value),c=Pe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function sr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ms(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function On(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ms(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ln,Xi=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Ln=Ln||document.createElement("div"),Ln.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ln.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Vr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yi=["Webkit","ms","Moz","O"];Object.keys(ir).forEach(function(n){Yi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ir[s]=ir[n]})});function Mn(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ir.hasOwnProperty(n)&&ir[n]?(""+s).trim():s+"px"}function gs(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Mn(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var oi=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gn(n,s){if(s){if(oi[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ys(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function _s(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zn=null,Bn=null,it=null;function ye(n){if(n=ja(n)){if(typeof zn!="function")throw Error(t(280));var s=n.stateNode;s&&(s=iu(s),zn(n.stateNode,n.type,s))}}function xe(n){Bn?it?it.push(n):it=[n]:Bn=n}function Ge(){if(Bn){var n=Bn,s=it;if(it=Bn=null,ye(n),s)for(n=0;n<s.length;n++)ye(s[n])}}function _t(n,s){return n(s)}function Vt(){}var $t=!1;function ai(n,s,a){if($t)return n(s,a);$t=!0;try{return _t(n,s,a)}finally{$t=!1,(Bn!==null||it!==null)&&(Vt(),Ge())}}function yn(n,s){var a=n.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var qt=!1;if(g)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){qt=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{qt=!1}function Fl(n,s,a,c,d,p,x,A,k){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var Fr=!1,or=null,Ji=!1,bn=null,Ol={onError:function(n){Fr=!0,or=n}};function Ll(n,s,a,c,d,p,x,A,k){Fr=!1,or=null,Fl.apply(Ol,arguments)}function la(n,s,a,c,d,p,x,A,k){if(Ll.apply(this,arguments),Fr){if(Fr){var z=or;Fr=!1,or=null}else throw Error(t(198));Ji||(Ji=!0,bn=z)}}function $n(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ua(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Ml(n){if($n(n)!==n)throw Error(t(188))}function Ul(n){var s=n.alternate;if(!s){if(s=$n(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Ml(d),n;if(p===c)return Ml(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var x=!1,A=d.child;A;){if(A===a){x=!0,a=d,c=p;break}if(A===c){x=!0,c=d,a=p;break}A=A.sibling}if(!x){for(A=p.child;A;){if(A===a){x=!0,a=p,c=d;break}if(A===c){x=!0,c=p,a=d;break}A=A.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function zl(n){return n=Ul(n),n!==null?li(n):null}function li(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=li(n);if(s!==null)return s;n=n.sibling}return null}var ca=e.unstable_scheduleCallback,Zi=e.unstable_cancelCallback,ui=e.unstable_shouldYield,Or=e.unstable_requestPaint,tt=e.unstable_now,Xc=e.unstable_getCurrentPriorityLevel,eo=e.unstable_ImmediatePriority,ha=e.unstable_UserBlockingPriority,ci=e.unstable_NormalPriority,da=e.unstable_LowPriority,to=e.unstable_IdlePriority,hi=null,_n=null;function Bl(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(hi,n,void 0,(n.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:di,ar=Math.log,Nn=Math.LN2;function di(n){return n>>>=0,n===0?32:31-(ar(n)/Nn|0)|0}var lr=64,ws=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Lr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,x=a&268435455;if(x!==0){var A=x&~d;A!==0?c=$e(A):(p&=x,p!==0&&(c=$e(p)))}else x=a&~d,x!==0?c=$e(x):p!==0&&(c=$e(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-vn(s),d=1<<a,c|=n[a],s&=~d;return c}function fi(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var x=31-vn(p),A=1<<x,k=d[x];k===-1?((A&a)===0||(A&c)!==0)&&(d[x]=fi(A,s)):k<=s&&(n.expiredLanes|=A),p&=~A}}function fa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function pa(){var n=lr;return lr<<=1,(lr&4194240)===0&&(lr=64),n}function ma(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function mi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-vn(s),n[s]=a}function Yc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-vn(a),p=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function ga(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-vn(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Fe=0;function ur(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ya,no,_a,va,wa,cr=!1,ro=[],hr=null,dr=null,Ft=null,gi=new Map,Mr=new Map,wn=[],$l="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xs(n,s){switch(n){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":gi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(s.pointerId)}}function qn(n,s,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=ja(s),s!==null&&no(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function ql(n,s,a,c,d){switch(s){case"focusin":return hr=qn(hr,n,s,a,c,d),!0;case"dragenter":return dr=qn(dr,n,s,a,c,d),!0;case"mouseover":return Ft=qn(Ft,n,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return gi.set(p,qn(gi.get(p)||null,n,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Mr.set(p,qn(Mr.get(p)||null,n,s,a,c,d)),!0}return!1}function so(n){var s=wi(n.target);if(s!==null){var a=$n(s);if(a!==null){if(s=a.tag,s===13){if(s=ua(a),s!==null){n.blockedOn=s,wa(n.priority,function(){_a(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qe(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=io(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Un=c,a.target.dispatchEvent(c),Un=null}else return s=ja(a),s!==null&&no(s),n.blockedOn=a,!1;s.shift()}return!0}function Hl(n,s,a){Qe(n)&&a.delete(s)}function Jc(){cr=!1,hr!==null&&Qe(hr)&&(hr=null),dr!==null&&Qe(dr)&&(dr=null),Ft!==null&&Qe(Ft)&&(Ft=null),gi.forEach(Hl),Mr.forEach(Hl)}function Es(n,s){n.blockedOn===s&&(n.blockedOn=null,cr||(cr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jc)))}function Ts(n){function s(d){return Es(d,n)}if(0<ro.length){Es(ro[0],n);for(var a=1;a<ro.length;a++){var c=ro[a];c.blockedOn===n&&(c.blockedOn=null)}}for(hr!==null&&Es(hr,n),dr!==null&&Es(dr,n),Ft!==null&&Es(Ft,n),gi.forEach(s),Mr.forEach(s),a=0;a<wn.length;a++)c=wn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<wn.length&&(a=wn[0],a.blockedOn===null);)so(a),a.blockedOn===null&&wn.shift()}var Ur=H.ReactCurrentBatchConfig,zr=!0;function fr(n,s,a,c){var d=Fe,p=Ur.transition;Ur.transition=null;try{Fe=1,xa(n,s,a,c)}finally{Fe=d,Ur.transition=p}}function Wl(n,s,a,c){var d=Fe,p=Ur.transition;Ur.transition=null;try{Fe=4,xa(n,s,a,c)}finally{Fe=d,Ur.transition=p}}function xa(n,s,a,c){if(zr){var d=io(n,s,a,c);if(d===null)uh(n,s,c,pr,a),xs(n,c);else if(ql(d,n,s,a,c))c.stopPropagation();else if(xs(n,c),s&4&&-1<$l.indexOf(n)){for(;d!==null;){var p=ja(d);if(p!==null&&ya(p),p=io(n,s,a,c),p===null&&uh(n,s,c,pr,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else uh(n,s,c,null,a)}}var pr=null;function io(n,s,a,c){if(pr=null,n=_s(c),n=wi(n),n!==null)if(s=$n(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ua(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return pr=n,null}function oo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xc()){case eo:return 1;case ha:return 4;case ci:case da:return 16;case to:return 536870912;default:return 16}default:return 16}}var xn=null,ao=null,Br=null;function Kl(){if(Br)return Br;var n,s=ao,a=s.length,c,d="value"in xn?xn.value:xn.textContent,p=d.length;for(n=0;n<a&&s[n]===d[n];n++);var x=a-n;for(c=1;c<=x&&s[a-c]===d[p-c];c++);return Br=d.slice(n,1<c?1-c:void 0)}function yi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function mr(){return!0}function Ea(){return!1}function Ht(n){function s(a,c,d,p,x){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?mr:Ea,this.isPropagationStopped=Ea,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),s}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=Ht(gr),Is=ue({},gr,{view:0,detail:0}),lo=Ht(Is),uo,co,En,vi=ue({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==En&&(En&&n.type==="mousemove"?(uo=n.screenX-En.screenX,co=n.screenY-En.screenY):co=uo=0,En=n),uo)},movementY:function(n){return"movementY"in n?n.movementY:co}}),Ta=Ht(vi),Gl=ue({},vi,{dataTransfer:0}),Ql=Ht(Gl),ho=ue({},Is,{relatedTarget:0}),Ot=Ht(ho),Xl=ue({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yl=Ht(Xl),Ss=ue({},gr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ht(Ss),m=ue({},gr,{data:0}),_=Ht(m),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function re(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=B[n])?!!s[n]:!1}function Ce(){return re}var mt=ue({},Is,{key:function(n){if(n.key){var s=I[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=yi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?L[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(n){return n.type==="keypress"?yi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ke=Ht(mt),vt=ue({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tn=Ht(vt),$r=ue({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),yr=Ht($r),_r=ue({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fo=Ht(_r),Ia=ue({},vi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hw=Ht(Ia),Ww=[9,13,27,32],Zc=g&&"CompositionEvent"in window,Sa=null;g&&"documentMode"in document&&(Sa=document.documentMode);var Kw=g&&"TextEvent"in window&&!Sa,vp=g&&(!Zc||Sa&&8<Sa&&11>=Sa),wp=" ",xp=!1;function Ep(n,s){switch(n){case"keyup":return Ww.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var po=!1;function Gw(n,s){switch(n){case"compositionend":return Tp(s);case"keypress":return s.which!==32?null:(xp=!0,wp);case"textInput":return n=s.data,n===wp&&xp?null:n;default:return null}}function Qw(n,s){if(po)return n==="compositionend"||!Zc&&Ep(n,s)?(n=Kl(),Br=ao=xn=null,po=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return vp&&s.locale!=="ko"?null:s.data;default:return null}}var Xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Xw[n.type]:s==="textarea"}function Sp(n,s,a,c){xe(c),s=nu(s,"onChange"),0<s.length&&(a=new _i("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Aa=null,Ca=null;function Yw(n){$p(n,0)}function Jl(n){var s=vo(n);if(hs(s))return n}function Jw(n,s){if(n==="change")return s}var Ap=!1;if(g){var eh;if(g){var th="oninput"in document;if(!th){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),th=typeof Cp.oninput=="function"}eh=th}else eh=!1;Ap=eh&&(!document.documentMode||9<document.documentMode)}function bp(){Aa&&(Aa.detachEvent("onpropertychange",Np),Ca=Aa=null)}function Np(n){if(n.propertyName==="value"&&Jl(Ca)){var s=[];Sp(s,Ca,n,_s(n)),ai(Yw,s)}}function Zw(n,s,a){n==="focusin"?(bp(),Aa=s,Ca=a,Aa.attachEvent("onpropertychange",Np)):n==="focusout"&&bp()}function ex(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(Ca)}function tx(n,s){if(n==="click")return Jl(s)}function nx(n,s){if(n==="input"||n==="change")return Jl(s)}function rx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Hn=typeof Object.is=="function"?Object.is:rx;function ba(n,s){if(Hn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!y.call(s,d)||!Hn(n[d],s[d]))return!1}return!0}function kp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rp(n,s){var a=kp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kp(a)}}function Pp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Pp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Dp(){for(var n=window,s=rr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=rr(n.document)}return s}function nh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function sx(n){var s=Dp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Pp(a.ownerDocument.documentElement,a)){if(c!==null&&nh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Rp(a,p);var x=Rp(a,c);d&&x&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ix=g&&"documentMode"in document&&11>=document.documentMode,mo=null,rh=null,Na=null,sh=!1;function jp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sh||mo==null||mo!==rr(c)||(c=mo,"selectionStart"in c&&nh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Na&&ba(Na,c)||(Na=c,c=nu(rh,"onSelect"),0<c.length&&(s=new _i("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=mo)))}function Zl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var go={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},ih={},Vp={};g&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function eu(n){if(ih[n])return ih[n];if(!go[n])return n;var s=go[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Vp)return ih[n]=s[a];return n}var Fp=eu("animationend"),Op=eu("animationiteration"),Lp=eu("animationstart"),Mp=eu("transitionend"),Up=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(n,s){Up.set(n,s),l(s,[n])}for(var oh=0;oh<zp.length;oh++){var ah=zp[oh],ox=ah.toLowerCase(),ax=ah[0].toUpperCase()+ah.slice(1);As(ox,"on"+ax)}As(Fp,"onAnimationEnd"),As(Op,"onAnimationIteration"),As(Lp,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Mp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Bp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,la(c,s,void 0,n),n.currentTarget=null}function $p(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var x=c.length-1;0<=x;x--){var A=c[x],k=A.instance,z=A.currentTarget;if(A=A.listener,k!==p&&d.isPropagationStopped())break e;Bp(d,A,z),p=k}else for(x=0;x<c.length;x++){if(A=c[x],k=A.instance,z=A.currentTarget,A=A.listener,k!==p&&d.isPropagationStopped())break e;Bp(d,A,z),p=k}}}if(Ji)throw n=bn,Ji=!1,bn=null,n}function nt(n,s){var a=s[mh];a===void 0&&(a=s[mh]=new Set);var c=n+"__bubble";a.has(c)||(qp(s,n,2,!1),a.add(c))}function lh(n,s,a){var c=0;s&&(c|=4),qp(a,n,c,s)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Ra(n){if(!n[tu]){n[tu]=!0,i.forEach(function(a){a!=="selectionchange"&&(lx.has(a)||lh(a,!1,n),lh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[tu]||(s[tu]=!0,lh("selectionchange",!1,s))}}function qp(n,s,a,c){switch(oo(s)){case 1:var d=fr;break;case 4:d=Wl;break;default:d=xa}a=d.bind(null,s,a,n),d=void 0,!qt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function uh(n,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(x===4)for(x=c.return;x!==null;){var k=x.tag;if((k===3||k===4)&&(k=x.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;x=x.return}for(;A!==null;){if(x=wi(A),x===null)return;if(k=x.tag,k===5||k===6){c=p=x;continue e}A=A.parentNode}}c=c.return}ai(function(){var z=p,Y=_s(a),Z=[];e:{var X=Up.get(n);if(X!==void 0){var le=_i,de=n;switch(n){case"keypress":if(yi(a)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":de="focus",le=Ot;break;case"focusout":de="blur",le=Ot;break;case"beforeblur":case"afterblur":le=Ot;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=yr;break;case Fp:case Op:case Lp:le=Yl;break;case Mp:le=fo;break;case"scroll":le=lo;break;case"wheel":le=Hw;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Tn}var fe=(s&4)!==0,gt=!fe&&n==="scroll",F=fe?X!==null?X+"Capture":null:X;fe=[];for(var D=z,M;D!==null;){M=D;var te=M.stateNode;if(M.tag===5&&te!==null&&(M=te,F!==null&&(te=yn(D,F),te!=null&&fe.push(Pa(D,te,M)))),gt)break;D=D.return}0<fe.length&&(X=new le(X,de,null,a,Y),Z.push({event:X,listeners:fe}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",X&&a!==Un&&(de=a.relatedTarget||a.fromElement)&&(wi(de)||de[qr]))break e;if((le||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=z,de=de?wi(de):null,de!==null&&(gt=$n(de),de!==gt||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=z),le!==de)){if(fe=Ta,te="onMouseLeave",F="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(fe=Tn,te="onPointerLeave",F="onPointerEnter",D="pointer"),gt=le==null?X:vo(le),M=de==null?X:vo(de),X=new fe(te,D+"leave",le,a,Y),X.target=gt,X.relatedTarget=M,te=null,wi(Y)===z&&(fe=new fe(F,D+"enter",de,a,Y),fe.target=M,fe.relatedTarget=gt,te=fe),gt=te,le&&de)t:{for(fe=le,F=de,D=0,M=fe;M;M=yo(M))D++;for(M=0,te=F;te;te=yo(te))M++;for(;0<D-M;)fe=yo(fe),D--;for(;0<M-D;)F=yo(F),M--;for(;D--;){if(fe===F||F!==null&&fe===F.alternate)break t;fe=yo(fe),F=yo(F)}fe=null}else fe=null;le!==null&&Hp(Z,X,le,fe,!1),de!==null&&gt!==null&&Hp(Z,gt,de,fe,!0)}}e:{if(X=z?vo(z):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var pe=Jw;else if(Ip(X))if(Ap)pe=nx;else{pe=ex;var _e=Zw}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=tx);if(pe&&(pe=pe(n,z))){Sp(Z,pe,a,Y);break e}_e&&_e(n,X,z),n==="focusout"&&(_e=X._wrapperState)&&_e.controlled&&X.type==="number"&&et(X,"number",X.value)}switch(_e=z?vo(z):window,n){case"focusin":(Ip(_e)||_e.contentEditable==="true")&&(mo=_e,rh=z,Na=null);break;case"focusout":Na=rh=mo=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,jp(Z,a,Y);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":jp(Z,a,Y)}var ve;if(Zc)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else po?Ep(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(vp&&a.locale!=="ko"&&(po||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&po&&(ve=Kl()):(xn=Y,ao="value"in xn?xn.value:xn.textContent,po=!0)),_e=nu(z,Ee),0<_e.length&&(Ee=new _(Ee,n,null,a,Y),Z.push({event:Ee,listeners:_e}),ve?Ee.data=ve:(ve=Tp(a),ve!==null&&(Ee.data=ve)))),(ve=Kw?Gw(n,a):Qw(n,a))&&(z=nu(z,"onBeforeInput"),0<z.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:z}),Y.data=ve))}$p(Z,s)})}function Pa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function nu(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=yn(n,a),p!=null&&c.unshift(Pa(n,p,d)),p=yn(n,s),p!=null&&c.push(Pa(n,p,d))),n=n.return}return c}function yo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Hp(n,s,a,c,d){for(var p=s._reactName,x=[];a!==null&&a!==c;){var A=a,k=A.alternate,z=A.stateNode;if(k!==null&&k===c)break;A.tag===5&&z!==null&&(A=z,d?(k=yn(a,p),k!=null&&x.unshift(Pa(a,k,A))):d||(k=yn(a,p),k!=null&&x.push(Pa(a,k,A)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var ux=/\r\n?/g,cx=/\u0000|\uFFFD/g;function Wp(n){return(typeof n=="string"?n:""+n).replace(ux,`
`).replace(cx,"")}function ru(n,s,a){if(s=Wp(s),Wp(n)!==s&&a)throw Error(t(425))}function su(){}var ch=null,hh=null;function dh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,hx=typeof clearTimeout=="function"?clearTimeout:void 0,Kp=typeof Promise=="function"?Promise:void 0,dx=typeof queueMicrotask=="function"?queueMicrotask:typeof Kp<"u"?function(n){return Kp.resolve(null).then(n).catch(fx)}:fh;function fx(n){setTimeout(function(){throw n})}function ph(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Ts(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Ts(s)}function Cs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Gp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var _o=Math.random().toString(36).slice(2),vr="__reactFiber$"+_o,Da="__reactProps$"+_o,qr="__reactContainer$"+_o,mh="__reactEvents$"+_o,px="__reactListeners$"+_o,mx="__reactHandles$"+_o;function wi(n){var s=n[vr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[qr]||a[vr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Gp(n);n!==null;){if(a=n[vr])return a;n=Gp(n)}return s}n=a,a=n.parentNode}return null}function ja(n){return n=n[vr]||n[qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function iu(n){return n[Da]||null}var gh=[],wo=-1;function bs(n){return{current:n}}function rt(n){0>wo||(n.current=gh[wo],gh[wo]=null,wo--)}function Ye(n,s){wo++,gh[wo]=n.current,n.current=s}var Ns={},Wt=bs(Ns),on=bs(!1),xi=Ns;function xo(n,s){var a=n.type.contextTypes;if(!a)return Ns;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function an(n){return n=n.childContextTypes,n!=null}function ou(){rt(on),rt(Wt)}function Qp(n,s,a){if(Wt.current!==Ns)throw Error(t(168));Ye(Wt,s),Ye(on,a)}function Xp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Me(n)||"Unknown",d));return ue({},a,c)}function au(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ns,xi=Wt.current,Ye(Wt,n),Ye(on,on.current),!0}function Yp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Xp(n,s,xi),c.__reactInternalMemoizedMergedChildContext=n,rt(on),rt(Wt),Ye(Wt,n)):rt(on),Ye(on,a)}var Hr=null,lu=!1,yh=!1;function Jp(n){Hr===null?Hr=[n]:Hr.push(n)}function gx(n){lu=!0,Jp(n)}function ks(){if(!yh&&Hr!==null){yh=!0;var n=0,s=Fe;try{var a=Hr;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Hr=null,lu=!1}catch(d){throw Hr!==null&&(Hr=Hr.slice(n+1)),ca(eo,ks),d}finally{Fe=s,yh=!1}}return null}var Eo=[],To=0,uu=null,cu=0,kn=[],Rn=0,Ei=null,Wr=1,Kr="";function Ti(n,s){Eo[To++]=cu,Eo[To++]=uu,uu=n,cu=s}function Zp(n,s,a){kn[Rn++]=Wr,kn[Rn++]=Kr,kn[Rn++]=Ei,Ei=n;var c=Wr;n=Kr;var d=32-vn(c)-1;c&=~(1<<d),a+=1;var p=32-vn(s)+d;if(30<p){var x=d-d%5;p=(c&(1<<x)-1).toString(32),c>>=x,d-=x,Wr=1<<32-vn(s)+d|a<<d|c,Kr=p+n}else Wr=1<<p|a<<d|c,Kr=n}function _h(n){n.return!==null&&(Ti(n,1),Zp(n,1,0))}function vh(n){for(;n===uu;)uu=Eo[--To],Eo[To]=null,cu=Eo[--To],Eo[To]=null;for(;n===Ei;)Ei=kn[--Rn],kn[Rn]=null,Kr=kn[--Rn],kn[Rn]=null,Wr=kn[--Rn],kn[Rn]=null}var In=null,Sn=null,ot=!1,Wn=null;function em(n,s){var a=Vn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function tm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,In=n,Sn=Cs(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,In=n,Sn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ei!==null?{id:Wr,overflow:Kr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Vn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,In=n,Sn=null,!0):!1;default:return!1}}function wh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xh(n){if(ot){var s=Sn;if(s){var a=s;if(!tm(n,s)){if(wh(n))throw Error(t(418));s=Cs(a.nextSibling);var c=In;s&&tm(n,s)?em(c,a):(n.flags=n.flags&-4097|2,ot=!1,In=n)}}else{if(wh(n))throw Error(t(418));n.flags=n.flags&-4097|2,ot=!1,In=n}}}function nm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;In=n}function hu(n){if(n!==In)return!1;if(!ot)return nm(n),ot=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!dh(n.type,n.memoizedProps)),s&&(s=Sn)){if(wh(n))throw rm(),Error(t(418));for(;s;)em(n,s),s=Cs(s.nextSibling)}if(nm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Sn=Cs(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Sn=null}}else Sn=In?Cs(n.stateNode.nextSibling):null;return!0}function rm(){for(var n=Sn;n;)n=Cs(n.nextSibling)}function Io(){Sn=In=null,ot=!1}function Eh(n){Wn===null?Wn=[n]:Wn.push(n)}var yx=H.ReactCurrentBatchConfig;function Va(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(x){var A=d.refs;x===null?delete A[p]:A[p]=x},s._stringRef=p,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function du(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function sm(n){var s=n._init;return s(n._payload)}function im(n){function s(F,D){if(n){var M=F.deletions;M===null?(F.deletions=[D],F.flags|=16):M.push(D)}}function a(F,D){if(!n)return null;for(;D!==null;)s(F,D),D=D.sibling;return null}function c(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function d(F,D){return F=Ls(F,D),F.index=0,F.sibling=null,F}function p(F,D,M){return F.index=M,n?(M=F.alternate,M!==null?(M=M.index,M<D?(F.flags|=2,D):M):(F.flags|=2,D)):(F.flags|=1048576,D)}function x(F){return n&&F.alternate===null&&(F.flags|=2),F}function A(F,D,M,te){return D===null||D.tag!==6?(D=fd(M,F.mode,te),D.return=F,D):(D=d(D,M),D.return=F,D)}function k(F,D,M,te){var pe=M.type;return pe===C?Y(F,D,M.props.children,te,M.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Nt&&sm(pe)===D.type)?(te=d(D,M.props),te.ref=Va(F,D,M),te.return=F,te):(te=Fu(M.type,M.key,M.props,null,F.mode,te),te.ref=Va(F,D,M),te.return=F,te)}function z(F,D,M,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==M.containerInfo||D.stateNode.implementation!==M.implementation?(D=pd(M,F.mode,te),D.return=F,D):(D=d(D,M.children||[]),D.return=F,D)}function Y(F,D,M,te,pe){return D===null||D.tag!==7?(D=Ri(M,F.mode,te,pe),D.return=F,D):(D=d(D,M),D.return=F,D)}function Z(F,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return D=fd(""+D,F.mode,M),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case oe:return M=Fu(D.type,D.key,D.props,null,F.mode,M),M.ref=Va(F,null,D),M.return=F,M;case se:return D=pd(D,F.mode,M),D.return=F,D;case Nt:var te=D._init;return Z(F,te(D._payload),M)}if(at(D)||me(D))return D=Ri(D,F.mode,M,null),D.return=F,D;du(F,D)}return null}function X(F,D,M,te){var pe=D!==null?D.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return pe!==null?null:A(F,D,""+M,te);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:return M.key===pe?k(F,D,M,te):null;case se:return M.key===pe?z(F,D,M,te):null;case Nt:return pe=M._init,X(F,D,pe(M._payload),te)}if(at(M)||me(M))return pe!==null?null:Y(F,D,M,te,null);du(F,M)}return null}function le(F,D,M,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return F=F.get(M)||null,A(D,F,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case oe:return F=F.get(te.key===null?M:te.key)||null,k(D,F,te,pe);case se:return F=F.get(te.key===null?M:te.key)||null,z(D,F,te,pe);case Nt:var _e=te._init;return le(F,D,M,_e(te._payload),pe)}if(at(te)||me(te))return F=F.get(M)||null,Y(D,F,te,pe,null);du(D,te)}return null}function de(F,D,M,te){for(var pe=null,_e=null,ve=D,Ee=D=0,Pt=null;ve!==null&&Ee<M.length;Ee++){ve.index>Ee?(Pt=ve,ve=null):Pt=ve.sibling;var Ue=X(F,ve,M[Ee],te);if(Ue===null){ve===null&&(ve=Pt);break}n&&ve&&Ue.alternate===null&&s(F,ve),D=p(Ue,D,Ee),_e===null?pe=Ue:_e.sibling=Ue,_e=Ue,ve=Pt}if(Ee===M.length)return a(F,ve),ot&&Ti(F,Ee),pe;if(ve===null){for(;Ee<M.length;Ee++)ve=Z(F,M[Ee],te),ve!==null&&(D=p(ve,D,Ee),_e===null?pe=ve:_e.sibling=ve,_e=ve);return ot&&Ti(F,Ee),pe}for(ve=c(F,ve);Ee<M.length;Ee++)Pt=le(ve,F,Ee,M[Ee],te),Pt!==null&&(n&&Pt.alternate!==null&&ve.delete(Pt.key===null?Ee:Pt.key),D=p(Pt,D,Ee),_e===null?pe=Pt:_e.sibling=Pt,_e=Pt);return n&&ve.forEach(function(Ms){return s(F,Ms)}),ot&&Ti(F,Ee),pe}function fe(F,D,M,te){var pe=me(M);if(typeof pe!="function")throw Error(t(150));if(M=pe.call(M),M==null)throw Error(t(151));for(var _e=pe=null,ve=D,Ee=D=0,Pt=null,Ue=M.next();ve!==null&&!Ue.done;Ee++,Ue=M.next()){ve.index>Ee?(Pt=ve,ve=null):Pt=ve.sibling;var Ms=X(F,ve,Ue.value,te);if(Ms===null){ve===null&&(ve=Pt);break}n&&ve&&Ms.alternate===null&&s(F,ve),D=p(Ms,D,Ee),_e===null?pe=Ms:_e.sibling=Ms,_e=Ms,ve=Pt}if(Ue.done)return a(F,ve),ot&&Ti(F,Ee),pe;if(ve===null){for(;!Ue.done;Ee++,Ue=M.next())Ue=Z(F,Ue.value,te),Ue!==null&&(D=p(Ue,D,Ee),_e===null?pe=Ue:_e.sibling=Ue,_e=Ue);return ot&&Ti(F,Ee),pe}for(ve=c(F,ve);!Ue.done;Ee++,Ue=M.next())Ue=le(ve,F,Ee,Ue.value,te),Ue!==null&&(n&&Ue.alternate!==null&&ve.delete(Ue.key===null?Ee:Ue.key),D=p(Ue,D,Ee),_e===null?pe=Ue:_e.sibling=Ue,_e=Ue);return n&&ve.forEach(function(Xx){return s(F,Xx)}),ot&&Ti(F,Ee),pe}function gt(F,D,M,te){if(typeof M=="object"&&M!==null&&M.type===C&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:e:{for(var pe=M.key,_e=D;_e!==null;){if(_e.key===pe){if(pe=M.type,pe===C){if(_e.tag===7){a(F,_e.sibling),D=d(_e,M.props.children),D.return=F,F=D;break e}}else if(_e.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Nt&&sm(pe)===_e.type){a(F,_e.sibling),D=d(_e,M.props),D.ref=Va(F,_e,M),D.return=F,F=D;break e}a(F,_e);break}else s(F,_e);_e=_e.sibling}M.type===C?(D=Ri(M.props.children,F.mode,te,M.key),D.return=F,F=D):(te=Fu(M.type,M.key,M.props,null,F.mode,te),te.ref=Va(F,D,M),te.return=F,F=te)}return x(F);case se:e:{for(_e=M.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===M.containerInfo&&D.stateNode.implementation===M.implementation){a(F,D.sibling),D=d(D,M.children||[]),D.return=F,F=D;break e}else{a(F,D);break}else s(F,D);D=D.sibling}D=pd(M,F.mode,te),D.return=F,F=D}return x(F);case Nt:return _e=M._init,gt(F,D,_e(M._payload),te)}if(at(M))return de(F,D,M,te);if(me(M))return fe(F,D,M,te);du(F,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,D!==null&&D.tag===6?(a(F,D.sibling),D=d(D,M),D.return=F,F=D):(a(F,D),D=fd(M,F.mode,te),D.return=F,F=D),x(F)):a(F,D)}return gt}var So=im(!0),om=im(!1),fu=bs(null),pu=null,Ao=null,Th=null;function Ih(){Th=Ao=pu=null}function Sh(n){var s=fu.current;rt(fu),n._currentValue=s}function Ah(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Co(n,s){pu=n,Th=Ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(ln=!0),n.firstContext=null)}function Pn(n){var s=n._currentValue;if(Th!==n)if(n={context:n,memoizedValue:s,next:null},Ao===null){if(pu===null)throw Error(t(308));Ao=n,pu.dependencies={lanes:0,firstContext:n}}else Ao=Ao.next=n;return s}var Ii=null;function Ch(n){Ii===null?Ii=[n]:Ii.push(n)}function am(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Ch(s)):(a.next=d.next,d.next=a),s.interleaved=a,Gr(n,c)}function Gr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Rs=!1;function bh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Qr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ps(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Le&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Gr(n,a)}return d=c.interleaved,d===null?(s.next=s,Ch(c)):(s.next=d.next,d.next=s),c.interleaved=s,Gr(n,a)}function mu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ga(n,a)}}function um(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=x:p=p.next=x,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function gu(n,s,a,c){var d=n.updateQueue;Rs=!1;var p=d.firstBaseUpdate,x=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var k=A,z=k.next;k.next=null,x===null?p=z:x.next=z,x=k;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==x&&(A===null?Y.firstBaseUpdate=z:A.next=z,Y.lastBaseUpdate=k))}if(p!==null){var Z=d.baseState;x=0,Y=z=k=null,A=p;do{var X=A.lane,le=A.eventTime;if((c&X)===X){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=n,fe=A;switch(X=s,le=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){Z=de.call(le,Z,X);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,X=typeof de=="function"?de.call(le,Z,X):de,X==null)break e;Z=ue({},Z,X);break e;case 2:Rs=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[A]:X.push(A))}else le={eventTime:le,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(z=Y=le,k=Z):Y=Y.next=le,x|=X;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;X=A,A=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Y===null&&(k=Z),d.baseState=k,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do x|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);Ci|=x,n.lanes=x,n.memoizedState=Z}}function cm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Fa={},wr=bs(Fa),Oa=bs(Fa),La=bs(Fa);function Si(n){if(n===Fa)throw Error(t(174));return n}function Nh(n,s){switch(Ye(La,s),Ye(Oa,n),Ye(wr,Fa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:On(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=On(s,n)}rt(wr),Ye(wr,s)}function bo(){rt(wr),rt(Oa),rt(La)}function hm(n){Si(La.current);var s=Si(wr.current),a=On(s,n.type);s!==a&&(Ye(Oa,n),Ye(wr,a))}function kh(n){Oa.current===n&&(rt(wr),rt(Oa))}var lt=bs(0);function yu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Rh=[];function Ph(){for(var n=0;n<Rh.length;n++)Rh[n]._workInProgressVersionPrimary=null;Rh.length=0}var _u=H.ReactCurrentDispatcher,Dh=H.ReactCurrentBatchConfig,Ai=0,ut=null,At=null,kt=null,vu=!1,Ma=!1,Ua=0,_x=0;function Kt(){throw Error(t(321))}function jh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Hn(n[a],s[a]))return!1;return!0}function Vh(n,s,a,c,d,p){if(Ai=p,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_u.current=n===null||n.memoizedState===null?Ex:Tx,n=a(c,d),Ma){p=0;do{if(Ma=!1,Ua=0,25<=p)throw Error(t(301));p+=1,kt=At=null,s.updateQueue=null,_u.current=Ix,n=a(c,d)}while(Ma)}if(_u.current=Eu,s=At!==null&&At.next!==null,Ai=0,kt=At=ut=null,vu=!1,s)throw Error(t(300));return n}function Fh(){var n=Ua!==0;return Ua=0,n}function xr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ut.memoizedState=kt=n:kt=kt.next=n,kt}function Dn(){if(At===null){var n=ut.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var s=kt===null?ut.memoizedState:kt.next;if(s!==null)kt=s,At=n;else{if(n===null)throw Error(t(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},kt===null?ut.memoizedState=kt=n:kt=kt.next=n}return kt}function za(n,s){return typeof s=="function"?s(n):s}function Oh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=At,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var x=d.next;d.next=p.next,p.next=x}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var A=x=null,k=null,z=p;do{var Y=z.lane;if((Ai&Y)===Y)k!==null&&(k=k.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var Z={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};k===null?(A=k=Z,x=c):k=k.next=Z,ut.lanes|=Y,Ci|=Y}z=z.next}while(z!==null&&z!==p);k===null?x=c:k.next=A,Hn(c,s.memoizedState)||(ln=!0),s.memoizedState=c,s.baseState=x,s.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,ut.lanes|=p,Ci|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Lh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do p=n(p,x.action),x=x.next;while(x!==d);Hn(p,s.memoizedState)||(ln=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function dm(){}function fm(n,s){var a=ut,c=Dn(),d=s(),p=!Hn(c.memoizedState,d);if(p&&(c.memoizedState=d,ln=!0),c=c.queue,Mh(gm.bind(null,a,c,n),[n]),c.getSnapshot!==s||p||kt!==null&&kt.memoizedState.tag&1){if(a.flags|=2048,Ba(9,mm.bind(null,a,c,d,s),void 0,null),Rt===null)throw Error(t(349));(Ai&30)!==0||pm(a,s,d)}return d}function pm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function mm(n,s,a,c){s.value=a,s.getSnapshot=c,ym(s)&&_m(n)}function gm(n,s,a){return a(function(){ym(s)&&_m(n)})}function ym(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Hn(n,a)}catch{return!0}}function _m(n){var s=Gr(n,1);s!==null&&Xn(s,n,1,-1)}function vm(n){var s=xr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:n},s.queue=n,n=n.dispatch=xx.bind(null,ut,n),[s.memoizedState,n]}function Ba(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function wm(){return Dn().memoizedState}function wu(n,s,a,c){var d=xr();ut.flags|=n,d.memoizedState=Ba(1|s,a,void 0,c===void 0?null:c)}function xu(n,s,a,c){var d=Dn();c=c===void 0?null:c;var p=void 0;if(At!==null){var x=At.memoizedState;if(p=x.destroy,c!==null&&jh(c,x.deps)){d.memoizedState=Ba(s,a,p,c);return}}ut.flags|=n,d.memoizedState=Ba(1|s,a,p,c)}function xm(n,s){return wu(8390656,8,n,s)}function Mh(n,s){return xu(2048,8,n,s)}function Em(n,s){return xu(4,2,n,s)}function Tm(n,s){return xu(4,4,n,s)}function Im(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Sm(n,s,a){return a=a!=null?a.concat([n]):null,xu(4,4,Im.bind(null,s,n),a)}function Uh(){}function Am(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&jh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Cm(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&jh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function bm(n,s,a){return(Ai&21)===0?(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=a):(Hn(a,s)||(a=pa(),ut.lanes|=a,Ci|=a,n.baseState=!0),s)}function vx(n,s){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=Dh.transition;Dh.transition={};try{n(!1),s()}finally{Fe=a,Dh.transition=c}}function Nm(){return Dn().memoizedState}function wx(n,s,a){var c=Fs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},km(n))Rm(s,a);else if(a=am(n,s,a,c),a!==null){var d=nn();Xn(a,n,c,d),Pm(a,s,c)}}function xx(n,s,a){var c=Fs(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(km(n))Rm(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var x=s.lastRenderedState,A=p(x,a);if(d.hasEagerState=!0,d.eagerState=A,Hn(A,x)){var k=s.interleaved;k===null?(d.next=d,Ch(s)):(d.next=k.next,k.next=d),s.interleaved=d;return}}catch{}finally{}a=am(n,s,d,c),a!==null&&(d=nn(),Xn(a,n,c,d),Pm(a,s,c))}}function km(n){var s=n.alternate;return n===ut||s!==null&&s===ut}function Rm(n,s){Ma=vu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Pm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ga(n,a)}}var Eu={readContext:Pn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},Ex={readContext:Pn,useCallback:function(n,s){return xr().memoizedState=[n,s===void 0?null:s],n},useContext:Pn,useEffect:xm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,wu(4194308,4,Im.bind(null,s,n),a)},useLayoutEffect:function(n,s){return wu(4194308,4,n,s)},useInsertionEffect:function(n,s){return wu(4,2,n,s)},useMemo:function(n,s){var a=xr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=xr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=wx.bind(null,ut,n),[c.memoizedState,n]},useRef:function(n){var s=xr();return n={current:n},s.memoizedState=n},useState:vm,useDebugValue:Uh,useDeferredValue:function(n){return xr().memoizedState=n},useTransition:function(){var n=vm(!1),s=n[0];return n=vx.bind(null,n[1]),xr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=ut,d=xr();if(ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Rt===null)throw Error(t(349));(Ai&30)!==0||pm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,xm(gm.bind(null,c,p,n),[n]),c.flags|=2048,Ba(9,mm.bind(null,c,p,a,s),void 0,null),a},useId:function(){var n=xr(),s=Rt.identifierPrefix;if(ot){var a=Kr,c=Wr;a=(c&~(1<<32-vn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=_x++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Tx={readContext:Pn,useCallback:Am,useContext:Pn,useEffect:Mh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:Cm,useReducer:Oh,useRef:wm,useState:function(){return Oh(za)},useDebugValue:Uh,useDeferredValue:function(n){var s=Dn();return bm(s,At.memoizedState,n)},useTransition:function(){var n=Oh(za)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:dm,useSyncExternalStore:fm,useId:Nm,unstable_isNewReconciler:!1},Ix={readContext:Pn,useCallback:Am,useContext:Pn,useEffect:Mh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:Cm,useReducer:Lh,useRef:wm,useState:function(){return Lh(za)},useDebugValue:Uh,useDeferredValue:function(n){var s=Dn();return At===null?s.memoizedState=n:bm(s,At.memoizedState,n)},useTransition:function(){var n=Lh(za)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:dm,useSyncExternalStore:fm,useId:Nm,unstable_isNewReconciler:!1};function Kn(n,s){if(n&&n.defaultProps){s=ue({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function zh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ue({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?$n(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=nn(),d=Fs(n),p=Qr(c,d);p.payload=s,a!=null&&(p.callback=a),s=Ps(n,p,d),s!==null&&(Xn(s,n,d,c),mu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=nn(),d=Fs(n),p=Qr(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Ps(n,p,d),s!==null&&(Xn(s,n,d,c),mu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=nn(),c=Fs(n),d=Qr(a,c);d.tag=2,s!=null&&(d.callback=s),s=Ps(n,d,c),s!==null&&(Xn(s,n,c,a),mu(s,n,c))}};function Dm(n,s,a,c,d,p,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,x):s.prototype&&s.prototype.isPureReactComponent?!ba(a,c)||!ba(d,p):!0}function jm(n,s,a){var c=!1,d=Ns,p=s.contextType;return typeof p=="object"&&p!==null?p=Pn(p):(d=an(s)?xi:Wt.current,c=s.contextTypes,p=(c=c!=null)?xo(n,d):Ns),s=new s(a,p),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),s}function Vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Tu.enqueueReplaceState(s,s.state,null)}function Bh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},bh(n);var p=s.contextType;typeof p=="object"&&p!==null?d.context=Pn(p):(p=an(s)?xi:Wt.current,d.context=xo(n,p)),d.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(zh(n,s,p,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Tu.enqueueReplaceState(d,d.state,null),gu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function No(n,s){try{var a="",c=s;do a+=ke(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:s,stack:d,digest:null}}function $h(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function qh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Sx=typeof WeakMap=="function"?WeakMap:Map;function Fm(n,s,a){a=Qr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){ku||(ku=!0,id=c),qh(n,s)},a}function Om(n,s,a){a=Qr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){qh(n,s)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){qh(n,s),typeof c!="function"&&(js===null?js=new Set([this]):js.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function Lm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Sx;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=Mx.bind(null,n,s,a),s.then(n,n))}function Mm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Um(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Qr(-1,1),s.tag=2,Ps(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Ax=H.ReactCurrentOwner,ln=!1;function tn(n,s,a,c){s.child=n===null?om(s,null,a,c):So(s,n.child,a,c)}function zm(n,s,a,c,d){a=a.render;var p=s.ref;return Co(s,d),c=Vh(n,s,a,c,p,d),a=Fh(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Xr(n,s,d)):(ot&&a&&_h(s),s.flags|=1,tn(n,s,c,d),s.child)}function Bm(n,s,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!dd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,$m(n,s,p,c,d)):(n=Fu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,(n.lanes&d)===0){var x=p.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(x,c)&&n.ref===s.ref)return Xr(n,s,d)}return s.flags|=1,n=Ls(p,c),n.ref=s.ref,n.return=s,s.child=n}function $m(n,s,a,c,d){if(n!==null){var p=n.memoizedProps;if(ba(p,c)&&n.ref===s.ref)if(ln=!1,s.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(ln=!0);else return s.lanes=n.lanes,Xr(n,s,d)}return Hh(n,s,a,c,d)}function qm(n,s,a){var c=s.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Ro,An),An|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ye(Ro,An),An|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ye(Ro,An),An|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,Ye(Ro,An),An|=c;return tn(n,s,d,a),s.child}function Hm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Hh(n,s,a,c,d){var p=an(a)?xi:Wt.current;return p=xo(s,p),Co(s,d),a=Vh(n,s,a,c,p,d),c=Fh(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Xr(n,s,d)):(ot&&c&&_h(s),s.flags|=1,tn(n,s,a,d),s.child)}function Wm(n,s,a,c,d){if(an(a)){var p=!0;au(s)}else p=!1;if(Co(s,d),s.stateNode===null)Su(n,s),jm(s,a,c),Bh(s,a,c,d),c=!0;else if(n===null){var x=s.stateNode,A=s.memoizedProps;x.props=A;var k=x.context,z=a.contextType;typeof z=="object"&&z!==null?z=Pn(z):(z=an(a)?xi:Wt.current,z=xo(s,z));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof x.getSnapshotBeforeUpdate=="function";Z||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==c||k!==z)&&Vm(s,x,c,z),Rs=!1;var X=s.memoizedState;x.state=X,gu(s,c,x,d),k=s.memoizedState,A!==c||X!==k||on.current||Rs?(typeof Y=="function"&&(zh(s,a,Y,c),k=s.memoizedState),(A=Rs||Dm(s,a,A,c,X,k,z))?(Z||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=k),x.props=c,x.state=k,x.context=z,c=A):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{x=s.stateNode,lm(n,s),A=s.memoizedProps,z=s.type===s.elementType?A:Kn(s.type,A),x.props=z,Z=s.pendingProps,X=x.context,k=a.contextType,typeof k=="object"&&k!==null?k=Pn(k):(k=an(a)?xi:Wt.current,k=xo(s,k));var le=a.getDerivedStateFromProps;(Y=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==Z||X!==k)&&Vm(s,x,c,k),Rs=!1,X=s.memoizedState,x.state=X,gu(s,c,x,d);var de=s.memoizedState;A!==Z||X!==de||on.current||Rs?(typeof le=="function"&&(zh(s,a,le,c),de=s.memoizedState),(z=Rs||Dm(s,a,z,c,X,de,k)||!1)?(Y||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,de,k),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,de,k)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=de),x.props=c,x.state=de,x.context=k,c=z):(typeof x.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),c=!1)}return Wh(n,s,a,c,p,d)}function Wh(n,s,a,c,d,p){Hm(n,s);var x=(s.flags&128)!==0;if(!c&&!x)return d&&Yp(s,a,!1),Xr(n,s,p);c=s.stateNode,Ax.current=s;var A=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&x?(s.child=So(s,n.child,null,p),s.child=So(s,null,A,p)):tn(n,s,A,p),s.memoizedState=c.state,d&&Yp(s,a,!0),s.child}function Km(n){var s=n.stateNode;s.pendingContext?Qp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Qp(n,s.context,!1),Nh(n,s.containerInfo)}function Gm(n,s,a,c,d){return Io(),Eh(d),s.flags|=256,tn(n,s,a,c),s.child}var Kh={dehydrated:null,treeContext:null,retryLane:0};function Gh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qm(n,s,a){var c=s.pendingProps,d=lt.current,p=!1,x=(s.flags&128)!==0,A;if((A=x)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(p=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(lt,d&1),n===null)return xh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=c.children,n=c.fallback,p?(c=s.mode,p=s.child,x={mode:"hidden",children:x},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=x):p=Ou(x,c,0,null),n=Ri(n,c,a,null),p.return=s,n.return=s,p.sibling=n,s.child=p,s.child.memoizedState=Gh(a),s.memoizedState=Kh,n):Qh(s,x));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return Cx(n,s,x,c,A,d,a);if(p){p=c.fallback,x=s.mode,d=n.child,A=d.sibling;var k={mode:"hidden",children:c.children};return(x&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=k,s.deletions=null):(c=Ls(d,k),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?p=Ls(A,p):(p=Ri(p,x,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,x=n.child.memoizedState,x=x===null?Gh(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},p.memoizedState=x,p.childLanes=n.childLanes&~a,s.memoizedState=Kh,c}return p=n.child,n=p.sibling,c=Ls(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Qh(n,s){return s=Ou({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Iu(n,s,a,c){return c!==null&&Eh(c),So(s,n.child,null,a),n=Qh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Cx(n,s,a,c,d,p,x){if(a)return s.flags&256?(s.flags&=-257,c=$h(Error(t(422))),Iu(n,s,x,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=Ou({mode:"visible",children:c.children},d,0,null),p=Ri(p,d,x,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&So(s,n.child,null,x),s.child.memoizedState=Gh(x),s.memoizedState=Kh,p);if((s.mode&1)===0)return Iu(n,s,x,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,p=Error(t(419)),c=$h(p,c,void 0),Iu(n,s,x,c)}if(A=(x&n.childLanes)!==0,ln||A){if(c=Rt,c!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|x))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Gr(n,d),Xn(c,n,d,-1))}return hd(),c=$h(Error(t(421))),Iu(n,s,x,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=Ux.bind(null,n),d._reactRetry=s,null):(n=p.treeContext,Sn=Cs(d.nextSibling),In=s,ot=!0,Wn=null,n!==null&&(kn[Rn++]=Wr,kn[Rn++]=Kr,kn[Rn++]=Ei,Wr=n.id,Kr=n.overflow,Ei=s),s=Qh(s,c.children),s.flags|=4096,s)}function Xm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ah(n.return,s,a)}function Xh(n,s,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Ym(n,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(tn(n,s,c.children,a),c=lt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xm(n,a,s);else if(n.tag===19)Xm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(lt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&yu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Xh(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&yu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Xh(s,!0,a,null,p);break;case"together":Xh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Su(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Xr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ci|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Ls(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ls(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function bx(n,s,a){switch(s.tag){case 3:Km(s),Io();break;case 5:hm(s);break;case 1:an(s.type)&&au(s);break;case 4:Nh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ye(fu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ye(lt,lt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Qm(n,s,a):(Ye(lt,lt.current&1),n=Xr(n,s,a),n!==null?n.sibling:null);Ye(lt,lt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Ym(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(lt,lt.current),c)break;return null;case 22:case 23:return s.lanes=0,qm(n,s,a)}return Xr(n,s,a)}var Jm,Yh,Zm,eg;Jm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Yh=function(){},Zm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,Si(wr.current);var p=null;switch(a){case"input":d=Dr(n,d),c=Dr(n,c),p=[];break;case"select":d=ue({},d,{value:void 0}),c=ue({},c,{value:void 0}),p=[];break;case"textarea":d=ps(n,d),c=ps(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=su)}gn(a,c);var x;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var A=d[z];for(x in A)A.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var k=c[z];if(A=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&k!==A&&(k!=null||A!=null))if(z==="style")if(A){for(x in A)!A.hasOwnProperty(x)||k&&k.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in k)k.hasOwnProperty(x)&&A[x]!==k[x]&&(a||(a={}),a[x]=k[x])}else a||(p||(p=[]),p.push(z,a)),a=k;else z==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(p=p||[]).push(z,k)):z==="children"?typeof k!="string"&&typeof k!="number"||(p=p||[]).push(z,""+k):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(k!=null&&z==="onScroll"&&nt("scroll",n),p||A===k||(p=[])):(p=p||[]).push(z,k))}a&&(p=p||[]).push("style",a);var z=p;(s.updateQueue=z)&&(s.flags|=4)}},eg=function(n,s,a,c){a!==c&&(s.flags|=4)};function $a(n,s){if(!ot)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Gt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Nx(n,s,a){var c=s.pendingProps;switch(vh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(s),null;case 1:return an(s.type)&&ou(),Gt(s),null;case 3:return c=s.stateNode,bo(),rt(on),rt(Wt),Ph(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(hu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wn!==null&&(ld(Wn),Wn=null))),Yh(n,s),Gt(s),null;case 5:kh(s);var d=Si(La.current);if(a=s.type,n!==null&&s.stateNode!=null)Zm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Gt(s),null}if(n=Si(wr.current),hu(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[vr]=s,c[Da]=p,n=(s.mode&1)!==0,a){case"dialog":nt("cancel",c),nt("close",c);break;case"iframe":case"object":case"embed":nt("load",c);break;case"video":case"audio":for(d=0;d<ka.length;d++)nt(ka[d],c);break;case"source":nt("error",c);break;case"img":case"image":case"link":nt("error",c),nt("load",c);break;case"details":nt("toggle",c);break;case"input":Ki(c,p),nt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},nt("invalid",c);break;case"textarea":Gi(c,p),nt("invalid",c)}gn(a,p),d=null;for(var x in p)if(p.hasOwnProperty(x)){var A=p[x];x==="children"?typeof A=="string"?c.textContent!==A&&(p.suppressHydrationWarning!==!0&&ru(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(p.suppressHydrationWarning!==!0&&ru(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(x)&&A!=null&&x==="onScroll"&&nt("scroll",c)}switch(a){case"input":cs(c),fs(c,p,!0);break;case"textarea":cs(c),sr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=su)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ms(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=x.createElement(a,{is:c.is}):(n=x.createElement(a),a==="select"&&(x=n,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):n=x.createElementNS(n,a),n[vr]=s,n[Da]=c,Jm(n,s,!1,!1),s.stateNode=n;e:{switch(x=ys(a,c),a){case"dialog":nt("cancel",n),nt("close",n),d=c;break;case"iframe":case"object":case"embed":nt("load",n),d=c;break;case"video":case"audio":for(d=0;d<ka.length;d++)nt(ka[d],n);d=c;break;case"source":nt("error",n),d=c;break;case"img":case"image":case"link":nt("error",n),nt("load",n),d=c;break;case"details":nt("toggle",n),d=c;break;case"input":Ki(n,c),d=Dr(n,c),nt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ue({},c,{value:void 0}),nt("invalid",n);break;case"textarea":Gi(n,c),d=ps(n,c),nt("invalid",n);break;default:d=c}gn(a,d),A=d;for(p in A)if(A.hasOwnProperty(p)){var k=A[p];p==="style"?gs(n,k):p==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Xi(n,k)):p==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&Vr(n,k):typeof k=="number"&&Vr(n,""+k):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?k!=null&&p==="onScroll"&&nt("scroll",n):k!=null&&ee(n,p,k,x))}switch(a){case"input":cs(n),fs(n,c,!1);break;case"textarea":cs(n),sr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Pe(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?mn(n,!!c.multiple,p,!1):c.defaultValue!=null&&mn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=su)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Gt(s),null;case 6:if(n&&s.stateNode!=null)eg(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Si(La.current),Si(wr.current),hu(s)){if(c=s.stateNode,a=s.memoizedProps,c[vr]=s,(p=c.nodeValue!==a)&&(n=In,n!==null))switch(n.tag){case 3:ru(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ru(c.nodeValue,a,(n.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[vr]=s,s.stateNode=c}return Gt(s),null;case 13:if(rt(lt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ot&&Sn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)rm(),Io(),s.flags|=98560,p=!1;else if(p=hu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[vr]=s}else Io(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),p=!1}else Wn!==null&&(ld(Wn),Wn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(lt.current&1)!==0?Ct===0&&(Ct=3):hd())),s.updateQueue!==null&&(s.flags|=4),Gt(s),null);case 4:return bo(),Yh(n,s),n===null&&Ra(s.stateNode.containerInfo),Gt(s),null;case 10:return Sh(s.type._context),Gt(s),null;case 17:return an(s.type)&&ou(),Gt(s),null;case 19:if(rt(lt),p=s.memoizedState,p===null)return Gt(s),null;if(c=(s.flags&128)!==0,x=p.rendering,x===null)if(c)$a(p,!1);else{if(Ct!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=yu(n),x!==null){for(s.flags|=128,$a(p,!1),c=x.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,n=c,p.flags&=14680066,x=p.alternate,x===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=x.childLanes,p.lanes=x.lanes,p.child=x.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=x.memoizedProps,p.memoizedState=x.memoizedState,p.updateQueue=x.updateQueue,p.type=x.type,n=x.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(lt,lt.current&1|2),s.child}n=n.sibling}p.tail!==null&&tt()>Po&&(s.flags|=128,c=!0,$a(p,!1),s.lanes=4194304)}else{if(!c)if(n=yu(x),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$a(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!ot)return Gt(s),null}else 2*tt()-p.renderingStartTime>Po&&a!==1073741824&&(s.flags|=128,c=!0,$a(p,!1),s.lanes=4194304);p.isBackwards?(x.sibling=s.child,s.child=x):(a=p.last,a!==null?a.sibling=x:s.child=x,p.last=x)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=tt(),s.sibling=null,a=lt.current,Ye(lt,c?a&1|2:a&1),s):(Gt(s),null);case 22:case 23:return cd(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(An&1073741824)!==0&&(Gt(s),s.subtreeFlags&6&&(s.flags|=8192)):Gt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function kx(n,s){switch(vh(s),s.tag){case 1:return an(s.type)&&ou(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return bo(),rt(on),rt(Wt),Ph(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return kh(s),null;case 13:if(rt(lt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Io()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return rt(lt),null;case 4:return bo(),null;case 10:return Sh(s.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Au=!1,Qt=!1,Rx=typeof WeakSet=="function"?WeakSet:Set,he=null;function ko(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){dt(n,s,c)}else a.current=null}function Jh(n,s,a){try{a()}catch(c){dt(n,s,c)}}var tg=!1;function Px(n,s){if(ch=zr,n=Dp(),nh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var x=0,A=-1,k=-1,z=0,Y=0,Z=n,X=null;t:for(;;){for(var le;Z!==a||d!==0&&Z.nodeType!==3||(A=x+d),Z!==p||c!==0&&Z.nodeType!==3||(k=x+c),Z.nodeType===3&&(x+=Z.nodeValue.length),(le=Z.firstChild)!==null;)X=Z,Z=le;for(;;){if(Z===n)break t;if(X===a&&++z===d&&(A=x),X===p&&++Y===c&&(k=x),(le=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=le}a=A===-1||k===-1?null:{start:A,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(hh={focusedElem:n,selectionRange:a},zr=!1,he=s;he!==null;)if(s=he,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,he=n;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,gt=de.memoizedState,F=s.stateNode,D=F.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Kn(s.type,fe),gt);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var M=s.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){dt(s,s.return,te)}if(n=s.sibling,n!==null){n.return=s.return,he=n;break}he=s.return}return de=tg,tg=!1,de}function qa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Jh(s,a,p)}d=d.next}while(d!==c)}}function Cu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Zh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ng(n){var s=n.alternate;s!==null&&(n.alternate=null,ng(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[vr],delete s[Da],delete s[mh],delete s[px],delete s[mx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rg(n){return n.tag===5||n.tag===3||n.tag===4}function sg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=su));else if(c!==4&&(n=n.child,n!==null))for(ed(n,s,a),n=n.sibling;n!==null;)ed(n,s,a),n=n.sibling}function td(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(td(n,s,a),n=n.sibling;n!==null;)td(n,s,a),n=n.sibling}var Lt=null,Gn=!1;function Ds(n,s,a){for(a=a.child;a!==null;)ig(n,s,a),a=a.sibling}function ig(n,s,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(hi,a)}catch{}switch(a.tag){case 5:Qt||ko(a,s);case 6:var c=Lt,d=Gn;Lt=null,Ds(n,s,a),Lt=c,Gn=d,Lt!==null&&(Gn?(n=Lt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Lt.removeChild(a.stateNode));break;case 18:Lt!==null&&(Gn?(n=Lt,a=a.stateNode,n.nodeType===8?ph(n.parentNode,a):n.nodeType===1&&ph(n,a),Ts(n)):ph(Lt,a.stateNode));break;case 4:c=Lt,d=Gn,Lt=a.stateNode.containerInfo,Gn=!0,Ds(n,s,a),Lt=c,Gn=d;break;case 0:case 11:case 14:case 15:if(!Qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,x=p.destroy;p=p.tag,x!==void 0&&((p&2)!==0||(p&4)!==0)&&Jh(a,s,x),d=d.next}while(d!==c)}Ds(n,s,a);break;case 1:if(!Qt&&(ko(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){dt(a,s,A)}Ds(n,s,a);break;case 21:Ds(n,s,a);break;case 22:a.mode&1?(Qt=(c=Qt)||a.memoizedState!==null,Ds(n,s,a),Qt=c):Ds(n,s,a);break;default:Ds(n,s,a)}}function og(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Rx),s.forEach(function(c){var d=zx.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Qn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,x=s,A=x;e:for(;A!==null;){switch(A.tag){case 5:Lt=A.stateNode,Gn=!1;break e;case 3:Lt=A.stateNode.containerInfo,Gn=!0;break e;case 4:Lt=A.stateNode.containerInfo,Gn=!0;break e}A=A.return}if(Lt===null)throw Error(t(160));ig(p,x,d),Lt=null,Gn=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch(z){dt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ag(s,n),s=s.sibling}function ag(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Qn(s,n),Er(n),c&4){try{qa(3,n,n.return),Cu(3,n)}catch(fe){dt(n,n.return,fe)}try{qa(5,n,n.return)}catch(fe){dt(n,n.return,fe)}}break;case 1:Qn(s,n),Er(n),c&512&&a!==null&&ko(a,a.return);break;case 5:if(Qn(s,n),Er(n),c&512&&a!==null&&ko(a,a.return),n.flags&32){var d=n.stateNode;try{Vr(d,"")}catch(fe){dt(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,x=a!==null?a.memoizedProps:p,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&p.type==="radio"&&p.name!=null&&ds(d,p),ys(A,x);var z=ys(A,p);for(x=0;x<k.length;x+=2){var Y=k[x],Z=k[x+1];Y==="style"?gs(d,Z):Y==="dangerouslySetInnerHTML"?Xi(d,Z):Y==="children"?Vr(d,Z):ee(d,Y,Z,z)}switch(A){case"input":jr(d,p);break;case"textarea":Qi(d,p);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?mn(d,!!p.multiple,le,!1):X!==!!p.multiple&&(p.defaultValue!=null?mn(d,!!p.multiple,p.defaultValue,!0):mn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Da]=p}catch(fe){dt(n,n.return,fe)}}break;case 6:if(Qn(s,n),Er(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(fe){dt(n,n.return,fe)}}break;case 3:if(Qn(s,n),Er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ts(s.containerInfo)}catch(fe){dt(n,n.return,fe)}break;case 4:Qn(s,n),Er(n);break;case 13:Qn(s,n),Er(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(sd=tt())),c&4&&og(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Qt=(z=Qt)||Y,Qn(s,n),Qt=z):Qn(s,n),Er(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(he=n,Y=n.child;Y!==null;){for(Z=he=Y;he!==null;){switch(X=he,le=X.child,X.tag){case 0:case 11:case 14:case 15:qa(4,X,X.return);break;case 1:ko(X,X.return);var de=X.stateNode;if(typeof de.componentWillUnmount=="function"){c=X,a=X.return;try{s=c,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){dt(c,a,fe)}}break;case 5:ko(X,X.return);break;case 22:if(X.memoizedState!==null){cg(Z);continue}}le!==null?(le.return=X,he=le):cg(Z)}Y=Y.sibling}e:for(Y=null,Z=n;;){if(Z.tag===5){if(Y===null){Y=Z;try{d=Z.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(A=Z.stateNode,k=Z.memoizedProps.style,x=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=Mn("display",x))}catch(fe){dt(n,n.return,fe)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(fe){dt(n,n.return,fe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Qn(s,n),Er(n),c&4&&og(n);break;case 21:break;default:Qn(s,n),Er(n)}}function Er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(rg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Vr(d,""),c.flags&=-33);var p=sg(n);td(n,p,d);break;case 3:case 4:var x=c.stateNode.containerInfo,A=sg(n);ed(n,A,x);break;default:throw Error(t(161))}}catch(k){dt(n,n.return,k)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Dx(n,s,a){he=n,lg(n)}function lg(n,s,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,p=d.child;if(d.tag===22&&c){var x=d.memoizedState!==null||Au;if(!x){var A=d.alternate,k=A!==null&&A.memoizedState!==null||Qt;A=Au;var z=Qt;if(Au=x,(Qt=k)&&!z)for(he=d;he!==null;)x=he,k=x.child,x.tag===22&&x.memoizedState!==null?hg(d):k!==null?(k.return=x,he=k):hg(d);for(;p!==null;)he=p,lg(p),p=p.sibling;he=d,Au=A,Qt=z}ug(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,he=p):ug(n)}}function ug(n){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Qt||Cu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Qt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Kn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&cm(s,p,c);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}cm(s,x,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&Ts(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||s.flags&512&&Zh(s)}catch(X){dt(s,s.return,X)}}if(s===n){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function cg(n){for(;he!==null;){var s=he;if(s===n){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function hg(n){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(k){dt(s,a,k)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(k){dt(s,d,k)}}var p=s.return;try{Zh(s)}catch(k){dt(s,p,k)}break;case 5:var x=s.return;try{Zh(s)}catch(k){dt(s,x,k)}}}catch(k){dt(s,s.return,k)}if(s===n){he=null;break}var A=s.sibling;if(A!==null){A.return=s.return,he=A;break}he=s.return}}var jx=Math.ceil,bu=H.ReactCurrentDispatcher,nd=H.ReactCurrentOwner,jn=H.ReactCurrentBatchConfig,Le=0,Rt=null,wt=null,Mt=0,An=0,Ro=bs(0),Ct=0,Ha=null,Ci=0,Nu=0,rd=0,Wa=null,un=null,sd=0,Po=1/0,Yr=null,ku=!1,id=null,js=null,Ru=!1,Vs=null,Pu=0,Ka=0,od=null,Du=-1,ju=0;function nn(){return(Le&6)!==0?tt():Du!==-1?Du:Du=tt()}function Fs(n){return(n.mode&1)===0?1:(Le&2)!==0&&Mt!==0?Mt&-Mt:yx.transition!==null?(ju===0&&(ju=pa()),ju):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:oo(n.type)),n)}function Xn(n,s,a,c){if(50<Ka)throw Ka=0,od=null,Error(t(185));mi(n,a,c),((Le&2)===0||n!==Rt)&&(n===Rt&&((Le&2)===0&&(Nu|=a),Ct===4&&Os(n,Mt)),cn(n,c),a===1&&Le===0&&(s.mode&1)===0&&(Po=tt()+500,lu&&ks()))}function cn(n,s){var a=n.callbackNode;pi(n,s);var c=Lr(n,n===Rt?Mt:0);if(c===0)a!==null&&Zi(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Zi(a),s===1)n.tag===0?gx(fg.bind(null,n)):Jp(fg.bind(null,n)),dx(function(){(Le&6)===0&&ks()}),a=null;else{switch(ur(c)){case 1:a=eo;break;case 4:a=ha;break;case 16:a=ci;break;case 536870912:a=to;break;default:a=ci}a=xg(a,dg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function dg(n,s){if(Du=-1,ju=0,(Le&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Do()&&n.callbackNode!==a)return null;var c=Lr(n,n===Rt?Mt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Vu(n,c);else{s=c;var d=Le;Le|=2;var p=mg();(Rt!==n||Mt!==s)&&(Yr=null,Po=tt()+500,Ni(n,s));do try{Ox();break}catch(A){pg(n,A)}while(!0);Ih(),bu.current=p,Le=d,wt!==null?s=0:(Rt=null,Mt=0,s=Ct)}if(s!==0){if(s===2&&(d=fa(n),d!==0&&(c=d,s=ad(n,d))),s===1)throw a=Ha,Ni(n,0),Os(n,c),cn(n,tt()),a;if(s===6)Os(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Vx(d)&&(s=Vu(n,c),s===2&&(p=fa(n),p!==0&&(c=p,s=ad(n,p))),s===1))throw a=Ha,Ni(n,0),Os(n,c),cn(n,tt()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ki(n,un,Yr);break;case 3:if(Os(n,c),(c&130023424)===c&&(s=sd+500-tt(),10<s)){if(Lr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){nn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=fh(ki.bind(null,n,un,Yr),s);break}ki(n,un,Yr);break;case 4:if(Os(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var x=31-vn(c);p=1<<x,x=s[x],x>d&&(d=x),c&=~p}if(c=d,c=tt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*jx(c/1960))-c,10<c){n.timeoutHandle=fh(ki.bind(null,n,un,Yr),c);break}ki(n,un,Yr);break;case 5:ki(n,un,Yr);break;default:throw Error(t(329))}}}return cn(n,tt()),n.callbackNode===a?dg.bind(null,n):null}function ad(n,s){var a=Wa;return n.current.memoizedState.isDehydrated&&(Ni(n,s).flags|=256),n=Vu(n,s),n!==2&&(s=un,un=a,s!==null&&ld(s)),n}function ld(n){un===null?un=n:un.push.apply(un,n)}function Vx(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Hn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Os(n,s){for(s&=~rd,s&=~Nu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-vn(s),c=1<<a;n[a]=-1,s&=~c}}function fg(n){if((Le&6)!==0)throw Error(t(327));Do();var s=Lr(n,0);if((s&1)===0)return cn(n,tt()),null;var a=Vu(n,s);if(n.tag!==0&&a===2){var c=fa(n);c!==0&&(s=c,a=ad(n,c))}if(a===1)throw a=Ha,Ni(n,0),Os(n,s),cn(n,tt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ki(n,un,Yr),cn(n,tt()),null}function ud(n,s){var a=Le;Le|=1;try{return n(s)}finally{Le=a,Le===0&&(Po=tt()+500,lu&&ks())}}function bi(n){Vs!==null&&Vs.tag===0&&(Le&6)===0&&Do();var s=Le;Le|=1;var a=jn.transition,c=Fe;try{if(jn.transition=null,Fe=1,n)return n()}finally{Fe=c,jn.transition=a,Le=s,(Le&6)===0&&ks()}}function cd(){An=Ro.current,rt(Ro)}function Ni(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,hx(a)),wt!==null)for(a=wt.return;a!==null;){var c=a;switch(vh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ou();break;case 3:bo(),rt(on),rt(Wt),Ph();break;case 5:kh(c);break;case 4:bo();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Sh(c.type._context);break;case 22:case 23:cd()}a=a.return}if(Rt=n,wt=n=Ls(n.current,null),Mt=An=s,Ct=0,Ha=null,rd=Nu=Ci=0,un=Wa=null,Ii!==null){for(s=0;s<Ii.length;s++)if(a=Ii[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var x=p.next;p.next=d,c.next=x}a.pending=c}Ii=null}return n}function pg(n,s){do{var a=wt;try{if(Ih(),_u.current=Eu,vu){for(var c=ut.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}vu=!1}if(Ai=0,kt=At=ut=null,Ma=!1,Ua=0,nd.current=null,a===null||a.return===null){Ct=1,Ha=s,wt=null;break}e:{var p=n,x=a.return,A=a,k=s;if(s=Mt,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var z=k,Y=A,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=Mm(x);if(le!==null){le.flags&=-257,Um(le,x,A,p,s),le.mode&1&&Lm(p,z,s),s=le,k=z;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(k),s.updateQueue=fe}else de.add(k);break e}else{if((s&1)===0){Lm(p,z,s),hd();break e}k=Error(t(426))}}else if(ot&&A.mode&1){var gt=Mm(x);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),Um(gt,x,A,p,s),Eh(No(k,A));break e}}p=k=No(k,A),Ct!==4&&(Ct=2),Wa===null?Wa=[p]:Wa.push(p),p=x;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var F=Fm(p,k,s);um(p,F);break e;case 1:A=k;var D=p.type,M=p.stateNode;if((p.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(js===null||!js.has(M)))){p.flags|=65536,s&=-s,p.lanes|=s;var te=Om(p,A,s);um(p,te);break e}}p=p.return}while(p!==null)}yg(a)}catch(pe){s=pe,wt===a&&a!==null&&(wt=a=a.return);continue}break}while(!0)}function mg(){var n=bu.current;return bu.current=Eu,n===null?Eu:n}function hd(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Rt===null||(Ci&268435455)===0&&(Nu&268435455)===0||Os(Rt,Mt)}function Vu(n,s){var a=Le;Le|=2;var c=mg();(Rt!==n||Mt!==s)&&(Yr=null,Ni(n,s));do try{Fx();break}catch(d){pg(n,d)}while(!0);if(Ih(),Le=a,bu.current=c,wt!==null)throw Error(t(261));return Rt=null,Mt=0,Ct}function Fx(){for(;wt!==null;)gg(wt)}function Ox(){for(;wt!==null&&!ui();)gg(wt)}function gg(n){var s=wg(n.alternate,n,An);n.memoizedProps=n.pendingProps,s===null?yg(n):wt=s,nd.current=null}function yg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Nx(a,s,An),a!==null){wt=a;return}}else{if(a=kx(a,s),a!==null){a.flags&=32767,wt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,wt=null;return}}if(s=s.sibling,s!==null){wt=s;return}wt=s=n}while(s!==null);Ct===0&&(Ct=5)}function ki(n,s,a){var c=Fe,d=jn.transition;try{jn.transition=null,Fe=1,Lx(n,s,a,c)}finally{jn.transition=d,Fe=c}return null}function Lx(n,s,a,c){do Do();while(Vs!==null);if((Le&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Yc(n,p),n===Rt&&(wt=Rt=null,Mt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ru||(Ru=!0,xg(ci,function(){return Do(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=jn.transition,jn.transition=null;var x=Fe;Fe=1;var A=Le;Le|=4,nd.current=null,Px(n,a),ag(a,n),sx(hh),zr=!!ch,hh=ch=null,n.current=a,Dx(a),Or(),Le=A,Fe=x,jn.transition=p}else n.current=a;if(Ru&&(Ru=!1,Vs=n,Pu=d),p=n.pendingLanes,p===0&&(js=null),Bl(a.stateNode),cn(n,tt()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ku)throw ku=!1,n=id,id=null,n;return(Pu&1)!==0&&n.tag!==0&&Do(),p=n.pendingLanes,(p&1)!==0?n===od?Ka++:(Ka=0,od=n):Ka=0,ks(),null}function Do(){if(Vs!==null){var n=ur(Pu),s=jn.transition,a=Fe;try{if(jn.transition=null,Fe=16>n?16:n,Vs===null)var c=!1;else{if(n=Vs,Vs=null,Pu=0,(Le&6)!==0)throw Error(t(331));var d=Le;for(Le|=4,he=n.current;he!==null;){var p=he,x=p.child;if((he.flags&16)!==0){var A=p.deletions;if(A!==null){for(var k=0;k<A.length;k++){var z=A[k];for(he=z;he!==null;){var Y=he;switch(Y.tag){case 0:case 11:case 15:qa(8,Y,p)}var Z=Y.child;if(Z!==null)Z.return=Y,he=Z;else for(;he!==null;){Y=he;var X=Y.sibling,le=Y.return;if(ng(Y),Y===z){he=null;break}if(X!==null){X.return=le,he=X;break}he=le}}}var de=p.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var gt=fe.sibling;fe.sibling=null,fe=gt}while(fe!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&x!==null)x.return=p,he=x;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:qa(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,he=F;break e}he=p.return}}var D=n.current;for(he=D;he!==null;){x=he;var M=x.child;if((x.subtreeFlags&2064)!==0&&M!==null)M.return=x,he=M;else e:for(x=D;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Cu(9,A)}}catch(pe){dt(A,A.return,pe)}if(A===x){he=null;break e}var te=A.sibling;if(te!==null){te.return=A.return,he=te;break e}he=A.return}}if(Le=d,ks(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(hi,n)}catch{}c=!0}return c}finally{Fe=a,jn.transition=s}}return!1}function _g(n,s,a){s=No(a,s),s=Fm(n,s,1),n=Ps(n,s,1),s=nn(),n!==null&&(mi(n,1,s),cn(n,s))}function dt(n,s,a){if(n.tag===3)_g(n,n,a);else for(;s!==null;){if(s.tag===3){_g(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(js===null||!js.has(c))){n=No(a,n),n=Om(s,n,1),s=Ps(s,n,1),n=nn(),s!==null&&(mi(s,1,n),cn(s,n));break}}s=s.return}}function Mx(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=nn(),n.pingedLanes|=n.suspendedLanes&a,Rt===n&&(Mt&a)===a&&(Ct===4||Ct===3&&(Mt&130023424)===Mt&&500>tt()-sd?Ni(n,0):rd|=a),cn(n,s)}function vg(n,s){s===0&&((n.mode&1)===0?s=1:(s=ws,ws<<=1,(ws&130023424)===0&&(ws=4194304)));var a=nn();n=Gr(n,s),n!==null&&(mi(n,s,a),cn(n,a))}function Ux(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),vg(n,a)}function zx(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),vg(n,a)}var wg;wg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||on.current)ln=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return ln=!1,bx(n,s,a);ln=(n.flags&131072)!==0}else ln=!1,ot&&(s.flags&1048576)!==0&&Zp(s,cu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Su(n,s),n=s.pendingProps;var d=xo(s,Wt.current);Co(s,a),d=Vh(null,s,c,n,d,a);var p=Fh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,an(c)?(p=!0,au(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,bh(s),d.updater=Tu,s.stateNode=d,d._reactInternals=s,Bh(s,c,n,a),s=Wh(null,s,c,!0,p,a)):(s.tag=0,ot&&p&&_h(s),tn(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Su(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=$x(c),n=Kn(c,n),d){case 0:s=Hh(null,s,c,n,a);break e;case 1:s=Wm(null,s,c,n,a);break e;case 11:s=zm(null,s,c,n,a);break e;case 14:s=Bm(null,s,c,Kn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Hh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Wm(n,s,c,d,a);case 3:e:{if(Km(s),n===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,lm(n,s),gu(s,c,null,a);var x=s.memoizedState;if(c=x.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=No(Error(t(423)),s),s=Gm(n,s,c,a,d);break e}else if(c!==d){d=No(Error(t(424)),s),s=Gm(n,s,c,a,d);break e}else for(Sn=Cs(s.stateNode.containerInfo.firstChild),In=s,ot=!0,Wn=null,a=om(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Io(),c===d){s=Xr(n,s,a);break e}tn(n,s,c,a)}s=s.child}return s;case 5:return hm(s),n===null&&xh(s),c=s.type,d=s.pendingProps,p=n!==null?n.memoizedProps:null,x=d.children,dh(c,d)?x=null:p!==null&&dh(c,p)&&(s.flags|=32),Hm(n,s),tn(n,s,x,a),s.child;case 6:return n===null&&xh(s),null;case 13:return Qm(n,s,a);case 4:return Nh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=So(s,null,c,a):tn(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),zm(n,s,c,d,a);case 7:return tn(n,s,s.pendingProps,a),s.child;case 8:return tn(n,s,s.pendingProps.children,a),s.child;case 12:return tn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,x=d.value,Ye(fu,c._currentValue),c._currentValue=x,p!==null)if(Hn(p.value,x)){if(p.children===d.children&&!on.current){s=Xr(n,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var A=p.dependencies;if(A!==null){x=p.child;for(var k=A.firstContext;k!==null;){if(k.context===c){if(p.tag===1){k=Qr(-1,a&-a),k.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?k.next=k:(k.next=Y.next,Y.next=k),z.pending=k}}p.lanes|=a,k=p.alternate,k!==null&&(k.lanes|=a),Ah(p.return,a,s),A.lanes|=a;break}k=k.next}}else if(p.tag===10)x=p.type===s.type?null:p.child;else if(p.tag===18){if(x=p.return,x===null)throw Error(t(341));x.lanes|=a,A=x.alternate,A!==null&&(A.lanes|=a),Ah(x,a,s),x=p.sibling}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===s){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}tn(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Co(s,a),d=Pn(d),c=c(d),s.flags|=1,tn(n,s,c,a),s.child;case 14:return c=s.type,d=Kn(c,s.pendingProps),d=Kn(c.type,d),Bm(n,s,c,d,a);case 15:return $m(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Su(n,s),s.tag=1,an(c)?(n=!0,au(s)):n=!1,Co(s,a),jm(s,c,d),Bh(s,c,d,a),Wh(null,s,c,!0,n,a);case 19:return Ym(n,s,a);case 22:return qm(n,s,a)}throw Error(t(156,s.tag))};function xg(n,s){return ca(n,s)}function Bx(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,s,a,c){return new Bx(n,s,a,c)}function dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $x(n){if(typeof n=="function")return dd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===Ze)return 14}return 2}function Ls(n,s){var a=n.alternate;return a===null?(a=Vn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Fu(n,s,a,c,d,p){var x=2;if(c=n,typeof n=="function")dd(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case C:return Ri(a.children,d,p,s);case T:x=8,d|=8;break;case N:return n=Vn(12,a,s,d|2),n.elementType=N,n.lanes=p,n;case b:return n=Vn(13,a,s,d),n.elementType=b,n.lanes=p,n;case He:return n=Vn(19,a,s,d),n.elementType=He,n.lanes=p,n;case Xe:return Ou(a,d,p,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:x=10;break e;case R:x=9;break e;case V:x=11;break e;case Ze:x=14;break e;case Nt:x=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Vn(x,a,s,d),s.elementType=n,s.type=c,s.lanes=p,s}function Ri(n,s,a,c){return n=Vn(7,n,c,s),n.lanes=a,n}function Ou(n,s,a,c){return n=Vn(22,n,c,s),n.elementType=Xe,n.lanes=a,n.stateNode={isHidden:!1},n}function fd(n,s,a){return n=Vn(6,n,null,s),n.lanes=a,n}function pd(n,s,a){return s=Vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function qx(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function md(n,s,a,c,d,p,x,A,k){return n=new qx(n,s,a,A,k),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Vn(3,null,null,s),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(p),n}function Hx(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Eg(n){if(!n)return Ns;n=n._reactInternals;e:{if($n(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(an(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(an(a))return Xp(n,a,s)}return s}function Tg(n,s,a,c,d,p,x,A,k){return n=md(a,c,!0,n,d,p,x,A,k),n.context=Eg(null),a=n.current,c=nn(),d=Fs(a),p=Qr(c,d),p.callback=s??null,Ps(a,p,d),n.current.lanes=d,mi(n,d,c),cn(n,c),n}function Lu(n,s,a,c){var d=s.current,p=nn(),x=Fs(d);return a=Eg(a),s.context===null?s.context=a:s.pendingContext=a,s=Qr(p,x),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Ps(d,s,x),n!==null&&(Xn(n,d,x,p),mu(n,d,x)),x}function Mu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ig(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function gd(n,s){Ig(n,s),(n=n.alternate)&&Ig(n,s)}function Wx(){return null}var Sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function yd(n){this._internalRoot=n}Uu.prototype.render=yd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Lu(n,s,null,null)},Uu.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;bi(function(){Lu(null,n,null,null)}),s[qr]=null}};function Uu(n){this._internalRoot=n}Uu.prototype.unstable_scheduleHydration=function(n){if(n){var s=va();n={blockedOn:null,target:n,priority:s};for(var a=0;a<wn.length&&s!==0&&s<wn[a].priority;a++);wn.splice(a,0,n),a===0&&so(n)}};function _d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ag(){}function Kx(n,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=Mu(x);p.call(z)}}var x=Tg(s,c,n,0,null,!1,!1,"",Ag);return n._reactRootContainer=x,n[qr]=x.current,Ra(n.nodeType===8?n.parentNode:n),bi(),x}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var z=Mu(k);A.call(z)}}var k=md(n,0,!1,null,null,!1,!1,"",Ag);return n._reactRootContainer=k,n[qr]=k.current,Ra(n.nodeType===8?n.parentNode:n),bi(function(){Lu(s,k,a,c)}),k}function Bu(n,s,a,c,d){var p=a._reactRootContainer;if(p){var x=p;if(typeof d=="function"){var A=d;d=function(){var k=Mu(x);A.call(k)}}Lu(s,x,n,d)}else x=Kx(a,s,n,d,c);return Mu(x)}ya=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=$e(s.pendingLanes);a!==0&&(ga(s,a|1),cn(s,tt()),(Le&6)===0&&(Po=tt()+500,ks()))}break;case 13:bi(function(){var c=Gr(n,1);if(c!==null){var d=nn();Xn(c,n,1,d)}}),gd(n,1)}},no=function(n){if(n.tag===13){var s=Gr(n,134217728);if(s!==null){var a=nn();Xn(s,n,134217728,a)}gd(n,134217728)}},_a=function(n){if(n.tag===13){var s=Fs(n),a=Gr(n,s);if(a!==null){var c=nn();Xn(a,n,s,c)}gd(n,s)}},va=function(){return Fe},wa=function(n,s){var a=Fe;try{return Fe=n,s()}finally{Fe=a}},zn=function(n,s,a){switch(s){case"input":if(jr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=iu(c);if(!d)throw Error(t(90));hs(c),jr(c,d)}}}break;case"textarea":Qi(n,a);break;case"select":s=a.value,s!=null&&mn(n,!!a.multiple,s,!1)}},_t=ud,Vt=bi;var Gx={usingClientEntryPoint:!1,Events:[ja,vo,iu,xe,Ge,ud]},Ga={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qx={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=zl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||Wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{hi=$u.inject(Qx),_n=$u}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx,hn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(s))throw Error(t(200));return Hx(n,s,null,a)},hn.createRoot=function(n,s){if(!_d(n))throw Error(t(299));var a=!1,c="",d=Sg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=md(n,1,!1,null,null,a,!1,c,d),n[qr]=s.current,Ra(n.nodeType===8?n.parentNode:n),new yd(s)},hn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=zl(s),n=n===null?null:n.stateNode,n},hn.flushSync=function(n){return bi(n)},hn.hydrate=function(n,s,a){if(!zu(s))throw Error(t(200));return Bu(null,n,s,!0,a)},hn.hydrateRoot=function(n,s,a){if(!_d(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",x=Sg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=Tg(s,null,n,1,a??null,d,!1,p,x),n[qr]=s.current,Ra(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Uu(s)},hn.render=function(n,s,a){if(!zu(s))throw Error(t(200));return Bu(null,n,s,!1,a)},hn.unmountComponentAtNode=function(n){if(!zu(n))throw Error(t(40));return n._reactRootContainer?(bi(function(){Bu(null,null,n,!1,function(){n._reactRootContainer=null,n[qr]=null})}),!0):!1},hn.unstable_batchedUpdates=ud,hn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!zu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bu(n,s,a,!1,c)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var jg;function r0(){if(jg)return xd.exports;jg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xd.exports=n0(),xd.exports}var Vg;function s0(){if(Vg)return qu;Vg=1;var r=r0();return qu.createRoot=r.createRoot,qu.hydrateRoot=r.hydrateRoot,qu}var i0=s0();const o0=y_(i0),Id={" ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","",""]},vf=[{id:"qualitative",name:"",desc:""},{id:"emotional",name:"",desc:""},{id:"friendly",name:"",desc:""},{id:"humorous",name:"",desc:""},{id:"internal",name:"",desc:""},{id:"philosophical",name:"",desc:""},{id:"practical",name:"",desc:""},{id:"resonance",name:"",desc:""},{id:"blessing",name:"",desc:""},{id:"scenario",name:"",desc:""},{id:"milestone",name:"",desc:""},{id:"journey",name:"",desc:""}],__=()=>localStorage.getItem("gemini_api_key")||"",Fg=()=>!!__(),Og=async(r,e,t=[],i)=>{var q,$,U,K,ne;const o=__();if(!o)return"  API Key Gemini API Key";const l=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${o}`;let h="";t.length>0?h=t.map(ee=>{const H=vf.find(oe=>oe.id===ee);return H?`${H.name}${H.desc}`:""}).join(`
`):h="";const y=`${{normal:"",casual:"",formal:""}[i.tone]||""}`,v=` ${i.wordCount||80} `,w=`""

${r}
${e||""}

****
1. ${y}
2. ${v}

 ${t.length||1} 
${h}

****
1. 
2. 
3. ** Markdown ** ******# 
4. ****
5. 
6. 

...
()

...
`;let E=0;const S=5,O=[1e3,2e3,4e3,8e3,16e3];for(;E<=S;)try{const ee=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:w}]}]})});if(!ee.ok){if(ee.status===400||ee.status===401||ee.status===403)return" API Key ";throw new Error(`API Error: ${ee.status}`)}return((ne=(K=(U=($=(q=(await ee.json()).candidates)==null?void 0:q[0])==null?void 0:$.content)==null?void 0:U.parts)==null?void 0:K[0])==null?void 0:ne.text)||""}catch(ee){if(E===S)return console.error("Gemini API Failed:",ee),"";await new Promise(H=>setTimeout(H,O[E])),E++}},a0=(r,e)=>{let t="";e==="csv"?(t=`\uFEFF,,
`,r.forEach(h=>{const y=[...h.selectedTags,h.manualTraits].filter(Boolean).join("").replace(/,/g,""),v=h.comment.replace(/,/g,"").replace(/\n/g," ");t+=`${h.name},"${y}","${v}"
`})):r.forEach(h=>{const g=[...h.selectedTags,h.manualTraits].filter(Boolean).join("");t+=`${h.name}
${g||""}

${h.comment}
-------------------
`});const i=new Blob([t],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`_${new Date().toLocaleDateString()}.${e}`,l.click(),URL.revokeObjectURL(o)},l0=()=>{const[r,e]=J.useState({isOpen:!1,type:"info",title:"",message:"",onConfirm:null}),t=J.useCallback(()=>{e(l=>({...l,isOpen:!1}))},[]),i=J.useCallback((l,h,g)=>{e({isOpen:!0,type:"confirm",title:l,message:h,onConfirm:g})},[]),o=J.useCallback(l=>{e({isOpen:!0,type:"info",title:"",message:l,onConfirm:null})},[]);return{dialog:r,closeDialog:t,showConfirm:i,showAlert:o}},u0=()=>{};var Lg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},c0=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],g=r[t++],y=((o&7)<<18|(l&63)<<12|(h&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},w_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,g=h?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,w=l>>2,E=(l&3)<<4|g>>4;let S=(g&15)<<2|v>>6,O=v&63;y||(O=64,h||(S=64)),i.push(t[w],t[E],t[S],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(v_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):c0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],g=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||g==null||v==null||E==null)throw new h0;const S=l<<2|g>>4;if(i.push(S),v!==64){const O=g<<4&240|v>>2;if(i.push(O),E!==64){const q=v<<6&192|E;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class h0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d0=function(r){const e=v_(r);return w_.encodeByteArray(e,!0)},uc=function(r){return d0(r).replace(/\./g,"")},x_=function(r){try{return w_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=()=>f0().__FIREBASE_DEFAULTS__,m0=()=>{if(typeof process>"u"||typeof Lg>"u")return;const r=Lg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},g0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&x_(r[1]);return e&&JSON.parse(e)},bc=()=>{try{return u0()||p0()||m0()||g0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},E_=r=>{var e,t;return(t=(e=bc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},y0=r=>{const e=E_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},T_=()=>{var r;return(r=bc())==null?void 0:r.config},I_=r=>{var e;return(e=bc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function S_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[uc(JSON.stringify(t)),uc(JSON.stringify(h)),""].join(".")}const tl={};function w0(){const r={prod:[],emulator:[]};for(const e of Object.keys(tl))tl[e]?r.emulator.push(e):r.prod.push(e);return r}function x0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Mg=!1;function A_(r,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||tl[r]===e||tl[r]||Mg)return;tl[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=w0().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Mg=!0,h()},S}function w(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=x0(i),O=t("text"),q=document.getElementById(O)||document.createElement("span"),$=t("learnmore"),U=document.getElementById($)||document.createElement("a"),K=t("preprendIcon"),ne=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;g(ee),w(U,$);const H=v();y(ne,K),ee.append(ne,q,U,H),document.body.appendChild(ee)}l?(q.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function T0(){var e;const r=(e=bc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function A0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C0(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function b0(){return!T0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N0(){try{return typeof indexedDB=="object"}catch{return!1}}function k0(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="FirebaseError";class us extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=R0,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?P0(l,i):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new us(o,g,i)}}function P0(r,e){return r.replace(D0,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const D0=/\{\$([^}]+)}/g;function j0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Mi(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Ug(l)&&Ug(h)){if(!Mi(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ug(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function V0(r,e){const t=new F0(r,e);return t.subscribe.bind(t)}class F0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");O0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Sd),o.error===void 0&&(o.error=Sd),o.complete===void 0&&(o.complete=Sd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O0(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r){return r&&r._delegate?r._delegate:r}class Ui{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new _0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U0(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(l);i===g&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:M0(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M0(r){return r===Pi?void 0:r}function U0(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new L0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(De||(De={}));const B0={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},$0=De.INFO,q0={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},H0=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=q0[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=$0,this._logHandler=H0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const W0=(r,e)=>e.some(t=>r instanceof t);let zg,Bg;function K0(){return zg||(zg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G0(){return Bg||(Bg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C_=new WeakMap,Ud=new WeakMap,b_=new WeakMap,Ad=new WeakMap,xf=new WeakMap;function Q0(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ws(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&C_.set(t,r)}).catch(()=>{}),xf.set(e,r),e}function X0(r){if(Ud.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Ud.set(r,e)}let zd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ud.get(r);if(e==="objectStoreNames")return r.objectStoreNames||b_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Y0(r){zd=r(zd)}function J0(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Cd(this),e,...t);return b_.set(i,e.sort?e.sort():[e]),Ws(i)}:G0().includes(r)?function(...e){return r.apply(Cd(this),e),Ws(C_.get(this))}:function(...e){return Ws(r.apply(Cd(this),e))}}function Z0(r){return typeof r=="function"?J0(r):(r instanceof IDBTransaction&&X0(r),W0(r,K0())?new Proxy(r,zd):r)}function Ws(r){if(r instanceof IDBRequest)return Q0(r);if(Ad.has(r))return Ad.get(r);const e=Z0(r);return e!==r&&(Ad.set(r,e),xf.set(e,r)),e}const Cd=r=>xf.get(r);function eE(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),g=Ws(h);return i&&h.addEventListener("upgradeneeded",y=>{i(Ws(h.result),y.oldVersion,y.newVersion,Ws(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),g.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const tE=["get","getKey","getAll","getAllKeys","count"],nE=["put","add","delete","clear"],bd=new Map;function $g(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(bd.get(e))return bd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=nE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||tE.includes(t)))return;const l=async function(h,...g){const y=this.transaction(h,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(g.shift())),(await Promise.all([v[t](...g),o&&y.done]))[0]};return bd.set(e,l),l}Y0(r=>({...r,get:(e,t,i)=>$g(e,t)||r.get(e,t,i),has:(e,t)=>!!$g(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function sE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bd="@firebase/app",qg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new wf("@firebase/app"),iE="@firebase/app-compat",oE="@firebase/analytics-compat",aE="@firebase/analytics",lE="@firebase/app-check-compat",uE="@firebase/app-check",cE="@firebase/auth",hE="@firebase/auth-compat",dE="@firebase/database",fE="@firebase/data-connect",pE="@firebase/database-compat",mE="@firebase/functions",gE="@firebase/functions-compat",yE="@firebase/installations",_E="@firebase/installations-compat",vE="@firebase/messaging",wE="@firebase/messaging-compat",xE="@firebase/performance",EE="@firebase/performance-compat",TE="@firebase/remote-config",IE="@firebase/remote-config-compat",SE="@firebase/storage",AE="@firebase/storage-compat",CE="@firebase/firestore",bE="@firebase/ai",NE="@firebase/firestore-compat",kE="firebase",RE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="[DEFAULT]",PE={[Bd]:"fire-core",[iE]:"fire-core-compat",[aE]:"fire-analytics",[oE]:"fire-analytics-compat",[uE]:"fire-app-check",[lE]:"fire-app-check-compat",[cE]:"fire-auth",[hE]:"fire-auth-compat",[dE]:"fire-rtdb",[fE]:"fire-data-connect",[pE]:"fire-rtdb-compat",[mE]:"fire-fn",[gE]:"fire-fn-compat",[yE]:"fire-iid",[_E]:"fire-iid-compat",[vE]:"fire-fcm",[wE]:"fire-fcm-compat",[xE]:"fire-perf",[EE]:"fire-perf-compat",[TE]:"fire-rc",[IE]:"fire-rc-compat",[SE]:"fire-gcs",[AE]:"fire-gcs-compat",[CE]:"fire-fst",[NE]:"fire-fst-compat",[bE]:"fire-vertex","fire-js":"fire-js",[kE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,DE=new Map,qd=new Map;function Hg(r,e){try{r.container.addComponent(e)}catch(t){is.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function qo(r){const e=r.name;if(qd.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;qd.set(e,r);for(const t of cc.values())Hg(t,r);for(const t of DE.values())Hg(t,r);return!0}function Ef(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Yn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new wl("app","Firebase",jE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=RE;function N_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:$d,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ks.create("bad-app-name",{appName:String(o)});if(t||(t=T_()),!t)throw Ks.create("no-options");const l=cc.get(o);if(l){if(Mi(t,l.options)&&Mi(i,l.config))return l;throw Ks.create("duplicate-app",{appName:o})}const h=new z0(o);for(const y of qd.values())h.addComponent(y);const g=new VE(t,i,h);return cc.set(o,g),g}function k_(r=$d){const e=cc.get(r);if(!e&&r===$d&&T_())return N_();if(!e)throw Ks.create("no-app",{appName:r});return e}function Gs(r,e,t){let i=PE[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(h.join(" "));return}qo(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="firebase-heartbeat-database",OE=1,ul="firebase-heartbeat-store";let Nd=null;function R_(){return Nd||(Nd=eE(FE,OE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ul)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ks.create("idb-open",{originalErrorMessage:r.message})})),Nd}async function LE(r){try{const t=(await R_()).transaction(ul),i=await t.objectStore(ul).get(P_(r));return await t.done,i}catch(e){if(e instanceof us)is.warn(e.message);else{const t=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});is.warn(t.message)}}}async function Wg(r,e){try{const i=(await R_()).transaction(ul,"readwrite");await i.objectStore(ul).put(e,P_(r)),await i.done}catch(t){if(t instanceof us)is.warn(t.message);else{const i=Ks.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});is.warn(i.message)}}}function P_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=1024,UE=30;class zE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $E(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Kg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>UE){const h=qE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){is.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kg(),{heartbeatsToSend:i,unsentEntries:o}=BE(this._heartbeatsCache.heartbeats),l=uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return is.warn(t),""}}}function Kg(){return new Date().toISOString().substring(0,10)}function BE(r,e=ME){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Gg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Gg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class $E{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N0()?k0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await LE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Gg(r){return uc(JSON.stringify({version:2,heartbeats:r})).length}function qE(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(r){qo(new Ui("platform-logger",e=>new rE(e),"PRIVATE")),qo(new Ui("heartbeat",e=>new zE(e),"PRIVATE")),Gs(Bd,qg,r),Gs(Bd,qg,"esm2020"),Gs("fire-js","")}HE("");var WE="firebase",KE="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs(WE,KE,"app");var Qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,D_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function N(){}N.prototype=T.prototype,C.F=T.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(P,R,V){for(var b=Array(arguments.length-2),He=2;He<arguments.length;He++)b[He-2]=arguments[He];return T.prototype[R].apply(P,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,N){N||(N=0);const P=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)P[R]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(R=0;R<16;++R)P[R]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=C.g[0],N=C.g[1],R=C.g[2];let V=C.g[3],b;b=T+(V^N&(R^V))+P[0]+3614090360&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[1]+3905402710&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[2]+606105819&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[3]+3250441966&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(V^N&(R^V))+P[4]+4118548399&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[5]+1200080426&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[6]+2821735955&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[7]+4249261313&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(V^N&(R^V))+P[8]+1770035416&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[9]+2336552879&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[10]+4294925233&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[11]+2304563134&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(V^N&(R^V))+P[12]+1804603682&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[13]+4254626195&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[14]+2792965006&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[15]+1236535329&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(R^V&(N^R))+P[1]+4129170786&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[6]+3225465664&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[11]+643717713&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[0]+3921069994&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^V&(N^R))+P[5]+3593408605&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[10]+38016083&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[15]+3634488961&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[4]+3889429448&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^V&(N^R))+P[9]+568446438&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[14]+3275163606&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[3]+4107603335&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[8]+1163531501&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^V&(N^R))+P[13]+2850285829&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[2]+4243563512&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[7]+1735328473&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[12]+2368359562&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(N^R^V)+P[5]+4294588738&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[8]+2272392833&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[11]+1839030562&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[14]+4259657740&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^V)+P[1]+2763975236&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[4]+1272893353&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[7]+4139469664&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[10]+3200236656&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^V)+P[13]+681279174&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[0]+3936430074&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[3]+3572445317&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[6]+76029189&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^V)+P[9]+3654602809&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[12]+3873151461&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[15]+530742520&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[2]+3299628645&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(R^(N|~V))+P[0]+4096336452&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[7]+1126891415&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[14]+2878612391&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[5]+4237533241&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~V))+P[12]+1700485571&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[3]+2399980690&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[10]+4293915773&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[1]+2240044497&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~V))+P[8]+1873313359&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[15]+4264355552&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[6]+2734768916&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[13]+1309151649&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~V))+P[4]+4149444226&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[11]+3174756917&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[2]+718787259&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.v=function(C,T){T===void 0&&(T=C.length);const N=T-this.blockSize,P=this.C;let R=this.h,V=0;for(;V<T;){if(R==0)for(;V<=N;)o(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<T;)if(P[R++]=C.charCodeAt(V++),R==this.blockSize){o(this,P),R=0;break}}else for(;V<T;)if(P[R++]=C[V++],R==this.blockSize){o(this,P),R=0;break}}this.h=R,this.o+=T},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)C[T++]=this.g[N]>>>P&255;return C};function l(C,T){var N=g;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=T(C)}function h(C,T){this.h=T;const N=[];let P=!0;for(let R=C.length-1;R>=0;R--){const V=C[R]|0;P&&V==T||(N[R]=V,P=!1)}this.g=N}var g={};function y(C){return-128<=C&&C<128?l(C,function(T){return new h([T|0],T<0?-1:0)}):new h([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return U(v(-C));const T=[];let N=1;for(let P=0;C>=N;P++)T[P]=C/N|0,N*=4294967296;return new h(T,0)}function w(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return U(w(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=v(Math.pow(T,8));let P=E;for(let V=0;V<C.length;V+=8){var R=Math.min(8,C.length-V);const b=parseInt(C.substring(V,V+R),T);R<8?(R=v(Math.pow(T,R)),P=P.j(R).add(v(b))):(P=P.j(N),P=P.add(v(b)))}return P}var E=y(0),S=y(1),O=y(16777216);r=h.prototype,r.m=function(){if($(this))return-U(this).m();let C=0,T=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);C+=(P>=0?P:4294967296+P)*T,T*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(q(this))return"0";if($(this))return"-"+U(this).toString(C);const T=v(Math.pow(C,6));var N=this;let P="";for(;;){const R=H(N,T).g;N=K(N,R.j(T));let V=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=R,q(N))return V+P;for(;V.length<6;)V="0"+V;P=V+P}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function q(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function $(C){return C.h==-1}r.l=function(C){return C=K(this,C),$(C)?-1:q(C)?0:1};function U(C){const T=C.g.length,N=[];for(let P=0;P<T;P++)N[P]=~C.g[P];return new h(N,~C.h).add(S)}r.abs=function(){return $(this)?U(this):this},r.add=function(C){const T=Math.max(this.g.length,C.g.length),N=[];let P=0;for(let R=0;R<=T;R++){let V=P+(this.i(R)&65535)+(C.i(R)&65535),b=(V>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);P=b>>>16,V&=65535,b&=65535,N[R]=b<<16|V}return new h(N,N[N.length-1]&-2147483648?-1:0)};function K(C,T){return C.add(U(T))}r.j=function(C){if(q(this)||q(C))return E;if($(this))return $(C)?U(this).j(U(C)):U(U(this).j(C));if($(C))return U(this.j(U(C)));if(this.l(O)<0&&C.l(O)<0)return v(this.m()*C.m());const T=this.g.length+C.g.length,N=[];for(var P=0;P<2*T;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let R=0;R<C.g.length;R++){const V=this.i(P)>>>16,b=this.i(P)&65535,He=C.i(R)>>>16,Ze=C.i(R)&65535;N[2*P+2*R]+=b*Ze,ne(N,2*P+2*R),N[2*P+2*R+1]+=V*Ze,ne(N,2*P+2*R+1),N[2*P+2*R+1]+=b*He,ne(N,2*P+2*R+1),N[2*P+2*R+2]+=V*He,ne(N,2*P+2*R+2)}for(C=0;C<T;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=T;C<2*T;C++)N[C]=0;return new h(N,0)};function ne(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function ee(C,T){this.g=C,this.h=T}function H(C,T){if(q(T))throw Error("division by zero");if(q(C))return new ee(E,E);if($(C))return T=H(U(C),T),new ee(U(T.g),U(T.h));if($(T))return T=H(C,U(T)),new ee(U(T.g),T.h);if(C.g.length>30){if($(C)||$(T))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=T;P.l(C)<=0;)N=oe(N),P=oe(P);var R=se(N,1),V=se(P,1);for(P=se(P,2),N=se(N,2);!q(P);){var b=V.add(P);b.l(C)<=0&&(R=R.add(N),V=b),P=se(P,1),N=se(N,1)}return T=K(C,R.j(T)),new ee(R,T)}for(R=E;C.l(T)>=0;){for(N=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),V=v(N),b=V.j(T);$(b)||b.l(C)>0;)N-=P,V=v(N),b=V.j(T);q(V)&&(V=S),R=R.add(V),C=K(C,b)}return new ee(R,C)}r.B=function(C){return H(this,C).h},r.and=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)&C.i(P);return new h(N,this.h&C.h)},r.or=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)|C.i(P);return new h(N,this.h|C.h)},r.xor=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)^C.i(P);return new h(N,this.h^C.h)};function oe(C){const T=C.g.length+1,N=[];for(let P=0;P<T;P++)N[P]=C.i(P)<<1|C.i(P-1)>>>31;return new h(N,C.h)}function se(C,T){const N=T>>5;T%=32;const P=C.g.length-N,R=[];for(let V=0;V<P;V++)R[V]=T>0?C.i(V+N)>>>T|C.i(V+N+1)<<32-T:C.i(V+N);return new h(R,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,D_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Qs=h}).apply(typeof Qg<"u"?Qg:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j_,Xa,V_,Yu,Hd,F_,O_,L_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in _))break e;_=_[L]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&_.push([I,m[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,_){return u.call.apply(u.bind,arguments)}function v(u,m,_){return v=y,v.apply(null,arguments)}function w(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(I,L,B){for(var re=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)re[Ce-2]=arguments[Ce];return m.prototype[L].apply(I,re)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const m=u.length;if(m>0){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function q(u,m){for(let I=1;I<arguments.length;I++){const L=arguments[I];var _=typeof L;if(_=_!="object"?_:L?Array.isArray(L)?"array":_:"null",_=="array"||_=="object"&&typeof L.length=="number"){_=u.length||0;const B=L.length||0;u.length=_+B;for(let re=0;re<B;re++)u[_+re]=L[re]}else u.push(L)}}class ${constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function U(u){h.setTimeout(()=>{throw u},0)}function K(){var u=C;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ne{constructor(){this.h=this.g=null}add(m,_){const I=ee.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var ee=new $(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,se=!1,C=new ne,T=()=>{const u=Promise.resolve(void 0);oe=()=>{u.then(N)}};function N(){for(var u;u=K();){try{u.h.call(u.g)}catch(_){U(_)}var m=ee;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}se=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function b(u){return/^[\s\xa0]*$/.test(u)}function He(u,m){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(He,R),He.prototype.init=function(u,m){const _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),Nt=0;function Xe(u,m,_,I,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=L,this.key=++Nt,this.da=this.fa=!1}function ie(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function ue(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function j(u){const m={};for(const _ in u)m[_]=u[_];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,m){let _,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(_ in I)u[_]=I[_];for(let B=0;B<Q.length;B++)_=Q[B],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function Ie(u){this.src=u,this.g={},this.h=0}Ie.prototype.add=function(u,m,_,I,L){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const re=Ne(u,m,I,L);return re>-1?(m=u[re],_||(m.fa=!1)):(m=new Xe(m,this.src,B,!!I,L),m.fa=_,u.push(m)),m};function ke(u,m){const _=m.type;if(_ in u.g){var I=u.g[_],L=Array.prototype.indexOf.call(I,m,void 0),B;(B=L>=0)&&Array.prototype.splice.call(I,L,1),B&&(ie(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ne(u,m,_,I){for(let L=0;L<u.length;++L){const B=u[L];if(!B.da&&B.listener==m&&B.capture==!!_&&B.ha==I)return L}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Pe={};function Be(u,m,_,I,L){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Be(u,m[B],_,I,L);return null}return _=fs(_),u&&u[Ze]?u.J(m,_,g(I)?!!I.capture:!1,L):jt(u,m,_,!1,I,L)}function jt(u,m,_,I,L,B){if(!m)throw Error("Invalid event type");const re=g(L)?!!L.capture:!!L;let Ce=ds(u);if(Ce||(u[Me]=Ce=new Ie(u)),_=Ce.add(m,_,I,re,B),_.proxy)return _;if(I=cs(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)V||(L=re),L===void 0&&(L=!1),u.addEventListener(m.toString(),I,L);else if(u.attachEvent)u.attachEvent(Dr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function cs(){function u(_){return m.call(u.src,u.listener,_)}const m=Ki;return u}function hs(u,m,_,I,L){if(Array.isArray(m))for(var B=0;B<m.length;B++)hs(u,m[B],_,I,L);else I=g(I)?!!I.capture:!!I,_=fs(_),u&&u[Ze]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],_=Ne(m,_,I,L),_>-1&&(ie(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=ds(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ne(m,_,I,L)),(_=u>-1?m[u]:null)&&rr(_))}function rr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ze])ke(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(Dr(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=ds(m))?(ke(_,u),_.h==0&&(_.src=null,m[Me]=null)):ie(u)}}}function Dr(u){return u in Pe?Pe[u]:Pe[u]="on"+u}function Ki(u,m){if(u.da)u=!0;else{m=new He(m,this);const _=u.listener,I=u.ha||u.src;u.fa&&rr(u),u=_.call(I,m)}return u}function ds(u){return u=u[Me],u instanceof Ie?u:null}var jr="__closure_events_fn_"+(Math.random()*1e9>>>0);function fs(u){return typeof u=="function"?u:(u[jr]||(u[jr]=function(m){return u.handleEvent(m)}),u[jr])}function et(){P.call(this),this.i=new Ie(this),this.M=this,this.G=null}E(et,P),et.prototype[Ze]=!0,et.prototype.removeEventListener=function(u,m,_,I){hs(this,u,m,_,I)};function at(u,m){var _,I=u.G;if(I)for(_=[];I;I=I.G)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new R(m,u);else if(m instanceof R)m.target=m.target||u;else{var L=m;m=new R(I,u),Ae(m,L)}L=!0;let B,re;if(_)for(re=_.length-1;re>=0;re--)B=m.g=_[re],L=mn(B,I,!0,m)&&L;if(B=m.g=u,L=mn(B,I,!0,m)&&L,L=mn(B,I,!1,m)&&L,_)for(re=0;re<_.length;re++)B=m.g=_[re],L=mn(B,I,!1,m)&&L}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let I=0;I<_.length;I++)ie(_[I]);delete u.g[m],u.h--}}this.G=null},et.prototype.J=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},et.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function mn(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let B=0;B<m.length;++B){const re=m[B];if(re&&!re.da&&re.capture==_){const Ce=re.listener,mt=re.ha||re.src;re.fa&&ke(u.i,re),L=Ce.call(mt,I)!==!1&&L}}return L&&!I.defaultPrevented}function ps(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Gi(u){u.g=ps(()=>{u.g=null,u.i&&(u.i=!1,Gi(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Qi extends P{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Gi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(u){P.call(this),this.h=u,this.g={}}E(sr,P);var ms=[];function On(u){me(u.g,function(m,_){this.g.hasOwnProperty(_)&&rr(m)},u),u.g={}}sr.prototype.N=function(){sr.Z.N.call(this),On(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=h.JSON.stringify,Xi=h.JSON.parse,Vr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ir(){}function Yi(){}var Mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gs(){R.call(this,"d")}E(gs,R);function oi(){R.call(this,"c")}E(oi,R);var gn={},ys=null;function Un(){return ys=ys||new et}gn.Ia="serverreachability";function _s(u){R.call(this,gn.Ia,u)}E(_s,R);function zn(u){const m=Un();at(m,new _s(m))}gn.STAT_EVENT="statevent";function Bn(u,m){R.call(this,gn.STAT_EVENT,u),this.stat=m}E(Bn,R);function it(u){const m=Un();at(m,new Bn(m,u))}gn.Ja="timingevent";function ye(u,m){R.call(this,gn.Ja,u),this.size=m}E(ye,R);function xe(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Ge(){this.g=!0}Ge.prototype.ua=function(){this.g=!1};function _t(u,m,_,I,L,B){u.info(function(){if(u.g)if(B){var re="",Ce=B.split("&");for(let Ke=0;Ke<Ce.length;Ke++){var mt=Ce[Ke].split("=");if(mt.length>1){const vt=mt[0];mt=mt[1];const Tn=vt.split("_");re=Tn.length>=2&&Tn[1]=="type"?re+(vt+"="+mt+"&"):re+(vt+"=redacted&")}}}else re=null;else re=B;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+m+`
`+_+`
`+re})}function Vt(u,m,_,I,L,B,re){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+m+`
`+_+`
`+B+" "+re})}function $t(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+yn(u,_)+(I?" "+I:"")})}function ai(u,m){u.info(function(){return"TIMEOUT: "+m})}Ge.prototype.info=function(){};function yn(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var _=B[u];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let re=1;re<I.length;re++)I[re]=""}}}}return Ln(B)}catch{return m}}var qt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fl;function Fr(){}E(Fr,ir),Fr.prototype.g=function(){return new XMLHttpRequest},Fl=new Fr;function or(u){return encodeURIComponent(String(u))}function Ji(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function bn(u,m,_,I){this.j=u,this.i=m,this.l=_,this.S=I||1,this.V=new sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Ll={},la={};function $n(u,m,_){u.M=1,u.A=Lr(Nn(m)),u.u=_,u.R=!0,ua(u,null)}function ua(u,m){u.F=Date.now(),li(u),u.B=Nn(u.A);var _=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),va(_.i,"t",I),u.C=0,_=u.j.L,u.h=new Ol,u.g=Gl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Qi(v(u.Y,u,u.g),u.P)),m=u.V,_=u.g,I=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(ms[0]=L.toString()),L=ms);for(let B=0;B<L.length;B++){const re=Be(_,L[B],I||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),zn(),_t(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&fr(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const Ce=fr(this.g),mt=this.g.ya(),Ke=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Wl(this.g)))){this.K||Ce!=4||mt==7||(mt==8||Ke<=0?zn(3):zn(2)),Zi(this);var m=this.g.ca();this.X=m;var _=Ml(this);if(this.o=m==200,Vt(this.i,this.v,this.B,this.l,this.S,Ce,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(I)){var B=I;break t}}B=null}if(u=B)$t(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,u);else{this.o=!1,this.m=3,it(12),Or(this),ui(this);break e}}if(this.R){u=!0;let vt;for(;!this.K&&this.C<_.length;)if(vt=zl(this,_),vt==la){Ce==4&&(this.m=4,it(14),u=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Ll){this.m=4,it(15),$t(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else $t(this.i,this.l,vt,null),tt(this,vt);if(Ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)$t(this.i,this.l,_,"[Invalid Chunked Response]"),Or(this),ui(this);else if(_.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),_i(re),re.P=!0,it(11))}}else $t(this.i,this.l,_,null),tt(this,_);Ce==4&&Or(this),this.o&&!this.K&&(Ce==4?uo(this.j,this):(this.o=!1,li(this)))}else xa(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),Or(this),ui(this)}}}catch{}finally{}};function Ml(u){if(!Ul(u))return u.g.la();const m=Wl(u.g);if(m==="")return"";let _="";const I=m.length,L=fr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Or(u),ui(u),"";u.h.i=new h.TextDecoder}for(let B=0;B<I;B++)u.h.h=!0,_+=u.h.i.decode(m[B],{stream:!(L&&B==I-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Ul(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function zl(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?la:(_=Number(m.substring(_,I)),isNaN(_)?Ll:(I+=1,I+_>m.length?la:(m=m.slice(I,I+_),u.C=I+_,m)))}bn.prototype.cancel=function(){this.K=!0,Or(this)};function li(u){u.T=Date.now()+u.H,ca(u,u.H)}function ca(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=xe(v(u.aa,u),m)}function Zi(u){u.D&&(h.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ai(this.i,this.B),this.M!=2&&(zn(),it(17)),Or(this),this.m=2,ui(this)):ca(this,this.T-u)};function ui(u){u.j.I==0||u.K||uo(u.j,u)}function Or(u){Zi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,On(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function tt(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||da(_.h,u))){if(!u.L&&da(_.h,u)&&_.I==3){try{var I=_.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)lo(_),xn(_);else break e;gr(_),it(18)}}else _.xa=L[1],0<_.xa-_.K&&L[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=xe(v(_.Va,_),6e3));ci(_.h)<=1&&_.ta&&(_.ta=void 0)}else En(_,11)}else if((u.L||_.g==u)&&lo(_),!b(m))for(L=_.Ba.g.parse(m),m=0;m<L.length;m++){let Ke=L[m];const vt=Ke[0];if(!(vt<=_.K))if(_.K=vt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const Tn=Ke[3];Tn!=null&&(_.ka=Tn,_.j.info("VER="+_.ka));const $r=Ke[4];$r!=null&&(_.za=$r,_.j.info("SVER="+_.za));const yr=Ke[5];yr!=null&&typeof yr=="number"&&yr>0&&(I=1.5*yr,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const _r=u.g;if(_r){const fo=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var B=I.h;B.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(to(B,B.h),B.h=null))}if(I.G){const Ia=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(I.wa=Ia,$e(I.J,I.G,Ia))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var re=u;if(I.na=Ta(I,I.L?I.ba:null,I.W),re.L){hi(I.h,re);var Ce=re,mt=I.O;mt&&(Ce.H=mt),Ce.D&&(Zi(Ce),li(Ce)),I.g=re}else Ht(I);_.i.length>0&&Br(_)}else Ke[0]!="stop"&&Ke[0]!="close"||En(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?En(_,7):oo(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}zn(4)}catch{}}var Xc=class{constructor(u,m){this.g=u,this.map=m}};function eo(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ha(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ci(u){return u.h?1:u.g?u.g.size:0}function da(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function to(u,m){u.g?u.g.add(m):u.h=m}function hi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}eo.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _n(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return O(u.i)}var Bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vn(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const I=u[_].indexOf("=");let L,B=null;I>=0?(L=u[_].substring(0,I),B=u[_].substring(I+1)):L=u[_],m(L,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function ar(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof ar?(this.l=u.l,di(this,u.j),this.o=u.o,this.g=u.g,lr(this,u.u),this.h=u.h,ws(this,wa(u.i)),this.m=u.m):u&&(m=String(u).match(Bl))?(this.l=!1,di(this,m[1]||"",!0),this.o=fi(m[2]||""),this.g=fi(m[3]||"",!0),lr(this,m[4]),this.h=fi(m[5]||"",!0),ws(this,m[6]||"",!0),this.m=fi(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}ar.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(pi(m,pa,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(pi(m,pa,!0),"@"),u.push(or(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(pi(_,_.charAt(0)=="/"?mi:ma,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",pi(_,ga)),u.join("")},ar.prototype.resolve=function(u){const m=Nn(this);let _=!!u.j;_?di(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var I=u.h;if(_)lr(m,u.u);else if(_=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=m.h.lastIndexOf("/");L!=-1&&(I=m.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const B=[];for(let re=0;re<L.length;){const Ce=L[re++];Ce=="."?I&&re==L.length&&B.push(""):Ce==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),I&&re==L.length&&B.push("")):(B.push(Ce),I=!0)}I=B.join("/")}else I=L}return _?m.h=I:_=u.i.toString()!=="",_?ws(m,wa(u.i)):_=!!u.m,_&&(m.m=u.m),m};function Nn(u){return new ar(u)}function di(u,m,_){u.j=_?fi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function lr(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ws(u,m,_){m instanceof Fe?(u.i=m,ro(u.i,u.l)):(_||(m=pi(m,Yc)),u.i=new Fe(m,u.l))}function $e(u,m,_){u.i.set(m,_)}function Lr(u){return $e(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function fi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function pi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,fa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var pa=/[#\/\?@]/g,ma=/[#\?:]/g,mi=/[#\?]/g,Yc=/[#\?@]/g,ga=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function ur(u){u.g||(u.g=new Map,u.h=0,u.i&&vn(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,m){ur(this),this.i=null,u=cr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ya(u,m){ur(u),m=cr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function no(u,m){return ur(u),m=cr(u,m),u.g.has(m)}r.forEach=function(u,m){ur(this),this.g.forEach(function(_,I){_.forEach(function(L){u.call(m,L,I,this)},this)},this)};function _a(u,m){ur(u);let _=[];if(typeof m=="string")no(u,m)&&(_=_.concat(u.g.get(cr(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return ur(this),this.i=null,u=cr(this,u),no(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=_a(this,u),u.length>0?String(u[0]):m):m};function va(u,m,_){ya(u,m),_.length>0&&(u.i=null,u.g.set(cr(u,m),O(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var _=m[I];const L=or(_);_=_a(this,_);for(let B=0;B<_.length;B++){let re=L;_[B]!==""&&(re+="="+or(_[B])),u.push(re)}}return this.i=u.join("&")};function wa(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function cr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ro(u,m){m&&!u.j&&(ur(u),u.i=null,u.g.forEach(function(_,I){const L=I.toLowerCase();I!=L&&(ya(this,I),va(this,L,_))},u)),u.j=m}function hr(u,m){const _=new Ge;if(h.Image){const I=new Image;I.onload=w(Ft,_,"TestLoadImage: loaded",!0,m,I),I.onerror=w(Ft,_,"TestLoadImage: error",!1,m,I),I.onabort=w(Ft,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=w(Ft,_,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function dr(u,m){const _=new Ge,I=new AbortController,L=setTimeout(()=>{I.abort(),Ft(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(B=>{clearTimeout(L),B.ok?Ft(_,"TestPingServer: ok",!0,m):Ft(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Ft(_,"TestPingServer: error",!1,m)})}function Ft(u,m,_,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(_)}catch{}}function gi(){this.g=new Vr}function Mr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Mr,ir),Mr.prototype.g=function(){return new wn(this.i,this.h)};function wn(u,m){et.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(wn,et),r=wn.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,qn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$l(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?xs(this):qn(this),this.readyState==3&&$l(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,xs(this))},r.Na=function(u){this.g&&(this.response=u,xs(this))},r.ga=function(){this.g&&xs(this)};function xs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,qn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ql(u){let m="";return me(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function so(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=ql(_),typeof u=="string"?_!=null&&or(_):$e(u,m,_))}function Qe(u){et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Qe,et);var Hl=/^https?$/i,Jc=["POST","PUT"];r=Qe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fl.g(),this.g.onreadystatechange=S(v(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){Es(this,B);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)_.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const B of I.keys())_.set(B,I.get(B));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),L=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Jc,m,void 0)>=0)||I||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,re]of _)this.g.setRequestHeader(B,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Es(this,B)}};function Es(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Ts(u),zr(u)}function Ts(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,at(this,"complete"),at(this,"abort"),zr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zr(this,!0)),Qe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ur(this):this.Xa())},r.Xa=function(){Ur(this)};function Ur(u){if(u.h&&typeof l<"u"){if(u.v&&fr(u)==4)setTimeout(u.Ca.bind(u),0);else if(at(u,"readystatechange"),fr(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=B===0){let re=String(u.D).match(Bl)[1]||null;!re&&h.self&&h.self.location&&(re=h.self.location.protocol.slice(0,-1)),I=!Hl.test(re?re.toLowerCase():"")}_=I}if(_)at(u,"complete"),at(u,"success");else{u.o=6;try{var L=fr(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Ts(u)}}finally{zr(u)}}}}function zr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||at(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function fr(u){return u.g?u.g.readyState:0}r.ca=function(){try{return fr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Xi(m)}};function Wl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(u){const m={};u=(u.g&&fr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(b(u[I]))continue;var _=Ji(u[I]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=m[L]||[];m[L]=B,B.push(_)}ue(m,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function io(u){this.za=0,this.i=[],this.j=new Ge,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pr("baseRetryDelayMs",5e3,u),this.Za=pr("retryDelaySeedMs",1e4,u),this.Ta=pr("forwardChannelMaxRetries",2,u),this.va=pr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new eo(u&&u.concurrentRequestLimit),this.Ba=new gi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=io.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,I){it(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Ta(this,null,this.W),Br(this)};function oo(u){if(ao(u),u.I==3){var m=u.V++,_=Nn(u.J);if($e(_,"SID",u.M),$e(_,"RID",m),$e(_,"TYPE","terminate"),mr(u,_),m=new bn(u,u.j,m),m.M=2,m.A=Lr(Nn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Gl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),li(m)}vi(u)}function xn(u){u.g&&(_i(u),u.g.cancel(),u.g=null)}function ao(u){xn(u),u.v&&(h.clearTimeout(u.v),u.v=null),lo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Br(u){if(!ha(u.h)&&!u.m){u.m=!0;var m=u.Ea;oe||T(),se||(oe(),se=!0),C.add(m,u),u.D=0}}function Kl(u,m){return ci(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=xe(v(u.Ea,u,m),co(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new bn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=j(B),Ae(B,this.U)):B=this.U),this.u!==null||this.R||(L.J=B,B=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Ea(this,L,m),_=Nn(this.J),$e(_,"RID",u),$e(_,"CVER",22),this.G&&$e(_,"X-HTTP-Session-Id",this.G),mr(this,_),B&&(this.R?m="headers="+or(ql(B))+"&"+m:this.u&&so(_,this.u,B)),to(this.h,L),this.Ra&&$e(_,"TYPE","init"),this.S?($e(_,"$req",m),$e(_,"SID","null"),L.U=!0,$n(L,_,null)):$n(L,_,m),this.I=2}}else this.I==3&&(u?yi(this,u):this.i.length==0||ha(this.h)||yi(this))};function yi(u,m){var _;m?_=m.l:_=u.V++;const I=Nn(u.J);$e(I,"SID",u.M),$e(I,"RID",_),$e(I,"AID",u.K),mr(u,I),u.u&&u.o&&so(I,u.u,u.o),_=new bn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ea(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),to(u.h,_),$n(_,I,m)}function mr(u,m){u.H&&me(u.H,function(_,I){$e(m,I,_)}),u.l&&me({},function(_,I){$e(m,I,_)})}function Ea(u,m,_){_=Math.min(u.i.length,_);const I=u.l?v(u.l.Ka,u.l,u):null;e:{var L=u.i;let Ce=-1;for(;;){const mt=["count="+_];Ce==-1?_>0?(Ce=L[0].g,mt.push("ofs="+Ce)):Ce=0:mt.push("ofs="+Ce);let Ke=!0;for(let vt=0;vt<_;vt++){var B=L[vt].g;const Tn=L[vt].map;if(B-=Ce,B<0)Ce=Math.max(0,L[vt].g-100),Ke=!1;else try{B="req"+B+"_"||"";try{var re=Tn instanceof Map?Tn:Object.entries(Tn);for(const[$r,yr]of re){let _r=yr;g(yr)&&(_r=Ln(yr)),mt.push(B+$r+"="+encodeURIComponent(_r))}}catch($r){throw mt.push(B+"type="+encodeURIComponent("_badmap")),$r}}catch{I&&I(Tn)}}if(Ke){re=mt.join("&");break e}}re=void 0}return u=u.i.splice(0,_),m.G=u,re}function Ht(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;oe||T(),se||(oe(),se=!0),C.add(m,u),u.A=0}}function gr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=xe(v(u.Da,u),co(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Is(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=xe(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),xn(this),Is(this))};function _i(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Is(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Nn(u.na);$e(m,"RID","rpc"),$e(m,"SID",u.M),$e(m,"AID",u.K),$e(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&$e(m,"TO",u.ia),$e(m,"TYPE","xmlhttp"),mr(u,m),u.u&&u.o&&so(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Lr(Nn(m)),_.u=null,_.R=!0,ua(_,u)}r.Va=function(){this.C!=null&&(this.C=null,xn(this),gr(this),it(19))};function lo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function uo(u,m){var _=null;if(u.g==m){lo(u),_i(u),u.g=null;var I=2}else if(da(u.h,m))_=m.G,hi(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;I=Un(),at(I,new ye(I,_)),Br(u)}else Ht(u);else if(L=m.m,L==3||L==0&&m.X>0||!(I==1&&Kl(u,m)||I==2&&gr(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),L){case 1:En(u,5);break;case 4:En(u,10);break;case 3:En(u,6);break;default:En(u,2)}}}function co(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function En(u,m){if(u.j.info("Error code "+m),m==2){var _=v(u.bb,u),I=u.Ua;const L=!I;I=new ar(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||di(I,"https"),Lr(I),L?hr(I.toString(),_):dr(I.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(m),vi(u),ao(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function vi(u){if(u.I=0,u.ja=[],u.l){const m=_n(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ja,m),q(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Ta(u,m,_){var I=_ instanceof ar?Nn(_):new ar(_);if(I.g!="")m&&(I.g=m+"."+I.g),lr(I,I.u);else{var L=h.location;I=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const B=new ar(null);I&&di(B,I),m&&(B.g=m),L&&lr(B,L),_&&(B.h=_),I=B}return _=u.G,m=u.wa,_&&m&&$e(I,_,m),$e(I,"VER",u.ka),mr(u,I),I}function Gl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Qe(new Mr({ab:_})):new Qe(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ql(){}r=Ql.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ho(){}ho.prototype.g=function(u,m){return new Ot(u,m)};function Ot(u,m){et.call(this),this.g=new io(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!b(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!b(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ss(this)}E(Ot,et),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){oo(this.g)},Ot.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Ln(u),u=_);m.i.push(new Xc(m.Ya++,u)),m.I==3&&Br(m)},Ot.prototype.N=function(){this.g.l=null,delete this.j,oo(this.g),delete this.g,Ot.Z.N.call(this)};function Xl(u){gs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Xl,gs);function Yl(){oi.call(this),this.status=1}E(Yl,oi);function Ss(u){this.g=u}E(Ss,Ql),Ss.prototype.ra=function(){at(this.g,"a")},Ss.prototype.qa=function(u){at(this.g,new Xl(u))},Ss.prototype.pa=function(u){at(this.g,new Yl)},Ss.prototype.oa=function(){at(this.g,"b")},ho.prototype.createWebChannel=ho.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,L_=function(){return new ho},O_=function(){return Un()},F_=gn,Hd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,Yu=qt,vs.COMPLETE="complete",V_=vs,Yi.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",et.prototype.listen=et.prototype.J,Xa=Yi,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,j_=Qe}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Xg="@firebase/firestore",Yg="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new wf("@firebase/firestore");function Vo(){return zi.logLevel}function ce(r,...e){if(zi.logLevel<=De.DEBUG){const t=e.map(Tf);zi.debug(`Firestore (${ta}): ${r}`,...t)}}function os(r,...e){if(zi.logLevel<=De.ERROR){const t=e.map(Tf);zi.error(`Firestore (${ta}): ${r}`,...t)}}function Ho(r,...e){if(zi.logLevel<=De.WARN){const t=e.map(Tf);zi.warn(`Firestore (${ta}): ${r}`,...t)}}function Tf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,M_(r,i,t)}function M_(r,e,t){let i=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw os(i),new Error(i)}function We(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||M_(e,o,i)}function be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yt.UNAUTHENTICATED)))}shutdown(){}}class QE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XE{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ss,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ss)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new U_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class YE{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JE{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new YE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Jg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Jg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=e1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function je(r,e){return r<e?-1:r>e?1:0}function Wd(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return kd(o)===kd(l)?je(o,l):kd(o)?1:-1}return je(r.length,e.length)}const t1=55296,n1=57343;function kd(r){const e=r.charCodeAt(0);return e>=t1&&e<=n1}function Wo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="__name__";class Tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const i=Tr.isNumericId(e),o=Tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):Wd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}}class Je extends Tr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const r1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Tr{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return r1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zg}static keyField(){return new zt([Zg])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ae(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ae(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(i+=g,o++):(l(),o++)}if(l(),h)throw new ae(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Je.fromString(e))}static fromName(e){return new ge(Je.fromString(e).popFirst(5))}static empty(){return new ge(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(r,e,t){if(!t)throw new ae(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function s1(r,e,t,i){if(e===!0&&i===!0)throw new ae(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ey(r){if(!ge.isDocumentKey(r))throw new ae(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ty(r){if(ge.isDocumentKey(r))throw new ae(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function B_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Nc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function rn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nc(r);throw new ae(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function El(r,e){if(!B_(r))throw new ae(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=-62135596800,ry=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ry);return new st(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ny)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ry}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ny;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:It("string",st._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new st(0,0))}static max(){return new Se(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;function i1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new st(t+1,0):new st(t,i));return new Ys(o,ge.empty(),e)}function o1(r){return new Ys(r.readTime,r.key,cl)}class Ys{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ys(Se.min(),ge.empty(),cl)}static max(){return new Ys(Se.max(),ge.empty(),cl)}}function a1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(r.documentKey,e.documentKey),t!==0?t:je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==l1)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let o=0,l=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++l,h&&l===o&&t()}),(y=>i(y)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((o=>o?G.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,o)=>{const l=e.length,h=new Array(l);let g=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((w=>{h[v]=w,++g,g===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new G(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function c1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ra(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=-1;function Rc(r){return r==null}function hc(r){return r===0&&1/r==-1/0}function h1(r){return typeof r=="number"&&Number.isInteger(r)&&!hc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="";function d1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=sy(e)),e=f1(r.get(t),e);return sy(e)}function f1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case $_:t+="";break;default:t+=l}}return t}function sy(r){return r+$_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ri(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function q_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ut.RED,this.left=o??Ut.EMPTY,this.right=l??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ut(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oy(this.data.getIterator())}getIteratorFrom(e){return new oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new bt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H_("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const p1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=p1.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yt(r.seconds),nanos:yt(r.nanos)}}function yt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Zs(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="server_timestamp",K_="__type__",G_="__previous_value__",Q_="__local_write_time__";function Af(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[K_])==null?void 0:i.stringValue)===W_}function Pc(r){const e=r.mapValue.fields[G_];return Af(e)?Pc(e):e}function hl(r){const e=Js(r.mapValue.fields[Q_].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t,i,o,l,h,g,y,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=w}}const dc="(default)";class dl{constructor(e,t){this.projectId=e,this.database=t||dc}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database===dc}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="__type__",g1="__max__",Ku={mapValue:{}},Y_="__vector__",fc="value";function ei(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Af(r)?4:_1(r)?9007199254740991:y1(r)?10:11:we(28295,{value:r})}function kr(r,e){if(r===e)return!0;const t=ei(r);if(t!==ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hl(r).isEqual(hl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Js(o.timestampValue),g=Js(l.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Zs(o.bytesValue).isEqual(Zs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return yt(o.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return yt(o.integerValue)===yt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=yt(o.doubleValue),g=yt(l.doubleValue);return h===g?hc(h)===hc(g):isNaN(h)&&isNaN(g)}return!1})(r,e);case 9:return Wo(r.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},g=l.mapValue.fields||{};if(iy(h)!==iy(g))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(g[y]===void 0||!kr(h[y],g[y])))return!1;return!0})(r,e);default:return we(52216,{left:r})}}function fl(r,e){return(r.values||[]).find((t=>kr(t,e)))!==void 0}function Ko(r,e){if(r===e)return 0;const t=ei(r),i=ei(e);if(t!==i)return je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const g=yt(l.integerValue||l.doubleValue),y=yt(h.integerValue||h.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(r,e);case 3:return ay(r.timestampValue,e.timestampValue);case 4:return ay(hl(r),hl(e));case 5:return Wd(r.stringValue,e.stringValue);case 6:return(function(l,h){const g=Zs(l),y=Zs(h);return g.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const g=l.split("/"),y=h.split("/");for(let v=0;v<g.length&&v<y.length;v++){const w=je(g[v],y[v]);if(w!==0)return w}return je(g.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const g=je(yt(l.latitude),yt(h.latitude));return g!==0?g:je(yt(l.longitude),yt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ly(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var S,O,q,$;const g=l.fields||{},y=h.fields||{},v=(S=g[fc])==null?void 0:S.arrayValue,w=(O=y[fc])==null?void 0:O.arrayValue,E=je(((q=v==null?void 0:v.values)==null?void 0:q.length)||0,(($=w==null?void 0:w.values)==null?void 0:$.length)||0);return E!==0?E:ly(v,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Ku.mapValue&&h===Ku.mapValue)return 0;if(l===Ku.mapValue)return 1;if(h===Ku.mapValue)return-1;const g=l.fields||{},y=Object.keys(g),v=h.fields||{},w=Object.keys(v);y.sort(),w.sort();for(let E=0;E<y.length&&E<w.length;++E){const S=Wd(y[E],w[E]);if(S!==0)return S;const O=Ko(g[y[E]],v[w[E]]);if(O!==0)return O}return je(y.length,w.length)})(r.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function ay(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const t=Js(r),i=Js(e),o=je(t.seconds,i.seconds);return o!==0?o:je(t.nanos,i.nanos)}function ly(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ko(t[o],i[o]);if(l)return l}return je(t.length,i.length)}function Go(r){return Kd(r)}function Kd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Js(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Zs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ge.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Kd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Kd(t.fields[h])}`;return o+"}"})(r.mapValue):we(61005,{value:r})}function Ju(r){switch(ei(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pc(r);return e?16+Ju(e):16;case 5:return 2*r.stringValue.length;case 6:return Zs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Ju(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ri(i.fields,((l,h)=>{o+=l.length+Ju(h)})),o})(r.mapValue);default:throw we(13486,{value:r})}}function uy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Gd(r){return!!r&&"integerValue"in r}function Cf(r){return!!r&&"arrayValue"in r}function cy(r){return!!r&&"nullValue"in r}function hy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Zu(r){return!!r&&"mapValue"in r}function y1(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[X_])==null?void 0:i.stringValue)===Y_}function nl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ri(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=nl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(r.arrayValue.values[t]);return e}return{...r}}function _1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===g1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Zu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=zt.emptyPath(),i={},o=[];e.forEach(((h,g)=>{if(!t.isImmediateParentOf(g)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=g.popLast()}h?i[g.lastSegment()]=nl(h):o.push(g.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Zu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Zu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ri(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new fn(nl(this.value))}}function J_(r){const e=[];return ri(r.fields,((t,i)=>{const o=new zt([t]);if(Zu(i)){const l=J_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,i,o,l,h,g){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Zt(e,0,Se.min(),Se.min(),Se.min(),fn.empty(),0)}static newFoundDocument(e,t,i,o){return new Zt(e,1,t,Se.min(),i,o,0)}static newNoDocument(e,t){return new Zt(e,2,t,Se.min(),Se.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,Se.min(),Se.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.position=e,this.inclusive=t}}function dy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ge.comparator(ge.fromName(h.referenceValue),t.key):i=Ko(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function fy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function v1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{}class Tt extends Z_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new x1(e,t,i):t==="array-contains"?new I1(e,i):t==="in"?new S1(e,i):t==="not-in"?new A1(e,i):t==="array-contains-any"?new C1(e,i):new Tt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new E1(e,i):new T1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ko(t,this.value)):t!==null&&ei(this.value)===ei(t)&&this.matchesComparison(Ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends Z_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new tr(e,t)}matches(e){return ev(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ev(r){return r.op==="and"}function tv(r){return w1(r)&&ev(r)}function w1(r){for(const e of r.filters)if(e instanceof tr)return!1;return!0}function Qd(r){if(r instanceof Tt)return r.field.canonicalString()+r.op.toString()+Go(r.value);if(tv(r))return r.filters.map((e=>Qd(e))).join(",");{const e=r.filters.map((t=>Qd(t))).join(",");return`${r.op}(${e})`}}function nv(r,e){return r instanceof Tt?(function(i,o){return o instanceof Tt&&i.op===o.op&&i.field.isEqual(o.field)&&kr(i.value,o.value)})(r,e):r instanceof tr?(function(i,o){return o instanceof tr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,g)=>l&&nv(h,o.filters[g])),!0):!1})(r,e):void we(19439)}function rv(r){return r instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Go(t.value)}`})(r):r instanceof tr?(function(t){return t.op.toString()+" {"+t.getFilters().map(rv).join(" ,")+"}"})(r):"Filter"}class x1 extends Tt{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class E1 extends Tt{constructor(e,t){super(e,"in",t),this.keys=sv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class T1 extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=sv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ge.fromName(i.referenceValue)))}class I1 extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cf(t)&&fl(t.arrayValue,this.value)}}class S1 extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}}class A1 extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fl(this.value.arrayValue,t)}}class C1 extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>fl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t=null,i=[],o=[],l=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=g,this.Te=null}}function py(r,e=null,t=[],i=[],o=null,l=null,h=null){return new b1(r,e,t,i,o,l,h)}function bf(r){const e=be(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Qd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Rc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Go(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Go(i))).join(",")),e.Te=t}return e.Te}function Nf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!v1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!nv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!fy(r.startAt,e.startAt)&&fy(r.endAt,e.endAt)}function Xd(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t=null,i=[],o=[],l=null,h="F",g=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function N1(r,e,t,i,o,l,h,g){return new sa(r,e,t,i,o,l,h,g)}function Dc(r){return new sa(r)}function my(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function iv(r){return r.collectionGroup!==null}function rl(r){const e=be(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new bt(zt.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pl(l,i))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new pl(zt.keyField(),i))}return e.Ie}function Sr(r){const e=be(r);return e.Ee||(e.Ee=k1(e,rl(r))),e.Ee}function k1(r,e){if(r.limitType==="F")return py(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new pl(o.field,l)}));const t=r.endAt?new pc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new pc(r.startAt.position,r.startAt.inclusive):null;return py(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Yd(r,e){const t=r.filters.concat([e]);return new sa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Jd(r,e,t){return new sa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function jc(r,e){return Nf(Sr(r),Sr(e))&&r.limitType===e.limitType}function ov(r){return`${bf(Sr(r))}|lt:${r.limitType}`}function Fo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>rv(o))).join(", ")}]`),Rc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Go(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Go(o))).join(",")),`Target(${i})`})(Sr(r))}; limitType=${r.limitType})`}function Vc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ge.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of rl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,g,y){const v=dy(h,g,y);return h.inclusive?v<=0:v<0})(i.startAt,rl(i),o)||i.endAt&&!(function(h,g,y){const v=dy(h,g,y);return h.inclusive?v>=0:v>0})(i.endAt,rl(i),o))})(r,e)}function R1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function av(r){return(e,t)=>{let i=!1;for(const o of rl(r)){const l=P1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function P1(r,e,t){const i=r.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,h,g){const y=h.data.field(l),v=g.data.field(l);return y!==null&&v!==null?Ko(y,v):we(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new ht(ge.comparator);function as(){return D1}const lv=new ht(ge.comparator);function Ya(...r){let e=lv;for(const t of r)e=e.insert(t.key,t);return e}function uv(r){let e=lv;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Di(){return sl()}function cv(){return sl()}function sl(){return new qi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const j1=new ht(ge.comparator),V1=new bt(ge.comparator);function Ve(...r){let e=V1;for(const t of r)e=e.add(t);return e}const F1=new bt(je);function O1(){return F1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function hv(r){return{integerValue:""+r}}function L1(r,e){return h1(e)?hv(e):kf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function M1(r,e,t){return r instanceof ml?(function(o,l){const h={fields:{[K_]:{stringValue:W_},[Q_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Af(l)&&(l=Pc(l)),l&&(h.fields[G_]=l),{mapValue:h}})(t,e):r instanceof gl?fv(r,e):r instanceof yl?pv(r,e):(function(o,l){const h=dv(o,l),g=gy(h)+gy(o.Ae);return Gd(h)&&Gd(o.Ae)?hv(g):kf(o.serializer,g)})(r,e)}function U1(r,e,t){return r instanceof gl?fv(r,e):r instanceof yl?pv(r,e):t}function dv(r,e){return r instanceof mc?(function(i){return Gd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class ml extends Fc{}class gl extends Fc{constructor(e){super(),this.elements=e}}function fv(r,e){const t=mv(e);for(const i of r.elements)t.some((o=>kr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class yl extends Fc{constructor(e){super(),this.elements=e}}function pv(r,e){let t=mv(e);for(const i of r.elements)t=t.filter((o=>!kr(o,i)));return{arrayValue:{values:t}}}class mc extends Fc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function gy(r){return yt(r.integerValue||r.doubleValue)}function mv(r){return Cf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t){this.field=e,this.transform=t}}function B1(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof gl&&o instanceof gl||i instanceof yl&&o instanceof yl?Wo(i.elements,o.elements,kr):i instanceof mc&&o instanceof mc?kr(i.Ae,o.Ae):i instanceof ml&&o instanceof ml})(r.transform,e.transform)}class $1{constructor(e,t){this.version=e,this.transformResults=t}}class sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ec(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Oc{}function gv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Lc(r.key,sn.none()):new Tl(r.key,r.data,sn.none());{const t=r.data,i=fn.empty();let o=new bt(zt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new si(r.key,i,new Cn(o.toArray()),sn.none())}}function q1(r,e,t){r instanceof Tl?(function(o,l,h){const g=o.value.clone(),y=_y(o.fieldTransforms,l,h.transformResults);g.setAll(y),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):r instanceof si?(function(o,l,h){if(!ec(o.precondition,l))return void l.convertToUnknownDocument(h.version);const g=_y(o.fieldTransforms,l,h.transformResults),y=l.data;y.setAll(yv(o)),y.setAll(g),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function il(r,e,t,i){return r instanceof Tl?(function(l,h,g,y){if(!ec(l.precondition,h))return g;const v=l.value.clone(),w=vy(l.fieldTransforms,y,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof si?(function(l,h,g,y){if(!ec(l.precondition,h))return g;const v=vy(l.fieldTransforms,y,h),w=h.data;return w.setAll(yv(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),g===null?null:g.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(l,h,g){return ec(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(r,e,t)}function H1(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=dv(i.transform,o||null);l!=null&&(t===null&&(t=fn.empty()),t.set(i.field,l))}return t||null}function yy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Wo(i,o,((l,h)=>B1(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tl extends Oc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class si extends Oc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function yv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function _y(r,e,t){const i=new Map;We(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,g=e.data.field(l.field);i.set(l.field,U1(h,g,t[o]))}return i}function vy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,M1(l,h,e))}return i}class Lc extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W1 extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&q1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=il(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=il(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=cv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let g=this.applyToLocalView(h,l.mutatedFields);g=t.has(o.key)?null:g;const y=gv(h,g);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,((t,i)=>yy(t,i)))&&Wo(this.baseMutations,e.baseMutations,((t,i)=>yy(t,i)))}}class Rf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return j1})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Rf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Oe;function X1(r){switch(r){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function _v(r){if(r===void 0)return os("GRPC error has no .code"),W.UNKNOWN;switch(r){case xt.OK:return W.OK;case xt.CANCELLED:return W.CANCELLED;case xt.UNKNOWN:return W.UNKNOWN;case xt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case xt.INTERNAL:return W.INTERNAL;case xt.UNAVAILABLE:return W.UNAVAILABLE;case xt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case xt.NOT_FOUND:return W.NOT_FOUND;case xt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case xt.ABORTED:return W.ABORTED;case xt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case xt.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:r})}}(Oe=xt||(xt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Qs([4294967295,4294967295],0);function wy(r){const e=Y1().encode(r),t=new D_;return t.update(e),new Uint8Array(t.digest())}function xy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Qs([t,i],0),new Qs([o,l],0)]}class Pf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ja(`Invalid padding: ${t}`);if(i<0)throw new Ja(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Qs.fromNumber(i)));return o.compare(J1)===1&&(o=new Qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=wy(e),[i,o]=xy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Pf(l,o,t);return i.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const t=wy(e),[i,o]=xy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Mc(Se.min(),o,new ht(je),as(),Ve())}}class Il{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Il(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class vv{constructor(e,t){this.targetId=e,this.Ce=t}}class wv{constructor(e,t,i=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ey{constructor(){this.ve=0,this.Fe=Ty(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),i=Ve();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:l})}})),new Il(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Ty()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z1{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=Gu(),this.He=Gu(),this.Ye=new ht(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Xd(l))if(i===0){const h=new ge(l.path);this.et(t,h,Zt.newNoDocument(h,Se.min()))}else We(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const g=this.ut(e),y=g?this.ct(g,e,h):1;if(y!==0){this.it(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,g;try{h=Zs(i).toUint8Array()}catch(y){if(y instanceof H_)return Ho("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Pf(h,o,l)}catch(y){return Ho(y instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(g)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const g=this.ot(h);if(g){if(l.current&&Xd(g.target)){const y=new ge(g.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,Zt.newNoDocument(y,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Ve();this.He.forEach(((l,h)=>{let g=!0;h.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Mc(e,t,this.Ye,this.je,i);return this.je=as(),this.Je=Gu(),this.He=Gu(),this.Ye=new ht(je),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ey,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ey),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gu(){return new ht(ge.comparator)}function Ty(){return new ht(ge.comparator)}const eT={asc:"ASCENDING",desc:"DESCENDING"},tT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nT={and:"AND",or:"OR"};class rT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zd(r,e){return r.useProto3Json||Rc(e)?e:{value:e}}function gc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function sT(r,e){return gc(r,e.toTimestamp())}function Ar(r){return We(!!r,49232),Se.fromTimestamp((function(t){const i=Js(t);return new st(i.seconds,i.nanos)})(r))}function Df(r,e){return ef(r,e).canonicalString()}function ef(r,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Ev(r){const e=Je.fromString(r);return We(Cv(e),10190,{key:e.toString()}),e}function tf(r,e){return Df(r.databaseId,e.path)}function Rd(r,e){const t=Ev(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ge(Iv(t))}function Tv(r,e){return Df(r.databaseId,e)}function iT(r){const e=Ev(r);return e.length===4?Je.emptyPath():Iv(e)}function nf(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Iv(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Iy(r,e,t){return{name:tf(r,e),fields:t.value.mapValue.fields}}function oT(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:we(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(We(w===void 0||typeof w=="string",58123),Bt.fromBase64String(w||"")):(We(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Bt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(v){const w=v.code===void 0?W.UNKNOWN:_v(v.code);return new ae(w,v.message||"")})(h);t=new wv(i,o,l,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Rd(r,i.document.name),l=Ar(i.document.updateTime),h=i.document.createTime?Ar(i.document.createTime):Se.min(),g=new fn({mapValue:{fields:i.document.fields}}),y=Zt.newFoundDocument(o,l,h,g),v=i.targetIds||[],w=i.removedTargetIds||[];t=new tc(v,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Rd(r,i.document),l=i.readTime?Ar(i.readTime):Se.min(),h=Zt.newNoDocument(o,l),g=i.removedTargetIds||[];t=new tc([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Rd(r,i.document),l=i.removedTargetIds||[];t=new tc([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new Q1(o,l),g=i.targetId;t=new vv(g,h)}}return t}function aT(r,e){let t;if(e instanceof Tl)t={update:Iy(r,e.key,e.value)};else if(e instanceof Lc)t={delete:tf(r,e.key)};else if(e instanceof si)t={update:Iy(r,e.key,e.data),updateMask:gT(e.fieldMask)};else{if(!(e instanceof W1))return we(16599,{Vt:e.type});t={verify:tf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const g=h.transform;if(g instanceof ml)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof gl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof yl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof mc)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw we(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:sT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(r,e.precondition)),t}function lT(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Ar(o.updateTime):Ar(l);return h.isEqual(Se.min())&&(h=Ar(l)),new $1(h,o.transformResults||[])})(t,e)))):[]}function uT(r,e){return{documents:[Tv(r,e.path)]}}function cT(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Tv(r,o);const l=(function(v){if(v.length!==0)return Av(tr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(S){return{field:Oo(S.field),direction:fT(S.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const g=Zd(r,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function hT(r){let e=iT(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const S=Sv(E);return S instanceof tr&&tv(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((S=>(function(q){return new pl(Lo(q.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let g=null;t.limit&&(g=(function(E){let S;return S=typeof E=="object"?E.value:E,Rc(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,O=E.values||[];return new pc(O,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const S=!E.before,O=E.values||[];return new pc(O,S)})(t.endAt)),N1(e,o,h,l,g,"F",y,v)}function dT(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Sv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Lo(t.unaryFilter.field);return Tt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(t.unaryFilter.field);return Tt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Lo(t.unaryFilter.field);return Tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Lo(t.unaryFilter.field);return Tt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Tt.create(Lo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return tr.create(t.compositeFilter.filters.map((i=>Sv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(r):we(30097,{filter:r})}function fT(r){return eT[r]}function pT(r){return tT[r]}function mT(r){return nT[r]}function Oo(r){return{fieldPath:r.canonicalString()}}function Lo(r){return zt.fromServerFormat(r.fieldPath)}function Av(r){return r instanceof Tt?(function(t){if(t.op==="=="){if(hy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(cy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(cy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:pT(t.op),value:t.value}}})(r):r instanceof tr?(function(t){const i=t.getFilters().map((o=>Av(o)));return i.length===1?i[0]:{compositeFilter:{op:mT(t.op),filters:i}}})(r):we(54877,{filter:r})}function gT(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Cv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,i,o,l=Se.min(),h=Se.min(),g=Bt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.yt=e}}function _T(r){const e=hT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Jd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.Cn=new wT}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Ys.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class wT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new bt(Je.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new bt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bv=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(bv,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qo(0)}static cr(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="LruGarbageCollector",xT=1048576;function Cy([r,e],[t,i]){const o=je(r,t);return o===0?je(e,i):o}class ET{constructor(e){this.Ir=e,this.buffer=new bt(Cy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Cy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TT{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Ay,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ra(t)?ce(Ay,"Ignoring IndexedDB error during garbage collection: ",t):await na(t)}await this.Vr(3e5)}))}}class IT{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(kc.ce);const i=new ET(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Sy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,g,y,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,g=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(v=Date.now(),Vo()<=De.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${l} targets in `+(y-g)+`ms
	Removed ${E} documents in `+(v-y)+`ms
Total Duration: ${v-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function ST(r,e){return new IT(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.changes=new qi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&il(i.mutation,o,Cn.empty(),st.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const o=Di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ya();return l.forEach(((g,y)=>{h=h.insert(g,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Di();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,g)=>{t.set(h,g)}))}))}computeViews(e,t,i,o){let l=as();const h=sl(),g=(function(){return sl()})();return t.forEach(((y,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof si)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),il(w.mutation,v,w.mutation.getFieldMask(),st.now())):h.set(v.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>g.set(v,new CT(w,h.get(v)??null)))),g)))}recalculateAndSaveOverlays(e,t){const i=sl();let o=new ht(((h,g)=>h-g)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const g of h)g.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let w=i.get(y)||Cn.empty();w=g.applyToLocalView(v,w),i.set(y,w);const E=(o.get(g.batchId)||Ve()).add(y);o=o.insert(g.batchId,E)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,w=y.value,E=cv();w.forEach((S=>{if(!l.has(S)){const O=gv(t.get(S),i.get(S));O!==null&&E.set(S,O),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,E))}return G.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):G.resolve(Di());let g=cl,y=l;return h.next((v=>G.forEach(v,((w,E)=>(g<E.largestBatchId&&(g=E.largestBatchId),l.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{y=y.insert(w,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,Ve()))).next((w=>({batchId:g,changes:uv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((i=>{let o=Ya();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ya();return this.indexManager.getCollectionParents(e,l).next((g=>G.forEach(g,(y=>{const v=(function(E,S){return new sa(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((E,S)=>{h=h.insert(E,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((y,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Zt.newInvalidDocument(w)))}));let g=Ya();return h.forEach(((y,v)=>{const w=l.get(y);w!==void 0&&il(w.mutation,v,Cn.empty(),st.now()),Vc(t,v)&&(g=g.insert(y,v))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ar(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:_T(o.bundledQuery),readTime:Ar(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.overlays=new ht(ge.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Di();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=Di(),l=t.length+1,h=new ge(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new ht(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=Di(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const g=Di(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,w)=>g.set(v,w))),!(g.size()>=o)););return G.resolve(g)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new G1(t,i));let l=this.qr.get(t);l===void 0&&(l=Ve(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.Qr=new bt(Dt.$r),this.Ur=new bt(Dt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Dt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Dt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ge(new Je([])),i=new Dt(t,e),o=new Dt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new Je([])),i=new Dt(t,e),o=new Dt(t,e+1);let l=Ve();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Dt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Dt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Dt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new K1(l,t,i,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new Dt(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Sf:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Dt(t,0),o=new Dt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const g=this.Xr(h.Yr);l.push(g)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bt(je);return t.forEach((o=>{const l=new Dt(o,0),h=new Dt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(g=>{i=i.add(g.Yr)}))})),G.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ge.isDocumentKey(l)||(l=l.child(""));const h=new Dt(new ge(l),0);let g=new bt(je);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(g=g.add(y.Yr)),!0)}),h),G.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return G.forEach(t.mutations,(o=>{const l=new Dt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Dt(t,0),o=this.Zr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.ri=e,this.docs=(function(){return new ht(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let i=as();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Zt.newInvalidDocument(o))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=as();const h=t.path,g=new ge(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:w}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||a1(o1(w),i)<=0||(o.has(w.key)||Vc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new jT(this)}getSize(e){return G.resolve(this.size)}}class jT extends AT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.persistence=e,this.si=new qi((t=>bf(t)),Nf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new jf,this.targetCount=0,this.ai=Qo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Qo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=t&&i.get(g.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t){this.ui={},this.overlays={},this.ci=new kc(0),this.li=!1,this.li=!0,this.hi=new RT,this.referenceDelegate=e(this),this.Pi=new VT(this),this.indexManager=new vT,this.remoteDocumentCache=(function(o){return new DT(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new yT(t),this.Ii=new NT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new PT(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const o=new FT(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class FT extends u1{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Ri=new jf,this.Vi=null}static mi(e){return new Vf(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(i=>{const o=ge.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class yc{constructor(e,t){this.persistence=e,this.pi=new qi((i=>d1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=ST(this,t)}static mi(e,t){return new yc(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((g=>{g||(i++,l.removeEntry(h,Se.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ju(e.data.value)),t}br(e,t,i){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Ff(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return b0()?8:c1(en())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new OT;return this.Ss(e,t,h).next((g=>{if(l.result=g,this.Vs)return this.bs(e,t,h,g.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Vo()<=De.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Vo()<=De.DEBUG&&ce("QueryEngine","Query:",Fo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Vo()<=De.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):G.resolve())}ys(e,t){if(my(t))return G.resolve(null);let i=Sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Jd(t,null,"F"),i=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ve(...l);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.Ds(t,g);return this.Cs(t,v,h,y.readTime)?this.ys(e,Jd(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ws(e,t,i,o){return my(t)||o.isEqual(Se.min())?G.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?G.resolve(null):(Vo()<=De.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.vs(e,h,t,i1(o,cl)).next((g=>g)))}))}Ds(e,t){let i=new bt(av(e));return t.forEach(((o,l)=>{Vc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Vo()<=De.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ys.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="LocalStore",MT=3e8;class UT{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ht(je),this.xs=new qi((l=>bf(l)),Nf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function zT(r,e,t,i){return new UT(r,e,t,i)}async function kv(r,e){const t=be(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],g=[];let y=Ve();for(const v of o){h.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}for(const v of l){g.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:g})))}))}))}function BT(r,e){const t=be(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,v,w){const E=v.batch,S=E.keys();let O=G.resolve();return S.forEach((q=>{O=O.next((()=>w.getEntry(y,q))).next(($=>{const U=v.docVersions.get(q);We(U!==null,48541),$.version.compareTo(U)<0&&(E.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),w.addEntry($)))}))})),O.next((()=>g.mutationQueue.removeMutationBatch(y,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let y=Ve();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Rv(r){const e=be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $T(r,e){const t=be(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach(((w,E)=>{const S=o.get(E);if(!S)return;g.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,E))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Bt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),o=o.insert(E,O),(function($,U,K){return $.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=MT?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,O,w)&&g.push(t.Pi.updateTargetData(l,O))}));let y=as(),v=Ve();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),g.push(qT(l,h,e.documentUpdates).next((w=>{y=w.ks,v=w.qs}))),!i.isEqual(Se.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));g.push(w)}return G.waitFor(g).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Ms=o,l)))}function qT(r,e,t){let i=Ve(),o=Ve();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=as();return t.forEach(((g,y)=>{const v=l.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(g,y.readTime),h=h.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(g,y)):ce(Of,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function HT(r,e){const t=be(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function WT(r,e){const t=be(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new qs(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function rf(r,e,t){const i=be(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ra(h))throw h;ce(Of,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function by(r,e,t){const i=be(r);let o=Se.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,v,w){const E=be(y),S=E.xs.get(w);return S!==void 0?G.resolve(E.Ms.get(S)):E.Pi.getTargetData(v,w)})(i,h,Sr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,g.targetId).next((y=>{l=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Se.min(),t?l:Ve()))).next((g=>(KT(i,R1(e),g),{documents:g,Qs:l})))))}function KT(r,e,t){let i=r.Os.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Ny{constructor(){this.activeTargetIds=O1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GT{constructor(){this.Mo=new Ny,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ny,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="ConnectivityMonitor";class Ry{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(ky,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(ky,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function sf(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="RestConnection",XT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===dc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=sf(),g=this.zo(e,t.toUriEncodedString());ce(Pd,`Sending RPC '${e}' ${h}:`,g,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,l);const{host:v}=new URL(g),w=Zo(v);return this.Jo(e,g,y,i,w).then((E=>(ce(Pd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Ho(Pd,`RPC '${e}' ${h} failed with error: `,E,"url: ",g,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ta})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=XT[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class ZT extends YT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=sf();return new Promise(((g,y)=>{const v=new j_;v.setWithCredentials(!0),v.listenOnce(V_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Yu.NO_ERROR:const E=v.getResponseJson();ce(Xt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),g(E);break;case Yu.TIMEOUT:ce(Xt,`RPC '${e}' ${h} timed out`),y(new ae(W.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const S=v.getStatus();if(ce(Xt,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let O=v.getResponseJson();Array.isArray(O)&&(O=O[0]);const q=O==null?void 0:O.error;if(q&&q.status&&q.message){const $=(function(K){const ne=K.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ne)>=0?ne:W.UNKNOWN})(q.status);y(new ae($,q.message))}else y(new ae(W.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ae(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ce(Xt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ce(Xt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=sf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=L_(),g=O_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const w=l.join("");ce(Xt,`Creating RPC '${e}' stream ${o}: ${w}`,y);const E=h.createWebChannel(w,y);this.I_(E);let S=!1,O=!1;const q=new JT({Yo:U=>{O?ce(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(ce(Xt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ce(Xt,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),$=(U,K,ne)=>{U.listen(K,(ee=>{try{ne(ee)}catch(H){setTimeout((()=>{throw H}),0)}}))};return $(E,Xa.EventType.OPEN,(()=>{O||(ce(Xt,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),$(E,Xa.EventType.CLOSE,(()=>{O||(O=!0,ce(Xt,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(E))})),$(E,Xa.EventType.ERROR,(U=>{O||(O=!0,Ho(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),q.a_(new ae(W.UNAVAILABLE,"The operation could not be completed")))})),$(E,Xa.EventType.MESSAGE,(U=>{var K;if(!O){const ne=U.data[0];We(!!ne,16349);const ee=ne,H=(ee==null?void 0:ee.error)||((K=ee[0])==null?void 0:K.error);if(H){ce(Xt,`RPC '${e}' stream ${o} received error:`,H);const oe=H.status;let se=(function(N){const P=xt[N];if(P!==void 0)return _v(P)})(oe),C=H.message;se===void 0&&(se=W.INTERNAL,C="Unknown error status: "+oe+" with message "+H.message),O=!0,q.a_(new ae(se,C)),E.close()}else ce(Xt,`RPC '${e}' stream ${o} received:`,ne),q.u_(ne)}})),$(g,F_.STAT_EVENT,(U=>{U.stat===Hd.PROXY?ce(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Hd.NOPROXY&&ce(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(r){return new rT(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="PersistentStream";class Dv{constructor(e,t,i,o,l,h,g,y){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ae(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Py,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Py,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class e2 extends Dv{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oT(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Se.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?Ar(h.readTime):Se.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=nf(this.serializer),t.addTarget=(function(l,h){let g;const y=h.target;if(g=Xd(y)?{documents:uT(l,y)}:{query:cT(l,y).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=xv(l,h.resumeToken);const v=Zd(l,h.expectedCount);v!==null&&(g.expectedCount=v)}else if(h.snapshotVersion.compareTo(Se.min())>0){g.readTime=gc(l,h.snapshotVersion.toTimestamp());const v=Zd(l,h.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,e);const i=dT(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=nf(this.serializer),t.removeTarget=e,this.q_(t)}}class t2 extends Dv{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lT(e.writeResults,e.commitTime),i=Ar(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=nf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>aT(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{}class r2 extends n2{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,ef(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(W.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,ef(t,i),o,h,g,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class s2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(os(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="RemoteStore";class i2{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Hi(this)&&(ce(Bi,"Restarting streams for network reachability change."),await(async function(y){const v=be(y);v.Ea.add(4),await Sl(v),v.Ra.set("Unknown"),v.Ea.delete(4),await zc(v)})(this))}))})),this.Ra=new s2(i,o)}}async function zc(r){if(Hi(r))for(const e of r.da)await e(!0)}async function Sl(r){for(const e of r.da)await e(!1)}function jv(r,e){const t=be(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zf(t)?Uf(t):ia(t).O_()&&Mf(t,e))}function Lf(r,e){const t=be(r),i=ia(t);t.Ia.delete(e),i.O_()&&Vv(t,e),t.Ia.size===0&&(i.O_()?i.L_():Hi(t)&&t.Ra.set("Unknown"))}function Mf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ia(r).Y_(e)}function Vv(r,e){r.Va.Ue(e),ia(r).Z_(e)}function Uf(r){r.Va=new Z1({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ia(r).start(),r.Ra.ua()}function zf(r){return Hi(r)&&!ia(r).x_()&&r.Ia.size>0}function Hi(r){return be(r).Ea.size===0}function Fv(r){r.Va=void 0}async function o2(r){r.Ra.set("Online")}async function a2(r){r.Ia.forEach(((e,t)=>{Mf(r,e)}))}async function l2(r,e){Fv(r),zf(r)?(r.Ra.ha(e),Uf(r)):r.Ra.set("Unknown")}async function u2(r,e,t){if(r.Ra.set("Online"),e instanceof wv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const g of l.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(r,e)}catch(i){ce(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _c(r,i)}else if(e instanceof tc?r.Va.Ze(e):e instanceof vv?r.Va.st(e):r.Va.tt(e),!t.isEqual(Se.min()))try{const i=await Rv(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const g=l.Va.Tt(h);return g.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const w=l.Ia.get(v);w&&l.Ia.set(v,w.withResumeToken(y.resumeToken,h))}})),g.targetMismatches.forEach(((y,v)=>{const w=l.Ia.get(y);if(!w)return;l.Ia.set(y,w.withResumeToken(Bt.EMPTY_BYTE_STRING,w.snapshotVersion)),Vv(l,y);const E=new qs(w.target,y,v,w.sequenceNumber);Mf(l,E)})),l.remoteSyncer.applyRemoteEvent(g)})(r,t)}catch(i){ce(Bi,"Failed to raise snapshot:",i),await _c(r,i)}}async function _c(r,e,t){if(!ra(e))throw e;r.Ea.add(1),await Sl(r),r.Ra.set("Offline"),t||(t=()=>Rv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(Bi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await zc(r)}))}function Ov(r,e){return e().catch((t=>_c(r,t,e)))}async function Bc(r){const e=be(r),t=ti(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sf;for(;c2(e);)try{const o=await HT(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,h2(e,o)}catch(o){await _c(e,o)}Lv(e)&&Mv(e)}function c2(r){return Hi(r)&&r.Ta.length<10}function h2(r,e){r.Ta.push(e);const t=ti(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Lv(r){return Hi(r)&&!ti(r).x_()&&r.Ta.length>0}function Mv(r){ti(r).start()}async function d2(r){ti(r).ra()}async function f2(r){const e=ti(r);for(const t of r.Ta)e.ea(t.mutations)}async function p2(r,e,t){const i=r.Ta.shift(),o=Rf.from(i,e,t);await Ov(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Bc(r)}async function m2(r,e){e&&ti(r).X_&&await(async function(i,o){if((function(h){return X1(h)&&h!==W.ABORTED})(o.code)){const l=i.Ta.shift();ti(i).B_(),await Ov(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Bc(i)}})(r,e),Lv(r)&&Mv(r)}async function Dy(r,e){const t=be(r);t.asyncQueue.verifyOperationInProgress(),ce(Bi,"RemoteStore received new credentials");const i=Hi(t);t.Ea.add(3),await Sl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await zc(t)}async function g2(r,e){const t=be(r);e?(t.Ea.delete(2),await zc(t)):e||(t.Ea.add(2),await Sl(t),t.Ra.set("Unknown"))}function ia(r){return r.ma||(r.ma=(function(t,i,o){const l=be(t);return l.sa(),new e2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:o2.bind(null,r),t_:a2.bind(null,r),r_:l2.bind(null,r),H_:u2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),zf(r)?Uf(r):r.Ra.set("Unknown")):(await r.ma.stop(),Fv(r))}))),r.ma}function ti(r){return r.fa||(r.fa=(function(t,i,o){const l=be(t);return l.sa(),new t2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:d2.bind(null,r),r_:m2.bind(null,r),ta:f2.bind(null,r),na:p2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Bc(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(Bi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,g=new Bf(e,t,h,o,l);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $f(r,e){if(os("AsyncQueue",`${e}: ${r}`),ra(r))return new ae(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=Ya(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.ga=new ht(ge.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Xo{constructor(e,t,i,o,l,h,g,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((g=>{h.push({type:0,doc:g})})),new Xo(e,t,Uo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _2{constructor(){this.queries=Vy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=be(t),l=o.queries;o.queries=Vy(),l.forEach(((h,g)=>{for(const y of g.Sa)y.onError(i)}))})(this,new ae(W.ABORTED,"Firestore shutting down"))}}function Vy(){return new qi((r=>ov(r)),jc)}async function qf(r,e){const t=be(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new y2,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const g=$f(h,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Wf(t)}async function Hf(r,e){const t=be(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function v2(r,e){const t=be(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const g of h.Sa)g.Fa(o)&&(i=!0);h.wa=o}}i&&Wf(t)}function w2(r,e,t){const i=be(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Wf(r){r.Ca.forEach((e=>{e.next()}))}var of,Fy;(Fy=of||(of={})).Ma="default",Fy.Cache="cache";class Kf{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this.key=e}}class zv{constructor(e){this.key=e}}class x2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=av(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new jy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const S=o.get(w),O=Vc(this.query,E)?E:null,q=!!S&&this.mutatedKeys.has(S.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;S&&O?S.data.isEqual(O.data)?q!==$&&(i.track({type:3,doc:O}),U=!0):this.su(S,O)||(i.track({type:2,doc:O}),U=!0,(y&&this.eu(O,y)>0||v&&this.eu(O,v)<0)&&(g=!0)):!S&&O?(i.track({type:0,doc:O}),U=!0):S&&!O&&(i.track({type:1,doc:S}),U=!0,(y||v)&&(g=!0)),U&&(O?(h=h.add(O),l=$?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Cs:g,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,E)=>(function(O,q){const $=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:U})}};return $(O)-$(q)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(i),o=o??!1;const g=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,v=y!==this.Za;return this.Za=y,h.length!==0||v?{snapshot:new Xo(this.query,e.tu,l,h,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new zv(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Uv(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gf="SyncEngine";class E2{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class T2{constructor(e){this.key=e,this.hu=!1}}class I2{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new qi((g=>ov(g)),jc),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ge.comparator),this.Au=new Map,this.Ru=new jf,this.Vu={},this.mu=new Map,this.fu=Qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S2(r,e,t=!0){const i=Kv(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Bv(i,e,t,!0),o}async function A2(r,e){const t=Kv(r);await Bv(t,e,!0,!1)}async function Bv(r,e,t,i){const o=await WT(r.localStore,Sr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let g;return i&&(g=await C2(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&jv(r.remoteStore,o),g}async function C2(r,e,t,i,o){r.pu=(E,S,O)=>(async function($,U,K,ne){let ee=U.view.ru(K);ee.Cs&&(ee=await by($.localStore,U.query,!1).then((({documents:C})=>U.view.ru(C,ee))));const H=ne&&ne.targetChanges.get(U.targetId),oe=ne&&ne.targetMismatches.get(U.targetId)!=null,se=U.view.applyChanges(ee,$.isPrimaryClient,H,oe);return Ly($,U.targetId,se.au),se.snapshot})(r,E,S,O);const l=await by(r.localStore,e,!0),h=new x2(e,l.Qs),g=h.ru(l.documents),y=Il.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(g,r.isPrimaryClient,y);Ly(r,t,v.au);const w=new E2(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function b2(r,e,t){const i=be(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!jc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await rf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Lf(i.remoteStore,o.targetId),af(i,o.targetId)})).catch(na)):(af(i,o.targetId),await rf(i.localStore,o.targetId,!0))}async function N2(r,e){const t=be(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Lf(t.remoteStore,i.targetId))}async function k2(r,e,t){const i=O2(r);try{const o=await(function(h,g){const y=be(h),v=st.now(),w=g.reduce(((O,q)=>O.add(q.key)),Ve());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let q=as(),$=Ve();return y.Ns.getEntries(O,w).next((U=>{q=U,q.forEach(((K,ne)=>{ne.isValidDocument()||($=$.add(K))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,q))).next((U=>{E=U;const K=[];for(const ne of g){const ee=H1(ne,E.get(ne.key).overlayedDocument);ee!=null&&K.push(new si(ne.key,ee,J_(ee.value.mapValue),sn.exists(!0)))}return y.mutationQueue.addMutationBatch(O,v,K,g)})).next((U=>{S=U;const K=U.applyToLocalDocumentSet(E,$);return y.documentOverlayCache.saveOverlays(O,U.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:uv(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,g,y){let v=h.Vu[h.currentUser.toKey()];v||(v=new ht(je)),v=v.insert(g,y),h.Vu[h.currentUser.toKey()]=v})(i,o.batchId,t),await Al(i,o.changes),await Bc(i.remoteStore)}catch(o){const l=$f(o,"Failed to persist write");t.reject(l)}}async function $v(r,e){const t=be(r);try{const i=await $T(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))})),await Al(t,i,e)}catch(i){await na(i)}}function Oy(r,e,t){const i=be(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const y=be(h);y.onlineState=g;let v=!1;y.queries.forEach(((w,E)=>{for(const S of E.Sa)S.va(g)&&(v=!0)})),v&&Wf(y)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R2(r,e,t){const i=be(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new ht(ge.comparator);h=h.insert(l,Zt.newNoDocument(l,Se.min()));const g=Ve().add(l),y=new Mc(Se.min(),new Map,new ht(je),h,g);await $v(i,y),i.du=i.du.remove(l),i.Au.delete(e),Qf(i)}else await rf(i.localStore,e,!1).then((()=>af(i,e,t))).catch(na)}async function P2(r,e){const t=be(r),i=e.batch.batchId;try{const o=await BT(t.localStore,e);Hv(t,i,null),qv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Al(t,o)}catch(o){await na(o)}}async function D2(r,e,t){const i=be(r);try{const o=await(function(h,g){const y=be(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return y.mutationQueue.lookupMutationBatch(v,g).next((E=>(We(E!==null,37113),w=E.keys(),y.mutationQueue.removeMutationBatch(v,E)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,w,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>y.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);Hv(i,e,t),qv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Al(i,o)}catch(o){await na(o)}}function qv(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Hv(r,e,t){const i=be(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function af(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||Wv(r,i)}))}function Wv(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Lf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Qf(r))}function Ly(r,e,t){for(const i of t)i instanceof Uv?(r.Ru.addReference(i.key,e),j2(r,i)):i instanceof zv?(ce(Gf,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||Wv(r,i.key)):we(19791,{wu:i})}function j2(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ce(Gf,"New document in limbo: "+t),r.Eu.add(i),Qf(r))}function Qf(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ge(Je.fromString(e)),i=r.fu.next();r.Au.set(i,new T2(t)),r.du=r.du.insert(t,i),jv(r.remoteStore,new qs(Sr(Dc(t.path)),i,"TargetPurposeLimboResolution",kc.ce))}}async function Al(r,e,t){const i=be(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((g,y)=>{h.push(i.pu(y,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const E=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(v){o.push(v);const E=Ff.As(y.targetId,v);l.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(y,v){const w=be(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>G.forEach(v,(S=>G.forEach(S.Es,(O=>w.persistence.referenceDelegate.addReference(E,S.targetId,O))).next((()=>G.forEach(S.ds,(O=>w.persistence.referenceDelegate.removeReference(E,S.targetId,O)))))))))}catch(E){if(!ra(E))throw E;ce(Of,"Failed to update sequence numbers: "+E)}for(const E of v){const S=E.targetId;if(!E.fromCache){const O=w.Ms.get(S),q=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(q);w.Ms=w.Ms.insert(S,$)}}})(i.localStore,l))}async function V2(r,e){const t=be(r);if(!t.currentUser.isEqual(e)){ce(Gf,"User change. New user:",e.toKey());const i=await kv(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((g=>{g.forEach((y=>{y.reject(new ae(W.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Al(t,i.Ls)}}function F2(r,e){const t=be(r),i=t.Au.get(e);if(i&&i.hu)return Ve().add(i.key);{let o=Ve();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const g=t.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function Kv(r){const e=be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=$v.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R2.bind(null,e),e.Pu.H_=v2.bind(null,e.eventManager),e.Pu.yu=w2.bind(null,e.eventManager),e}function O2(r){const e=be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D2.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zT(this.persistence,new LT,e.initialUser,this.serializer)}Cu(e){return new Nv(Vf.mi,this.serializer)}Du(e){return new GT}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class L2 extends vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof yc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new TT(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Nv((i=>yc.mi(i,t)),this.serializer)}}class lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Oy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=V2.bind(null,this.syncEngine),await g2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _2})()}createDatastore(e){const t=Uc(e.databaseInfo.databaseId),i=(function(l){return new ZT(l)})(e.databaseInfo);return(function(l,h,g,y){return new r2(l,h,g,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,g){return new i2(i,o,l,h,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>Oy(this.syncEngine,t,0)),(function(){return Ry.v()?new Ry:new QT})())}createSyncEngine(e,t){return(function(o,l,h,g,y,v,w){const E=new I2(o,l,h,g,y,v);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=be(o);ce(Bi,"RemoteStore shutting down."),l.Ea.add(5),await Sl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lf.provider={build:()=>new lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="FirestoreClient";class M2{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=If.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ce(ni,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ce(ni,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=$f(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jd(r,e){r.asyncQueue.verifyOperationInProgress(),ce(ni,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await kv(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function My(r,e){r.asyncQueue.verifyOperationInProgress();const t=await U2(r);ce(ni,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Dy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Dy(e.remoteStore,o))),r._onlineComponents=e}async function U2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(ni,"Using user provided OfflineComponentProvider");try{await jd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ho("Error using user provided cache. Falling back to memory cache: "+t),await jd(r,new vc)}}else ce(ni,"Using default OfflineComponentProvider"),await jd(r,new L2(void 0));return r._offlineComponents}async function Gv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(ni,"Using user provided OnlineComponentProvider"),await My(r,r._uninitializedComponentsProvider._online)):(ce(ni,"Using default OnlineComponentProvider"),await My(r,new lf))),r._onlineComponents}function z2(r){return Gv(r).then((e=>e.syncEngine))}async function wc(r){const e=await Gv(r),t=e.eventManager;return t.onListen=S2.bind(null,e.syncEngine),t.onUnlisten=b2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=A2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=N2.bind(null,e.syncEngine),t}function B2(r,e,t={}){const i=new ss;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,g,y,v){const w=new Xf({next:S=>{w.Nu(),h.enqueueAndForget((()=>Hf(l,E)));const O=S.docs.has(g);!O&&S.fromCache?v.reject(new ae(W.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&y&&y.source==="server"?v.reject(new ae(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Kf(Dc(g.path),w,{includeMetadataChanges:!0,qa:!0});return qf(l,E)})(await wc(r),r.asyncQueue,e,t,i))),i.promise}function $2(r,e,t={}){const i=new ss;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,g,y,v){const w=new Xf({next:S=>{w.Nu(),h.enqueueAndForget((()=>Hf(l,E))),S.fromCache&&y.source==="server"?v.reject(new ae(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Kf(g,w,{includeMetadataChanges:!0,qa:!0});return qf(l,E)})(await wc(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="firestore.googleapis.com",zy=!0;class By{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xv,this.ssl=zy}else this.host=e.host,this.ssl=e.ssl??zy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xT)throw new ae(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qv(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $c{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new By({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new By(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new GE;switch(i.type){case"firstParty":return new JE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Uy.get(t);i&&(ce("ComponentProvider","Removing Datastore"),Uy.delete(t),i.terminate())})(this),Promise.resolve()}}function q2(r,e,t,i={}){var v;r=rn(r,$c);const o=Zo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${t}`;o&&(S_(`https://${g}`),A_("Firestore",!0)),l.host!==Xv&&l.host!==g&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:g,ssl:o,emulatorOptions:i};if(!Mi(y,h)&&(r._setSettings(y),i.mockUserToken)){let w,E;if(typeof i.mockUserToken=="string")w=i.mockUserToken,E=Yt.MOCK_USER;else{w=v0(i.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ae(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Yt(S)}r._authCredentials=new QE(new U_(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class pt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(El(t,pt._jsonSchema))return new pt(e,i||null,new ge(Je.fromString(t.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:It("string",pt._jsonSchemaVersion),referencePath:It("string")};class Xs extends ii{constructor(e,t,i){super(e,t,Dc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ge(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Vi(r,e,...t){if(r=St(r),z_("collection","path",e),r instanceof $c){const i=Je.fromString(e,...t);return ty(i),new Xs(r,null,i)}{if(!(r instanceof pt||r instanceof Xs))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return ty(i),new Xs(r.firestore,null,i)}}function pn(r,e,...t){if(r=St(r),arguments.length===1&&(e=If.newId()),z_("doc","path",e),r instanceof $c){const i=Je.fromString(e,...t);return ey(i),new pt(r,null,new ge(i))}{if(!(r instanceof pt||r instanceof Xs))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return ey(i),new pt(r.firestore,r instanceof Xs?r.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="AsyncQueue";class qy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pv(this,"async_queue_retry"),this._c=()=>{const i=Dd();i&&ce($y,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Dd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Dd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ra(e))throw e;ce($y,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,os("INTERNAL UNHANDLED ERROR: ",Hy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Bf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:Hy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Hy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Rr extends $c{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new qy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qy(e),this._firestoreClient=void 0,await e}}}function H2(r,e){const t=typeof r=="object"?r:k_(),i=typeof r=="string"?r:dc,o=Ef(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=y0("firestore");l&&q2(o,...l)}return o}function Cl(r){if(r._terminated)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||W2(r),r._firestoreClient}function W2(r){var i,o,l;const e=r._freezeSettings(),t=(function(g,y,v,w){return new m1(g,y,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Qv(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new M2(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Bt.fromBase64String(e))}catch(t){throw new ae(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:It("string",Fn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(El(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:It("string",Cr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new br(e.vectorValues);throw new ae(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}br._jsonSchemaVersion="firestore/vectorValue/1.0",br._jsonSchema={type:It("string",br._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=/^__.*__$/;class G2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class Yv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new si(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class Yf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jv(this.Ac)&&K2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Q2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Uc(e)}Cc(e,t,i,o=!1){return new Yf({Ac:e,methodName:t,Dc:i,path:zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nl(r){const e=r._freezeSettings(),t=Uc(r._databaseId);return new Q2(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Jf(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);ep("Data must be an object, but it was:",h,i);const g=tw(i,h);let y,v;if(l.merge)y=new Cn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const S=uf(e,E,t);if(!h.contains(S))throw new ae(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);rw(w,S)||w.push(S)}y=new Cn(w),v=h.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,v=h.fieldTransforms;return new G2(new fn(g),y,v)}class Hc extends qc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hc}}class Zf extends qc{_toFieldTransform(e){return new z1(e.path,new ml)}isEqual(e){return e instanceof Zf}}function Zv(r,e,t,i){const o=r.Cc(1,e,t);ep("Data must be an object, but it was:",o,i);const l=[],h=fn.empty();ri(i,((y,v)=>{const w=tp(e,y,t);v=St(v);const E=o.yc(w);if(v instanceof Hc)l.push(w);else{const S=kl(v,E);S!=null&&(l.push(w),h.set(w,S))}}));const g=new Cn(l);return new Yv(h,g,o.fieldTransforms)}function ew(r,e,t,i,o,l){const h=r.Cc(1,e,t),g=[uf(e,i,t)],y=[o];if(l.length%2!=0)throw new ae(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)g.push(uf(e,l[S])),y.push(l[S+1]);const v=[],w=fn.empty();for(let S=g.length-1;S>=0;--S)if(!rw(v,g[S])){const O=g[S];let q=y[S];q=St(q);const $=h.yc(O);if(q instanceof Hc)v.push(O);else{const U=kl(q,$);U!=null&&(v.push(O),w.set(O,U))}}const E=new Cn(v);return new Yv(w,E,h.fieldTransforms)}function X2(r,e,t,i=!1){return kl(t,r.Cc(i?4:3,e))}function kl(r,e){if(nw(r=St(r)))return ep("Unsupported field value:",e,r),tw(r,e);if(r instanceof qc)return(function(i,o){if(!Jv(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const g of i){let y=kl(g,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return L1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=st.fromDate(i);return{timestampValue:gc(o.serializer,l)}}if(i instanceof st){const l=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gc(o.serializer,l)}}if(i instanceof Cr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:xv(o.serializer,i._byteString)};if(i instanceof pt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Df(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof br)return(function(h,g){return{mapValue:{fields:{[X_]:{stringValue:Y_},[fc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return kf(g.serializer,v)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Nc(i)}`)})(r,e)}function tw(r,e){const t={};return q_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(r,((i,o)=>{const l=kl(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function nw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof st||r instanceof Cr||r instanceof Fn||r instanceof pt||r instanceof qc||r instanceof br)}function ep(r,e,t){if(!nw(t)||!B_(t)){const i=Nc(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function uf(r,e,t){if((e=St(e))instanceof bl)return e._internalPath;if(typeof e=="string")return tp(r,e);throw xc("Field path arguments must be of type string or ",r,!1,void 0,t)}const Y2=new RegExp("[~\\*/\\[\\]]");function tp(r,e,t){if(e.search(Y2)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new bl(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function xc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(l||h)&&(y+=" (found",l&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new ae(W.INVALID_ARGUMENT,g+r+y)}function rw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(np("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class J2 extends sw{data(){return super.data()}}function np(r,e){return typeof e=="string"?tp(r,e):e instanceof bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class ow extends rp{}function Z2(r,e,...t){let i=[];e instanceof rp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((y=>y instanceof ip)).length,g=l.filter((y=>y instanceof sp)).length;if(h>1||h>0&&g>0)throw new ae(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class sp extends ow{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new sp(e,t,i)}_apply(e){const t=this._parse(e);return aw(e._query,t),new ii(e.firestore,e.converter,Yd(e._query,t))}_parse(e){const t=Nl(e.firestore);return(function(l,h,g,y,v,w,E){let S;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ae(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Gy(E,w);const q=[];for(const $ of E)q.push(Ky(y,l,$));S={arrayValue:{values:q}}}else S=Ky(y,l,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Gy(E,w),S=X2(g,h,E,w==="in"||w==="not-in");return Tt.create(v,w,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ip extends rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ip(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:tr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const g=l.getFlattenedFilters();for(const y of g)aw(h,y),h=Yd(h,y)})(e._query,t),new ii(e.firestore,e.converter,Yd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class op extends ow{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new op(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new ae(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pl(l,h)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new sa(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function eI(r,e="asc"){const t=e,i=np("orderBy",r);return op._create(i,t)}function Ky(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new ae(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iv(e)&&t.indexOf("/")!==-1)throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!ge.isDocumentKey(i))throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return uy(r,new ge(i))}if(t instanceof pt)return uy(r,t._key);throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nc(t)}.`)}function Gy(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aw(r,e){const t=(function(o,l){for(const h of o)for(const g of h.getFlattenedFilters())if(l.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tI{convertValue(e,t="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ri(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[fc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>yt(h.doubleValue)));return new br(t)}convertGeoPoint(e){return new Cr(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Pc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=Js(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);We(Cv(i),9688,{name:e});const o=new dl(i.get(1),i.get(3)),l=new ge(i.popFirst(5));return o.isEqual(t)||os(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fi extends sw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(np("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fi._jsonSchema={type:It("string",Fi._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class nc extends Fi{data(e={}){return super.data(e)}}class Oi{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Za(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new nc(this._firestore,this._userDataWriter,i.key,i,new Za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const y=new nc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Za(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>l||g.type!==3)).map((g=>{const y=new nc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Za(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return g.type!==0&&(v=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),w=h.indexOf(g.doc.key)),{type:nI(g.type),doc:y,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=If.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r){r=rn(r,pt);const e=rn(r.firestore,Rr);return B2(Cl(e),r._key).then((t=>uw(e,r,t)))}Oi._jsonSchemaVersion="firestore/querySnapshot/1.0",Oi._jsonSchema={type:It("string",Oi._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class lp extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}function lw(r){r=rn(r,ii);const e=rn(r.firestore,Rr),t=Cl(e),i=new lp(e);return iw(r._query),$2(t,r._query).then((o=>new Oi(e,i,r,o)))}function nr(r,e,t){r=rn(r,pt);const i=rn(r.firestore,Rr),o=ap(r.converter,e,t);return Pl(i,[Jf(Nl(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,sn.none())])}function Vd(r,e,t,...i){r=rn(r,pt);const o=rn(r.firestore,Rr),l=Nl(o);let h;return h=typeof(e=St(e))=="string"||e instanceof bl?ew(l,"updateDoc",r._key,e,t,i):Zv(l,"updateDoc",r._key,e),Pl(o,[h.toMutation(r._key,sn.exists(!0))])}function Rl(r){return Pl(rn(r.firestore,Rr),[new Lc(r._key,sn.none())])}function rI(r,e){const t=rn(r.firestore,Rr),i=pn(r),o=ap(r.converter,e);return Pl(t,[Jf(Nl(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,sn.exists(!1))]).then((()=>i))}function Wi(r,...e){var y,v,w;r=St(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Wy(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Wy(e[i])){const E=e[i];e[i]=(y=E.next)==null?void 0:y.bind(E),e[i+1]=(v=E.error)==null?void 0:v.bind(E),e[i+2]=(w=E.complete)==null?void 0:w.bind(E)}let l,h,g;if(r instanceof pt)h=rn(r.firestore,Rr),g=Dc(r._key.path),l={next:E=>{e[i]&&e[i](uw(h,r,E))},error:e[i+1],complete:e[i+2]};else{const E=rn(r,ii);h=rn(E.firestore,Rr),g=E._query;const S=new lp(h);l={next:O=>{e[i]&&e[i](new Oi(h,S,E,O))},error:e[i+1],complete:e[i+2]},iw(r._query)}return(function(S,O,q,$){const U=new Xf($),K=new Kf(O,U,q);return S.asyncQueue.enqueueAndForget((async()=>qf(await wc(S),K))),()=>{U.Nu(),S.asyncQueue.enqueueAndForget((async()=>Hf(await wc(S),K)))}})(Cl(h),g,o,l)}function Pl(r,e){return(function(i,o){const l=new ss;return i.asyncQueue.enqueueAndForget((async()=>k2(await z2(i),o,l))),l.promise})(Cl(r),e)}function uw(r,e,t){const i=t.docs.get(e._key),o=new lp(r);return new Fi(r,o,e._key,i,new Za(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nl(e)}set(e,t,i){this._verifyNotCommitted();const o=Fd(e,this._firestore),l=ap(o.converter,t,i),h=Jf(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,sn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=Fd(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof bl?ew(this._dataReader,"WriteBatch.update",l._key,t,i,o):Zv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fd(e,this._firestore);return this._mutations=this._mutations.concat(new Lc(t._key,sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fd(r,e){if((r=St(r)).firestore!==e)throw new ae(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ft(){return new Zf("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(r){return Cl(r=rn(r,Rr)),new sI(r,(e=>Pl(r,e)))}(function(e,t=!0){(function(o){ta=o})(ea),qo(new Ui("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),g=new Rr(new XE(i.getProvider("auth-internal")),new ZE(h,i.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ae(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(v.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},g._setSettings(l),g}),"PUBLIC").setMultipleInstances(!0)),Gs(Xg,Yg,e),Gs(Xg,Yg,"esm2020")})();function cw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iI=cw,hw=new wl("auth","Firebase",cw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new wf("@firebase/auth");function oI(r,...e){Ec.logLevel<=De.WARN&&Ec.warn(`Auth (${ea}): ${r}`,...e)}function rc(r,...e){Ec.logLevel<=De.ERROR&&Ec.error(`Auth (${ea}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(r,...e){throw cp(r,...e)}function Zn(r,...e){return cp(r,...e)}function up(r,e,t){const i={...iI(),[e]:t};return new wl("auth","Firebase",i).create(e,{appName:r.name})}function Li(r){return up(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Pr(r,"argument-error"),up(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return hw.create(r,...e)}function Te(r,e,...t){if(!r)throw cp(e,...t)}function es(r){const e="INTERNAL ASSERTION FAILED: "+r;throw rc(e),new Error(e)}function ls(r,e){r||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function lI(){return Qy()==="http:"||Qy()==="https:"}function Qy(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lI()||S0()||"connection"in navigator)?navigator.onLine:!0}function cI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=E0()||A0()}get(){return uI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r,e){ls(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fI=new Dl(3e4,6e4);function dp(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function oa(r,e,t,i,o={}){return fw(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const g=xl({key:r.config.apiKey,...h}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:y,...l};return I0()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(v.credentials="include"),dw.fetch()(await pw(r,r.config.apiHost,t,g),v)})}async function fw(r,e,t){r._canInitEmulator=!1;const i={...hI,...e};try{const o=new mI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Xu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const g=l.ok?h.errorMessage:h.error.message,[y,v]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xu(r,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw Xu(r,"email-already-in-use",h);if(y==="USER_DISABLED")throw Xu(r,"user-disabled",h);const w=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw up(r,w,v);Pr(r,w)}}catch(o){if(o instanceof us)throw o;Pr(r,"network-request-failed",{message:String(o)})}}async function pI(r,e,t,i,o={}){const l=await oa(r,e,t,i,o);return"mfaPendingCredential"in l&&Pr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function pw(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?hp(r.config,o):`${r.config.apiScheme}://${o}`;return dI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class mI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Zn(this.auth,"network-request-failed")),fI.get())})}}function Xu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Zn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(r,e){return oa(r,"POST","/v1/accounts:delete",e)}async function Tc(r,e){return oa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yI(r,e=!1){const t=St(r),i=await t.getIdToken(e),o=fp(i);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ol(Ld(o.auth_time)),issuedAtTime:ol(Ld(o.iat)),expirationTime:ol(Ld(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ld(r){return Number(r)*1e3}function fp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const o=x_(t);return o?JSON.parse(o):(rc("Failed to decode base64 JWT payload"),null)}catch(o){return rc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Xy(r){const e=fp(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof us&&_I(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function _I({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(r){var E;const e=r.auth,t=await r.getIdToken(),i=await _l(r,Tc(e,{idToken:t}));Te(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?mw(o.providerUserInfo):[],h=xI(r.providerData,l),g=r.isAnonymous,y=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),v=g?y:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new df(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,w)}async function wI(r){const e=St(r);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function mw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,e){const t=await fw(r,{},async()=>{const i=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await pw(r,o,"/v1/token",`key=${l}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:i};return r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(y.credentials="include"),dw.fetch()(h,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TI(r,e){return oa(r,"POST","/v2/accounts:revokeToken",dp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=Xy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await EI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new zo;return i&&(Te(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Te(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Te(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new vI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new df(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await _l(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yI(this,e)}reload(){return wI(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ic(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await _l(this,gI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,g=t.tenantId??void 0,y=t._redirectEventId??void 0,v=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:O,providerData:q,stsTokenManager:$}=t;Te(E&&$,e,"internal-error");const U=zo.fromJSON(this.name,$);Te(typeof E=="string",e,"internal-error"),Us(i,e.name),Us(o,e.name),Te(typeof S=="boolean",e,"internal-error"),Te(typeof O=="boolean",e,"internal-error"),Us(l,e.name),Us(h,e.name),Us(g,e.name),Us(y,e.name),Us(v,e.name),Us(w,e.name);const K=new Jn({uid:E,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:g,stsTokenManager:U,createdAt:v,lastLoginAt:w});return q&&Array.isArray(q)&&(K.providerData=q.map(ne=>({...ne}))),y&&(K._redirectEventId=y),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new zo;o.updateFromServerResponse(t);const l=new Jn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ic(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?mw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),g=new zo;g.updateFromIdToken(i);const y=new Jn({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new df(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map;function ts(r){ls(r instanceof Function,"Expected a class definition");let e=Yy.get(r);return e?(ls(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Yy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gw.type="NONE";const Jy=gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(r,e,t){return`firebase:${r}:${e}:${t}`}class Bo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=sc(this.userKey,o.apiKey,l),this.fullPersistenceKey=sc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tc(this.auth,{idToken:e}).catch(()=>{});return t?Jn._fromGetAccountInfoResponse(this.auth,t,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Bo(ts(Jy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||ts(Jy);const h=sc(i,e.config.apiKey,e.name);let g=null;for(const v of t)try{const w=await v._get(h);if(w){let E;if(typeof w=="string"){const S=await Tc(e,{idToken:w}).catch(()=>{});if(!S)break;E=await Jn._fromGetAccountInfoResponse(e,S,w)}else E=Jn._fromJSON(e,w);v!==l&&(g=E),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Bo(l,e,i):(l=y[0],g&&await l._set(h,g.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Bo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ww(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ew(e))return"Blackberry";if(Tw(e))return"Webos";if(_w(e))return"Safari";if((e.includes("chrome/")||vw(e))&&!e.includes("edge/"))return"Chrome";if(xw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yw(r=en()){return/firefox\//i.test(r)}function _w(r=en()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vw(r=en()){return/crios\//i.test(r)}function ww(r=en()){return/iemobile/i.test(r)}function xw(r=en()){return/android/i.test(r)}function Ew(r=en()){return/blackberry/i.test(r)}function Tw(r=en()){return/webos/i.test(r)}function pp(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function II(r=en()){var e;return pp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function SI(){return C0()&&document.documentMode===10}function Iw(r=en()){return pp(r)||xw(r)||Tw(r)||Ew(r)||/windows phone/i.test(r)||ww(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(r,e=[]){let t;switch(r){case"Browser":t=Zy(en());break;case"Worker":t=`${Zy(en())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,g)=>{try{const y=e(l);h(y)}catch(y){g(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(r,e={}){return oa(r,"GET","/v2/passwordPolicy",dp(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=6;class NI{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e_(this),this.idTokenSubscription=new e_(this),this.beforeStateQueue=new AI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ts(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tc(this,{idToken:e}),i=await Jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Yn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,g=i==null?void 0:i._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===g)&&(y!=null&&y.user)&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(Li(this));const t=e?St(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CI(this),t=new NI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await TI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ts(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[ts(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(g,this,"internal-error"),g.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&oI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wc(r){return St(r)}class e_{constructor(e){this.auth=e,this.observer=null,this.addObserver=V0(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RI(r){mp=r}function PI(r){return mp.loadJS(r)}function DI(){return mp.gapiScript}function jI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(r,e){const t=Ef(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Mi(l,e??{}))return o;Pr(o,"already-initialized")}return t.initialize({options:e})}function FI(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ts);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function OI(r,e,t){const i=Wc(r);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Aw(e),{host:h,port:g}=LI(e),y=g===null?"":`:${g}`,v={url:`${l}//${h}${y}/`},w=Object.freeze({host:h,port:g,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(Mi(v,i.config.emulator)&&Mi(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Zo(h)?(S_(`${l}//${h}${y}`),A_("Auth",!0)):MI()}function Aw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function LI(r){const e=Aw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:t_(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:t_(h)}}}function t_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function MI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,t){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(r,e){return pI(r,"POST","/v1/accounts:signInWithIdp",dp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="http://localhost";class $i extends Cw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new $i(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,$o(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:UI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends gp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends jl{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $i._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Zr.credential(t,i)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends jl{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends jl{constructor(){super("twitter.com")}static credential(e,t){return $i._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return $s.credential(t,i)}catch{return null}}}$s.TWITTER_SIGN_IN_METHOD="twitter.com";$s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Jn._fromIdTokenResponse(e,i,o),h=n_(i);return new Yo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=n_(i);return new Yo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function n_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends us{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Sc(e,t,i,o)}}function bw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(r,l,e,i):l})}async function zI(r,e,t=!1){const i=await _l(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Yo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(r,e,t=!1){const{auth:i}=r;if(Yn(i.app))return Promise.reject(Li(i));const o="reauthenticate";try{const l=await _l(r,bw(i,o,e,r),t);Te(l.idToken,i,"internal-error");const h=fp(l.idToken);Te(h,i,"internal-error");const{sub:g}=h;return Te(r.uid===g,i,"user-mismatch"),Yo._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Pr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(r,e,t=!1){if(Yn(r.app))return Promise.reject(Li(r));const i="signIn",o=await bw(r,i,e),l=await Yo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function qI(r,e,t,i){return St(r).onIdTokenChanged(e,t,i)}function HI(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function WI(r,e,t,i){return St(r).onAuthStateChanged(e,t,i)}function KI(r){return St(r).signOut()}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=1e3,QI=10;class kw extends Nw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,g,y)=>{this.notifyListeners(h,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);SI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,QI):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},GI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kw.type="LOCAL";const XI=kw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Nw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rw.type="SESSION";const Pw=Rw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Kc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const g=Array.from(h).map(async v=>v(t.origin,l)),y=await YI(g);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((g,y)=>{const v=yp("",20);o.port1.start();const w=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),g(S.data.response);break;default:clearTimeout(w),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function ZI(r){Nr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function eS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function nS(){return Dw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firebaseLocalStorageDb",rS=1,Cc="firebaseLocalStorage",Vw="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gc(r,e){return r.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function sS(){const r=indexedDB.deleteDatabase(jw);return new Vl(r).toPromise()}function ff(){const r=indexedDB.open(jw,rS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Cc,{keyPath:Vw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Cc)?e(i):(i.close(),await sS(),e(await ff()))})})}async function r_(r,e,t){const i=Gc(r,!0).put({[Vw]:e,value:t});return new Vl(i).toPromise()}async function iS(r,e){const t=Gc(r,!1).get(e),i=await new Vl(t).toPromise();return i===void 0?null:i.value}function s_(r,e){const t=Gc(r,!0).delete(e);return new Vl(t).toPromise()}const oS=800,aS=3;class Fw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ff(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>aS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(nS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await eS(),!this.activeServiceWorker)return;this.sender=new JI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ff();return await r_(e,Ac,"1"),await s_(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>r_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>iS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>s_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Gc(o,!1).getAll();return new Vl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fw.type="LOCAL";const lS=Fw;new Dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(r,e){return e?ts(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends Cw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uS(r){return $I(r.auth,new _p(r),r.bypassAuthState)}function cS(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),BI(t,new _p(r),r.bypassAuthState)}async function hS(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),zI(t,new _p(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:g}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uS;case"linkViaPopup":case"linkViaRedirect":return hS;case"reauthViaPopup":case"reauthViaRedirect":return cS;default:Pr(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new Dl(2e3,1e4);async function fS(r,e,t){if(Yn(r.app))return Promise.reject(Zn(r,"operation-not-supported-in-this-environment"));const i=Wc(r);aI(r,e,gp);const o=Ow(i,t);return new ji(i,"signInViaPopup",e,o).executeNotNull()}class ji extends Lw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dS.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="pendingRedirect",ic=new Map;class mS extends Lw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ic.get(this.auth._key());if(!e){try{const i=await gS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ic.set(this.auth._key(),e)}return this.bypassAuthState||ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gS(r,e){const t=vS(e),i=_S(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function yS(r,e){ic.set(r._key(),e)}function _S(r){return ts(r._redirectPersistence)}function vS(r){return sc(pS,r.config.apiKey,r.name)}async function wS(r,e,t=!1){if(Yn(r.app))return Promise.reject(Li(r));const i=Wc(r),o=Ow(i,e),h=await new mS(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=600*1e3;class ES{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Mw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Zn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xS&&this.cachedEventUids.clear(),this.cachedEventUids.has(i_(e))}saveEventToCache(e){this.cachedEventUids.add(i_(e)),this.lastProcessedEventTime=Date.now()}}function i_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Mw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(r,e={}){return oa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AS=/^https?/;async function CS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await IS(r);for(const t of e)try{if(bS(t))return}catch{}Pr(r,"unauthorized-domain")}function bS(r){const e=hf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!AS.test(t))return!1;if(SS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new Dl(3e4,6e4);function o_(){const r=Nr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function kS(r){return new Promise((e,t)=>{var o,l,h;function i(){o_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o_(),t(Zn(r,"network-request-failed"))},timeout:NS.get()})}if((l=(o=Nr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Nr().gapi)!=null&&h.load)i();else{const g=jI("iframefcb");return Nr()[g]=()=>{gapi.load?i():t(Zn(r,"network-request-failed"))},PI(`${DI()}?onload=${g}`).catch(y=>t(y))}}).catch(e=>{throw oc=null,e})}let oc=null;function RS(r){return oc=oc||kS(r),oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new Dl(5e3,15e3),DS="__/auth/iframe",jS="emulator/auth/iframe",VS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OS(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?hp(e,jS):`https://${r.config.authDomain}/${DS}`,i={apiKey:e.apiKey,appName:r.name,v:ea},o=FS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${xl(i).slice(1)}`}async function LS(r){const e=await RS(r),t=Nr().gapi;return Te(t,r,"internal-error"),e.open({where:document.body,url:OS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Zn(r,"network-request-failed"),g=Nr().setTimeout(()=>{l(h)},PS.get());function y(){Nr().clearTimeout(g),o(i)}i.ping(y).then(y,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},US=500,zS=600,BS="_blank",$S="http://localhost";class a_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qS(r,e,t,i=US,o=zS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const y={...MS,width:i.toString(),height:o.toString(),top:l,left:h},v=en().toLowerCase();t&&(g=vw(v)?BS:t),yw(v)&&(e=e||$S,y.scrollbars="yes");const w=Object.entries(y).reduce((S,[O,q])=>`${S}${O}=${q},`,"");if(II(v)&&g!=="_self")return HS(e||"",g),new a_(null);const E=window.open(e||"",g,w);Te(E,r,"popup-blocked");try{E.focus()}catch{}return new a_(E)}function HS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="__/auth/handler",KS="emulator/auth/handler",GS=encodeURIComponent("fac");async function l_(r,e,t,i,o,l){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ea,eventId:o};if(e instanceof gp){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",j0(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof jl){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const g=h;for(const w of Object.keys(g))g[w]===void 0&&delete g[w];const y=await r._getAppCheckToken(),v=y?`#${GS}=${encodeURIComponent(y)}`:"";return`${QS(r)}?${xl(g).slice(1)}${v}`}function QS({config:r}){return r.emulator?hp(r,KS):`https://${r.authDomain}/${WS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="webStorageSupport";class XS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pw,this._completeRedirectFn=wS,this._overrideRedirectResult=yS}async _openPopup(e,t,i,o){var h;ls((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await l_(e,t,i,hf(),o);return qS(e,l,yp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await l_(e,t,i,hf(),o);return ZI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ls(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await LS(e),i=new ES(e);return t.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Md,{type:Md},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Md];l!==void 0&&t(!!l),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Iw()||_w()||pp()}}const YS=XS;var u_="@firebase/auth",c_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eA(r){qo(new Ui("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=i.options;Te(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sw(r)},v=new kI(i,o,l,y);return FI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),qo(new Ui("auth-internal",e=>{const t=Wc(e.getProvider("auth").getImmediate());return(i=>new JS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(u_,c_,ZS(r)),Gs(u_,c_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=300,nA=I_("authIdTokenMaxAge")||tA;let h_=null;const rA=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>nA)return;const o=t==null?void 0:t.token;h_!==o&&(h_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function sA(r=k_()){const e=Ef(r,"auth");if(e.isInitialized())return e.getImmediate();const t=VI(r,{popupRedirectResolver:YS,persistence:[lS,XI,Pw]}),i=I_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=rA(l.toString());HI(t,h,()=>h(t.currentUser)),qI(t,g=>h(g))}}const o=E_("auth");return o&&OI(t,`http://${o}`),t}function iA(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}RI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Zn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",iA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eA("Browser");const oA={apiKey:"AIzaSyBBfpg8D4bqcqOTTuO5ONIQRInRCPOZM5k",authDomain:"comments-67079.firebaseapp.com",projectId:"comments-67079",storageBucket:"comments-67079.firebasestorage.app",messagingSenderId:"36001866008",appId:"1:36001866008:web:448de13685ad843551be6d"},Uw=N_(oA),ct=H2(Uw),Mo=sA(Uw),zw=new Zr;zw.setCustomParameters({prompt:"select_account"});let Jt=null;const aA=r=>{Jt=r},qe={USERS:"users",STUDENTS:"students",SETTINGS:"settings",TEMPLATES:"templates",CLASSES:"classes",SCHOOLS:"schools"},pf=r=>{if(!Jt)throw new Error(" ID  setCurrentUserId()");return Vi(ct,qe.USERS,Jt,r)},Ir=(r,e)=>{if(!Jt)throw new Error(" ID  setCurrentUserId()");return pn(ct,qe.USERS,Jt,r,e)},Jr={subscribe:(r,e=null)=>{if(!Jt)return console.error(" ID "),r([]),()=>{};const t=pf(qe.STUDENTS);return Wi(t,i=>{let o=[];i.forEach(l=>{const h={id:l.id,...l.data()};(!e||h.classId===e)&&o.push(h)}),o.sort((l,h)=>{var g,y,v,w;return(((y=(g=l.createdAt)==null?void 0:g.toMillis)==null?void 0:y.call(g))||0)-(((w=(v=h.createdAt)==null?void 0:v.toMillis)==null?void 0:w.call(v))||0)}),r(o)},i=>{console.error("Firestore :",i),r([])})},add:async r=>{try{const e=Ir(qe.STUDENTS,r.id.toString());await nr(e,{...r,createdAt:ft(),updatedAt:ft()})}catch(e){throw console.error(":",e),e}},addBatch:async r=>{try{const e=Od(ct);r.forEach(t=>{const i=Ir(qe.STUDENTS,t.id.toString());e.set(i,{...t,createdAt:ft(),updatedAt:ft()})}),await e.commit()}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=Ir(qe.STUDENTS,r.toString());await nr(t,{...e,updatedAt:ft()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=Ir(qe.STUDENTS,r.toString());await Rl(e)}catch(e){throw console.error(":",e),e}},deleteBatch:async r=>{try{const e=Od(ct);r.forEach(t=>{const i=Ir(qe.STUDENTS,t.toString());e.delete(i)}),await e.commit()}catch(e){throw console.error(":",e),e}},deleteAll:async()=>{try{const r=pf(qe.STUDENTS),e=await lw(r),t=Od(ct);e.forEach(i=>{t.delete(i.ref)}),await t.commit()}catch(r){throw console.error(":",r),r}}},el={subscribe:r=>{if(!Jt)return console.error(" ID "),r({}),()=>{};const e=Ir(qe.SETTINGS,"user");return Wi(e,t=>{t.exists()?r(t.data()):r({})},t=>{console.error(":",t),r({})})},save:async r=>{try{const e=Ir(qe.SETTINGS,"user");await nr(e,{...r,updatedAt:ft()},{merge:!0})}catch(e){throw console.error(":",e),e}}},al={subscribe:r=>{if(!Jt)return console.error(" ID "),r([]),()=>{};const e=pf(qe.TEMPLATES);return Wi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,g,y,v;return(((g=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:g.call(h))||0)-(((v=(y=o.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)}),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=Ir(qe.TEMPLATES,e);return await nr(t,{...r,createdAt:ft(),usageCount:0}),e}catch(e){throw console.error(":",e),e}},delete:async r=>{try{const e=Ir(qe.TEMPLATES,r.toString());await Rl(e)}catch(e){throw console.error(":",e),e}},incrementUsage:async r=>{try{const e=Ir(qe.TEMPLATES,r.toString()),t=await cf(e);t.exists()&&await nr(e,{usageCount:(t.data().usageCount||0)+1,updatedAt:ft()},{merge:!0})}catch(e){console.error(":",e)}}},ns={subscribe:r=>{const e=Vi(ct,qe.CLASSES);return Wi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,g,y,v;return(((g=(h=o.createdAt)==null?void 0:h.toMillis)==null?void 0:g.call(h))||0)-(((v=(y=l.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)}),r(i)},t=>{console.error(":",t)})},add:async r=>{try{const e=Date.now().toString(),t=pn(ct,qe.CLASSES,e);return await nr(t,{...r,createdAt:ft(),updatedAt:ft()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=pn(ct,qe.CLASSES,r.toString());await nr(t,{...e,updatedAt:ft()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=pn(ct,qe.CLASSES,r.toString());await Rl(e)}catch(e){throw console.error(":",e),e}}},ac={subscribe:r=>{const e=Vi(ct,qe.SCHOOLS);return Wi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>(o.name||"").localeCompare(l.name||"","zh-TW")),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=pn(ct,qe.SCHOOLS,e);return await nr(t,{...r,createdAt:ft(),updatedAt:ft()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=pn(ct,qe.SCHOOLS,r.toString());await nr(t,{...e,updatedAt:ft()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=pn(ct,qe.SCHOOLS,r.toString());await Rl(e)}catch(e){throw console.error(":",e),e}}},mf={subscribe:(r,e)=>{if(!Jt)return console.error(" ID "),e([]),()=>{};const t=Vi(ct,qe.USERS,Jt,qe.STUDENTS,r.toString(),"history");return Wi(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),o.sort((l,h)=>{var g,y,v,w;return(((y=(g=h.createdAt)==null?void 0:g.toMillis)==null?void 0:y.call(g))||0)-(((w=(v=l.createdAt)==null?void 0:v.toMillis)==null?void 0:w.call(v))||0)}),e(o)},i=>{console.error(":",i),e([])})},add:async(r,e,t=[])=>{if(!Jt)throw new Error(" ID ");try{const i=Vi(ct,qe.USERS,Jt,qe.STUDENTS,r.toString(),"history");await rI(i,{comment:e,styles:t,createdAt:ft()})}catch(i){throw console.error(":",i),i}},getAll:async r=>{if(!Jt)return console.error(" ID "),[];try{const e=Vi(ct,qe.USERS,Jt,qe.STUDENTS,r.toString(),"history"),t=await lw(e),i=[];return t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,g,y,v;return(((g=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:g.call(h))||0)-(((v=(y=o.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)})}catch(e){return console.error(":",e),[]}},delete:async(r,e)=>{if(!Jt)throw new Error(" ID ");try{const t=pn(ct,qe.USERS,Jt,qe.STUDENTS,r.toString(),"history",e);await Rl(t)}catch(t){throw console.error(":",t),t}}},lA="cagooo@gmail.com",jo={USERS:"users"},Et={ADMIN:"admin",TEACHER:"teacher",PENDING:"pending"},gf={getCurrentUser:()=>Mo.currentUser,onAuthStateChange:r=>WI(Mo,async e=>{if(e){const t=await rs.getOrCreate(e);r({...e,...t})}else r(null)}),signInWithGoogle:async()=>{try{const e=(await fS(Mo,zw)).user;return await rs.getOrCreate(e),{success:!0,user:e}}catch(r){return console.error("Google :",r),{success:!1,error:r.message}}},signOut:async()=>{try{return await KI(Mo),{success:!0}}catch(r){return console.error(":",r),{success:!1,error:r.message}}}},rs={getOrCreate:async r=>{const e=pn(ct,jo.USERS,r.uid),t=await cf(e);if(t.exists())return await nr(e,{lastLoginAt:ft()},{merge:!0}),{id:t.id,...t.data()};const i=r.email===lA,o={uid:r.uid,email:r.email,displayName:r.displayName||"",photoURL:r.photoURL||null,role:i?Et.ADMIN:Et.PENDING,assignedClasses:[],createdAt:ft(),lastLoginAt:ft(),approvedAt:i?ft():null,approvedBy:i?"system":null};return await nr(e,o),{id:r.uid,...o}},get:async r=>{const e=pn(ct,jo.USERS,r),t=await cf(e);return t.exists()?{id:t.id,...t.data()}:null},subscribeAll:r=>{const e=Vi(ct,jo.USERS),t=Z2(e,eI("createdAt","desc"));return Wi(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),r(o)},i=>{console.error(":",i)})},approve:async(r,e=[],t=null)=>{var i;try{const o=pn(ct,jo.USERS,r),l={role:Et.TEACHER,assignedClasses:e,approvedAt:ft(),approvedBy:((i=Mo.currentUser)==null?void 0:i.uid)||"unknown"};return t&&(l.schoolId=t),await Vd(o,l),{success:!0}}catch(o){return console.error(":",o),{success:!1,error:o.message}}},updateAssignedClasses:async(r,e,t=null)=>{try{const i=pn(ct,jo.USERS,r),o={assignedClasses:e,updatedAt:ft()};return t!==void 0&&(o.schoolId=t),await Vd(i,o),{success:!0}}catch(i){return console.error(":",i),{success:!1,error:i.message}}},reject:async r=>{var e;try{const t=pn(ct,jo.USERS,r);return await Vd(t,{role:Et.PENDING,assignedClasses:[],rejectedAt:ft(),rejectedBy:((e=Mo.currentUser)==null?void 0:e.uid)||"unknown"}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},isAdmin:r=>(r==null?void 0:r.role)===Et.ADMIN,isApproved:r=>(r==null?void 0:r.role)===Et.ADMIN||(r==null?void 0:r.role)===Et.TEACHER},uA=r=>{const[e,t]=J.useState([]),[i,o]=J.useState(new Set),[l,h]=J.useState(!0),[g,y]=J.useState(!1);J.useEffect(()=>{if(!r){t([]),h(!1);return}aA(r),h(!0);const H=Jr.subscribe(oe=>{const se=oe.map(C=>({...C,id:parseInt(C.id)||C.id,selectedTags:C.selectedTags||[],manualTraits:C.manualTraits||"",comment:C.comment||""}));t(se),h(!1)});return()=>H()},[r]);const v=J.useCallback(async H=>{const oe=H.split(`
`).map(C=>C.trim()).filter(C=>C!=="");if(oe.length===0)return[];const se=oe.map((C,T)=>({id:Date.now()+T,name:C,selectedTags:[],manualTraits:"",comment:""}));y(!0);try{await Jr.addBatch(se)}catch(C){console.error(":",C)}return y(!1),se},[]),w=J.useCallback(async(H,oe,se)=>{t(C=>C.map(T=>T.id===H?{...T,[oe]:se}:T));try{const C=e.find(T=>T.id===H);C&&await Jr.update(H,{...C,[oe]:se})}catch(C){console.error(":",C)}},[e]),E=J.useCallback(async H=>{t(oe=>oe.filter(se=>se.id!==H)),o(oe=>{const se=new Set(oe);return se.delete(H),se});try{await Jr.delete(H)}catch(oe){console.error(":",oe)}},[]),S=J.useCallback(async()=>{const H=Array.from(i);t(oe=>oe.filter(se=>!i.has(se.id))),o(new Set);try{await Jr.deleteBatch(H)}catch(oe){console.error(":",oe)}},[i]),O=J.useCallback(async()=>{t([]),o(new Set);try{await Jr.deleteAll()}catch(H){console.error(":",H)}},[]),q=J.useCallback(H=>{o(oe=>{const se=new Set(oe);return se.has(H)?se.delete(H):se.add(H),se})},[]),$=J.useCallback(()=>{if(i.size===e.length&&e.length>0)o(new Set);else{const H=new Set(e.map(oe=>oe.id));o(H)}},[i.size,e]),U=J.useCallback(async(H,oe)=>{t(se=>se.map(C=>H.includes(C.id)?C.selectedTags.includes(oe)?C:{...C,selectedTags:[...C.selectedTags,oe]}:C));try{for(const se of H){const C=e.find(T=>T.id===se);C&&!C.selectedTags.includes(oe)&&await Jr.update(se,{selectedTags:[...C.selectedTags,oe]})}}catch(se){console.error(":",se)}},[e]),K=J.useCallback(async(H,oe)=>{t(se=>se.map(C=>C.id===H?{...C,selectedTags:C.selectedTags.filter(T=>T!==oe)}:C));try{const se=e.find(C=>C.id===H);se&&await Jr.update(H,{selectedTags:se.selectedTags.filter(C=>C!==oe)})}catch(se){console.error(":",se)}},[e]),ne=J.useCallback(H=>{t(oe=>typeof H=="function"?H(oe):H)},[]),ee=J.useCallback(async(H,oe)=>{try{await Jr.update(H,{comment:oe})}catch(se){console.error(":",se)}},[]);return{students:e,setStudents:ne,selectedIds:i,isLoading:l,isSyncing:g,generateStudents:v,updateStudent:w,deleteStudent:E,deleteSelected:S,resetStudents:O,toggleSelection:q,toggleAllSelection:$,addTagToStudents:U,removeTag:K,syncComment:ee}};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bw=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=J.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...g},y)=>J.createElement("svg",{ref:y,...hA,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:Bw("lucide",o),...g},[...h.map(([v,w])=>J.createElement(v,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(r,e)=>{const t=J.forwardRef(({className:i,...o},l)=>J.createElement(dA,{ref:l,iconNode:e,className:Bw(`lucide-${cA(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=ze("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=ze("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=ze("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=ze("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=ze("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=ze("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=ze("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ze("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),DA=({isSidebarOpen:r,setIsSidebarOpen:e,onOpenSettings:t,onOpenTemplates:i,onOpenClasses:o,onOpenAdmin:l,onLogout:h,hasApiKey:g,templateCount:y=0,currentClassName:v="",currentUser:w,isAdmin:E})=>f.jsxs("header",{className:"bg-[#FFF9E6] border-b-4 border-[#2D3436] h-16 sm:h-20 flex items-center justify-between px-3 sm:px-6 shrink-0 z-20 sticky top-0 shadow-[0_4px_0_#2D3436]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[f.jsx("div",{className:"bg-[#FECA57] text-[#2D3436] p-2 sm:p-3 border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] transform rotate-[-2deg] rounded-lg",children:f.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-lg sm:text-2xl font-black text-[#2D3436] tracking-wide",children:[f.jsxs("span",{className:"hidden sm:inline relative",children:[f.jsx("span",{className:"relative z-10",children:""}),f.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]}),f.jsx("span",{className:"hidden sm:inline ml-1",children:""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsxs("button",{onClick:o,className:"text-xs font-bold text-[#636E72] hover:text-[#A29BFE] transition-colors flex items-center gap-1 mt-0.5",children:[f.jsx(vl,{size:12}),v,f.jsx("span",{className:"text-[10px]",children:""})]})]})]}),f.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[E&&f.jsxs("button",{onClick:l,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#FF6B9D] text-white flex items-center gap-1 text-sm",title:"",children:[f.jsx(qw,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:""})]}),f.jsxs("button",{onClick:i,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#A29BFE] text-white flex items-center gap-1 text-sm relative",title:"",children:[f.jsx(Qc,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:""}),y>0&&f.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[#2D3436] text-white text-xs font-bold rounded-full flex items-center justify-center",children:y>9?"9+":y})]}),f.jsxs("button",{onClick:t,className:`btn-pop p-2 sm:px-3 sm:py-2 flex items-center gap-1 text-sm
            ${g?"bg-[#1DD1A1] text-white":"bg-[#FF6B6B] text-white animate-pulse"}`,title:g?"API Key ":" API Key",children:[f.jsx(NA,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:g?"":""})]}),f.jsxs("button",{onClick:()=>e(!r),className:`btn-pop px-3 sm:px-4 py-2 flex items-center gap-1 sm:gap-2 text-sm sm:text-base
            ${r?"bg-[#FF6B9D] text-white":"bg-[#54A0FF] text-white"}`,children:[r?f.jsx(er,{size:18}):f.jsx(TA,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:r?"":""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsxs("div",{className:"relative group",children:[w!=null&&w.photoURL?f.jsx("img",{src:w.photoURL,alt:w.displayName,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 border-[#2D3436] cursor-pointer hover:ring-2 hover:ring-[#FECA57] transition-all"}):f.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center cursor-pointer",children:f.jsx("span",{className:"text-lg",children:""})}),f.jsxs("div",{className:"absolute right-0 top-12 bg-white border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] p-3 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[f.jsx("div",{className:"text-sm font-bold text-[#2D3436] truncate",children:w==null?void 0:w.displayName}),f.jsx("div",{className:"text-xs text-[#636E72] truncate",children:w==null?void 0:w.email}),(w==null?void 0:w.schoolName)&&f.jsx("div",{className:"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]",children:f.jsxs("div",{className:"text-xs text-[#636E72] flex items-center gap-1",children:[" ",f.jsx("span",{className:"font-bold text-[#A29BFE]",children:w.schoolName})]})}),(w==null?void 0:w.assignedClassNames)&&w.assignedClassNames.length>0&&f.jsx("div",{className:`${w!=null&&w.schoolName?"mt-1":"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]"}`,children:f.jsxs("div",{className:"text-xs text-[#636E72] flex items-start gap-1",children:[f.jsx(vl,{size:12,className:"mt-0.5 shrink-0"}),f.jsx("span",{className:"font-bold text-[#54A0FF]",children:w.assignedClassNames.join("")})]})}),f.jsxs("button",{onClick:h,className:"w-full btn-pop px-3 py-2 bg-[#636E72] text-white text-xs font-bold flex items-center justify-center gap-2 mt-3",children:[f.jsx(EA,{size:14}),""]})]})]})]})]}),jA=()=>f.jsx("footer",{className:"bg-[#FECA57] text-[#2D3436] text-xs sm:text-sm py-3 sm:py-4 text-center border-t-4 border-[#2D3436] shrink-0 font-bold",children:f.jsxs("p",{className:"flex items-center justify-center gap-2",children:[f.jsx("span",{children:""}),f.jsx("span",{children:" "}),f.jsx("span",{children:""})]})}),VA=({dialog:r,closeDialog:e})=>r.isOpen?f.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-sm overflow-hidden animate-in",children:[f.jsx("div",{className:"p-4 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436]",children:f.jsxs("h3",{className:"font-black text-lg sm:text-xl text-white flex items-center gap-2",children:[r.type==="confirm"?f.jsx(RA,{size:24}):f.jsx(wA,{size:24}),r.title]})}),f.jsx("div",{className:"p-4 sm:p-6 bg-[#FFFDF5] text-[#2D3436] font-bold text-base sm:text-lg",children:r.message}),f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFF9E6] flex justify-end gap-2 sm:gap-3 border-t-2 border-dashed border-[#E8DCC8]",children:r.type==="confirm"?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-white text-[#2D3436] text-sm sm:text-base",children:" "}),f.jsx("button",{onClick:r.onConfirm,className:"btn-pop px-4 sm:px-6 py-2 bg-[#FF6B6B] text-white text-sm sm:text-base",children:" "})]}):f.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-[#1DD1A1] text-white text-sm sm:text-base",children:" "})})]})}):null,FA=({progress:r})=>{const e=r.total>0?r.current/r.total*100:0;return f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#2D3436]/70 backdrop-blur-md p-4",children:f.jsxs("div",{className:"card-pop w-[95%] sm:w-[90%] max-w-2xl flex flex-col items-center justify-center p-6 sm:p-10 text-center animate-in bg-[#FFF9E6]",children:[f.jsx("div",{className:"mb-4 sm:mb-6 text-6xl sm:text-8xl animate-bounce-soft",children:""}),f.jsxs("h2",{className:"text-2xl sm:text-4xl md:text-5xl font-black text-[#2D3436] mb-4 sm:mb-6",children:[f.jsxs("span",{className:"relative inline-block",children:["",f.jsx("span",{className:"absolute bottom-1 left-0 right-0 h-3 bg-[#FECA57] -z-10 transform rotate-1"})]}),f.jsx("span",{className:"animate-pulse",children:"..."})]}),f.jsx("div",{className:"w-full max-w-md bg-white border-3 border-[#2D3436] h-8 sm:h-10 mb-3 sm:mb-4 overflow-hidden rounded-full shadow-[4px_4px_0_#2D3436]",children:f.jsx("div",{className:"h-full transition-all duration-300 ease-out bg-gradient-to-r from-[#FF6B9D] via-[#FECA57] to-[#1DD1A1]",style:{width:`${e}%`}})}),f.jsxs("p",{className:"text-lg sm:text-2xl text-[#2D3436] font-bold mb-4 sm:mb-6",children:[" ",r.current," / ",r.total," "]}),f.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-[#FF6B9D] font-black",children:" "})]})})},OA=({isOpen:r,onClose:e,globalStyles:t,toggleGlobalStyle:i})=>{if(!r)return null;const o=["#FF6B9D","#FF9F43","#FECA57","#1DD1A1","#54A0FF","#A29BFE","#FF6B6B","#FF6B9D","#FF9F43","#FECA57","#1DD1A1","#54A0FF"];return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-3xl max-h-[95vh] sm:max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#A29BFE] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 sm:gap-3 text-lg sm:text-2xl",children:[f.jsx("span",{className:"text-2xl",children:""}),f.jsx("span",{className:"hidden sm:inline",children:""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsxs("div",{className:"p-3 sm:p-6 overflow-y-auto flex-1 mobile-scroll-hide",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 sm:p-3 bg-[#FECA57] border-2 border-[#2D3436] rounded-lg text-sm sm:text-base font-bold text-[#2D3436]",children:[f.jsx("span",{className:"text-xl",children:""})," 2 "]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:vf.map((l,h)=>{const g=t.includes(l.id),y=!g&&t.length>=2,v=o[h%o.length];return f.jsx("div",{onClick:()=>!y&&i(l.id),className:`
                    p-3 sm:p-4 cursor-pointer transition-all border-3 border-[#2D3436] rounded-lg
                    ${g?"shadow-[4px_4px_0_#2D3436] transform -translate-y-1":"shadow-[2px_2px_0_#2D3436]"}
                    ${y?"opacity-50 cursor-not-allowed":"hover:-translate-y-1 hover:shadow-[4px_4px_0_#2D3436]"}
                  `,style:{backgroundColor:g?v:"#FFFDF5"},children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:`w-6 h-6 sm:w-7 sm:h-7 border-2 border-[#2D3436] rounded flex items-center justify-center shrink-0
                      ${g?"bg-[#2D3436] text-white":"bg-white"}`,children:g&&f.jsx("span",{className:"text-sm",children:""})}),f.jsxs("div",{children:[f.jsx("h4",{className:`font-black text-base sm:text-lg ${g?"text-white":"text-[#2D3436]"}`,children:l.name}),f.jsx("p",{className:`text-xs sm:text-sm mt-1 leading-relaxed ${g?"text-white/90":"text-[#636E72]"}`,children:l.desc})]})]})},l.id)})})]}),f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FFF9E6] flex justify-between items-center border-t-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("span",{className:"text-sm sm:text-lg font-bold text-[#2D3436]",children:[" ",t.length," / 2  "]}),f.jsx("button",{onClick:e,className:"btn-pop bg-[#1DD1A1] text-white px-6 sm:px-8 py-2 sm:py-3 text-sm sm:text-base",children:" "})]})]})})},LA=({rawInput:r,setRawInput:e,numberCount:t,setNumberCount:i,onGenerateStudents:o,onGenerateNumbers:l,onResetList:h,isGenerating:g})=>f.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 p-3 sm:p-4 bg-[#FF9F43] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[-0.5deg]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl mb-1",children:[f.jsx("span",{className:"text-2xl",children:""}),"1. "]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[f.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[f.jsx("textarea",{className:"flex-1 min-h-[100px] sm:min-h-[120px] p-3 sm:p-4 border-3 border-[#2D3436] rounded-lg outline-none text-sm sm:text-base resize-none font-medium placeholder:text-[#2D3436]/40 text-[#2D3436] leading-relaxed bg-white shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1)]",placeholder:`...


`,value:r,onChange:y=>e(y.target.value),disabled:g}),f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 bg-white p-2 sm:p-3 border-2 border-[#2D3436] rounded-lg",children:[f.jsxs("span",{className:"text-[#2D3436] font-bold text-xs sm:text-sm flex items-center gap-1",children:[f.jsx(vA,{size:14})," "]}),f.jsx("input",{type:"number",min:"1",max:"100",value:t,onChange:y=>i(Number(y.target.value)),className:"w-14 sm:w-16 text-center border-2 border-[#2D3436] text-[#2D3436] font-bold text-xs sm:text-sm py-1.5 outline-none rounded"}),f.jsx("span",{className:"text-[#2D3436] text-xs sm:text-sm font-bold",children:""}),f.jsx("button",{onClick:l,className:"btn-pop ml-auto bg-[#FECA57] text-[#2D3436] px-3 py-1 text-xs sm:text-sm",children:" "})]})]}),f.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 sm:gap-3 sm:w-24",children:[f.jsxs("button",{onClick:o,disabled:g,className:"flex-1 btn-pop bg-[#1DD1A1] text-white font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx($w,{size:20}),f.jsx("span",{children:""})]}),f.jsxs("button",{onClick:h,disabled:g,className:"flex-1 btn-pop bg-white text-[#FF6B6B] font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(AA,{size:18}),f.jsx("span",{children:""})]})]})]})]}),MA=({students:r,selectedIds:e,isGenerating:t,extraSettings:i,setExtraSettings:o,onGenerateSelected:l,onGenerateAll:h,onDownload:g,onDeleteSelected:y,onResetList:v})=>f.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 sm:gap-4 p-3 sm:p-4 bg-[#54A0FF] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[0.5deg]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl",children:[f.jsx("span",{className:"text-2xl",children:""}),"2. AI "]}),f.jsxs("div",{className:"bg-white/90 border-2 border-[#2D3436] rounded-lg p-2 sm:p-3 flex flex-col gap-2 sm:gap-3",children:[f.jsx("div",{className:"flex items-center justify-between text-xs sm:text-sm font-bold text-[#2D3436] border-b-2 border-dashed border-[#E8DCC8] pb-2",children:f.jsx("span",{className:"flex items-center gap-1",children:" "})}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[f.jsx("div",{className:"flex bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg overflow-hidden",children:[{val:"normal",label:"",emoji:""},{val:"casual",label:"",emoji:""},{val:"formal",label:"",emoji:""}].map(w=>f.jsxs("button",{onClick:()=>o(E=>({...E,tone:w.val})),className:`px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-bold transition-colors 
                  ${i.tone===w.val?"bg-[#FF6B9D] text-white":"text-[#2D3436] hover:bg-[#FECA57]"}`,children:[f.jsx("span",{className:"hidden sm:inline",children:w.emoji})," ",w.label]},w.val))}),f.jsxs("div",{className:"flex items-center gap-2 bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg px-2 sm:px-3 py-1.5 ml-auto",children:[f.jsx("span",{className:"text-xs sm:text-sm font-bold text-[#2D3436]",children:" "}),f.jsx("input",{type:"number",min:"20",max:"500",step:"10",value:i.wordCount,onChange:w=>o(E=>({...E,wordCount:Number(w.target.value)})),className:"w-12 text-xs sm:text-sm font-bold text-[#2D3436] text-center outline-none bg-white border-2 border-[#2D3436] rounded"})]})]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[f.jsxs("button",{onClick:l,disabled:e.size===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2 
            ${e.size>0&&!t?"bg-white text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[f.jsx(kA,{size:18}),t?"...":` (${e.size})`]}),f.jsxs("button",{onClick:h,disabled:r.length===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2
            ${r.length>0&&!t?"bg-[#FECA57] text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[f.jsx("span",{className:"text-xl",children:""}),t?"AI ...":""]})]}),f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs sm:text-sm pt-2 border-t-2 border-dashed border-white/50",children:[f.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[f.jsxs("button",{onClick:()=>g("txt"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[f.jsx(yf,{size:14})," TXT"]}),f.jsxs("button",{onClick:()=>g("csv"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[f.jsx(yf,{size:14})," CSV"]})]}),f.jsxs("div",{className:"flex gap-2",children:[e.size>0&&f.jsxs("button",{onClick:y,disabled:t,className:"btn-pop bg-[#FF6B6B] text-white px-2 sm:px-3 py-1 flex items-center gap-1 text-xs sm:text-sm disabled:opacity-50",children:[f.jsx(aa,{size:12}),"  (",e.size,")"]}),f.jsx("button",{onClick:v,disabled:t||r.length===0,className:"text-white/80 hover:text-white font-bold transition-colors disabled:opacity-50",children:" "})]})]})]}),UA=({globalStyles:r,onOpenStyleModal:e,isGenerating:t})=>{const i={qualitative:"#FF6B9D",emotional:"#FF9F43",friendly:"#FECA57",humorous:"#1DD1A1",internal:"#54A0FF",philosophical:"#A29BFE",practical:"#FF6B6B",resonance:"#FF6B9D",blessing:"#FF9F43",scenario:"#FECA57",milestone:"#1DD1A1",journey:"#54A0FF"};return f.jsxs("div",{className:"mb-4 sm:mb-6 bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 shadow-[4px_4px_0_#2D3436]",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-[#2D3436] text-sm sm:text-base font-black",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsx("span",{children:""}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:r.length>0?r.map(o=>{var l;return f.jsx("span",{className:"px-3 py-1 border-2 border-[#2D3436] rounded-full text-xs sm:text-sm font-bold text-white shadow-[2px_2px_0_#2D3436]",style:{backgroundColor:i[o]||"#A29BFE"},children:(l=vf.find(h=>h.id===o))==null?void 0:l.name},o)}):f.jsx("span",{className:"text-[#636E72] font-medium text-xs sm:text-sm bg-[#E8DCC8] px-3 py-1 rounded-full",children:" (: )"})})]}),f.jsxs("button",{onClick:e,disabled:t,className:"btn-pop w-full sm:w-auto bg-[#A29BFE] text-white px-4 sm:px-6 py-2 text-xs sm:text-sm font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(IA,{size:14})," "]})]})},zA=({student:r,isSelected:e,isFocused:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:h,onOpenSidebar:g,onRemoveTag:y,onUpdateStudent:v,onDeleteStudent:w,onGenerateSingle:E,onSaveTemplate:S,onOpenHistory:O})=>{const q=["-1deg","0.5deg","-0.5deg","1deg","0deg"],$=q[r.id%q.length],U=o===r.id,K=ne=>ne<50?"text-[#FF6B6B]":ne>120?"text-[#FF9F43]":"text-[#1DD1A1]";return f.jsxs("div",{className:`bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg overflow-hidden shadow-[4px_4px_0_#2D3436] transition-all
        ${e?"ring-4 ring-[#FF6B9D]":""}
        ${t?"ring-4 ring-[#54A0FF]":""}
        ${U?"ring-4 ring-[#FECA57] animate-pulse":""}`,style:{transform:`rotate(${$})`},children:[f.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FECA57] border-b-2 border-[#2D3436]",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>l(r.id),disabled:i||U,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center
              ${e?"bg-[#FF6B9D] text-white":"bg-white"}`,children:e&&f.jsx("span",{className:"text-sm font-bold",children:""})}),f.jsxs("span",{className:"font-black text-[#2D3436] text-base",children:[" ",r.name]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("button",{onClick:()=>E(r.id),disabled:i||U,className:"btn-pop px-2 py-1 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50",children:[U?f.jsx(ll,{size:14,className:"animate-spin"}):f.jsx(f.Fragment,{children:""}),f.jsx("span",{className:"hidden sm:inline",children:U?"":""})]}),f.jsx("button",{onClick:()=>w(r.id),disabled:i||U,className:"text-[#2D3436]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30 p-1",children:f.jsx(aa,{size:18})})]})]}),f.jsxs("div",{className:"p-3 border-b-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{className:"text-xs font-bold text-[#636E72] mb-2",children:" "}),f.jsx("div",{onClick:()=>{h(r.id),g()},className:`p-2 border-2 border-dashed bg-white min-h-[50px] flex flex-col gap-2 cursor-pointer transition-colors rounded-lg
            ${t?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8]"}`,children:r.selectedTags.length>0?f.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.selectedTags.map((ne,ee)=>f.jsxs("span",{className:"tag-handwrite text-xs",children:[ne,f.jsx("button",{onClick:H=>{H.stopPropagation(),y(r.id,ne)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},ee))}):f.jsx("span",{className:"text-[#636E72]/50 text-xs",children:" ..."})}),f.jsx("input",{type:"text",value:r.manualTraits,onChange:ne=>v(r.id,"manualTraits",ne.target.value),placeholder:" ...",disabled:i||U,className:"w-full mt-2 p-2 text-sm font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40"})]}),f.jsxs("div",{className:"p-3 bg-[#FFF9E6]",children:[f.jsxs("div",{className:"text-xs font-bold text-[#636E72] mb-2 flex items-center justify-between",children:[f.jsx("span",{className:"flex items-center gap-1",children:" AI "}),f.jsxs("div",{className:"flex items-center gap-2",children:[O&&f.jsxs("button",{onClick:()=>O(r),className:"flex items-center gap-1 text-[#54A0FF] hover:text-[#2D3436] transition-colors",title:"",children:[f.jsx(Jo,{size:14}),f.jsx("span",{children:""})]}),r.comment&&!r.comment.includes("")&&!r.comment.includes("")&&f.jsxs("button",{onClick:()=>S(r),className:"flex items-center gap-1 text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors",title:"",children:[f.jsx(Qc,{size:14}),f.jsx("span",{children:""})]})]})]}),f.jsx("textarea",{value:r.comment,onChange:ne=>v(r.id,"comment",ne.target.value),placeholder:" AI ...",disabled:U,className:`w-full text-sm p-3 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[100px] leading-relaxed font-medium text-[#2D3436] rounded-lg
            ${U?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),r.comment&&f.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${K(r.comment.length)}`,children:[r.comment.length," "]})]})]})},BA=({students:r,selectedIds:e,focusedStudentId:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onToggleAllSelection:h,onFocusStudent:g,onOpenSidebar:y,onRemoveTag:v,onUpdateStudent:w,onDeleteStudent:E,onGenerateSingle:S,onSaveTemplate:O,onOpenHistory:q})=>{const $=typeof window<"u"&&window.innerWidth<768,U=K=>K<50?"text-[#FF6B6B]":K>120?"text-[#FF9F43]":"text-[#1DD1A1]";return $?f.jsx("div",{className:"space-y-4",children:r.length===0?f.jsxs("div",{className:"p-10 text-center font-bold text-lg bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436]",children:[f.jsx("span",{className:"text-4xl block mb-3",children:""}),f.jsx("span",{className:"text-[#636E72]",children:""})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex items-center justify-between bg-[#A29BFE] text-white border-3 border-[#2D3436] p-3 rounded-lg shadow-[3px_3px_0_#2D3436]",children:f.jsxs("button",{onClick:h,className:"flex items-center gap-2 font-bold text-sm",disabled:i,children:[f.jsx("span",{className:`w-5 h-5 border-2 border-white rounded flex items-center justify-center ${e.size===r.length&&r.length>0?"bg-white text-[#A29BFE]":""}`,children:e.size===r.length&&r.length>0&&f.jsx("span",{className:"text-xs",children:""})})," (",e.size,"/",r.length,")"]})}),r.map(K=>f.jsx(zA,{student:K,isSelected:e.has(K.id),isFocused:t===K.id,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:g,onOpenSidebar:y,onRemoveTag:v,onUpdateStudent:w,onDeleteStudent:E,onGenerateSingle:S,onSaveTemplate:O,onOpenHistory:q},K.id))]})}):f.jsx("div",{className:"card-pop overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left border-collapse min-w-[1000px]",children:[f.jsx("thead",{className:"bg-[#FF6B9D] text-white",children:f.jsxs("tr",{className:"text-base font-black",children:[f.jsx("th",{className:"p-4 lg:p-5 w-12 text-center border-r-2 border-[#2D3436]/20",children:f.jsx("button",{onClick:h,className:"w-6 h-6 border-2 border-white rounded flex items-center justify-center mx-auto bg-white/20 hover:bg-white/40 transition",disabled:i,children:e.size===r.length&&r.length>0&&f.jsx("span",{className:"text-sm",children:""})})}),f.jsx("th",{className:"p-4 lg:p-5 w-32 lg:w-40 border-r-2 border-[#2D3436]/20",children:" "}),f.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20 w-1/4",children:" "}),f.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20",children:" AI "}),f.jsx("th",{className:"p-4 lg:p-5 w-20 text-center",children:""})]})}),f.jsxs("tbody",{className:"bg-[#FFFDF5]",children:[r.length===0&&f.jsx("tr",{children:f.jsxs("td",{colSpan:"5",className:"p-16 lg:p-20 text-center font-bold text-xl text-[#636E72]",children:[f.jsx("span",{className:"text-5xl block mb-4",children:""}),""]})}),r.map(K=>{const ne=o===K.id;return f.jsxs("tr",{className:`border-t-2 border-dashed border-[#E8DCC8] hover:bg-[#FECA57]/20 transition-colors ${e.has(K.id)?"bg-[#FF6B9D]/10":""} ${ne?"bg-[#FECA57]/30":""}`,children:[f.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:f.jsx("button",{onClick:()=>l(K.id),disabled:i||ne,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center mx-auto transition ${e.has(K.id)?"bg-[#FF6B9D] text-white":"bg-white hover:bg-[#FECA57]"}`,children:e.has(K.id)&&f.jsx("span",{className:"text-sm font-bold",children:""})})}),f.jsxs("td",{className:"p-4 lg:p-5 align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{className:"font-black text-[#2D3436] text-base lg:text-lg mb-2",children:K.name}),f.jsx("button",{onClick:()=>S(K.id),disabled:i||ne,className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50 w-full justify-center",children:ne?f.jsxs(f.Fragment,{children:[f.jsx(ll,{size:14,className:"animate-spin"})," ..."]}):f.jsx(f.Fragment,{children:" "})})]}),f.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{onClick:()=>{g(K.id),y()},className:`p-3 border-2 border-dashed bg-white min-h-[80px] lg:min-h-[100px] flex flex-col gap-3 cursor-pointer transition-colors rounded-lg ${t===K.id?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8] hover:border-[#FF9F43]"}`,children:K.selectedTags.length>0?f.jsx("div",{className:"flex flex-wrap gap-2",children:K.selectedTags.map((ee,H)=>f.jsxs("span",{className:"tag-handwrite text-sm",children:[ee,f.jsx("button",{onClick:oe=>{oe.stopPropagation(),v(K.id,ee)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},H))}):f.jsx("span",{className:"text-[#636E72]/50 text-sm",children:" ..."})}),f.jsx("input",{type:"text",value:K.manualTraits,onChange:ee=>w(K.id,"manualTraits",ee.target.value),placeholder:" ...",disabled:i||ne,className:"w-full mt-3 p-3 text-sm lg:text-base font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40 transition-all"})]}),f.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs font-bold text-[#636E72]",children:""}),f.jsxs("div",{className:"flex items-center gap-2",children:[q&&f.jsxs("button",{onClick:()=>q(K),className:"flex items-center gap-1 text-xs text-[#54A0FF] hover:text-[#2D3436] transition-colors font-bold",title:"",children:[f.jsx(Jo,{size:12})," "]}),K.comment&&!K.comment.includes("")&&!K.comment.includes("")&&f.jsxs("button",{onClick:()=>O(K),className:"flex items-center gap-1 text-xs text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors font-bold",title:"",children:[f.jsx(Qc,{size:12})," "]})]})]}),f.jsx("textarea",{value:K.comment,onChange:ee=>w(K.id,"comment",ee.target.value),placeholder:" AI ...",disabled:ne,className:`w-full text-sm lg:text-base p-3 lg:p-4 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[180px] lg:min-h-[200px] leading-relaxed font-medium text-[#2D3436] rounded-lg transition-all ${ne?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),K.comment&&f.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${U(K.comment.length)}`,children:[K.comment.length," "]})]}),f.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8",children:f.jsx("button",{onClick:()=>E(K.id),disabled:i||ne,className:"text-[#636E72]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30",children:f.jsx(aa,{size:18})})})]},K.id)})]})]})})},$A=({isOpen:r,onClose:e,selectedIds:t,expandedCategories:i,onToggleCategory:o,onIdiomClick:l})=>{const[h,g]=J.useState(""),y={" ()":"#1DD1A1"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#FECA57"," ()":"#FF9F43"," ()":"#A29BFE"," ()":"#FF6B9D"," ()":"#1DD1A1"," ()":"#FECA57"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#A29BFE"," ()":"#FF9F43",:"#FF6B9D",:"#636E72"},v=$=>{try{return JSON.parse(localStorage.getItem("idiom_usage")||"{}")[$]||0}catch{return 0}},w=$=>{try{const U=JSON.parse(localStorage.getItem("idiom_usage")||"{}");U[$]=(U[$]||0)+1,localStorage.setItem("idiom_usage",JSON.stringify(U))}catch(U){console.error(":",U)}},E=$=>{w($),l($)},S=J.useMemo(()=>{if(!h.trim())return Id;const $=h.trim().toLowerCase(),U={};return Object.entries(Id).forEach(([K,ne])=>{const ee=ne.filter(H=>H.toLowerCase().includes($));ee.length>0&&(U[K]=ee)}),U},[h]),O=J.useMemo(()=>Object.values(Id).flat().map(K=>({idiom:K,count:v(K)})).filter(K=>K.count>0).sort((K,ne)=>ne.count-K.count).slice(0,12).map(K=>K.idiom),[r]),q=Object.values(S).reduce(($,U)=>$+U.length,0);return f.jsxs(f.Fragment,{children:[r&&f.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 backdrop-blur-[2px] transition-opacity",onClick:e}),f.jsxs("div",{className:`fixed top-0 right-0 bottom-0 bg-[#FFF9E6] border-l-4 border-[#2D3436] shadow-[-8px_0_0_#2D3436] transform transition-transform duration-300 ease-in-out flex flex-col z-50
          ${r?"translate-x-0":"translate-x-full"}
          w-full sm:w-[80%] md:w-[50%] lg:w-[35%] xl:w-[30%] max-w-[400px]`,children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#1DD1A1] border-b-3 border-[#2D3436] flex items-center justify-between shrink-0",children:[f.jsxs("h2",{className:"font-black text-white flex items-center gap-2 sm:gap-3 text-base sm:text-xl",children:[f.jsx("span",{className:"text-2xl",children:""})," "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsxs("div",{className:"p-3 sm:p-4 bg-white border-b-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("div",{className:"relative",children:[f.jsx(bA,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#636E72]"}),f.jsx("input",{type:"text",value:h,onChange:$=>g($.target.value),placeholder:" ...",className:"w-full pl-10 pr-4 py-2.5 border-2 border-[#2D3436] rounded-lg text-sm font-medium outline-none focus:border-[#1DD1A1] bg-[#FFFDF5]"}),h&&f.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#636E72] hover:text-[#FF6B6B]",children:""})]}),h&&f.jsxs("div",{className:"mt-2 text-xs text-[#636E72] font-bold",children:[" ",q," "]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 mobile-scroll-hide",children:[f.jsxs("div",{className:"text-sm font-bold text-[#2D3436] bg-[#FECA57] px-3 py-2 border-2 border-[#2D3436] rounded-lg inline-flex items-center gap-2 shadow-[2px_2px_0_#2D3436]",children:[f.jsx("span",{children:""})," "]}),t.size>0&&f.jsxs("div",{className:"bg-[#54A0FF] text-white p-3 sm:p-4 border-2 border-[#2D3436] text-xs sm:text-sm font-bold rounded-lg shadow-[3px_3px_0_#2D3436]",children:[f.jsx("span",{className:"block mb-1 text-white/80",children:" "})," ",f.jsx("strong",{children:t.size})," "]}),O.length>0&&!h&&f.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white bg-[#FF6B9D]",children:[f.jsx("span",{children:" "}),f.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:O.length})]}),f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:O.map(($,U)=>f.jsx("button",{onClick:()=>E($),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-[#FF6B9D] border-2 border-[#2D3436] text-white font-bold rounded-lg hover:bg-[#FF5291] transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5",children:$},`popular-${$}-${U}`))})]}),Object.entries(S).map(([$,U])=>{const K=y[$]||"#A29BFE";return f.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("button",{onClick:()=>o($),className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white transition-colors",style:{backgroundColor:K},children:[f.jsx("span",{children:$}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:U.length}),f.jsx("span",{className:"bg-white/20 rounded-full w-6 h-6 flex items-center justify-center",children:i[$]?"":""})]})]}),(i[$]||h)&&f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:U.map((ne,ee)=>f.jsx("button",{onClick:()=>E(ne),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-white border-2 border-[#2D3436] text-[#2D3436] font-bold rounded-lg hover:text-white transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5 hover:shadow-[3px_3px_0_#2D3436] active:translate-y-0 active:shadow-[1px_1px_0_#2D3436]",style:{"--hover-bg":K},onMouseEnter:H=>H.target.style.backgroundColor=K,onMouseLeave:H=>H.target.style.backgroundColor="white",children:h&&ne.includes(h)?f.jsx("span",{dangerouslySetInnerHTML:{__html:ne.replace(new RegExp(`(${h})`,"gi"),'<mark class="bg-[#FECA57] px-0.5 rounded">$1</mark>')}}):ne},`${ne}-${ee}`))})]},$)}),h&&Object.keys(S).length===0&&f.jsxs("div",{className:"text-center py-10",children:[f.jsx("div",{className:"text-4xl mb-3",children:""}),f.jsxs("p",{className:"text-[#636E72] font-bold",children:["",h,""]})]})]})]})]})},qA=()=>f.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-[#FFF9E6]",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),f.jsx("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:"..."}),f.jsx("p",{className:"text-[#636E72] font-medium",children:""}),f.jsxs("div",{className:"mt-4 flex justify-center gap-1",children:[f.jsx("span",{className:"w-3 h-3 bg-[#FF6B9D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("span",{className:"w-3 h-3 bg-[#FECA57] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("span",{className:"w-3 h-3 bg-[#1DD1A1] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),HA=({isOpen:r,onClose:e,currentUser:t})=>{const[i,o]=J.useState(""),[l,h]=J.useState(!1),[g,y]=J.useState(!1),[v,w]=J.useState(null),[E,S]=J.useState(""),[O,q]=J.useState(!0);J.useEffect(()=>{if(!r||!t)return;q(!0);const ee=el.subscribe(H=>{const oe=(H==null?void 0:H.apiKey)||"";S(oe),o(oe),q(!1)});return()=>ee()},[r,t]);const $=async()=>{if(i.trim()){y(!0);try{await el.save({apiKey:i.trim()}),S(i.trim()),w(null),localStorage.setItem("gemini_api_key",i.trim())}catch(ee){console.error(" API Key :",ee),alert("")}y(!1)}},U=async()=>{if(window.confirm(" API Key ")){y(!0);try{await el.save({apiKey:""}),o(""),S(""),w(null),localStorage.removeItem("gemini_api_key")}catch(ee){console.error(" API Key :",ee)}y(!1)}},K=async()=>{if(!i.trim()){w("error");return}h(!0),w(null);try{const ee=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${i.trim()}`;(await fetch(ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:""}]}]})})).ok?(w("success"),await el.save({apiKey:i.trim()}),S(i.trim()),localStorage.setItem("gemini_api_key",i.trim())):w("error")}catch(ee){console.error("API :",ee),w("error")}h(!1)},ne=ee=>!ee||ee.length<10?ee:ee.substring(0,6)+""+ee.substring(ee.length-4);return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF9F43] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(xA,{size:24}),"API Key "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"p-4 sm:p-6 space-y-4",children:O?f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsx(ll,{size:32,className:"animate-spin text-[#FF9F43]"})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-[#54A0FF]/20 border-2 border-[#54A0FF] rounded-lg p-3 text-sm text-[#2D3436]",children:[f.jsx("p",{className:"font-bold mb-1",children:"  API Key"}),f.jsx("p",{className:"text-[#636E72]",children:" Google AI Studio  Gemini API Key"}),f.jsxs("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-[#54A0FF] hover:underline font-bold mt-2",children:[f.jsx(_A,{size:14})," API Key"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"font-bold text-[#2D3436]",children:""}),E?f.jsxs("span",{className:"flex items-center gap-1 text-[#1DD1A1] font-bold",children:[f.jsx(f_,{size:16})," (",ne(E),")"]}):f.jsxs("span",{className:"flex items-center gap-1 text-[#FF6B6B] font-bold",children:[f.jsx(d_,{size:16}),""]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-[#2D3436] mb-2",children:" Gemini API Key"}),f.jsx("input",{type:"password",value:i,onChange:ee=>{o(ee.target.value),w(null)},placeholder:" API Key...",className:"w-full p-3 border-3 border-[#2D3436] rounded-lg text-[#2D3436] font-medium placeholder:text-[#636E72]/50 focus:border-[#FF9F43] outline-none"})]}),v&&f.jsx("div",{className:`p-3 rounded-lg border-2 flex items-center gap-2 text-sm font-bold
                                  ${v==="success"?"bg-[#1DD1A1]/20 border-[#1DD1A1] text-[#1DD1A1]":"bg-[#FF6B6B]/20 border-[#FF6B6B] text-[#FF6B6B]"}`,children:v==="success"?f.jsxs(f.Fragment,{children:[f.jsx(f_,{size:18}),"API Key  "]}):f.jsxs(f.Fragment,{children:[f.jsx(d_,{size:18})," API Key "]})}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[f.jsx("button",{onClick:K,disabled:!i.trim()||l||g,className:"btn-pop flex-1 py-3 bg-[#54A0FF] text-white font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:l?f.jsxs(f.Fragment,{children:[f.jsx(ll,{size:18,className:"animate-spin"}),"..."]}):f.jsx(f.Fragment,{children:" "})}),f.jsx("button",{onClick:$,disabled:!i.trim()||g,className:"btn-pop flex-1 py-3 bg-[#1DD1A1] text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:g?f.jsxs(f.Fragment,{children:[f.jsx(ll,{size:18,className:"animate-spin"}),"..."]}):f.jsx(f.Fragment,{children:" "})})]}),E&&f.jsx("button",{onClick:U,disabled:g,className:"w-full text-center text-sm text-[#FF6B6B] hover:underline font-bold disabled:opacity-50",children:"  API Key"})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center flex items-center justify-center gap-1",children:[f.jsx(gA,{size:14}),"API Key "]})]})}):null},WA=({isOpen:r,onClose:e,onApplyTemplate:t})=>{const[i,o]=J.useState([]),[l,h]=J.useState(!0);J.useEffect(()=>{if(!r)return;h(!0);const w=al.subscribe(E=>{o(E),h(!1)});return()=>w()},[r]);const g=async w=>{try{await al.delete(w)}catch(E){console.error(":",E)}},y=async w=>{try{await al.incrementUsage(w.id),t(w.content),e()}catch(E){console.error(":",E)}},v=async w=>{try{await navigator.clipboard.writeText(w)}catch(E){console.error(":",E)}};return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-2xl max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(Qc,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:l?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):i.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("p",{className:"text-lg font-bold text-[#636E72]",children:""}),f.jsx("p",{className:"text-sm text-[#636E72]/70 mt-2",children:"   "})]}):f.jsx("div",{className:"space-y-4",children:i.map(w=>f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"p-3 bg-[#FECA57] border-b-2 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-bold text-[#2D3436]",children:w.studentName||""}),w.tags&&w.tags.length>0&&f.jsxs("div",{className:"flex gap-1 flex-wrap",children:[w.tags.slice(0,3).map((E,S)=>f.jsx("span",{className:"px-2 py-0.5 bg-white text-[#2D3436] text-xs rounded-full border border-[#2D3436]",children:E},S)),w.tags.length>3&&f.jsxs("span",{className:"text-xs text-[#2D3436]",children:["+",w.tags.length-3]})]})]}),f.jsxs("span",{className:"text-xs text-[#2D3436]/70",children:[" ",w.usageCount||0," "]})]}),f.jsx("div",{className:"p-3 text-sm text-[#2D3436] leading-relaxed max-h-[120px] overflow-y-auto",children:w.content}),f.jsxs("div",{className:"p-2 bg-[#FFF9E6] border-t border-dashed border-[#E8DCC8] flex items-center justify-end gap-2",children:[f.jsxs("button",{onClick:()=>v(w.content),className:"btn-pop px-3 py-1.5 bg-white text-[#2D3436] text-xs font-bold flex items-center gap-1",children:[f.jsx(yA,{size:12}),""]}),f.jsxs("button",{onClick:()=>y(w),className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(fA,{size:12}),""]}),f.jsxs("button",{onClick:()=>g(w.id),className:"btn-pop px-3 py-1.5 bg-[#FF6B6B] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(aa,{size:12}),""]})]})]},w.id))})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",i.length,"  | "]})]})}):null},KA=()=>{const[r,e]=J.useState(null),[t,i]=J.useState(!1);J.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const g=localStorage.getItem("pwa_install_dismissed");if(g&&Date.now()-parseInt(g)<1e3*60*60*24*7)return;const y=v=>{v.preventDefault(),e(v),i(!0)};return window.addEventListener("beforeinstallprompt",y),()=>window.removeEventListener("beforeinstallprompt",y)},[]);const o=async()=>{if(!r)return;r.prompt();const{outcome:h}=await r.userChoice;h==="accepted"&&i(!1),e(null)},l=()=>{i(!1),localStorage.setItem("pwa_install_dismissed",Date.now().toString())};return t?f.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-sm z-[100] animate-in",children:f.jsxs("div",{className:"bg-[#2D3436] text-white p-4 rounded-lg border-3 border-[#FECA57] shadow-[4px_4px_0_#FECA57] flex items-center gap-3",children:[f.jsx("div",{className:"text-3xl",children:""}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-black text-sm",children:""}),f.jsx("p",{className:"text-xs text-white/70 mt-0.5",children:""})]}),f.jsxs("button",{onClick:o,className:"btn-pop px-3 py-2 bg-[#FECA57] text-[#2D3436] text-xs font-bold flex items-center gap-1",children:[f.jsx(yf,{size:14}),""]}),f.jsx("button",{onClick:l,className:"text-white/50 hover:text-white p-1",children:f.jsx(er,{size:16})})]})}):null},GA=({isOpen:r,onClose:e,currentClassId:t,onSelectClass:i})=>{const[o,l]=J.useState([]),[h,g]=J.useState(!0),[y,v]=J.useState(!1),[w,E]=J.useState(null),[S,O]=J.useState(""),[q,$]=J.useState("");J.useEffect(()=>{if(!r)return;g(!0);const H=ns.subscribe(oe=>{l(oe),g(!1)});return()=>H()},[r]);const U=async()=>{if(S.trim())try{await ns.add({name:S.trim(),year:new Date().getFullYear()}),O(""),v(!1)}catch(H){console.error(":",H)}},K=async H=>{if(q.trim())try{await ns.update(H,{name:q.trim()}),E(null),$("")}catch(oe){console.error(":",oe)}},ne=async H=>{if(window.confirm(""))try{await ns.delete(H),t===H&&i(null)}catch(oe){console.error(":",oe)}},ee=H=>{i(H),e()};return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#A29BFE] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(vl,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:h?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>ee(null),className:`w-full p-4 border-2 border-[#2D3436] rounded-lg flex items-center justify-between transition-all shadow-[3px_3px_0_#2D3436]
                  ${t?"bg-white hover:bg-[#FECA57]/20":"bg-[#1DD1A1] text-white"}`,children:[f.jsxs("span",{className:"font-bold flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:""})," "]}),!t&&f.jsx(Hs,{size:20})]}),o.map(H=>f.jsx("div",{className:`p-4 border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] transition-all
                    ${t===H.id?"bg-[#54A0FF] text-white":"bg-white"}`,children:w===H.id?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:q,onChange:oe=>$(oe.target.value),className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg text-[#2D3436] font-bold",autoFocus:!0}),f.jsx("button",{onClick:()=>K(H.id),className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:f.jsx(Hs,{size:16})}),f.jsx("button",{onClick:()=>E(null),className:"btn-pop p-2 bg-[#636E72] text-white",children:f.jsx(er,{size:16})})]}):f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>ee(H.id),className:"flex-1 text-left font-bold flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:""})," ",H.name,t===H.id&&f.jsx(Hs,{size:18})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>{E(H.id),$(H.name)},className:"p-2 hover:text-[#54A0FF] transition-colors",children:f.jsx(SA,{size:16})}),f.jsx("button",{onClick:()=>ne(H.id),className:"p-2 hover:text-[#FF6B6B] transition-colors",children:f.jsx(aa,{size:16})})]})]})},H.id)),y?f.jsx("div",{className:"p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg bg-[#1DD1A1]/10",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:S,onChange:H=>O(H.target.value),placeholder:"...",className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg font-bold",autoFocus:!0,onKeyDown:H=>H.key==="Enter"&&U()}),f.jsx("button",{onClick:U,className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:f.jsx(Hs,{size:16})}),f.jsx("button",{onClick:()=>{v(!1),O("")},className:"btn-pop p-2 bg-[#636E72] text-white",children:f.jsx(er,{size:16})})]})}):f.jsxs("button",{onClick:()=>v(!0),className:"w-full p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg text-[#1DD1A1] font-bold flex items-center justify-center gap-2 hover:bg-[#1DD1A1]/10 transition-colors",children:[f.jsx($w,{size:20}),""]}),o.length===0&&!y&&f.jsxs("div",{className:"text-center py-8 text-[#636E72]",children:[f.jsx("div",{className:"text-4xl mb-3",children:""}),f.jsx("p",{className:"font-bold",children:""}),f.jsx("p",{className:"text-sm mt-1",children:""})]})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",o.length,"  | "]})]})}):null},QA=({isOpen:r,onClose:e,student:t,onRestore:i})=>{const[o,l]=J.useState([]),[h,g]=J.useState(!0);J.useEffect(()=>{if(!r||!t)return;g(!0);const E=mf.subscribe(t.id,S=>{l(S),g(!1)});return()=>E()},[r,t]);const y=E=>{i(E),e()},v=async E=>{if(window.confirm(""))try{await mf.delete(t.id,E)}catch(S){console.error(":",S)}},w=E=>E!=null&&E.toDate?E.toDate().toLocaleString("zh-TW",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return!r||!t?null:f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#54A0FF] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(Jo,{size:24}),t.name," "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:h?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):o.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("p",{className:"text-lg font-bold text-[#636E72]",children:""}),f.jsx("p",{className:"text-sm text-[#636E72]/70 mt-2",children:""})]}):f.jsx("div",{className:"space-y-3",children:o.map((E,S)=>{var O;return f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"px-3 py-2 bg-[#E8DCC8] border-b border-dashed border-[#2D3436]/20 flex items-center justify-between",children:[f.jsxs("span",{className:"text-xs font-bold text-[#636E72] flex items-center gap-1",children:[f.jsx(Jo,{size:12}),w(E.createdAt),S===0&&f.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#1DD1A1] text-white rounded-full text-[10px]",children:""})]}),f.jsxs("span",{className:"text-xs text-[#636E72]",children:[((O=E.comment)==null?void 0:O.length)||0," "]})]}),f.jsx("div",{className:"p-3 text-sm text-[#2D3436] leading-relaxed max-h-[120px] overflow-y-auto",children:E.comment}),f.jsxs("div",{className:"p-2 bg-[#FFF9E6] border-t border-dashed border-[#E8DCC8] flex items-center justify-end gap-2",children:[f.jsxs("button",{onClick:()=>y(E.comment),className:"btn-pop px-3 py-1.5 bg-[#54A0FF] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(CA,{size:12}),""]}),f.jsx("button",{onClick:()=>v(E.id),className:"btn-pop px-3 py-1.5 bg-[#FF6B6B] text-white text-xs font-bold flex items-center gap-1",children:f.jsx(aa,{size:12})})]})]},E.id)})})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",o.length,"  | "]})]})})},XA=({isOpen:r,onClose:e,currentUser:t})=>{const[i,o]=J.useState([]),[l,h]=J.useState([]),[g,y]=J.useState([]),[v,w]=J.useState(!0),[E,S]=J.useState(null),[O,q]=J.useState([]),[$,U]=J.useState(null);J.useEffect(()=>{if(!r)return;w(!0);const T=rs.subscribeAll(R=>{o(R),w(!1)}),N=ns.subscribe(R=>{h(R)}),P=ac.subscribe(R=>{y(R)});return()=>{T(),N(),P()}},[r]);const K=T=>{S(T),q(T.assignedClasses||[]),U(T.schoolId||null)},ne=T=>{q(N=>N.includes(T)?N.filter(P=>P!==T):[...N,T])},ee=async()=>{E&&(await rs.approve(E.id,O,$),S(null),q([]),U(null))},H=async()=>{E&&(await rs.updateAssignedClasses(E.id,O,$),S(null),q([]),U(null))},oe=async T=>{window.confirm("/")&&await rs.reject(T)},se=T=>{switch(T){case Et.ADMIN:return f.jsx("span",{className:"px-2 py-0.5 bg-[#FF6B9D] text-white text-xs font-bold rounded-full",children:""});case Et.TEACHER:return f.jsx("span",{className:"px-2 py-0.5 bg-[#1DD1A1] text-white text-xs font-bold rounded-full",children:""});default:return f.jsx("span",{className:"px-2 py-0.5 bg-[#FECA57] text-[#2D3436] text-xs font-bold rounded-full",children:""})}},C=T=>T!=null&&T.toDate?T.toDate().toLocaleDateString("zh-TW"):"-";return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-4xl max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(qw,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:v?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):E?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border-2 border-[#2D3436] rounded-lg",children:[E.photoURL?f.jsx("img",{src:E.photoURL,alt:"",className:"w-12 h-12 rounded-full border-2 border-[#2D3436]"}):f.jsx("div",{className:"w-12 h-12 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center",children:""}),f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-[#2D3436]",children:E.displayName}),f.jsx("div",{className:"text-sm text-[#636E72]",children:E.email})]}),se(E.role)]}),f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg p-4",children:[f.jsxs("h4",{className:"font-bold text-[#2D3436] mb-3 flex items-center gap-2",children:[f.jsx(pA,{size:18}),""]}),g.length===0?f.jsx(g_,{onAdd:async(T,N,P)=>{await ac.add({name:T,city:N,district:P})}}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(T=>f.jsxs("button",{onClick:()=>U($===T.id?null:T.id),className:`px-3 py-2 border-2 border-[#2D3436] rounded-lg font-bold text-sm transition-all
                                                      ${$===T.id?"bg-[#A29BFE] text-white shadow-[2px_2px_0_#2D3436]":"bg-white hover:bg-[#A29BFE]/20"}`,children:[$===T.id&&f.jsx(Hs,{size:14,className:"inline mr-1"})," ",T.name,T.city&&f.jsxs("span",{className:"text-xs opacity-70 ml-1",children:["(",T.city,")"]})]},T.id))}),f.jsx(g_,{compact:!0,onAdd:async(T,N,P)=>{await ac.add({name:T,city:N,district:P})}})]})]}),f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg p-4",children:[f.jsxs("h4",{className:"font-bold text-[#2D3436] mb-3 flex items-center gap-2",children:[f.jsx(vl,{size:18}),""]}),l.length===0?f.jsx(m_,{onAdd:async T=>{await ns.add({name:T})}}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(T=>f.jsxs("button",{onClick:()=>ne(T.id),className:`px-3 py-2 border-2 border-[#2D3436] rounded-lg font-bold text-sm transition-all
                          ${O.includes(T.id)?"bg-[#54A0FF] text-white shadow-[2px_2px_0_#2D3436]":"bg-white hover:bg-[#FECA57]/20"}`,children:[O.includes(T.id)&&f.jsx(Hs,{size:14,className:"inline mr-1"}),T.name]},T.id))}),f.jsx(m_,{compact:!0,onAdd:async T=>{await ns.add({name:T})}})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>{S(null),q([])},className:"btn-pop px-4 py-2 bg-[#636E72] text-white font-bold",children:""}),E.role===Et.PENDING?f.jsxs("button",{onClick:ee,className:"btn-pop px-4 py-2 bg-[#1DD1A1] text-white font-bold flex-1 flex items-center justify-center gap-2",children:[f.jsx(Hs,{size:18}),""]}):f.jsxs("button",{onClick:H,className:"btn-pop px-4 py-2 bg-[#54A0FF] text-white font-bold flex-1 flex items-center justify-center gap-2",children:[f.jsx(Hs,{size:18}),""]})]})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[f.jsxs("div",{className:"bg-[#FECA57] text-[#2D3436] p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===Et.PENDING).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]}),f.jsxs("div",{className:"bg-[#1DD1A1] text-white p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===Et.TEACHER).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]}),f.jsxs("div",{className:"bg-[#FF6B9D] text-white p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===Et.ADMIN).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]})]}),i.filter(T=>T.role===Et.PENDING).length>0&&f.jsxs("div",{className:"mb-4",children:[f.jsxs("h4",{className:"font-bold text-[#FECA57] mb-2 flex items-center gap-2",children:[f.jsx(Jo,{size:18})," (",i.filter(T=>T.role===Et.PENDING).length,")"]}),i.filter(T=>T.role===Et.PENDING).map(T=>f.jsx(p_,{user:T,onEdit:K,onReject:oe,getRoleBadge:se,formatTime:C,classes:l},T.id))]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-[#1DD1A1] mb-2 flex items-center gap-2",children:[f.jsx(PA,{size:18}),""]}),i.filter(T=>T.role!==Et.PENDING).map(T=>f.jsx(p_,{user:T,onEdit:K,onReject:oe,getRoleBadge:se,formatTime:C,classes:l,isCurrentUser:T.id===(t==null?void 0:t.uid)},T.id))]})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",i.length,"  | "]})]})}):null},p_=({user:r,onEdit:e,onReject:t,getRoleBadge:i,formatTime:o,classes:l,isCurrentUser:h})=>{const g=(r.assignedClasses||[]).map(y=>{var v;return(v=l.find(w=>w.id===y))==null?void 0:v.name}).filter(Boolean).join(", ");return f.jsxs("div",{className:`p-3 bg-white border-2 border-[#2D3436] rounded-lg mb-2 flex items-center justify-between
      ${h?"ring-2 ring-[#FF6B9D]":""}`,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[r.photoURL?f.jsx("img",{src:r.photoURL,alt:"",className:"w-10 h-10 rounded-full border-2 border-[#2D3436]"}):f.jsx("div",{className:"w-10 h-10 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center text-lg",children:""}),f.jsxs("div",{children:[f.jsxs("div",{className:"font-bold text-[#2D3436] text-sm flex items-center gap-2",children:[r.displayName,i(r.role),h&&f.jsx("span",{className:"text-xs text-[#636E72]",children:"()"})]}),f.jsx("div",{className:"text-xs text-[#636E72]",children:r.email}),g&&f.jsxs("div",{className:"text-xs text-[#54A0FF] flex items-center gap-1 mt-0.5",children:[f.jsx(vl,{size:10}),g]})]})]}),f.jsx("div",{className:"flex items-center gap-1",children:r.role!==Et.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>e(r),className:"btn-pop px-3 py-1.5 bg-[#54A0FF] text-white text-xs font-bold",children:r.role===Et.PENDING?"":""}),r.role===Et.TEACHER&&f.jsx("button",{onClick:()=>t(r.id),className:"btn-pop p-1.5 bg-[#FF6B6B] text-white",children:f.jsx(mA,{size:14})})]})})]})},m_=({onAdd:r,compact:e=!1})=>{const[t,i]=J.useState(""),[o,l]=J.useState(!1),h=async()=>{if(t.trim()){l(!0);try{await r(t.trim()),i("")}catch(y){console.error(":",y)}l(!1)}},g=y=>{y.key==="Enter"&&h()};return e?f.jsxs("div",{className:"flex gap-2 items-center pt-2 border-t border-dashed border-[#2D3436]/20",children:[f.jsx("input",{type:"text",value:t,onChange:y=>i(y.target.value),onKeyDown:g,placeholder:"...",className:"flex-1 px-3 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm",disabled:o}),f.jsx("button",{onClick:h,disabled:!t.trim()||o,className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold disabled:opacity-50",children:o?"...":"+ "})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-[#636E72]",children:""}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:t,onChange:y=>i(y.target.value),onKeyDown:g,placeholder:" ()",className:"flex-1 px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium",disabled:o}),f.jsx("button",{onClick:h,disabled:!t.trim()||o,className:"btn-pop px-4 py-2 bg-[#1DD1A1] text-white font-bold disabled:opacity-50 flex items-center gap-1",children:o?"...":f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"+"})," "]})})]})]})},g_=({onAdd:r,compact:e=!1})=>{const[t,i]=J.useState(""),[o,l]=J.useState(""),[h,g]=J.useState(!1),y=async()=>{if(t.trim()){g(!0);try{await r(t.trim(),o.trim()||null,null),i(""),l("")}catch(E){console.error(":",E)}g(!1)}},v=E=>{E.key==="Enter"&&y()},w=["","","","","","","","","","","","","","","","","","","","","",""];return e?f.jsxs("div",{className:"flex gap-2 items-center pt-2 border-t border-dashed border-[#2D3436]/20",children:[f.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"px-2 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm bg-white",disabled:h,children:[f.jsx("option",{value:"",children:""}),w.map(E=>f.jsx("option",{value:E,children:E},E))]}),f.jsx("input",{type:"text",value:t,onChange:E=>i(E.target.value),onKeyDown:v,placeholder:"...",className:"flex-1 px-3 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm",disabled:h}),f.jsx("button",{onClick:y,disabled:!t.trim()||h,className:"btn-pop px-3 py-1.5 bg-[#A29BFE] text-white text-xs font-bold disabled:opacity-50",children:h?"...":"+ "})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-[#636E72]",children:""}),f.jsxs("div",{className:"flex gap-2 flex-wrap",children:[f.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium bg-white",disabled:h,children:[f.jsx("option",{value:"",children:""}),w.map(E=>f.jsx("option",{value:E,children:E},E))]}),f.jsx("input",{type:"text",value:t,onChange:E=>i(E.target.value),onKeyDown:v,placeholder:" ()",className:"flex-1 min-w-[200px] px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium",disabled:h}),f.jsx("button",{onClick:y,disabled:!t.trim()||h,className:"btn-pop px-4 py-2 bg-[#A29BFE] text-white font-bold disabled:opacity-50 flex items-center gap-1",children:h?"...":f.jsxs(f.Fragment,{children:[f.jsx("span",{children:""})," "]})})]})]})},YA=({currentUser:r,onLogout:e,isAdmin:t})=>{const{dialog:i,closeDialog:o,showConfirm:l,showAlert:h}=l0(),[g,y]=J.useState(!1),{students:v,setStudents:w,selectedIds:E,isLoading:S,generateStudents:O,updateStudent:q,deleteStudent:$,deleteSelected:U,resetStudents:K,toggleSelection:ne,toggleAllSelection:ee,addTagToStudents:H,removeTag:oe,syncComment:se}=uA(r==null?void 0:r.uid),[C,T]=J.useState(`

`),[N,P]=J.useState(30),[R,V]=J.useState(!1),[b,He]=J.useState(!1),[Ze,Nt]=J.useState(null),[Xe,ie]=J.useState({current:0,total:0}),[me,ue]=J.useState(!1),[j,Q]=J.useState(["qualitative"]),[Ae,Ie]=J.useState(!1),[ke,Ne]=J.useState(!1),[Me,Pe]=J.useState(Fg()),[Be,jt]=J.useState({tone:"normal",wordCount:80}),[cs,hs]=J.useState(null),[rr,Dr]=J.useState(!1),[Ki,ds]=J.useState(0),[jr,fs]=J.useState(!1),[et,at]=J.useState(null),[mn,ps]=J.useState(""),[Gi,Qi]=J.useState([]),[sr,ms]=J.useState(!1),[On,Ln]=J.useState(null);J.useEffect(()=>{if(!r)return;const ye=el.subscribe(xe=>{xe!=null&&xe.apiKey&&(localStorage.setItem("gemini_api_key",xe.apiKey),Pe(!0))});return()=>ye()},[r]),J.useEffect(()=>{const ye=al.subscribe(xe=>{ds(xe.length)});return()=>ye()},[]),J.useEffect(()=>{const ye=ns.subscribe(xe=>{if(Qi(xe),et){const Ge=xe.find(_t=>_t.id===et);ps(Ge?Ge.name:"")}});return()=>ye()},[et]);const[Xi,Vr]=J.useState({" ()":!0," ()":!0});J.useEffect(()=>{const ye=()=>ue(window.innerWidth<768);return ye(),window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[]);const ir=()=>{C.trim()&&(O(C),T(""))},Yi=()=>{if(N<1)return;const ye=[];for(let Ge=1;Ge<=N;Ge++){const _t=Ge<10?`0${Ge}`:`${Ge}`;ye.push(`${_t}`)}const xe=ye.join(`
`);T(Ge=>Ge?`${Ge}
${xe}`:xe)},Mn=()=>{l("","",()=>{K(),o()})},gs=()=>{E.size!==0&&l("",` ${E.size} `,()=>{U(),o()})},oi=ye=>{let xe=[];if(E.size>0?xe=Array.from(E):Ze&&(xe=[Ze]),xe.length===0){h("");return}H(xe,ye)},gn=ye=>{Vr(xe=>({...xe,[ye]:!xe[ye]}))},ys=ye=>{Q(xe=>xe.includes(ye)?xe.filter(_t=>_t!==ye):xe.length>=2?xe:[...xe,ye])},Un=async(ye=!1)=>{He(!0);const xe=v.filter(_t=>ye?E.has(_t.id):!0),Ge=xe.length;if(Ge===0){He(!1);return}ie({current:0,total:Ge});for(let _t=0;_t<Ge;_t++){const Vt=xe[_t];w(yn=>yn.map(qt=>qt.id===Vt.id?{...qt,comment:""}:qt));const $t=[...Vt.selectedTags,Vt.manualTraits].filter(Boolean).join(""),ai=await Og(Vt.name,$t,j,Be);w(yn=>yn.map(qt=>qt.id===Vt.id?{...qt,comment:ai}:qt)),await se(Vt.id,ai),ie(yn=>({...yn,current:_t+1}))}He(!1),ie({current:0,total:0})},_s=ye=>{a0(v,ye)},zn=async ye=>{const xe=v.find(Vt=>Vt.id===ye);if(!xe)return;if(hs(ye),xe.comment&&!xe.comment.includes(""))try{await mf.add(ye,xe.comment,j)}catch(Vt){console.error(":",Vt)}const Ge=[...xe.selectedTags,xe.manualTraits].filter(Boolean).join(""),_t=await Og(xe.name,Ge,j,Be);w(Vt=>Vt.map($t=>$t.id===ye?{...$t,comment:_t}:$t)),await se(ye,_t),hs(null)},Bn=async ye=>{try{await al.add({content:ye.comment,studentName:ye.name,tags:ye.selectedTags,styles:j}),h(" ")}catch(xe){console.error(":",xe)}},it=ye=>{Ze&&(q(Ze,"comment",ye),se(Ze,ye))};return f.jsxs("div",{className:"min-h-screen text-[#2D3436] font-sans flex flex-col relative",children:[S&&f.jsx(qA,{}),f.jsx(VA,{dialog:i,closeDialog:o}),b&&f.jsx(FA,{progress:Xe}),f.jsx(OA,{isOpen:Ae,onClose:()=>Ie(!1),globalStyles:j,toggleGlobalStyle:ys}),f.jsx(HA,{isOpen:ke,onClose:()=>{Ne(!1),Pe(Fg())},currentUser:r}),f.jsx(WA,{isOpen:rr,onClose:()=>Dr(!1),onApplyTemplate:it}),f.jsx(GA,{isOpen:jr,onClose:()=>fs(!1),currentClassId:et,onSelectClass:ye=>{at(ye),ye||ps("")}}),f.jsx(QA,{isOpen:sr,onClose:()=>{ms(!1),Ln(null)},student:On,onRestore:ye=>{On&&(q(On.id,"comment",ye),se(On.id,ye))}}),f.jsx(XA,{isOpen:g,onClose:()=>y(!1),currentUser:r}),f.jsx(DA,{isSidebarOpen:R,setIsSidebarOpen:V,onOpenSettings:()=>Ne(!0),onOpenTemplates:()=>Dr(!0),onOpenClasses:()=>fs(!0),onOpenAdmin:()=>y(!0),onLogout:e,hasApiKey:Me,templateCount:Ki,currentClassName:mn,currentUser:r,isAdmin:t}),f.jsxs("div",{className:"flex flex-col flex-1 w-full mx-auto relative",children:[f.jsxs("div",{className:"p-3 sm:p-6 bg-[#FFFDF5] border-b-4 border-[#2D3436] flex flex-col lg:flex-row gap-4 sm:gap-6 items-stretch",children:[f.jsx(LA,{rawInput:C,setRawInput:T,numberCount:N,setNumberCount:P,onGenerateStudents:ir,onGenerateNumbers:Yi,onResetList:Mn,isGenerating:b}),f.jsx(MA,{students:v,selectedIds:E,isGenerating:b,extraSettings:Be,setExtraSettings:jt,onGenerateSelected:()=>Un(!0),onGenerateAll:()=>Un(!1),onDownload:_s,onDeleteSelected:gs,onResetList:Mn})]}),f.jsxs("div",{className:"flex-1 p-3 sm:p-6",children:[f.jsx(UA,{globalStyles:j,onOpenStyleModal:()=>Ie(!0),isGenerating:b}),f.jsx(BA,{students:v,selectedIds:E,focusedStudentId:Ze,isGenerating:b,isGeneratingSingle:cs,onToggleSelection:ne,onToggleAllSelection:ee,onFocusStudent:Nt,onOpenSidebar:()=>V(!0),onRemoveTag:oe,onUpdateStudent:q,onDeleteStudent:$,onGenerateSingle:zn,onSaveTemplate:Bn,onOpenHistory:ye=>{Ln(ye),ms(!0)}})]}),f.jsx($A,{isOpen:R,onClose:()=>V(!1),selectedIds:E,expandedCategories:Xi,onToggleCategory:gn,onIdiomClick:oi})]}),f.jsx(jA,{}),f.jsx(KA,{})]})},JA=({onLogin:r})=>{const[e,t]=lc.useState(!1),[i,o]=lc.useState(null),l=async()=>{t(!0),o(null);const h=await gf.signInWithGoogle();h.success||o(h.error),t(!1)};return f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"inline-block bg-[#FECA57] text-[#2D3436] p-4 border-3 border-[#2D3436] shadow-[4px_4px_0_#2D3436] transform rotate-[-3deg] rounded-lg mb-4",children:f.jsx("span",{className:"text-5xl",children:""})}),f.jsx("h1",{className:"text-3xl font-black text-[#2D3436]",children:f.jsxs("span",{className:"relative",children:[f.jsx("span",{className:"relative z-10",children:""}),f.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]})}),f.jsx("p",{className:"text-[#636E72] font-bold mt-2",children:"AI "})]}),f.jsx("div",{className:"bg-[#54A0FF]/20 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:f.jsx("p",{className:"text-sm text-[#2D3436] font-medium",children:"  Google "})}),i&&f.jsxs("div",{className:"bg-[#FF6B6B]/20 border-2 border-[#FF6B6B] rounded-lg p-3 mb-4 text-sm text-[#FF6B6B] font-bold",children:[" ",i]}),f.jsx("button",{onClick:l,disabled:e,className:"btn-pop w-full py-4 bg-white text-[#2D3436] font-bold flex items-center justify-center gap-3 text-lg disabled:opacity-50",children:e?f.jsx("span",{className:"animate-spin text-2xl",children:""}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})," Google "]})}),f.jsx("p",{className:"text-xs text-[#636E72]/50 mt-6",children:" 2026 "})]})})},ZA=({user:r,onLogout:e})=>f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[f.jsx("div",{className:"mb-6",children:r!=null&&r.photoURL?f.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-20 h-20 rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto"}):f.jsx("div",{className:"w-20 h-20 bg-[#FECA57] rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto flex items-center justify-center",children:f.jsx("span",{className:"text-4xl",children:""})})}),f.jsxs("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:["",(r==null?void 0:r.displayName)||"",""]}),f.jsx("p",{className:"text-[#636E72] text-sm mb-6",children:r==null?void 0:r.email}),f.jsxs("div",{className:"bg-[#FECA57]/30 border-3 border-[#FECA57] rounded-lg p-6 mb-6",children:[f.jsx("div",{className:"text-4xl mb-3 animate-bounce",children:f.jsx(Jo,{size:48,className:"mx-auto text-[#FF9F43]"})}),f.jsx("h3",{className:"text-xl font-black text-[#2D3436] mb-2",children:" "}),f.jsxs("p",{className:"text-sm text-[#636E72] font-medium",children:["",f.jsx("br",{}),""]})]}),f.jsx("div",{className:"bg-[#54A0FF]/10 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:f.jsxs("p",{className:"text-xs text-[#636E72]",children:[" ",f.jsx("strong",{children:""})," (cagooo@gmail.com) "]})}),f.jsx("button",{onClick:e,className:"btn-pop px-6 py-3 bg-[#636E72] text-white font-bold",children:""})]})}),eC=({children:r})=>{var E;const[e,t]=J.useState(null),[i,o]=J.useState(!0),[l,h]=J.useState([]),[g,y]=J.useState([]);J.useEffect(()=>{const S=gf.onAuthStateChange(O=>{t(O),o(!1)});return()=>S()},[]),J.useEffect(()=>{if(!e||!rs.isApproved(e))return;const S=ac.subscribe(q=>{h(q)}),O=ns.subscribe(q=>{y(q)});return()=>{S(),O()}},[e]);const v=e?{...e,schoolName:e.schoolId?(E=l.find(S=>S.id===e.schoolId))==null?void 0:E.name:null,assignedClassNames:(e.assignedClasses||[]).map(S=>{var O;return(O=g.find(q=>q.id===S))==null?void 0:O.name}).filter(Boolean)}:null,w=async()=>{await gf.signOut(),t(null)};return i?f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-6xl animate-bounce mb-4",children:""}),f.jsx("p",{className:"font-bold text-[#2D3436]",children:"..."})]})}):e?rs.isApproved(e)?lc.cloneElement(r,{currentUser:v,onLogout:w,isAdmin:rs.isAdmin(e)}):f.jsx(ZA,{user:e,onLogout:w}):f.jsx(JA,{})};o0.createRoot(document.getElementById("root")).render(f.jsx(lc.StrictMode,{children:f.jsx(eC,{children:f.jsx(YA,{})})}));
