import{c as C,r as a,b as n,j as e,d as E,X as u,e as r,T as F,P as z}from"./index-uyl9mPgW.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=C("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),L=({isOpen:i,onClose:p,currentClassId:l,onSelectClass:j})=>{const[c,w]=a.useState([]),[v,f]=a.useState(!0),[g,o]=a.useState(!1),[y,d]=a.useState(null),[x,m]=a.useState(""),[b,h]=a.useState("");a.useEffect(()=>{if(!i)return;f(!0);const s=n.subscribe(t=>{w(t),f(!1)});return()=>s()},[i]);const N=async()=>{if(x.trim())try{await n.add({name:x.trim(),year:new Date().getFullYear()}),m(""),o(!1)}catch(s){console.error("æ–°å¢ç­ç´šå¤±æ•—:",s)}},k=async s=>{if(b.trim())try{await n.update(s,{name:b.trim()}),d(null),h("")}catch(t){console.error("æ›´æ–°ç­ç´šå¤±æ•—:",t)}},A=async s=>{if(window.confirm("ç¢ºå®šè¦åˆªé™¤æ­¤ç­ç´šå—ï¼Ÿ"))try{await n.delete(s),l===s&&j(null)}catch(t){console.error("åˆªé™¤ç­ç´šå¤±æ•—:",t)}},D=s=>{j(s),p()};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[e.jsxs("div",{className:"p-3 sm:p-5 bg-[#A29BFE] border-b-3 border-[#2D3436] flex items-center justify-between",children:[e.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(E,{size:24}),"ç­ç´šç®¡ç†"]}),e.jsx("button",{onClick:p,className:"btn-pop p-2 bg-white text-[#2D3436]",children:e.jsx(u,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:v?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"text-4xl animate-bounce",children:"ğŸ«"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>D(null),className:`w-full p-4 border-2 border-[#2D3436] rounded-lg flex items-center justify-between transition-all shadow-[3px_3px_0_#2D3436]
                  ${l?"bg-white hover:bg-[#FECA57]/20":"bg-[#1DD1A1] text-white"}`,children:[e.jsxs("span",{className:"font-bold flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ“š"})," å…¨éƒ¨å­¸ç”Ÿ"]}),!l&&e.jsx(r,{size:20})]}),c.map(s=>e.jsx("div",{className:`p-4 border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] transition-all
                    ${l===s.id?"bg-[#54A0FF] text-white":"bg-white"}`,children:y===s.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:t=>h(t.target.value),className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg text-[#2D3436] font-bold",autoFocus:!0}),e.jsx("button",{onClick:()=>k(s.id),className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:e.jsx(r,{size:16})}),e.jsx("button",{onClick:()=>d(null),className:"btn-pop p-2 bg-[#636E72] text-white",children:e.jsx(u,{size:16})})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>D(s.id),className:"flex-1 text-left font-bold flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ«"})," ",s.name,l===s.id&&e.jsx(r,{size:18})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{d(s.id),h(s.name)},className:"p-2 hover:text-[#54A0FF] transition-colors",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>A(s.id),className:"p-2 hover:text-[#FF6B6B] transition-colors",children:e.jsx(F,{size:16})})]})]})},s.id)),g?e.jsx("div",{className:"p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg bg-[#1DD1A1]/10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:s=>m(s.target.value),placeholder:"è¼¸å…¥ç­ç´šåç¨±...",className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg font-bold",autoFocus:!0,onKeyDown:s=>s.key==="Enter"&&N()}),e.jsx("button",{onClick:N,className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:e.jsx(r,{size:16})}),e.jsx("button",{onClick:()=>{o(!1),m("")},className:"btn-pop p-2 bg-[#636E72] text-white",children:e.jsx(u,{size:16})})]})}):e.jsxs("button",{onClick:()=>o(!0),className:"w-full p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg text-[#1DD1A1] font-bold flex items-center justify-center gap-2 hover:bg-[#1DD1A1]/10 transition-colors",children:[e.jsx(z,{size:20}),"æ–°å¢ç­ç´š"]}),c.length===0&&!g&&e.jsxs("div",{className:"text-center py-8 text-[#636E72]",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ğŸ«"}),e.jsx("p",{className:"font-bold",children:"é‚„æ²’æœ‰ç­ç´š"}),e.jsx("p",{className:"text-sm mt-1",children:"é»æ“Šä¸Šæ–¹ã€Œæ–°å¢ç­ç´šã€é–‹å§‹ç®¡ç†"})]})]})}),e.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:["å…± ",c.length," å€‹ç­ç´š | é»æ“Šç­ç´šåˆ‡æ›é¡¯ç¤ºçš„å­¸ç”Ÿ"]})]})}):null};export{L as default};
