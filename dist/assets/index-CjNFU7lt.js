const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ClassModal-BPrZL7yP.js","assets/check-DPNKxhrU.js","assets/AdminPanel-CzHp1i4P.js","assets/ImportExportModal-BYwlx8vH.js","assets/file-down-YN3zCqDX.js","assets/PrintModal-BRNJNkcT.js"])))=>i.map(i=>d[i]);
var KE=Object.defineProperty;var QE=(r,e,t)=>e in r?KE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var cd=(r,e,t)=>QE(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var lC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hd={exports:{}},Ha={},dd={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function XE(){if(Eg)return Ne;Eg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function x(V){return V===null||typeof V!="object"?null:(V=I&&V[I]||V["@@iterator"],typeof V=="function"?V:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,$={};function B(V,H,Se){this.props=V,this.context=H,this.refs=$,this.updater=Se||j}B.prototype.isReactComponent={},B.prototype.setState=function(V,H){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,H,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function K(){}K.prototype=B.prototype;function te(V,H,Se){this.props=V,this.context=H,this.refs=$,this.updater=Se||j}var oe=te.prototype=new K;oe.constructor=te,G(oe,B.prototype),oe.isPureReactComponent=!0;var J=Array.isArray,ce=Object.prototype.hasOwnProperty,ie={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(V,H,Se){var Ae,ke={},Pe=null,Me=null;if(H!=null)for(Ae in H.ref!==void 0&&(Me=H.ref),H.key!==void 0&&(Pe=""+H.key),H)ce.call(H,Ae)&&!C.hasOwnProperty(Ae)&&(ke[Ae]=H[Ae]);var Oe=arguments.length-2;if(Oe===1)ke.children=Se;else if(1<Oe){for(var He=Array(Oe),Ct=0;Ct<Oe;Ct++)He[Ct]=arguments[Ct+2];ke.children=He}if(V&&V.defaultProps)for(Ae in Oe=V.defaultProps,Oe)ke[Ae]===void 0&&(ke[Ae]=Oe[Ae]);return{$$typeof:r,type:V,key:Pe,ref:Me,props:ke,_owner:ie.current}}function k(V,H){return{$$typeof:r,type:V.type,key:H,ref:V.ref,props:V.props,_owner:V._owner}}function b(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function N(V){var H={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Se){return H[Se]})}var O=/\/+/g;function R(V,H){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):H.toString(36)}function Ue(V,H,Se,Ae,ke){var Pe=typeof V;(Pe==="undefined"||Pe==="boolean")&&(V=null);var Me=!1;if(V===null)Me=!0;else switch(Pe){case"string":case"number":Me=!0;break;case"object":switch(V.$$typeof){case r:case e:Me=!0}}if(Me)return Me=V,ke=ke(Me),V=Ae===""?"."+R(Me,0):Ae,J(ke)?(Se="",V!=null&&(Se=V.replace(O,"$&/")+"/"),Ue(ke,H,Se,"",function(Ct){return Ct})):ke!=null&&(b(ke)&&(ke=k(ke,Se+(!ke.key||Me&&Me.key===ke.key?"":(""+ke.key).replace(O,"$&/")+"/")+V)),H.push(ke)),1;if(Me=0,Ae=Ae===""?".":Ae+":",J(V))for(var Oe=0;Oe<V.length;Oe++){Pe=V[Oe];var He=Ae+R(Pe,Oe);Me+=Ue(Pe,H,Se,He,ke)}else if(He=x(V),typeof He=="function")for(V=He.call(V),Oe=0;!(Pe=V.next()).done;)Pe=Pe.value,He=Ae+R(Pe,Oe++),Me+=Ue(Pe,H,Se,He,ke);else if(Pe==="object")throw H=String(V),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Me}function ft(V,H,Se){if(V==null)return V;var Ae=[],ke=0;return Ue(V,Ae,"","",function(Pe){return H.call(Se,Pe,ke++)}),Ae}function at(V){if(V._status===-1){var H=V._result;H=H(),H.then(function(Se){(V._status===0||V._status===-1)&&(V._status=1,V._result=Se)},function(Se){(V._status===0||V._status===-1)&&(V._status=2,V._result=Se)}),V._status===-1&&(V._status=0,V._result=H)}if(V._status===1)return V._result.default;throw V._result}var Qe={current:null},re={transition:null},me={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:re,ReactCurrentOwner:ie};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ft,forEach:function(V,H,Se){ft(V,function(){H.apply(this,arguments)},Se)},count:function(V){var H=0;return ft(V,function(){H++}),H},toArray:function(V){return ft(V,function(H){return H})||[]},only:function(V){if(!b(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ne.Component=B,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=te,Ne.StrictMode=i,Ne.Suspense=g,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ne.act=le,Ne.cloneElement=function(V,H,Se){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ae=G({},V.props),ke=V.key,Pe=V.ref,Me=V._owner;if(H!=null){if(H.ref!==void 0&&(Pe=H.ref,Me=ie.current),H.key!==void 0&&(ke=""+H.key),V.type&&V.type.defaultProps)var Oe=V.type.defaultProps;for(He in H)ce.call(H,He)&&!C.hasOwnProperty(He)&&(Ae[He]=H[He]===void 0&&Oe!==void 0?Oe[He]:H[He])}var He=arguments.length-2;if(He===1)Ae.children=Se;else if(1<He){Oe=Array(He);for(var Ct=0;Ct<He;Ct++)Oe[Ct]=arguments[Ct+2];Ae.children=Oe}return{$$typeof:r,type:V.type,key:ke,ref:Pe,props:Ae,_owner:Me}},Ne.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},Ne.createElement=S,Ne.createFactory=function(V){var H=S.bind(null,V);return H.type=V,H},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(V){return{$$typeof:m,render:V}},Ne.isValidElement=b,Ne.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:at}},Ne.memo=function(V,H){return{$$typeof:_,type:V,compare:H===void 0?null:H}},Ne.startTransition=function(V){var H=re.transition;re.transition={};try{V()}finally{re.transition=H}},Ne.unstable_act=le,Ne.useCallback=function(V,H){return Qe.current.useCallback(V,H)},Ne.useContext=function(V){return Qe.current.useContext(V)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(V){return Qe.current.useDeferredValue(V)},Ne.useEffect=function(V,H){return Qe.current.useEffect(V,H)},Ne.useId=function(){return Qe.current.useId()},Ne.useImperativeHandle=function(V,H,Se){return Qe.current.useImperativeHandle(V,H,Se)},Ne.useInsertionEffect=function(V,H){return Qe.current.useInsertionEffect(V,H)},Ne.useLayoutEffect=function(V,H){return Qe.current.useLayoutEffect(V,H)},Ne.useMemo=function(V,H){return Qe.current.useMemo(V,H)},Ne.useReducer=function(V,H,Se){return Qe.current.useReducer(V,H,Se)},Ne.useRef=function(V){return Qe.current.useRef(V)},Ne.useState=function(V){return Qe.current.useState(V)},Ne.useSyncExternalStore=function(V,H,Se){return Qe.current.useSyncExternalStore(V,H,Se)},Ne.useTransition=function(){return Qe.current.useTransition()},Ne.version="18.3.1",Ne}var Tg;function uf(){return Tg||(Tg=1,dd.exports=XE()),dd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function YE(){if(Ig)return Ha;Ig=1;var r=uf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,_){var E,I={},x=null,j=null;_!==void 0&&(x=""+_),g.key!==void 0&&(x=""+g.key),g.ref!==void 0&&(j=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(I[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)I[E]===void 0&&(I[E]=g[E]);return{$$typeof:e,type:m,key:x,ref:j,props:I,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=h,Ha.jsxs=h,Ha}var xg;function JE(){return xg||(xg=1,hd.exports=YE()),hd.exports}var v=JE(),ne=uf();const rl=c_(ne);var Fu={},fd={exports:{}},cn={},pd={exports:{}},md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function ZE(){return Sg||(Sg=1,(function(r){function e(re,me){var le=re.length;re.push(me);e:for(;0<le;){var V=le-1>>>1,H=re[V];if(0<o(H,me))re[V]=me,re[le]=H,le=V;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var me=re[0],le=re.pop();if(le!==me){re[0]=le;e:for(var V=0,H=re.length,Se=H>>>1;V<Se;){var Ae=2*(V+1)-1,ke=re[Ae],Pe=Ae+1,Me=re[Pe];if(0>o(ke,le))Pe<H&&0>o(Me,ke)?(re[V]=Me,re[Pe]=le,V=Pe):(re[V]=ke,re[Ae]=le,V=Ae);else if(Pe<H&&0>o(Me,le))re[V]=Me,re[Pe]=le,V=Pe;else break e}}return me}function o(re,me){var le=re.sortIndex-me.sortIndex;return le!==0?le:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],_=[],E=1,I=null,x=3,j=!1,G=!1,$=!1,B=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(re){for(var me=t(_);me!==null;){if(me.callback===null)i(_);else if(me.startTime<=re)i(_),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(_)}}function J(re){if($=!1,oe(re),!G)if(t(g)!==null)G=!0,at(ce);else{var me=t(_);me!==null&&Qe(J,me.startTime-re)}}function ce(re,me){G=!1,$&&($=!1,K(S),S=-1),j=!0;var le=x;try{for(oe(me),I=t(g);I!==null&&(!(I.expirationTime>me)||re&&!N());){var V=I.callback;if(typeof V=="function"){I.callback=null,x=I.priorityLevel;var H=V(I.expirationTime<=me);me=r.unstable_now(),typeof H=="function"?I.callback=H:I===t(g)&&i(g),oe(me)}else i(g);I=t(g)}if(I!==null)var Se=!0;else{var Ae=t(_);Ae!==null&&Qe(J,Ae.startTime-me),Se=!1}return Se}finally{I=null,x=le,j=!1}}var ie=!1,C=null,S=-1,k=5,b=-1;function N(){return!(r.unstable_now()-b<k)}function O(){if(C!==null){var re=r.unstable_now();b=re;var me=!0;try{me=C(!0,re)}finally{me?R():(ie=!1,C=null)}}else ie=!1}var R;if(typeof te=="function")R=function(){te(O)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,ft=Ue.port2;Ue.port1.onmessage=O,R=function(){ft.postMessage(null)}}else R=function(){B(O,0)};function at(re){C=re,ie||(ie=!0,R())}function Qe(re,me){S=B(function(){re(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){G||j||(G=!0,at(ce))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(re){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var le=x;x=me;try{return re()}finally{x=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var le=x;x=re;try{return me()}finally{x=le}},r.unstable_scheduleCallback=function(re,me,le){var V=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?V+le:V):le=V,re){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=le+H,re={id:E++,callback:me,priorityLevel:re,startTime:le,expirationTime:H,sortIndex:-1},le>V?(re.sortIndex=le,e(_,re),t(g)===null&&re===t(_)&&($?(K(S),S=-1):$=!0,Qe(J,le-V))):(re.sortIndex=H,e(g,re),G||j||(G=!0,at(ce))),re},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(re){var me=x;return function(){var le=x;x=me;try{return re.apply(this,arguments)}finally{x=le}}}})(md)),md}var Ag;function e0(){return Ag||(Ag=1,pd.exports=ZE()),pd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function t0(){if(Cg)return cn;Cg=1;var r=uf(),e=e0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function x(n){return g.call(I,n)?!0:g.call(E,n)?!1:_.test(n)?I[n]=!0:(E[n]=!0,!1)}function j(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function G(n,s,a,c){if(s===null||typeof s>"u"||j(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,c,d,f,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=f,this.removeEmptyString=w}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){B[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];B[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){B[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){B[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){B[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){B[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){B[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){B[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){B[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function te(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(K,te);B[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(K,te);B[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(K,te);B[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){B[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),B.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){B[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function oe(n,s,a,c){var d=B.hasOwnProperty(s)?B[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(G(s,a,d,c)&&(a=null),c||d===null?x(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),ie=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,V;function H(n){if(V===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+n}var Se=!1;function Ae(n,s){if(!n||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(U){var c=U}Reflect.construct(n,[],s)}else{try{s.call()}catch(U){c=U}n.call(s.prototype)}else{try{throw Error()}catch(U){c=U}n()}}catch(U){if(U&&c&&typeof U.stack=="string"){for(var d=U.stack.split(`
`),f=c.stack.split(`
`),w=d.length-1,A=f.length-1;1<=w&&0<=A&&d[w]!==f[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==f[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==f[A]){var P=`
`+d[w].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=w&&0<=A);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?H(n):""}function ke(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case ie:return"Portal";case k:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case O:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ft:return s=n.displayName||null,s!==null?s:Pe(n.type)||"Memo";case at:s=n._payload,n=n._init;try{return Pe(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Oe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ct(n){var s=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,f.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function as(n){n._valueTracker||(n._valueTracker=Ct(n))}function ti(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=He(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Mn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ls(n,s){var a=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ni(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Oe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function us(n,s){s=s.checked,s!=null&&oe(n,"checked",s,!1)}function br(n,s){us(n,s);var a=Oe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?lt(n,s.type,a):s.hasOwnProperty("defaultValue")&&lt(n,s.type,Oe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ri(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function lt(n,s,a){(s!=="number"||Mn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Xe=Array.isArray;function pn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Oe(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Dr(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function cs(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Xe(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Oe(a)}}function ra(n,s){var a=Oe(s.value),c=Oe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function rr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function si(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vr(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?si(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mn,ii=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(mn=mn||document.createElement("div"),mn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Or(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gi=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(n){Gi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),jn[s]=jn[n]})});function Un(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||jn.hasOwnProperty(n)&&jn[n]?(""+s).trim():s+"px"}function hs(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Un(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var oi=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gn(n,s){if(s){if(oi[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ds(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zn=null;function fs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bn=null,$n=null,rt=null;function ps(n){if(n=Pa(n)){if(typeof Bn!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Jl(s),Bn(n.stateNode,n.type,s))}}function sr(n){$n?rt?rt.push(n):rt=[n]:$n=n}function ir(){if($n){var n=$n,s=rt;if(rt=$n=null,ps(n),s)for(n=0;n<s.length;n++)ps(s[n])}}function Ki(n,s){return n(s)}function Qi(){}var Rn=!1;function ye(n,s,a){if(Rn)return n(s,a);Rn=!0;try{return Ki(n,s,a)}finally{Rn=!1,($n!==null||rt!==null)&&(Qi(),ir())}}function we(n,s){var a=n.stateNode;if(a===null)return null;var c=Jl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var ze=!1;if(m)try{var st={};Object.defineProperty(st,"passive",{get:function(){ze=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{ze=!1}function Ot(n,s,a,c,d,f,w,A,P){var U=Array.prototype.slice.call(arguments,3);try{s.apply(a,U)}catch(X){this.onError(X)}}var Zt=!1,yn=null,kn=!1,wt=null,Pl={onError:function(n){Zt=!0,yn=n}};function Nl(n,s,a,c,d,f,w,A,P){Zt=!1,yn=null,Ot.apply(Pl,arguments)}function sa(n,s,a,c,d,f,w,A,P){if(Nl.apply(this,arguments),Zt){if(Zt){var U=yn;Zt=!1,yn=null}else throw Error(t(198));kn||(kn=!0,wt=U)}}function qn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ia(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function bl(n){if(qn(n)!==n)throw Error(t(188))}function Dl(n){var s=n.alternate;if(!s){if(s=qn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return bl(d),n;if(f===c)return bl(d),s;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=f;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,c=f;break}if(A===c){w=!0,c=d,a=f;break}A=A.sibling}if(!w){for(A=f.child;A;){if(A===a){w=!0,a=f,c=d;break}if(A===c){w=!0,c=f,a=d;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Vl(n){return n=Dl(n),n!==null?ai(n):null}function ai(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=ai(n);if(s!==null)return s;n=n.sibling}return null}var oa=e.unstable_scheduleCallback,Xi=e.unstable_cancelCallback,li=e.unstable_shouldYield,Lr=e.unstable_requestPaint,Ze=e.unstable_now,zc=e.unstable_getCurrentPriorityLevel,Yi=e.unstable_ImmediatePriority,aa=e.unstable_UserBlockingPriority,ui=e.unstable_NormalPriority,la=e.unstable_LowPriority,Ji=e.unstable_IdlePriority,ci=null,_n=null;function Ol(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ci,n,void 0,(n.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:hi,or=Math.log,Pn=Math.LN2;function hi(n){return n>>>=0,n===0?32:31-(or(n)/Pn|0)|0}var ar=64,ms=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Fr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~d;A!==0?c=$e(A):(f&=w,f!==0&&(c=$e(f)))}else w=a&~d,w!==0?c=$e(w):f!==0&&(c=$e(f));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-vn(s),d=1<<a,c|=n[a],s&=~d;return c}function di(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fi(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var w=31-vn(f),A=1<<w,P=d[w];P===-1?((A&a)===0||(A&c)!==0)&&(d[w]=di(A,s)):P<=s&&(n.expiredLanes|=A),f&=~A}}function ua(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ca(){var n=ar;return ar<<=1,(ar&4194240)===0&&(ar=64),n}function ha(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function pi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-vn(s),n[s]=a}function Bc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-vn(a),f=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~f}}function da(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-vn(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Le=0;function lr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var fa,Zi,pa,ma,ga,ur=!1,eo=[],cr=null,hr=null,Lt=null,mi=new Map,Mr=new Map,wn=[],Ll="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gs(n,s){switch(n){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":mi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(s.pointerId)}}function Hn(n,s,a,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=Pa(s),s!==null&&Zi(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Fl(n,s,a,c,d){switch(s){case"focusin":return cr=Hn(cr,n,s,a,c,d),!0;case"dragenter":return hr=Hn(hr,n,s,a,c,d),!0;case"mouseover":return Lt=Hn(Lt,n,s,a,c,d),!0;case"pointerover":var f=d.pointerId;return mi.set(f,Hn(mi.get(f)||null,n,s,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,Mr.set(f,Hn(Mr.get(f)||null,n,s,a,c,d)),!0}return!1}function to(n){var s=vi(n.target);if(s!==null){var a=qn(s);if(a!==null){if(s=a.tag,s===13){if(s=ia(a),s!==null){n.blockedOn=s,ga(n.priority,function(){pa(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=no(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);zn=c,a.target.dispatchEvent(c),zn=null}else return s=Pa(a),s!==null&&Zi(s),n.blockedOn=a,!1;s.shift()}return!0}function Ml(n,s,a){Ke(n)&&a.delete(s)}function $c(){ur=!1,cr!==null&&Ke(cr)&&(cr=null),hr!==null&&Ke(hr)&&(hr=null),Lt!==null&&Ke(Lt)&&(Lt=null),mi.forEach(Ml),Mr.forEach(Ml)}function ys(n,s){n.blockedOn===s&&(n.blockedOn=null,ur||(ur=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$c)))}function _s(n){function s(d){return ys(d,n)}if(0<eo.length){ys(eo[0],n);for(var a=1;a<eo.length;a++){var c=eo[a];c.blockedOn===n&&(c.blockedOn=null)}}for(cr!==null&&ys(cr,n),hr!==null&&ys(hr,n),Lt!==null&&ys(Lt,n),mi.forEach(s),Mr.forEach(s),a=0;a<wn.length;a++)c=wn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<wn.length&&(a=wn[0],a.blockedOn===null);)to(a),a.blockedOn===null&&wn.shift()}var jr=J.ReactCurrentBatchConfig,Ur=!0;function dr(n,s,a,c){var d=Le,f=jr.transition;jr.transition=null;try{Le=1,ya(n,s,a,c)}finally{Le=d,jr.transition=f}}function jl(n,s,a,c){var d=Le,f=jr.transition;jr.transition=null;try{Le=4,ya(n,s,a,c)}finally{Le=d,jr.transition=f}}function ya(n,s,a,c){if(Ur){var d=no(n,s,a,c);if(d===null)eh(n,s,c,fr,a),gs(n,c);else if(Fl(d,n,s,a,c))c.stopPropagation();else if(gs(n,c),s&4&&-1<Ll.indexOf(n)){for(;d!==null;){var f=Pa(d);if(f!==null&&fa(f),f=no(n,s,a,c),f===null&&eh(n,s,c,fr,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else eh(n,s,c,null,a)}}var fr=null;function no(n,s,a,c){if(fr=null,n=fs(c),n=vi(n),n!==null)if(s=qn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ia(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return fr=n,null}function ro(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zc()){case Yi:return 1;case aa:return 4;case ui:case la:return 16;case Ji:return 536870912;default:return 16}default:return 16}}var En=null,so=null,zr=null;function Ul(){if(zr)return zr;var n,s=so,a=s.length,c,d="value"in En?En.value:En.textContent,f=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[f-c];c++);return zr=d.slice(n,1<c?1-c:void 0)}function gi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function pr(){return!0}function _a(){return!1}function $t(n){function s(a,c,d,f,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(f):f[A]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?pr:_a,this.isPropagationStopped=_a,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),s}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=$t(mr),vs=le({},mr,{view:0,detail:0}),io=$t(vs),oo,ao,Tn,_i=le({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Tn&&(Tn&&n.type==="mousemove"?(oo=n.screenX-Tn.screenX,ao=n.screenY-Tn.screenY):ao=oo=0,Tn=n),oo)},movementY:function(n){return"movementY"in n?n.movementY:ao}}),va=$t(_i),zl=le({},_i,{dataTransfer:0}),Bl=$t(zl),lo=le({},vs,{relatedTarget:0}),Ft=$t(lo),$l=le({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),ql=$t($l),ws=le({},mr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=$t(ws),p=le({},mr,{data:0}),y=$t(p),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ee(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=z[n])?!!s[n]:!1}function Ce(){return ee}var yt=le({},vs,{key:function(n){if(n.key){var s=T[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=gi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(n){return n.type==="keypress"?gi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ge=$t(yt),Et=le({},_i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),In=$t(Et),Br=le({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),gr=$t(Br),yr=le({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),uo=$t(yr),wa=le({},_i,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Bw=$t(wa),$w=[9,13,27,32],qc=m&&"CompositionEvent"in window,Ea=null;m&&"documentMode"in document&&(Ea=document.documentMode);var qw=m&&"TextEvent"in window&&!Ea,fp=m&&(!qc||Ea&&8<Ea&&11>=Ea),pp=" ",mp=!1;function gp(n,s){switch(n){case"keyup":return $w.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var co=!1;function Hw(n,s){switch(n){case"compositionend":return yp(s);case"keypress":return s.which!==32?null:(mp=!0,pp);case"textInput":return n=s.data,n===pp&&mp?null:n;default:return null}}function Ww(n,s){if(co)return n==="compositionend"||!qc&&gp(n,s)?(n=Ul(),zr=so=En=null,co=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fp&&s.locale!=="ko"?null:s.data;default:return null}}var Gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Gw[n.type]:s==="textarea"}function vp(n,s,a,c){sr(c),s=Ql(s,"onChange"),0<s.length&&(a=new yi("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Ta=null,Ia=null;function Kw(n){Fp(n,0)}function Hl(n){var s=go(n);if(ti(s))return n}function Qw(n,s){if(n==="change")return s}var wp=!1;if(m){var Hc;if(m){var Wc="oninput"in document;if(!Wc){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),Wc=typeof Ep.oninput=="function"}Hc=Wc}else Hc=!1;wp=Hc&&(!document.documentMode||9<document.documentMode)}function Tp(){Ta&&(Ta.detachEvent("onpropertychange",Ip),Ia=Ta=null)}function Ip(n){if(n.propertyName==="value"&&Hl(Ia)){var s=[];vp(s,Ia,n,fs(n)),ye(Kw,s)}}function Xw(n,s,a){n==="focusin"?(Tp(),Ta=s,Ia=a,Ta.attachEvent("onpropertychange",Ip)):n==="focusout"&&Tp()}function Yw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hl(Ia)}function Jw(n,s){if(n==="click")return Hl(s)}function Zw(n,s){if(n==="input"||n==="change")return Hl(s)}function eE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Wn=typeof Object.is=="function"?Object.is:eE;function xa(n,s){if(Wn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Wn(n[d],s[d]))return!1}return!0}function xp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sp(n,s){var a=xp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xp(a)}}function Ap(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ap(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Cp(){for(var n=window,s=Mn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Mn(n.document)}return s}function Gc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function tE(n){var s=Cp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Ap(a.ownerDocument.documentElement,a)){if(c!==null&&Gc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=Sp(a,f);var w=Sp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nE=m&&"documentMode"in document&&11>=document.documentMode,ho=null,Kc=null,Sa=null,Qc=!1;function Rp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qc||ho==null||ho!==Mn(c)||(c=ho,"selectionStart"in c&&Gc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Sa&&xa(Sa,c)||(Sa=c,c=Ql(Kc,"onSelect"),0<c.length&&(s=new yi("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=ho)))}function Wl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var fo={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionend:Wl("Transition","TransitionEnd")},Xc={},kp={};m&&(kp=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function Gl(n){if(Xc[n])return Xc[n];if(!fo[n])return n;var s=fo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in kp)return Xc[n]=s[a];return n}var Pp=Gl("animationend"),Np=Gl("animationiteration"),bp=Gl("animationstart"),Dp=Gl("transitionend"),Vp=new Map,Op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(n,s){Vp.set(n,s),l(s,[n])}for(var Yc=0;Yc<Op.length;Yc++){var Jc=Op[Yc],rE=Jc.toLowerCase(),sE=Jc[0].toUpperCase()+Jc.slice(1);Es(rE,"on"+sE)}Es(Pp,"onAnimationEnd"),Es(Np,"onAnimationIteration"),Es(bp,"onAnimationStart"),Es("dblclick","onDoubleClick"),Es("focusin","onFocus"),Es("focusout","onBlur"),Es(Dp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Lp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,sa(c,s,void 0,n),n.currentTarget=null}function Fp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var w=c.length-1;0<=w;w--){var A=c[w],P=A.instance,U=A.currentTarget;if(A=A.listener,P!==f&&d.isPropagationStopped())break e;Lp(d,A,U),f=P}else for(w=0;w<c.length;w++){if(A=c[w],P=A.instance,U=A.currentTarget,A=A.listener,P!==f&&d.isPropagationStopped())break e;Lp(d,A,U),f=P}}}if(kn)throw n=wt,kn=!1,wt=null,n}function et(n,s){var a=s[oh];a===void 0&&(a=s[oh]=new Set);var c=n+"__bubble";a.has(c)||(Mp(s,n,2,!1),a.add(c))}function Zc(n,s,a){var c=0;s&&(c|=4),Mp(a,n,c,s)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function Ca(n){if(!n[Kl]){n[Kl]=!0,i.forEach(function(a){a!=="selectionchange"&&(iE.has(a)||Zc(a,!1,n),Zc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Kl]||(s[Kl]=!0,Zc("selectionchange",!1,s))}}function Mp(n,s,a,c){switch(ro(s)){case 1:var d=dr;break;case 4:d=jl;break;default:d=ya}a=d.bind(null,s,a,n),d=void 0,!ze||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function eh(n,s,a,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var P=w.tag;if((P===3||P===4)&&(P=w.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;w=w.return}for(;A!==null;){if(w=vi(A),w===null)return;if(P=w.tag,P===5||P===6){c=f=w;continue e}A=A.parentNode}}c=c.return}ye(function(){var U=f,X=fs(a),Y=[];e:{var Q=Vp.get(n);if(Q!==void 0){var ae=yi,de=n;switch(n){case"keypress":if(gi(a)===0)break e;case"keydown":case"keyup":ae=Ge;break;case"focusin":de="focus",ae=Ft;break;case"focusout":de="blur",ae=Ft;break;case"beforeblur":case"afterblur":ae=Ft;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=gr;break;case Pp:case Np:case bp:ae=ql;break;case Dp:ae=uo;break;case"scroll":ae=io;break;case"wheel":ae=Bw;break;case"copy":case"cut":case"paste":ae=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=In}var fe=(s&4)!==0,_t=!fe&&n==="scroll",L=fe?Q!==null?Q+"Capture":null:Q;fe=[];for(var D=U,M;D!==null;){M=D;var Z=M.stateNode;if(M.tag===5&&Z!==null&&(M=Z,L!==null&&(Z=we(D,L),Z!=null&&fe.push(Ra(D,Z,M)))),_t)break;D=D.return}0<fe.length&&(Q=new ae(Q,de,null,a,X),Y.push({event:Q,listeners:fe}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",Q&&a!==zn&&(de=a.relatedTarget||a.fromElement)&&(vi(de)||de[$r]))break e;if((ae||Q)&&(Q=X.window===X?X:(Q=X.ownerDocument)?Q.defaultView||Q.parentWindow:window,ae?(de=a.relatedTarget||a.toElement,ae=U,de=de?vi(de):null,de!==null&&(_t=qn(de),de!==_t||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=U),ae!==de)){if(fe=va,Z="onMouseLeave",L="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(fe=In,Z="onPointerLeave",L="onPointerEnter",D="pointer"),_t=ae==null?Q:go(ae),M=de==null?Q:go(de),Q=new fe(Z,D+"leave",ae,a,X),Q.target=_t,Q.relatedTarget=M,Z=null,vi(X)===U&&(fe=new fe(L,D+"enter",de,a,X),fe.target=M,fe.relatedTarget=_t,Z=fe),_t=Z,ae&&de)t:{for(fe=ae,L=de,D=0,M=fe;M;M=po(M))D++;for(M=0,Z=L;Z;Z=po(Z))M++;for(;0<D-M;)fe=po(fe),D--;for(;0<M-D;)L=po(L),M--;for(;D--;){if(fe===L||L!==null&&fe===L.alternate)break t;fe=po(fe),L=po(L)}fe=null}else fe=null;ae!==null&&jp(Y,Q,ae,fe,!1),de!==null&&_t!==null&&jp(Y,_t,de,fe,!0)}}e:{if(Q=U?go(U):window,ae=Q.nodeName&&Q.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Q.type==="file")var pe=Qw;else if(_p(Q))if(wp)pe=Zw;else{pe=Yw;var _e=Xw}else(ae=Q.nodeName)&&ae.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(pe=Jw);if(pe&&(pe=pe(n,U))){vp(Y,pe,a,X);break e}_e&&_e(n,Q,U),n==="focusout"&&(_e=Q._wrapperState)&&_e.controlled&&Q.type==="number"&&lt(Q,"number",Q.value)}switch(_e=U?go(U):window,n){case"focusin":(_p(_e)||_e.contentEditable==="true")&&(ho=_e,Kc=U,Sa=null);break;case"focusout":Sa=Kc=ho=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,Rp(Y,a,X);break;case"selectionchange":if(nE)break;case"keydown":case"keyup":Rp(Y,a,X)}var ve;if(qc)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else co?gp(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(fp&&a.locale!=="ko"&&(co||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&co&&(ve=Ul()):(En=X,so="value"in En?En.value:En.textContent,co=!0)),_e=Ql(U,Te),0<_e.length&&(Te=new y(Te,n,null,a,X),Y.push({event:Te,listeners:_e}),ve?Te.data=ve:(ve=yp(a),ve!==null&&(Te.data=ve)))),(ve=qw?Hw(n,a):Ww(n,a))&&(U=Ql(U,"onBeforeInput"),0<U.length&&(X=new y("onBeforeInput","beforeinput",null,a,X),Y.push({event:X,listeners:U}),X.data=ve))}Fp(Y,s)})}function Ra(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ql(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=we(n,a),f!=null&&c.unshift(Ra(n,f,d)),f=we(n,s),f!=null&&c.push(Ra(n,f,d))),n=n.return}return c}function po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function jp(n,s,a,c,d){for(var f=s._reactName,w=[];a!==null&&a!==c;){var A=a,P=A.alternate,U=A.stateNode;if(P!==null&&P===c)break;A.tag===5&&U!==null&&(A=U,d?(P=we(a,f),P!=null&&w.unshift(Ra(a,P,A))):d||(P=we(a,f),P!=null&&w.push(Ra(a,P,A)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var oE=/\r\n?/g,aE=/\u0000|\uFFFD/g;function Up(n){return(typeof n=="string"?n:""+n).replace(oE,`
`).replace(aE,"")}function Xl(n,s,a){if(s=Up(s),Up(n)!==s&&a)throw Error(t(425))}function Yl(){}var th=null,nh=null;function rh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,lE=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,uE=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(n){return zp.resolve(null).then(n).catch(cE)}:sh;function cE(n){setTimeout(function(){throw n})}function ih(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),_s(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);_s(s)}function Ts(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Bp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var mo=Math.random().toString(36).slice(2),_r="__reactFiber$"+mo,ka="__reactProps$"+mo,$r="__reactContainer$"+mo,oh="__reactEvents$"+mo,hE="__reactListeners$"+mo,dE="__reactHandles$"+mo;function vi(n){var s=n[_r];if(s)return s;for(var a=n.parentNode;a;){if(s=a[$r]||a[_r]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Bp(n);n!==null;){if(a=n[_r])return a;n=Bp(n)}return s}n=a,a=n.parentNode}return null}function Pa(n){return n=n[_r]||n[$r],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function go(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Jl(n){return n[ka]||null}var ah=[],yo=-1;function Is(n){return{current:n}}function tt(n){0>yo||(n.current=ah[yo],ah[yo]=null,yo--)}function Ye(n,s){yo++,ah[yo]=n.current,n.current=s}var xs={},qt=Is(xs),sn=Is(!1),wi=xs;function _o(n,s){var a=n.type.contextTypes;if(!a)return xs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=s[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function on(n){return n=n.childContextTypes,n!=null}function Zl(){tt(sn),tt(qt)}function $p(n,s,a){if(qt.current!==xs)throw Error(t(168));Ye(qt,s),Ye(sn,a)}function qp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Me(n)||"Unknown",d));return le({},a,c)}function eu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||xs,wi=qt.current,Ye(qt,n),Ye(sn,sn.current),!0}function Hp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=qp(n,s,wi),c.__reactInternalMemoizedMergedChildContext=n,tt(sn),tt(qt),Ye(qt,n)):tt(sn),Ye(sn,a)}var qr=null,tu=!1,lh=!1;function Wp(n){qr===null?qr=[n]:qr.push(n)}function fE(n){tu=!0,Wp(n)}function Ss(){if(!lh&&qr!==null){lh=!0;var n=0,s=Le;try{var a=qr;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}qr=null,tu=!1}catch(d){throw qr!==null&&(qr=qr.slice(n+1)),oa(Yi,Ss),d}finally{Le=s,lh=!1}}return null}var vo=[],wo=0,nu=null,ru=0,Nn=[],bn=0,Ei=null,Hr=1,Wr="";function Ti(n,s){vo[wo++]=ru,vo[wo++]=nu,nu=n,ru=s}function Gp(n,s,a){Nn[bn++]=Hr,Nn[bn++]=Wr,Nn[bn++]=Ei,Ei=n;var c=Hr;n=Wr;var d=32-vn(c)-1;c&=~(1<<d),a+=1;var f=32-vn(s)+d;if(30<f){var w=d-d%5;f=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Hr=1<<32-vn(s)+d|a<<d|c,Wr=f+n}else Hr=1<<f|a<<d|c,Wr=n}function uh(n){n.return!==null&&(Ti(n,1),Gp(n,1,0))}function ch(n){for(;n===nu;)nu=vo[--wo],vo[wo]=null,ru=vo[--wo],vo[wo]=null;for(;n===Ei;)Ei=Nn[--bn],Nn[bn]=null,Wr=Nn[--bn],Nn[bn]=null,Hr=Nn[--bn],Nn[bn]=null}var xn=null,Sn=null,it=!1,Gn=null;function Kp(n,s){var a=Ln(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Qp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,xn=n,Sn=Ts(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,xn=n,Sn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ei!==null?{id:Hr,overflow:Wr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Ln(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,xn=n,Sn=null,!0):!1;default:return!1}}function hh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dh(n){if(it){var s=Sn;if(s){var a=s;if(!Qp(n,s)){if(hh(n))throw Error(t(418));s=Ts(a.nextSibling);var c=xn;s&&Qp(n,s)?Kp(c,a):(n.flags=n.flags&-4097|2,it=!1,xn=n)}}else{if(hh(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,xn=n}}}function Xp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;xn=n}function su(n){if(n!==xn)return!1;if(!it)return Xp(n),it=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!rh(n.type,n.memoizedProps)),s&&(s=Sn)){if(hh(n))throw Yp(),Error(t(418));for(;s;)Kp(n,s),s=Ts(s.nextSibling)}if(Xp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Sn=Ts(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Sn=null}}else Sn=xn?Ts(n.stateNode.nextSibling):null;return!0}function Yp(){for(var n=Sn;n;)n=Ts(n.nextSibling)}function Eo(){Sn=xn=null,it=!1}function fh(n){Gn===null?Gn=[n]:Gn.push(n)}var pE=J.ReactCurrentBatchConfig;function Na(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(w){var A=d.refs;w===null?delete A[f]:A[f]=w},s._stringRef=f,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function iu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Jp(n){var s=n._init;return s(n._payload)}function Zp(n){function s(L,D){if(n){var M=L.deletions;M===null?(L.deletions=[D],L.flags|=16):M.push(D)}}function a(L,D){if(!n)return null;for(;D!==null;)s(L,D),D=D.sibling;return null}function c(L,D){for(L=new Map;D!==null;)D.key!==null?L.set(D.key,D):L.set(D.index,D),D=D.sibling;return L}function d(L,D){return L=Ds(L,D),L.index=0,L.sibling=null,L}function f(L,D,M){return L.index=M,n?(M=L.alternate,M!==null?(M=M.index,M<D?(L.flags|=2,D):M):(L.flags|=2,D)):(L.flags|=1048576,D)}function w(L){return n&&L.alternate===null&&(L.flags|=2),L}function A(L,D,M,Z){return D===null||D.tag!==6?(D=sd(M,L.mode,Z),D.return=L,D):(D=d(D,M),D.return=L,D)}function P(L,D,M,Z){var pe=M.type;return pe===C?X(L,D,M.props.children,Z,M.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===at&&Jp(pe)===D.type)?(Z=d(D,M.props),Z.ref=Na(L,D,M),Z.return=L,Z):(Z=ku(M.type,M.key,M.props,null,L.mode,Z),Z.ref=Na(L,D,M),Z.return=L,Z)}function U(L,D,M,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==M.containerInfo||D.stateNode.implementation!==M.implementation?(D=id(M,L.mode,Z),D.return=L,D):(D=d(D,M.children||[]),D.return=L,D)}function X(L,D,M,Z,pe){return D===null||D.tag!==7?(D=Pi(M,L.mode,Z,pe),D.return=L,D):(D=d(D,M),D.return=L,D)}function Y(L,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return D=sd(""+D,L.mode,M),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ce:return M=ku(D.type,D.key,D.props,null,L.mode,M),M.ref=Na(L,null,D),M.return=L,M;case ie:return D=id(D,L.mode,M),D.return=L,D;case at:var Z=D._init;return Y(L,Z(D._payload),M)}if(Xe(D)||me(D))return D=Pi(D,L.mode,M,null),D.return=L,D;iu(L,D)}return null}function Q(L,D,M,Z){var pe=D!==null?D.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return pe!==null?null:A(L,D,""+M,Z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ce:return M.key===pe?P(L,D,M,Z):null;case ie:return M.key===pe?U(L,D,M,Z):null;case at:return pe=M._init,Q(L,D,pe(M._payload),Z)}if(Xe(M)||me(M))return pe!==null?null:X(L,D,M,Z,null);iu(L,M)}return null}function ae(L,D,M,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return L=L.get(M)||null,A(D,L,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case ce:return L=L.get(Z.key===null?M:Z.key)||null,P(D,L,Z,pe);case ie:return L=L.get(Z.key===null?M:Z.key)||null,U(D,L,Z,pe);case at:var _e=Z._init;return ae(L,D,M,_e(Z._payload),pe)}if(Xe(Z)||me(Z))return L=L.get(M)||null,X(D,L,Z,pe,null);iu(D,Z)}return null}function de(L,D,M,Z){for(var pe=null,_e=null,ve=D,Te=D=0,Dt=null;ve!==null&&Te<M.length;Te++){ve.index>Te?(Dt=ve,ve=null):Dt=ve.sibling;var Be=Q(L,ve,M[Te],Z);if(Be===null){ve===null&&(ve=Dt);break}n&&ve&&Be.alternate===null&&s(L,ve),D=f(Be,D,Te),_e===null?pe=Be:_e.sibling=Be,_e=Be,ve=Dt}if(Te===M.length)return a(L,ve),it&&Ti(L,Te),pe;if(ve===null){for(;Te<M.length;Te++)ve=Y(L,M[Te],Z),ve!==null&&(D=f(ve,D,Te),_e===null?pe=ve:_e.sibling=ve,_e=ve);return it&&Ti(L,Te),pe}for(ve=c(L,ve);Te<M.length;Te++)Dt=ae(ve,L,Te,M[Te],Z),Dt!==null&&(n&&Dt.alternate!==null&&ve.delete(Dt.key===null?Te:Dt.key),D=f(Dt,D,Te),_e===null?pe=Dt:_e.sibling=Dt,_e=Dt);return n&&ve.forEach(function(Vs){return s(L,Vs)}),it&&Ti(L,Te),pe}function fe(L,D,M,Z){var pe=me(M);if(typeof pe!="function")throw Error(t(150));if(M=pe.call(M),M==null)throw Error(t(151));for(var _e=pe=null,ve=D,Te=D=0,Dt=null,Be=M.next();ve!==null&&!Be.done;Te++,Be=M.next()){ve.index>Te?(Dt=ve,ve=null):Dt=ve.sibling;var Vs=Q(L,ve,Be.value,Z);if(Vs===null){ve===null&&(ve=Dt);break}n&&ve&&Vs.alternate===null&&s(L,ve),D=f(Vs,D,Te),_e===null?pe=Vs:_e.sibling=Vs,_e=Vs,ve=Dt}if(Be.done)return a(L,ve),it&&Ti(L,Te),pe;if(ve===null){for(;!Be.done;Te++,Be=M.next())Be=Y(L,Be.value,Z),Be!==null&&(D=f(Be,D,Te),_e===null?pe=Be:_e.sibling=Be,_e=Be);return it&&Ti(L,Te),pe}for(ve=c(L,ve);!Be.done;Te++,Be=M.next())Be=ae(ve,L,Te,Be.value,Z),Be!==null&&(n&&Be.alternate!==null&&ve.delete(Be.key===null?Te:Be.key),D=f(Be,D,Te),_e===null?pe=Be:_e.sibling=Be,_e=Be);return n&&ve.forEach(function(GE){return s(L,GE)}),it&&Ti(L,Te),pe}function _t(L,D,M,Z){if(typeof M=="object"&&M!==null&&M.type===C&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case ce:e:{for(var pe=M.key,_e=D;_e!==null;){if(_e.key===pe){if(pe=M.type,pe===C){if(_e.tag===7){a(L,_e.sibling),D=d(_e,M.props.children),D.return=L,L=D;break e}}else if(_e.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===at&&Jp(pe)===_e.type){a(L,_e.sibling),D=d(_e,M.props),D.ref=Na(L,_e,M),D.return=L,L=D;break e}a(L,_e);break}else s(L,_e);_e=_e.sibling}M.type===C?(D=Pi(M.props.children,L.mode,Z,M.key),D.return=L,L=D):(Z=ku(M.type,M.key,M.props,null,L.mode,Z),Z.ref=Na(L,D,M),Z.return=L,L=Z)}return w(L);case ie:e:{for(_e=M.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===M.containerInfo&&D.stateNode.implementation===M.implementation){a(L,D.sibling),D=d(D,M.children||[]),D.return=L,L=D;break e}else{a(L,D);break}else s(L,D);D=D.sibling}D=id(M,L.mode,Z),D.return=L,L=D}return w(L);case at:return _e=M._init,_t(L,D,_e(M._payload),Z)}if(Xe(M))return de(L,D,M,Z);if(me(M))return fe(L,D,M,Z);iu(L,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,D!==null&&D.tag===6?(a(L,D.sibling),D=d(D,M),D.return=L,L=D):(a(L,D),D=sd(M,L.mode,Z),D.return=L,L=D),w(L)):a(L,D)}return _t}var To=Zp(!0),em=Zp(!1),ou=Is(null),au=null,Io=null,ph=null;function mh(){ph=Io=au=null}function gh(n){var s=ou.current;tt(ou),n._currentValue=s}function yh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function xo(n,s){au=n,ph=Io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(an=!0),n.firstContext=null)}function Dn(n){var s=n._currentValue;if(ph!==n)if(n={context:n,memoizedValue:s,next:null},Io===null){if(au===null)throw Error(t(308));Io=n,au.dependencies={lanes:0,firstContext:n}}else Io=Io.next=n;return s}var Ii=null;function _h(n){Ii===null?Ii=[n]:Ii.push(n)}function tm(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,_h(s)):(a.next=d.next,d.next=a),s.interleaved=a,Gr(n,c)}function Gr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var As=!1;function vh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Kr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Cs(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Gr(n,a)}return d=c.interleaved,d===null?(s.next=s,_h(c)):(s.next=d.next,d.next=s),c.interleaved=s,Gr(n,a)}function lu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,da(n,a)}}function rm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=w:f=f.next=w,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function uu(n,s,a,c){var d=n.updateQueue;As=!1;var f=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var P=A,U=P.next;P.next=null,w===null?f=U:w.next=U,w=P;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==w&&(A===null?X.firstBaseUpdate=U:A.next=U,X.lastBaseUpdate=P))}if(f!==null){var Y=d.baseState;w=0,X=U=P=null,A=f;do{var Q=A.lane,ae=A.eventTime;if((c&Q)===Q){X!==null&&(X=X.next={eventTime:ae,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=n,fe=A;switch(Q=s,ae=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){Y=de.call(ae,Y,Q);break e}Y=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,Q=typeof de=="function"?de.call(ae,Y,Q):de,Q==null)break e;Y=le({},Y,Q);break e;case 2:As=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,Q=d.effects,Q===null?d.effects=[A]:Q.push(A))}else ae={eventTime:ae,lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(U=X=ae,P=Y):X=X.next=ae,w|=Q;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);if(X===null&&(P=Y),d.baseState=P,d.firstBaseUpdate=U,d.lastBaseUpdate=X,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);Ai|=w,n.lanes=w,n.memoizedState=Y}}function sm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ba={},vr=Is(ba),Da=Is(ba),Va=Is(ba);function xi(n){if(n===ba)throw Error(t(174));return n}function wh(n,s){switch(Ye(Va,s),Ye(Da,n),Ye(vr,ba),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Vr(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Vr(s,n)}tt(vr),Ye(vr,s)}function So(){tt(vr),tt(Da),tt(Va)}function im(n){xi(Va.current);var s=xi(vr.current),a=Vr(s,n.type);s!==a&&(Ye(Da,n),Ye(vr,a))}function Eh(n){Da.current===n&&(tt(vr),tt(Da))}var ut=Is(0);function cu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Th=[];function Ih(){for(var n=0;n<Th.length;n++)Th[n]._workInProgressVersionPrimary=null;Th.length=0}var hu=J.ReactCurrentDispatcher,xh=J.ReactCurrentBatchConfig,Si=0,ct=null,Rt=null,Nt=null,du=!1,Oa=!1,La=0,mE=0;function Ht(){throw Error(t(321))}function Sh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Wn(n[a],s[a]))return!1;return!0}function Ah(n,s,a,c,d,f){if(Si=f,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,hu.current=n===null||n.memoizedState===null?vE:wE,n=a(c,d),Oa){f=0;do{if(Oa=!1,La=0,25<=f)throw Error(t(301));f+=1,Nt=Rt=null,s.updateQueue=null,hu.current=EE,n=a(c,d)}while(Oa)}if(hu.current=mu,s=Rt!==null&&Rt.next!==null,Si=0,Nt=Rt=ct=null,du=!1,s)throw Error(t(300));return n}function Ch(){var n=La!==0;return La=0,n}function wr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ct.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function Vn(){if(Rt===null){var n=ct.alternate;n=n!==null?n.memoizedState:null}else n=Rt.next;var s=Nt===null?ct.memoizedState:Nt.next;if(s!==null)Nt=s,Rt=n;else{if(n===null)throw Error(t(310));Rt=n,n={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Nt===null?ct.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Fa(n,s){return typeof s=="function"?s(n):s}function Rh(n){var s=Vn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Rt,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var w=d.next;d.next=f.next,f.next=w}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var A=w=null,P=null,U=f;do{var X=U.lane;if((Si&X)===X)P!==null&&(P=P.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),c=U.hasEagerState?U.eagerState:n(c,U.action);else{var Y={lane:X,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};P===null?(A=P=Y,w=c):P=P.next=Y,ct.lanes|=X,Ai|=X}U=U.next}while(U!==null&&U!==f);P===null?w=c:P.next=A,Wn(c,s.memoizedState)||(an=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do f=d.lane,ct.lanes|=f,Ai|=f,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function kh(n){var s=Vn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do f=n(f,w.action),w=w.next;while(w!==d);Wn(f,s.memoizedState)||(an=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,c]}function om(){}function am(n,s){var a=ct,c=Vn(),d=s(),f=!Wn(c.memoizedState,d);if(f&&(c.memoizedState=d,an=!0),c=c.queue,Ph(cm.bind(null,a,c,n),[n]),c.getSnapshot!==s||f||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,Ma(9,um.bind(null,a,c,d,s),void 0,null),bt===null)throw Error(t(349));(Si&30)!==0||lm(a,s,d)}return d}function lm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function um(n,s,a,c){s.value=a,s.getSnapshot=c,hm(s)&&dm(n)}function cm(n,s,a){return a(function(){hm(s)&&dm(n)})}function hm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Wn(n,a)}catch{return!0}}function dm(n){var s=Gr(n,1);s!==null&&Yn(s,n,1,-1)}function fm(n){var s=wr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:n},s.queue=n,n=n.dispatch=_E.bind(null,ct,n),[s.memoizedState,n]}function Ma(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function pm(){return Vn().memoizedState}function fu(n,s,a,c){var d=wr();ct.flags|=n,d.memoizedState=Ma(1|s,a,void 0,c===void 0?null:c)}function pu(n,s,a,c){var d=Vn();c=c===void 0?null:c;var f=void 0;if(Rt!==null){var w=Rt.memoizedState;if(f=w.destroy,c!==null&&Sh(c,w.deps)){d.memoizedState=Ma(s,a,f,c);return}}ct.flags|=n,d.memoizedState=Ma(1|s,a,f,c)}function mm(n,s){return fu(8390656,8,n,s)}function Ph(n,s){return pu(2048,8,n,s)}function gm(n,s){return pu(4,2,n,s)}function ym(n,s){return pu(4,4,n,s)}function _m(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function vm(n,s,a){return a=a!=null?a.concat([n]):null,pu(4,4,_m.bind(null,s,n),a)}function Nh(){}function wm(n,s){var a=Vn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Sh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Em(n,s){var a=Vn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Sh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Tm(n,s,a){return(Si&21)===0?(n.baseState&&(n.baseState=!1,an=!0),n.memoizedState=a):(Wn(a,s)||(a=ca(),ct.lanes|=a,Ai|=a,n.baseState=!0),s)}function gE(n,s){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=xh.transition;xh.transition={};try{n(!1),s()}finally{Le=a,xh.transition=c}}function Im(){return Vn().memoizedState}function yE(n,s,a){var c=Ns(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},xm(n))Sm(s,a);else if(a=tm(n,s,a,c),a!==null){var d=tn();Yn(a,n,c,d),Am(a,s,c)}}function _E(n,s,a){var c=Ns(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(xm(n))Sm(s,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var w=s.lastRenderedState,A=f(w,a);if(d.hasEagerState=!0,d.eagerState=A,Wn(A,w)){var P=s.interleaved;P===null?(d.next=d,_h(s)):(d.next=P.next,P.next=d),s.interleaved=d;return}}catch{}finally{}a=tm(n,s,d,c),a!==null&&(d=tn(),Yn(a,n,c,d),Am(a,s,c))}}function xm(n){var s=n.alternate;return n===ct||s!==null&&s===ct}function Sm(n,s){Oa=du=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Am(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,da(n,a)}}var mu={readContext:Dn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},vE={readContext:Dn,useCallback:function(n,s){return wr().memoizedState=[n,s===void 0?null:s],n},useContext:Dn,useEffect:mm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,fu(4194308,4,_m.bind(null,s,n),a)},useLayoutEffect:function(n,s){return fu(4194308,4,n,s)},useInsertionEffect:function(n,s){return fu(4,2,n,s)},useMemo:function(n,s){var a=wr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=wr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=yE.bind(null,ct,n),[c.memoizedState,n]},useRef:function(n){var s=wr();return n={current:n},s.memoizedState=n},useState:fm,useDebugValue:Nh,useDeferredValue:function(n){return wr().memoizedState=n},useTransition:function(){var n=fm(!1),s=n[0];return n=gE.bind(null,n[1]),wr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=ct,d=wr();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),bt===null)throw Error(t(349));(Si&30)!==0||lm(c,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,mm(cm.bind(null,c,f,n),[n]),c.flags|=2048,Ma(9,um.bind(null,c,f,a,s),void 0,null),a},useId:function(){var n=wr(),s=bt.identifierPrefix;if(it){var a=Wr,c=Hr;a=(c&~(1<<32-vn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=La++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=mE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},wE={readContext:Dn,useCallback:wm,useContext:Dn,useEffect:Ph,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:Rh,useRef:pm,useState:function(){return Rh(Fa)},useDebugValue:Nh,useDeferredValue:function(n){var s=Vn();return Tm(s,Rt.memoizedState,n)},useTransition:function(){var n=Rh(Fa)[0],s=Vn().memoizedState;return[n,s]},useMutableSource:om,useSyncExternalStore:am,useId:Im,unstable_isNewReconciler:!1},EE={readContext:Dn,useCallback:wm,useContext:Dn,useEffect:Ph,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:kh,useRef:pm,useState:function(){return kh(Fa)},useDebugValue:Nh,useDeferredValue:function(n){var s=Vn();return Rt===null?s.memoizedState=n:Tm(s,Rt.memoizedState,n)},useTransition:function(){var n=kh(Fa)[0],s=Vn().memoizedState;return[n,s]},useMutableSource:om,useSyncExternalStore:am,useId:Im,unstable_isNewReconciler:!1};function Kn(n,s){if(n&&n.defaultProps){s=le({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function bh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:le({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var gu={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=tn(),d=Ns(n),f=Kr(c,d);f.payload=s,a!=null&&(f.callback=a),s=Cs(n,f,d),s!==null&&(Yn(s,n,d,c),lu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=tn(),d=Ns(n),f=Kr(c,d);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Cs(n,f,d),s!==null&&(Yn(s,n,d,c),lu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=tn(),c=Ns(n),d=Kr(a,c);d.tag=2,s!=null&&(d.callback=s),s=Cs(n,d,c),s!==null&&(Yn(s,n,c,a),lu(s,n,c))}};function Cm(n,s,a,c,d,f,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,w):s.prototype&&s.prototype.isPureReactComponent?!xa(a,c)||!xa(d,f):!0}function Rm(n,s,a){var c=!1,d=xs,f=s.contextType;return typeof f=="object"&&f!==null?f=Dn(f):(d=on(s)?wi:qt.current,c=s.contextTypes,f=(c=c!=null)?_o(n,d):xs),s=new s(a,f),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=gu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),s}function km(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&gu.enqueueReplaceState(s,s.state,null)}function Dh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},vh(n);var f=s.contextType;typeof f=="object"&&f!==null?d.context=Dn(f):(f=on(s)?wi:qt.current,d.context=_o(n,f)),d.state=n.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(bh(n,s,f,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&gu.enqueueReplaceState(d,d.state,null),uu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Ao(n,s){try{var a="",c=s;do a+=ke(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:s,stack:d,digest:null}}function Vh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Oh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var TE=typeof WeakMap=="function"?WeakMap:Map;function Pm(n,s,a){a=Kr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Iu||(Iu=!0,Xh=c),Oh(n,s)},a}function Nm(n,s,a){a=Kr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Oh(n,s)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){Oh(n,s),typeof c!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function bm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new TE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=LE.bind(null,n,s,a),s.then(n,n))}function Dm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Vm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Kr(-1,1),s.tag=2,Cs(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var IE=J.ReactCurrentOwner,an=!1;function en(n,s,a,c){s.child=n===null?em(s,null,a,c):To(s,n.child,a,c)}function Om(n,s,a,c,d){a=a.render;var f=s.ref;return xo(s,d),c=Ah(n,s,a,c,f,d),a=Ch(),n!==null&&!an?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Qr(n,s,d)):(it&&a&&uh(s),s.flags|=1,en(n,s,c,d),s.child)}function Lm(n,s,a,c,d){if(n===null){var f=a.type;return typeof f=="function"&&!rd(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=f,Fm(n,s,f,c,d)):(n=ku(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,(n.lanes&d)===0){var w=f.memoizedProps;if(a=a.compare,a=a!==null?a:xa,a(w,c)&&n.ref===s.ref)return Qr(n,s,d)}return s.flags|=1,n=Ds(f,c),n.ref=s.ref,n.return=s,s.child=n}function Fm(n,s,a,c,d){if(n!==null){var f=n.memoizedProps;if(xa(f,c)&&n.ref===s.ref)if(an=!1,s.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(an=!0);else return s.lanes=n.lanes,Qr(n,s,d)}return Lh(n,s,a,c,d)}function Mm(n,s,a){var c=s.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Ro,An),An|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ye(Ro,An),An|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Ye(Ro,An),An|=c}else f!==null?(c=f.baseLanes|a,s.memoizedState=null):c=a,Ye(Ro,An),An|=c;return en(n,s,d,a),s.child}function jm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Lh(n,s,a,c,d){var f=on(a)?wi:qt.current;return f=_o(s,f),xo(s,d),a=Ah(n,s,a,c,f,d),c=Ch(),n!==null&&!an?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Qr(n,s,d)):(it&&c&&uh(s),s.flags|=1,en(n,s,a,d),s.child)}function Um(n,s,a,c,d){if(on(a)){var f=!0;eu(s)}else f=!1;if(xo(s,d),s.stateNode===null)_u(n,s),Rm(s,a,c),Dh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var P=w.context,U=a.contextType;typeof U=="object"&&U!==null?U=Dn(U):(U=on(a)?wi:qt.current,U=_o(s,U));var X=a.getDerivedStateFromProps,Y=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";Y||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||P!==U)&&km(s,w,c,U),As=!1;var Q=s.memoizedState;w.state=Q,uu(s,c,w,d),P=s.memoizedState,A!==c||Q!==P||sn.current||As?(typeof X=="function"&&(bh(s,a,X,c),P=s.memoizedState),(A=As||Cm(s,a,A,c,Q,P,U))?(Y||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=P),w.props=c,w.state=P,w.context=U,c=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,nm(n,s),A=s.memoizedProps,U=s.type===s.elementType?A:Kn(s.type,A),w.props=U,Y=s.pendingProps,Q=w.context,P=a.contextType,typeof P=="object"&&P!==null?P=Dn(P):(P=on(a)?wi:qt.current,P=_o(s,P));var ae=a.getDerivedStateFromProps;(X=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==Y||Q!==P)&&km(s,w,c,P),As=!1,Q=s.memoizedState,w.state=Q,uu(s,c,w,d);var de=s.memoizedState;A!==Y||Q!==de||sn.current||As?(typeof ae=="function"&&(bh(s,a,ae,c),de=s.memoizedState),(U=As||Cm(s,a,U,c,Q,de,P)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,de,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,de,P)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=de),w.props=c,w.state=de,w.context=P,c=U):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),c=!1)}return Fh(n,s,a,c,f,d)}function Fh(n,s,a,c,d,f){jm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Hp(s,a,!1),Qr(n,s,f);c=s.stateNode,IE.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=To(s,n.child,null,f),s.child=To(s,null,A,f)):en(n,s,A,f),s.memoizedState=c.state,d&&Hp(s,a,!0),s.child}function zm(n){var s=n.stateNode;s.pendingContext?$p(n,s.pendingContext,s.pendingContext!==s.context):s.context&&$p(n,s.context,!1),wh(n,s.containerInfo)}function Bm(n,s,a,c,d){return Eo(),fh(d),s.flags|=256,en(n,s,a,c),s.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function jh(n){return{baseLanes:n,cachePool:null,transitions:null}}function $m(n,s,a){var c=s.pendingProps,d=ut.current,f=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(f=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(ut,d&1),n===null)return dh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,f?(c=s.mode,f=s.child,w={mode:"hidden",children:w},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=w):f=Pu(w,c,0,null),n=Pi(n,c,a,null),f.return=s,n.return=s,f.sibling=n,s.child=f,s.child.memoizedState=jh(a),s.memoizedState=Mh,n):Uh(s,w));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return xE(n,s,w,c,A,d,a);if(f){f=c.fallback,w=s.mode,d=n.child,A=d.sibling;var P={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=P,s.deletions=null):(c=Ds(d,P),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?f=Ds(A,f):(f=Pi(f,w,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,w=n.child.memoizedState,w=w===null?jh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},f.memoizedState=w,f.childLanes=n.childLanes&~a,s.memoizedState=Mh,c}return f=n.child,n=f.sibling,c=Ds(f,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Uh(n,s){return s=Pu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function yu(n,s,a,c){return c!==null&&fh(c),To(s,n.child,null,a),n=Uh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function xE(n,s,a,c,d,f,w){if(a)return s.flags&256?(s.flags&=-257,c=Vh(Error(t(422))),yu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(f=c.fallback,d=s.mode,c=Pu({mode:"visible",children:c.children},d,0,null),f=Pi(f,d,w,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,(s.mode&1)!==0&&To(s,n.child,null,w),s.child.memoizedState=jh(w),s.memoizedState=Mh,f);if((s.mode&1)===0)return yu(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,f=Error(t(419)),c=Vh(f,c,void 0),yu(n,s,w,c)}if(A=(w&n.childLanes)!==0,an||A){if(c=bt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Gr(n,d),Yn(c,n,d,-1))}return nd(),c=Vh(Error(t(421))),yu(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=FE.bind(null,n),d._reactRetry=s,null):(n=f.treeContext,Sn=Ts(d.nextSibling),xn=s,it=!0,Gn=null,n!==null&&(Nn[bn++]=Hr,Nn[bn++]=Wr,Nn[bn++]=Ei,Hr=n.id,Wr=n.overflow,Ei=s),s=Uh(s,c.children),s.flags|=4096,s)}function qm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),yh(n.return,s,a)}function zh(n,s,a,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Hm(n,s,a){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(en(n,s,c.children,a),c=ut.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qm(n,a,s);else if(n.tag===19)qm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(ut,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&cu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),zh(s,!1,d,a,f);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&cu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}zh(s,!0,a,null,f);break;case"together":zh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _u(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Qr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ai|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Ds(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ds(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function SE(n,s,a){switch(s.tag){case 3:zm(s),Eo();break;case 5:im(s);break;case 1:on(s.type)&&eu(s);break;case 4:wh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ye(ou,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ye(ut,ut.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?$m(n,s,a):(Ye(ut,ut.current&1),n=Qr(n,s,a),n!==null?n.sibling:null);Ye(ut,ut.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Hm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(ut,ut.current),c)break;return null;case 22:case 23:return s.lanes=0,Mm(n,s,a)}return Qr(n,s,a)}var Wm,Bh,Gm,Km;Wm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bh=function(){},Gm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,xi(vr.current);var f=null;switch(a){case"input":d=ls(n,d),c=ls(n,c),f=[];break;case"select":d=le({},d,{value:void 0}),c=le({},c,{value:void 0}),f=[];break;case"textarea":d=Dr(n,d),c=Dr(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Yl)}gn(a,c);var w;a=null;for(U in d)if(!c.hasOwnProperty(U)&&d.hasOwnProperty(U)&&d[U]!=null)if(U==="style"){var A=d[U];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?f||(f=[]):(f=f||[]).push(U,null));for(U in c){var P=c[U];if(A=d!=null?d[U]:void 0,c.hasOwnProperty(U)&&P!==A&&(P!=null||A!=null))if(U==="style")if(A){for(w in A)!A.hasOwnProperty(w)||P&&P.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in P)P.hasOwnProperty(w)&&A[w]!==P[w]&&(a||(a={}),a[w]=P[w])}else a||(f||(f=[]),f.push(U,a)),a=P;else U==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,A=A?A.__html:void 0,P!=null&&A!==P&&(f=f||[]).push(U,P)):U==="children"?typeof P!="string"&&typeof P!="number"||(f=f||[]).push(U,""+P):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(P!=null&&U==="onScroll"&&et("scroll",n),f||A===P||(f=[])):(f=f||[]).push(U,P))}a&&(f=f||[]).push("style",a);var U=f;(s.updateQueue=U)&&(s.flags|=4)}},Km=function(n,s,a,c){a!==c&&(s.flags|=4)};function ja(n,s){if(!it)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Wt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function AE(n,s,a){var c=s.pendingProps;switch(ch(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(s),null;case 1:return on(s.type)&&Zl(),Wt(s),null;case 3:return c=s.stateNode,So(),tt(sn),tt(qt),Ih(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(su(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Gn!==null&&(Zh(Gn),Gn=null))),Bh(n,s),Wt(s),null;case 5:Eh(s);var d=xi(Va.current);if(a=s.type,n!==null&&s.stateNode!=null)Gm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Wt(s),null}if(n=xi(vr.current),su(s)){c=s.stateNode,a=s.type;var f=s.memoizedProps;switch(c[_r]=s,c[ka]=f,n=(s.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<Aa.length;d++)et(Aa[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":ni(c,f),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},et("invalid",c);break;case"textarea":cs(c,f),et("invalid",c)}gn(a,f),d=null;for(var w in f)if(f.hasOwnProperty(w)){var A=f[w];w==="children"?typeof A=="string"?c.textContent!==A&&(f.suppressHydrationWarning!==!0&&Xl(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(f.suppressHydrationWarning!==!0&&Xl(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&et("scroll",c)}switch(a){case"input":as(c),ri(c,f,!0);break;case"textarea":as(c),rr(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Yl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=si(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[_r]=s,n[ka]=c,Wm(n,s,!1,!1),s.stateNode=n;e:{switch(w=ds(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<Aa.length;d++)et(Aa[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":ni(n,c),d=ls(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=le({},c,{value:void 0}),et("invalid",n);break;case"textarea":cs(n,c),d=Dr(n,c),et("invalid",n);break;default:d=c}gn(a,d),A=d;for(f in A)if(A.hasOwnProperty(f)){var P=A[f];f==="style"?hs(n,P):f==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&ii(n,P)):f==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Or(n,P):typeof P=="number"&&Or(n,""+P):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?P!=null&&f==="onScroll"&&et("scroll",n):P!=null&&oe(n,f,P,w))}switch(a){case"input":as(n),ri(n,c,!1);break;case"textarea":as(n),rr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Oe(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?pn(n,!!c.multiple,f,!1):c.defaultValue!=null&&pn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Yl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Wt(s),null;case 6:if(n&&s.stateNode!=null)Km(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=xi(Va.current),xi(vr.current),su(s)){if(c=s.stateNode,a=s.memoizedProps,c[_r]=s,(f=c.nodeValue!==a)&&(n=xn,n!==null))switch(n.tag){case 3:Xl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xl(c.nodeValue,a,(n.mode&1)!==0)}f&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[_r]=s,s.stateNode=c}return Wt(s),null;case 13:if(tt(ut),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&Sn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Yp(),Eo(),s.flags|=98560,f=!1;else if(f=su(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[_r]=s}else Eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Wt(s),f=!1}else Gn!==null&&(Zh(Gn),Gn=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ut.current&1)!==0?kt===0&&(kt=3):nd())),s.updateQueue!==null&&(s.flags|=4),Wt(s),null);case 4:return So(),Bh(n,s),n===null&&Ca(s.stateNode.containerInfo),Wt(s),null;case 10:return gh(s.type._context),Wt(s),null;case 17:return on(s.type)&&Zl(),Wt(s),null;case 19:if(tt(ut),f=s.memoizedState,f===null)return Wt(s),null;if(c=(s.flags&128)!==0,w=f.rendering,w===null)if(c)ja(f,!1);else{if(kt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=cu(n),w!==null){for(s.flags|=128,ja(f,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)f=a,n=c,f.flags&=14680066,w=f.alternate,w===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,n=w.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(ut,ut.current&1|2),s.child}n=n.sibling}f.tail!==null&&Ze()>ko&&(s.flags|=128,c=!0,ja(f,!1),s.lanes=4194304)}else{if(!c)if(n=cu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ja(f,!0),f.tail===null&&f.tailMode==="hidden"&&!w.alternate&&!it)return Wt(s),null}else 2*Ze()-f.renderingStartTime>ko&&a!==1073741824&&(s.flags|=128,c=!0,ja(f,!1),s.lanes=4194304);f.isBackwards?(w.sibling=s.child,s.child=w):(a=f.last,a!==null?a.sibling=w:s.child=w,f.last=w)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Ze(),s.sibling=null,a=ut.current,Ye(ut,c?a&1|2:a&1),s):(Wt(s),null);case 22:case 23:return td(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(An&1073741824)!==0&&(Wt(s),s.subtreeFlags&6&&(s.flags|=8192)):Wt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function CE(n,s){switch(ch(s),s.tag){case 1:return on(s.type)&&Zl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return So(),tt(sn),tt(qt),Ih(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Eh(s),null;case 13:if(tt(ut),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Eo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ut),null;case 4:return So(),null;case 10:return gh(s.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var vu=!1,Gt=!1,RE=typeof WeakSet=="function"?WeakSet:Set,he=null;function Co(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){pt(n,s,c)}else a.current=null}function $h(n,s,a){try{a()}catch(c){pt(n,s,c)}}var Qm=!1;function kE(n,s){if(th=Ur,n=Cp(),Gc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var w=0,A=-1,P=-1,U=0,X=0,Y=n,Q=null;t:for(;;){for(var ae;Y!==a||d!==0&&Y.nodeType!==3||(A=w+d),Y!==f||c!==0&&Y.nodeType!==3||(P=w+c),Y.nodeType===3&&(w+=Y.nodeValue.length),(ae=Y.firstChild)!==null;)Q=Y,Y=ae;for(;;){if(Y===n)break t;if(Q===a&&++U===d&&(A=w),Q===f&&++X===c&&(P=w),(ae=Y.nextSibling)!==null)break;Y=Q,Q=Y.parentNode}Y=ae}a=A===-1||P===-1?null:{start:A,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(nh={focusedElem:n,selectionRange:a},Ur=!1,he=s;he!==null;)if(s=he,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,he=n;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,_t=de.memoizedState,L=s.stateNode,D=L.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Kn(s.type,fe),_t);L.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var M=s.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){pt(s,s.return,Z)}if(n=s.sibling,n!==null){n.return=s.return,he=n;break}he=s.return}return de=Qm,Qm=!1,de}function Ua(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&$h(s,a,f)}d=d.next}while(d!==c)}}function wu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function qh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Xm(n){var s=n.alternate;s!==null&&(n.alternate=null,Xm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[_r],delete s[ka],delete s[oh],delete s[hE],delete s[dE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ym(n){return n.tag===5||n.tag===3||n.tag===4}function Jm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ym(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Yl));else if(c!==4&&(n=n.child,n!==null))for(Hh(n,s,a),n=n.sibling;n!==null;)Hh(n,s,a),n=n.sibling}function Wh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Wh(n,s,a),n=n.sibling;n!==null;)Wh(n,s,a),n=n.sibling}var Mt=null,Qn=!1;function Rs(n,s,a){for(a=a.child;a!==null;)Zm(n,s,a),a=a.sibling}function Zm(n,s,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ci,a)}catch{}switch(a.tag){case 5:Gt||Co(a,s);case 6:var c=Mt,d=Qn;Mt=null,Rs(n,s,a),Mt=c,Qn=d,Mt!==null&&(Qn?(n=Mt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Mt.removeChild(a.stateNode));break;case 18:Mt!==null&&(Qn?(n=Mt,a=a.stateNode,n.nodeType===8?ih(n.parentNode,a):n.nodeType===1&&ih(n,a),_s(n)):ih(Mt,a.stateNode));break;case 4:c=Mt,d=Qn,Mt=a.stateNode.containerInfo,Qn=!0,Rs(n,s,a),Mt=c,Qn=d;break;case 0:case 11:case 14:case 15:if(!Gt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,w=f.destroy;f=f.tag,w!==void 0&&((f&2)!==0||(f&4)!==0)&&$h(a,s,w),d=d.next}while(d!==c)}Rs(n,s,a);break;case 1:if(!Gt&&(Co(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){pt(a,s,A)}Rs(n,s,a);break;case 21:Rs(n,s,a);break;case 22:a.mode&1?(Gt=(c=Gt)||a.memoizedState!==null,Rs(n,s,a),Gt=c):Rs(n,s,a);break;default:Rs(n,s,a)}}function eg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new RE),s.forEach(function(c){var d=ME.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Xn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=n,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:Mt=A.stateNode,Qn=!1;break e;case 3:Mt=A.stateNode.containerInfo,Qn=!0;break e;case 4:Mt=A.stateNode.containerInfo,Qn=!0;break e}A=A.return}if(Mt===null)throw Error(t(160));Zm(f,w,d),Mt=null,Qn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(U){pt(d,s,U)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)tg(s,n),s=s.sibling}function tg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Xn(s,n),Er(n),c&4){try{Ua(3,n,n.return),wu(3,n)}catch(fe){pt(n,n.return,fe)}try{Ua(5,n,n.return)}catch(fe){pt(n,n.return,fe)}}break;case 1:Xn(s,n),Er(n),c&512&&a!==null&&Co(a,a.return);break;case 5:if(Xn(s,n),Er(n),c&512&&a!==null&&Co(a,a.return),n.flags&32){var d=n.stateNode;try{Or(d,"")}catch(fe){pt(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,w=a!==null?a.memoizedProps:f,A=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{A==="input"&&f.type==="radio"&&f.name!=null&&us(d,f),ds(A,w);var U=ds(A,f);for(w=0;w<P.length;w+=2){var X=P[w],Y=P[w+1];X==="style"?hs(d,Y):X==="dangerouslySetInnerHTML"?ii(d,Y):X==="children"?Or(d,Y):oe(d,X,Y,U)}switch(A){case"input":br(d,f);break;case"textarea":ra(d,f);break;case"select":var Q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var ae=f.value;ae!=null?pn(d,!!f.multiple,ae,!1):Q!==!!f.multiple&&(f.defaultValue!=null?pn(d,!!f.multiple,f.defaultValue,!0):pn(d,!!f.multiple,f.multiple?[]:"",!1))}d[ka]=f}catch(fe){pt(n,n.return,fe)}}break;case 6:if(Xn(s,n),Er(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(fe){pt(n,n.return,fe)}}break;case 3:if(Xn(s,n),Er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{_s(s.containerInfo)}catch(fe){pt(n,n.return,fe)}break;case 4:Xn(s,n),Er(n);break;case 13:Xn(s,n),Er(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Qh=Ze())),c&4&&eg(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Gt=(U=Gt)||X,Xn(s,n),Gt=U):Xn(s,n),Er(n),c&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!X&&(n.mode&1)!==0)for(he=n,X=n.child;X!==null;){for(Y=he=X;he!==null;){switch(Q=he,ae=Q.child,Q.tag){case 0:case 11:case 14:case 15:Ua(4,Q,Q.return);break;case 1:Co(Q,Q.return);var de=Q.stateNode;if(typeof de.componentWillUnmount=="function"){c=Q,a=Q.return;try{s=c,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){pt(c,a,fe)}}break;case 5:Co(Q,Q.return);break;case 22:if(Q.memoizedState!==null){sg(Y);continue}}ae!==null?(ae.return=Q,he=ae):sg(Y)}X=X.sibling}e:for(X=null,Y=n;;){if(Y.tag===5){if(X===null){X=Y;try{d=Y.stateNode,U?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(A=Y.stateNode,P=Y.memoizedProps.style,w=P!=null&&P.hasOwnProperty("display")?P.display:null,A.style.display=Un("display",w))}catch(fe){pt(n,n.return,fe)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=U?"":Y.memoizedProps}catch(fe){pt(n,n.return,fe)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Xn(s,n),Er(n),c&4&&eg(n);break;case 21:break;default:Xn(s,n),Er(n)}}function Er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Ym(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Or(d,""),c.flags&=-33);var f=Jm(n);Wh(n,f,d);break;case 3:case 4:var w=c.stateNode.containerInfo,A=Jm(n);Hh(n,A,w);break;default:throw Error(t(161))}}catch(P){pt(n,n.return,P)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function PE(n,s,a){he=n,ng(n)}function ng(n,s,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,f=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||vu;if(!w){var A=d.alternate,P=A!==null&&A.memoizedState!==null||Gt;A=vu;var U=Gt;if(vu=w,(Gt=P)&&!U)for(he=d;he!==null;)w=he,P=w.child,w.tag===22&&w.memoizedState!==null?ig(d):P!==null?(P.return=w,he=P):ig(d);for(;f!==null;)he=f,ng(f),f=f.sibling;he=d,vu=A,Gt=U}rg(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,he=f):rg(n)}}function rg(n){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Gt||wu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Gt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Kn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&sm(s,f,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}sm(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var U=s.alternate;if(U!==null){var X=U.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&_s(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||s.flags&512&&qh(s)}catch(Q){pt(s,s.return,Q)}}if(s===n){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function sg(n){for(;he!==null;){var s=he;if(s===n){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function ig(n){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{wu(4,s)}catch(P){pt(s,a,P)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(P){pt(s,d,P)}}var f=s.return;try{qh(s)}catch(P){pt(s,f,P)}break;case 5:var w=s.return;try{qh(s)}catch(P){pt(s,w,P)}}}catch(P){pt(s,s.return,P)}if(s===n){he=null;break}var A=s.sibling;if(A!==null){A.return=s.return,he=A;break}he=s.return}}var NE=Math.ceil,Eu=J.ReactCurrentDispatcher,Gh=J.ReactCurrentOwner,On=J.ReactCurrentBatchConfig,je=0,bt=null,Tt=null,jt=0,An=0,Ro=Is(0),kt=0,za=null,Ai=0,Tu=0,Kh=0,Ba=null,ln=null,Qh=0,ko=1/0,Xr=null,Iu=!1,Xh=null,ks=null,xu=!1,Ps=null,Su=0,$a=0,Yh=null,Au=-1,Cu=0;function tn(){return(je&6)!==0?Ze():Au!==-1?Au:Au=Ze()}function Ns(n){return(n.mode&1)===0?1:(je&2)!==0&&jt!==0?jt&-jt:pE.transition!==null?(Cu===0&&(Cu=ca()),Cu):(n=Le,n!==0||(n=window.event,n=n===void 0?16:ro(n.type)),n)}function Yn(n,s,a,c){if(50<$a)throw $a=0,Yh=null,Error(t(185));pi(n,a,c),((je&2)===0||n!==bt)&&(n===bt&&((je&2)===0&&(Tu|=a),kt===4&&bs(n,jt)),un(n,c),a===1&&je===0&&(s.mode&1)===0&&(ko=Ze()+500,tu&&Ss()))}function un(n,s){var a=n.callbackNode;fi(n,s);var c=Fr(n,n===bt?jt:0);if(c===0)a!==null&&Xi(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Xi(a),s===1)n.tag===0?fE(ag.bind(null,n)):Wp(ag.bind(null,n)),uE(function(){(je&6)===0&&Ss()}),a=null;else{switch(lr(c)){case 1:a=Yi;break;case 4:a=aa;break;case 16:a=ui;break;case 536870912:a=Ji;break;default:a=ui}a=mg(a,og.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function og(n,s){if(Au=-1,Cu=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Po()&&n.callbackNode!==a)return null;var c=Fr(n,n===bt?jt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Ru(n,c);else{s=c;var d=je;je|=2;var f=ug();(bt!==n||jt!==s)&&(Xr=null,ko=Ze()+500,Ri(n,s));do try{VE();break}catch(A){lg(n,A)}while(!0);mh(),Eu.current=f,je=d,Tt!==null?s=0:(bt=null,jt=0,s=kt)}if(s!==0){if(s===2&&(d=ua(n),d!==0&&(c=d,s=Jh(n,d))),s===1)throw a=za,Ri(n,0),bs(n,c),un(n,Ze()),a;if(s===6)bs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!bE(d)&&(s=Ru(n,c),s===2&&(f=ua(n),f!==0&&(c=f,s=Jh(n,f))),s===1))throw a=za,Ri(n,0),bs(n,c),un(n,Ze()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ki(n,ln,Xr);break;case 3:if(bs(n,c),(c&130023424)===c&&(s=Qh+500-Ze(),10<s)){if(Fr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){tn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=sh(ki.bind(null,n,ln,Xr),s);break}ki(n,ln,Xr);break;case 4:if(bs(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-vn(c);f=1<<w,w=s[w],w>d&&(d=w),c&=~f}if(c=d,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*NE(c/1960))-c,10<c){n.timeoutHandle=sh(ki.bind(null,n,ln,Xr),c);break}ki(n,ln,Xr);break;case 5:ki(n,ln,Xr);break;default:throw Error(t(329))}}}return un(n,Ze()),n.callbackNode===a?og.bind(null,n):null}function Jh(n,s){var a=Ba;return n.current.memoizedState.isDehydrated&&(Ri(n,s).flags|=256),n=Ru(n,s),n!==2&&(s=ln,ln=a,s!==null&&Zh(s)),n}function Zh(n){ln===null?ln=n:ln.push.apply(ln,n)}function bE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!Wn(f(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bs(n,s){for(s&=~Kh,s&=~Tu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-vn(s),c=1<<a;n[a]=-1,s&=~c}}function ag(n){if((je&6)!==0)throw Error(t(327));Po();var s=Fr(n,0);if((s&1)===0)return un(n,Ze()),null;var a=Ru(n,s);if(n.tag!==0&&a===2){var c=ua(n);c!==0&&(s=c,a=Jh(n,c))}if(a===1)throw a=za,Ri(n,0),bs(n,s),un(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ki(n,ln,Xr),un(n,Ze()),null}function ed(n,s){var a=je;je|=1;try{return n(s)}finally{je=a,je===0&&(ko=Ze()+500,tu&&Ss())}}function Ci(n){Ps!==null&&Ps.tag===0&&(je&6)===0&&Po();var s=je;je|=1;var a=On.transition,c=Le;try{if(On.transition=null,Le=1,n)return n()}finally{Le=c,On.transition=a,je=s,(je&6)===0&&Ss()}}function td(){An=Ro.current,tt(Ro)}function Ri(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,lE(a)),Tt!==null)for(a=Tt.return;a!==null;){var c=a;switch(ch(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Zl();break;case 3:So(),tt(sn),tt(qt),Ih();break;case 5:Eh(c);break;case 4:So();break;case 13:tt(ut);break;case 19:tt(ut);break;case 10:gh(c.type._context);break;case 22:case 23:td()}a=a.return}if(bt=n,Tt=n=Ds(n.current,null),jt=An=s,kt=0,za=null,Kh=Tu=Ai=0,ln=Ba=null,Ii!==null){for(s=0;s<Ii.length;s++)if(a=Ii[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var w=f.next;f.next=d,c.next=w}a.pending=c}Ii=null}return n}function lg(n,s){do{var a=Tt;try{if(mh(),hu.current=mu,du){for(var c=ct.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}du=!1}if(Si=0,Nt=Rt=ct=null,Oa=!1,La=0,Gh.current=null,a===null||a.return===null){kt=1,za=s,Tt=null;break}e:{var f=n,w=a.return,A=a,P=s;if(s=jt,A.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var U=P,X=A,Y=X.tag;if((X.mode&1)===0&&(Y===0||Y===11||Y===15)){var Q=X.alternate;Q?(X.updateQueue=Q.updateQueue,X.memoizedState=Q.memoizedState,X.lanes=Q.lanes):(X.updateQueue=null,X.memoizedState=null)}var ae=Dm(w);if(ae!==null){ae.flags&=-257,Vm(ae,w,A,f,s),ae.mode&1&&bm(f,U,s),s=ae,P=U;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(P),s.updateQueue=fe}else de.add(P);break e}else{if((s&1)===0){bm(f,U,s),nd();break e}P=Error(t(426))}}else if(it&&A.mode&1){var _t=Dm(w);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),Vm(_t,w,A,f,s),fh(Ao(P,A));break e}}f=P=Ao(P,A),kt!==4&&(kt=2),Ba===null?Ba=[f]:Ba.push(f),f=w;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var L=Pm(f,P,s);rm(f,L);break e;case 1:A=P;var D=f.type,M=f.stateNode;if((f.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(ks===null||!ks.has(M)))){f.flags|=65536,s&=-s,f.lanes|=s;var Z=Nm(f,A,s);rm(f,Z);break e}}f=f.return}while(f!==null)}hg(a)}catch(pe){s=pe,Tt===a&&a!==null&&(Tt=a=a.return);continue}break}while(!0)}function ug(){var n=Eu.current;return Eu.current=mu,n===null?mu:n}function nd(){(kt===0||kt===3||kt===2)&&(kt=4),bt===null||(Ai&268435455)===0&&(Tu&268435455)===0||bs(bt,jt)}function Ru(n,s){var a=je;je|=2;var c=ug();(bt!==n||jt!==s)&&(Xr=null,Ri(n,s));do try{DE();break}catch(d){lg(n,d)}while(!0);if(mh(),je=a,Eu.current=c,Tt!==null)throw Error(t(261));return bt=null,jt=0,kt}function DE(){for(;Tt!==null;)cg(Tt)}function VE(){for(;Tt!==null&&!li();)cg(Tt)}function cg(n){var s=pg(n.alternate,n,An);n.memoizedProps=n.pendingProps,s===null?hg(n):Tt=s,Gh.current=null}function hg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=AE(a,s,An),a!==null){Tt=a;return}}else{if(a=CE(a,s),a!==null){a.flags&=32767,Tt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,Tt=null;return}}if(s=s.sibling,s!==null){Tt=s;return}Tt=s=n}while(s!==null);kt===0&&(kt=5)}function ki(n,s,a){var c=Le,d=On.transition;try{On.transition=null,Le=1,OE(n,s,a,c)}finally{On.transition=d,Le=c}return null}function OE(n,s,a,c){do Po();while(Ps!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(Bc(n,f),n===bt&&(Tt=bt=null,jt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||xu||(xu=!0,mg(ui,function(){return Po(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=On.transition,On.transition=null;var w=Le;Le=1;var A=je;je|=4,Gh.current=null,kE(n,a),tg(a,n),tE(nh),Ur=!!th,nh=th=null,n.current=a,PE(a),Lr(),je=A,Le=w,On.transition=f}else n.current=a;if(xu&&(xu=!1,Ps=n,Su=d),f=n.pendingLanes,f===0&&(ks=null),Ol(a.stateNode),un(n,Ze()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Iu)throw Iu=!1,n=Xh,Xh=null,n;return(Su&1)!==0&&n.tag!==0&&Po(),f=n.pendingLanes,(f&1)!==0?n===Yh?$a++:($a=0,Yh=n):$a=0,Ss(),null}function Po(){if(Ps!==null){var n=lr(Su),s=On.transition,a=Le;try{if(On.transition=null,Le=16>n?16:n,Ps===null)var c=!1;else{if(n=Ps,Ps=null,Su=0,(je&6)!==0)throw Error(t(331));var d=je;for(je|=4,he=n.current;he!==null;){var f=he,w=f.child;if((he.flags&16)!==0){var A=f.deletions;if(A!==null){for(var P=0;P<A.length;P++){var U=A[P];for(he=U;he!==null;){var X=he;switch(X.tag){case 0:case 11:case 15:Ua(8,X,f)}var Y=X.child;if(Y!==null)Y.return=X,he=Y;else for(;he!==null;){X=he;var Q=X.sibling,ae=X.return;if(Xm(X),X===U){he=null;break}if(Q!==null){Q.return=ae,he=Q;break}he=ae}}}var de=f.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var _t=fe.sibling;fe.sibling=null,fe=_t}while(fe!==null)}}he=f}}if((f.subtreeFlags&2064)!==0&&w!==null)w.return=f,he=w;else e:for(;he!==null;){if(f=he,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Ua(9,f,f.return)}var L=f.sibling;if(L!==null){L.return=f.return,he=L;break e}he=f.return}}var D=n.current;for(he=D;he!==null;){w=he;var M=w.child;if((w.subtreeFlags&2064)!==0&&M!==null)M.return=w,he=M;else e:for(w=D;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:wu(9,A)}}catch(pe){pt(A,A.return,pe)}if(A===w){he=null;break e}var Z=A.sibling;if(Z!==null){Z.return=A.return,he=Z;break e}he=A.return}}if(je=d,Ss(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ci,n)}catch{}c=!0}return c}finally{Le=a,On.transition=s}}return!1}function dg(n,s,a){s=Ao(a,s),s=Pm(n,s,1),n=Cs(n,s,1),s=tn(),n!==null&&(pi(n,1,s),un(n,s))}function pt(n,s,a){if(n.tag===3)dg(n,n,a);else for(;s!==null;){if(s.tag===3){dg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ks===null||!ks.has(c))){n=Ao(a,n),n=Nm(s,n,1),s=Cs(s,n,1),n=tn(),s!==null&&(pi(s,1,n),un(s,n));break}}s=s.return}}function LE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=tn(),n.pingedLanes|=n.suspendedLanes&a,bt===n&&(jt&a)===a&&(kt===4||kt===3&&(jt&130023424)===jt&&500>Ze()-Qh?Ri(n,0):Kh|=a),un(n,s)}function fg(n,s){s===0&&((n.mode&1)===0?s=1:(s=ms,ms<<=1,(ms&130023424)===0&&(ms=4194304)));var a=tn();n=Gr(n,s),n!==null&&(pi(n,s,a),un(n,a))}function FE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),fg(n,a)}function ME(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),fg(n,a)}var pg;pg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||sn.current)an=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return an=!1,SE(n,s,a);an=(n.flags&131072)!==0}else an=!1,it&&(s.flags&1048576)!==0&&Gp(s,ru,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;_u(n,s),n=s.pendingProps;var d=_o(s,qt.current);xo(s,a),d=Ah(null,s,c,n,d,a);var f=Ch();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,on(c)?(f=!0,eu(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,vh(s),d.updater=gu,s.stateNode=d,d._reactInternals=s,Dh(s,c,n,a),s=Fh(null,s,c,!0,f,a)):(s.tag=0,it&&f&&uh(s),en(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(_u(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=UE(c),n=Kn(c,n),d){case 0:s=Lh(null,s,c,n,a);break e;case 1:s=Um(null,s,c,n,a);break e;case 11:s=Om(null,s,c,n,a);break e;case 14:s=Lm(null,s,c,Kn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Lh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Um(n,s,c,d,a);case 3:e:{if(zm(s),n===null)throw Error(t(387));c=s.pendingProps,f=s.memoizedState,d=f.element,nm(n,s),uu(s,c,null,a);var w=s.memoizedState;if(c=w.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=Ao(Error(t(423)),s),s=Bm(n,s,c,a,d);break e}else if(c!==d){d=Ao(Error(t(424)),s),s=Bm(n,s,c,a,d);break e}else for(Sn=Ts(s.stateNode.containerInfo.firstChild),xn=s,it=!0,Gn=null,a=em(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Eo(),c===d){s=Qr(n,s,a);break e}en(n,s,c,a)}s=s.child}return s;case 5:return im(s),n===null&&dh(s),c=s.type,d=s.pendingProps,f=n!==null?n.memoizedProps:null,w=d.children,rh(c,d)?w=null:f!==null&&rh(c,f)&&(s.flags|=32),jm(n,s),en(n,s,w,a),s.child;case 6:return n===null&&dh(s),null;case 13:return $m(n,s,a);case 4:return wh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=To(s,null,c,a):en(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Om(n,s,c,d,a);case 7:return en(n,s,s.pendingProps,a),s.child;case 8:return en(n,s,s.pendingProps.children,a),s.child;case 12:return en(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,f=s.memoizedProps,w=d.value,Ye(ou,c._currentValue),c._currentValue=w,f!==null)if(Wn(f.value,w)){if(f.children===d.children&&!sn.current){s=Qr(n,s,a);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var A=f.dependencies;if(A!==null){w=f.child;for(var P=A.firstContext;P!==null;){if(P.context===c){if(f.tag===1){P=Kr(-1,a&-a),P.tag=2;var U=f.updateQueue;if(U!==null){U=U.shared;var X=U.pending;X===null?P.next=P:(P.next=X.next,X.next=P),U.pending=P}}f.lanes|=a,P=f.alternate,P!==null&&(P.lanes|=a),yh(f.return,a,s),A.lanes|=a;break}P=P.next}}else if(f.tag===10)w=f.type===s.type?null:f.child;else if(f.tag===18){if(w=f.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),yh(w,a,s),w=f.sibling}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}en(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,xo(s,a),d=Dn(d),c=c(d),s.flags|=1,en(n,s,c,a),s.child;case 14:return c=s.type,d=Kn(c,s.pendingProps),d=Kn(c.type,d),Lm(n,s,c,d,a);case 15:return Fm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),_u(n,s),s.tag=1,on(c)?(n=!0,eu(s)):n=!1,xo(s,a),Rm(s,c,d),Dh(s,c,d,a),Fh(null,s,c,!0,n,a);case 19:return Hm(n,s,a);case 22:return Mm(n,s,a)}throw Error(t(156,s.tag))};function mg(n,s){return oa(n,s)}function jE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(n,s,a,c){return new jE(n,s,a,c)}function rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function UE(n){if(typeof n=="function")return rd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===ft)return 14}return 2}function Ds(n,s){var a=n.alternate;return a===null?(a=Ln(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ku(n,s,a,c,d,f){var w=2;if(c=n,typeof n=="function")rd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case C:return Pi(a.children,d,f,s);case S:w=8,d|=8;break;case k:return n=Ln(12,a,s,d|2),n.elementType=k,n.lanes=f,n;case R:return n=Ln(13,a,s,d),n.elementType=R,n.lanes=f,n;case Ue:return n=Ln(19,a,s,d),n.elementType=Ue,n.lanes=f,n;case Qe:return Pu(a,d,f,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:w=10;break e;case N:w=9;break e;case O:w=11;break e;case ft:w=14;break e;case at:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Ln(w,a,s,d),s.elementType=n,s.type=c,s.lanes=f,s}function Pi(n,s,a,c){return n=Ln(7,n,c,s),n.lanes=a,n}function Pu(n,s,a,c){return n=Ln(22,n,c,s),n.elementType=Qe,n.lanes=a,n.stateNode={isHidden:!1},n}function sd(n,s,a){return n=Ln(6,n,null,s),n.lanes=a,n}function id(n,s,a){return s=Ln(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function zE(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function od(n,s,a,c,d,f,w,A,P){return n=new zE(n,s,a,A,P),s===1?(s=1,f===!0&&(s|=8)):s=0,f=Ln(3,null,null,s),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},vh(f),n}function BE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function gg(n){if(!n)return xs;n=n._reactInternals;e:{if(qn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(on(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(on(a))return qp(n,a,s)}return s}function yg(n,s,a,c,d,f,w,A,P){return n=od(a,c,!0,n,d,f,w,A,P),n.context=gg(null),a=n.current,c=tn(),d=Ns(a),f=Kr(c,d),f.callback=s??null,Cs(a,f,d),n.current.lanes=d,pi(n,d,c),un(n,c),n}function Nu(n,s,a,c){var d=s.current,f=tn(),w=Ns(d);return a=gg(a),s.context===null?s.context=a:s.pendingContext=a,s=Kr(f,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Cs(d,s,w),n!==null&&(Yn(n,d,w,f),lu(n,d,w)),w}function bu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function _g(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function ad(n,s){_g(n,s),(n=n.alternate)&&_g(n,s)}function $E(){return null}var vg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ld(n){this._internalRoot=n}Du.prototype.render=ld.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Nu(n,s,null,null)},Du.prototype.unmount=ld.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ci(function(){Nu(null,n,null,null)}),s[$r]=null}};function Du(n){this._internalRoot=n}Du.prototype.unstable_scheduleHydration=function(n){if(n){var s=ma();n={blockedOn:null,target:n,priority:s};for(var a=0;a<wn.length&&s!==0&&s<wn[a].priority;a++);wn.splice(a,0,n),a===0&&to(n)}};function ud(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Vu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wg(){}function qE(n,s,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var U=bu(w);f.call(U)}}var w=yg(s,c,n,0,null,!1,!1,"",wg);return n._reactRootContainer=w,n[$r]=w.current,Ca(n.nodeType===8?n.parentNode:n),Ci(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var U=bu(P);A.call(U)}}var P=od(n,0,!1,null,null,!1,!1,"",wg);return n._reactRootContainer=P,n[$r]=P.current,Ca(n.nodeType===8?n.parentNode:n),Ci(function(){Nu(s,P,a,c)}),P}function Ou(n,s,a,c,d){var f=a._reactRootContainer;if(f){var w=f;if(typeof d=="function"){var A=d;d=function(){var P=bu(w);A.call(P)}}Nu(s,w,n,d)}else w=qE(a,s,n,d,c);return bu(w)}fa=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=$e(s.pendingLanes);a!==0&&(da(s,a|1),un(s,Ze()),(je&6)===0&&(ko=Ze()+500,Ss()))}break;case 13:Ci(function(){var c=Gr(n,1);if(c!==null){var d=tn();Yn(c,n,1,d)}}),ad(n,1)}},Zi=function(n){if(n.tag===13){var s=Gr(n,134217728);if(s!==null){var a=tn();Yn(s,n,134217728,a)}ad(n,134217728)}},pa=function(n){if(n.tag===13){var s=Ns(n),a=Gr(n,s);if(a!==null){var c=tn();Yn(a,n,s,c)}ad(n,s)}},ma=function(){return Le},ga=function(n,s){var a=Le;try{return Le=n,s()}finally{Le=a}},Bn=function(n,s,a){switch(s){case"input":if(br(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Jl(c);if(!d)throw Error(t(90));ti(c),br(c,d)}}}break;case"textarea":ra(n,a);break;case"select":s=a.value,s!=null&&pn(n,!!a.multiple,s,!1)}},Ki=ed,Qi=Ci;var HE={usingClientEntryPoint:!1,Events:[Pa,go,Jl,sr,ir,ed]},qa={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WE={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Vl(n),n===null?null:n.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||$E,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{ci=Lu.inject(WE),_n=Lu}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HE,cn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(s))throw Error(t(200));return BE(n,s,null,a)},cn.createRoot=function(n,s){if(!ud(n))throw Error(t(299));var a=!1,c="",d=vg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=od(n,1,!1,null,null,a,!1,c,d),n[$r]=s.current,Ca(n.nodeType===8?n.parentNode:n),new ld(s)},cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Vl(s),n=n===null?null:n.stateNode,n},cn.flushSync=function(n){return Ci(n)},cn.hydrate=function(n,s,a){if(!Vu(s))throw Error(t(200));return Ou(null,n,s,!0,a)},cn.hydrateRoot=function(n,s,a){if(!ud(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",w=vg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=yg(s,null,n,1,a??null,d,!1,f,w),n[$r]=s.current,Ca(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Du(s)},cn.render=function(n,s,a){if(!Vu(s))throw Error(t(200));return Ou(null,n,s,!1,a)},cn.unmountComponentAtNode=function(n){if(!Vu(n))throw Error(t(40));return n._reactRootContainer?(Ci(function(){Ou(null,null,n,!1,function(){n._reactRootContainer=null,n[$r]=null})}),!0):!1},cn.unstable_batchedUpdates=ed,cn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Vu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ou(n,s,a,!1,c)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var Rg;function n0(){if(Rg)return fd.exports;Rg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fd.exports=t0(),fd.exports}var kg;function r0(){if(kg)return Fu;kg=1;var r=n0();return Fu.createRoot=r.createRoot,Fu.hydrateRoot=r.hydrateRoot,Fu}var s0=r0();const i0=c_(s0),o0="modulepreload",a0=function(r){return"/"+r},Pg={},Ys=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let h=function(_){return Promise.all(_.map(E=>Promise.resolve(E).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=h(t.map(_=>{if(_=a0(_),_ in Pg)return;Pg[_]=!0;const E=_.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${I}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":o0,E||(x.as="script"),x.crossOrigin="",x.href=_,g&&x.setAttribute("nonce",g),document.head.appendChild(x),E)return new Promise((j,G)=>{x.addEventListener("load",j),x.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return o.then(h=>{for(const m of h||[])m.status==="rejected"&&l(m.reason);return e().catch(l)})},gd={" ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","",""]},h_=[{id:"qualitative",name:"",desc:""},{id:"emotional",name:"",desc:""},{id:"friendly",name:"",desc:""},{id:"humorous",name:"",desc:""},{id:"internal",name:"",desc:""},{id:"philosophical",name:"",desc:""},{id:"practical",name:"",desc:""},{id:"resonance",name:"",desc:""},{id:"blessing",name:"",desc:""},{id:"scenario",name:"",desc:""},{id:"milestone",name:"",desc:""},{id:"journey",name:"",desc:""}],d_=()=>localStorage.getItem("gemini_api_key")||"",Ng=()=>!!d_(),bg=async(r,e,t=[],i)=>{var G,$,B,K,te;const o=d_();if(!o)return"  API Key Gemini API Key";const l=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${o}`;let h="";t.length>0?h=t.map(oe=>{const J=h_.find(ce=>ce.id===oe);return J?`${J.name}${J.desc}`:""}).join(`
`):h="";const g=`${{normal:"",casual:"",formal:""}[i.tone]||""}`,_=` ${i.wordCount||80} `,E=`""

${r}
${e||""}

****
1. ${g}
2. ${_}

 ${t.length||1} 
${h}

****
1. 
2. 
3. ** Markdown ** ******# 
4. ****
5. 
6. 

...
()

...
`;let I=0;const x=5,j=[1e3,2e3,4e3,8e3,16e3];for(;I<=x;)try{const oe=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:E}]}]})});if(!oe.ok){if(oe.status===400||oe.status===401||oe.status===403)return" API Key ";throw new Error(`API Error: ${oe.status}`)}return((te=(K=(B=($=(G=(await oe.json()).candidates)==null?void 0:G[0])==null?void 0:$.content)==null?void 0:B.parts)==null?void 0:K[0])==null?void 0:te.text)||""}catch(oe){if(I===x)return console.error("Gemini API Failed:",oe),"";await new Promise(J=>setTimeout(J,j[I])),I++}};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f_=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=ne.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...m},g)=>ne.createElement("svg",{ref:g,...u0,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:f_("lucide",o),...m},[...h.map(([_,E])=>ne.createElement(_,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(r,e)=>{const t=ne.forwardRef(({className:i,...o},l)=>ne.createElement(c0,{ref:l,iconNode:e,className:f_(`lucide-${l0(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ot("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=ot("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=ot("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=ot("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ot("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=ot("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=ot("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=ot("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ot("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ot("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ot("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=ot("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=ot("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ot("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=ot("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=ot("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),y_=ne.createContext(null),Vg={success:{bg:"bg-[#1DD1A1]",icon:d0,iconColor:"text-white"},error:{bg:"bg-[#FF6B6B]",icon:f0,iconColor:"text-white"},warning:{bg:"bg-[#FECA57]",icon:h0,iconColor:"text-[#2D3436]"},info:{bg:"bg-[#54A0FF]",icon:p_,iconColor:"text-white"}},S0=({id:r,message:e,type:t,onRemove:i})=>{const o=Vg[t]||Vg.info,l=o.icon;return v.jsxs("div",{className:`${o.bg} text-white px-4 py-3 rounded-lg shadow-lg border-2 border-[#2D3436] 
                       flex items-center gap-3 min-w-[280px] max-w-[400px] animate-in 
                       slide-in-from-right-5 duration-300`,role:"alert",children:[v.jsx(l,{size:20,className:o.iconColor}),v.jsx("span",{className:"flex-1 font-medium text-sm",children:e}),v.jsx("button",{onClick:()=>i(r),className:"p-1 hover:bg-white/20 rounded transition-colors",children:v.jsx(vc,{size:16})})]})},A0=({toasts:r,onRemove:e})=>r.length===0?null:v.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2",children:r.map(t=>v.jsx(S0,{...t,onRemove:e},t.id))}),C0=({children:r})=>{const[e,t]=ne.useState([]),i=ne.useCallback(h=>{t(m=>m.filter(g=>g.id!==h))},[]),o=ne.useCallback((h,m="info",g=3e3)=>{const _=Date.now()+Math.random();return t(E=>[...E,{id:_,message:h,type:m}]),g>0&&setTimeout(()=>i(_),g),_},[i]),l={success:(h,m)=>o(h,"success",m),error:(h,m)=>o(h,"error",m??5e3),warning:(h,m)=>o(h,"warning",m),info:(h,m)=>o(h,"info",m)};return v.jsxs(y_.Provider,{value:{showToast:o,toast:l,removeToast:i},children:[r,v.jsx(A0,{toasts:e,onRemove:i})]})},R0=()=>{const r=ne.useContext(y_);if(!r)throw new Error("useToast  ToastProvider ");return r},k0=(r,e)=>{let t="";e==="csv"?(t=`\uFEFF,,
`,r.forEach(h=>{const g=[...h.selectedTags,h.manualTraits].filter(Boolean).join("").replace(/,/g,""),_=h.comment.replace(/,/g,"").replace(/\n/g," ");t+=`${h.name},"${g}","${_}"
`})):r.forEach(h=>{const m=[...h.selectedTags,h.manualTraits].filter(Boolean).join("");t+=`${h.name}
${m||""}

${h.comment}
-------------------
`});const i=new Blob([t],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`_${new Date().toLocaleDateString()}.${e}`,l.click(),URL.revokeObjectURL(o)},P0=()=>{const[r,e]=ne.useState({isOpen:!1,type:"info",title:"",message:"",onConfirm:null}),t=ne.useCallback(()=>{e(l=>({...l,isOpen:!1}))},[]),i=ne.useCallback((l,h,m)=>{e({isOpen:!0,type:"confirm",title:l,message:h,onConfirm:m})},[]),o=ne.useCallback(l=>{e({isOpen:!0,type:"info",title:"",message:l,onConfirm:null})},[]);return{dialog:r,closeDialog:t,showConfirm:i,showAlert:o}},N0=()=>{};var Og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},b0=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},v_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=l>>2,I=(l&3)<<4|m>>4;let x=(m&15)<<2|_>>6,j=_&63;g||(j=64,h||(x=64)),i.push(t[E],t[I],t[x],t[j])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(__(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):b0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||_==null||I==null)throw new D0;const x=l<<2|m>>4;if(i.push(x),_!==64){const j=m<<4&240|_>>2;if(i.push(j),I!==64){const G=_<<6&192|I;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class D0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V0=function(r){const e=__(r);return v_.encodeByteArray(e,!0)},ec=function(r){return V0(r).replace(/\./g,"")},w_=function(r){try{return v_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=()=>O0().__FIREBASE_DEFAULTS__,F0=()=>{if(typeof process>"u"||typeof Og>"u")return;const r=Og.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},M0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&w_(r[1]);return e&&JSON.parse(e)},wc=()=>{try{return N0()||L0()||F0()||M0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},E_=r=>{var e,t;return(t=(e=wc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},j0=r=>{const e=E_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},T_=()=>{var r;return(r=wc())==null?void 0:r.config},I_=r=>{var e;return(e=wc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ec(JSON.stringify(t)),ec(JSON.stringify(h)),""].join(".")}const Xa={};function B0(){const r={prod:[],emulator:[]};for(const e of Object.keys(Xa))Xa[e]?r.emulator.push(e):r.prod.push(e);return r}function $0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Lg=!1;function S_(r,e){if(typeof window>"u"||typeof document>"u"||!Qo(window.location.host)||Xa[r]===e||Xa[r]||Lg)return;Xa[r]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",l=B0().prod.length>0;function h(){const x=document.getElementById(i);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,j){x.setAttribute("width","24"),x.setAttribute("id",j),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function _(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Lg=!0,h()},x}function E(x,j){x.setAttribute("id",j),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=$0(i),j=t("text"),G=document.getElementById(j)||document.createElement("span"),$=t("learnmore"),B=document.getElementById($)||document.createElement("a"),K=t("preprendIcon"),te=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const oe=x.element;m(oe),E(B,$);const J=_();g(te,K),oe.append(te,G,B,J),document.body.appendChild(oe)}l?(G.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function H0(){var e;const r=(e=wc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function K0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q0(){const r=Jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function X0(){return!H0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y0(){try{return typeof indexedDB=="object"}catch{return!1}}function J0(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="FirebaseError";class os extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Z0,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?e1(l,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new os(o,m,i)}}function e1(r,e){return r.replace(t1,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const t1=/\{\$([^}]+)}/g;function n1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ji(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Fg(l)&&Fg(h)){if(!ji(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Fg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function r1(r,e){const t=new s1(r,e);return t.subscribe.bind(t)}class s1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");i1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=yd),o.error===void 0&&(o.error=yd),o.complete===void 0&&(o.complete=yd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function yd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r){return r&&r._delegate?r._delegate:r}class Ui{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new U0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l1(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:a1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a1(r){return r===bi?void 0:r}function l1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const c1={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},h1=be.INFO,d1={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},f1=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=d1[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pf{constructor(e){this.name=e,this._logLevel=h1,this._logHandler=f1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const p1=(r,e)=>e.some(t=>r instanceof t);let Mg,jg;function m1(){return Mg||(Mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g1(){return jg||(jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A_=new WeakMap,Dd=new WeakMap,C_=new WeakMap,_d=new WeakMap,mf=new WeakMap;function y1(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Us(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&A_.set(t,r)}).catch(()=>{}),mf.set(e,r),e}function _1(r){if(Dd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Dd.set(r,e)}let Vd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Dd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||C_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function v1(r){Vd=r(Vd)}function w1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(vd(this),e,...t);return C_.set(i,e.sort?e.sort():[e]),Us(i)}:g1().includes(r)?function(...e){return r.apply(vd(this),e),Us(A_.get(this))}:function(...e){return Us(r.apply(vd(this),e))}}function E1(r){return typeof r=="function"?w1(r):(r instanceof IDBTransaction&&_1(r),p1(r,m1())?new Proxy(r,Vd):r)}function Us(r){if(r instanceof IDBRequest)return y1(r);if(_d.has(r))return _d.get(r);const e=E1(r);return e!==r&&(_d.set(r,e),mf.set(e,r)),e}const vd=r=>mf.get(r);function T1(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=Us(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Us(h.result),g.oldVersion,g.newVersion,Us(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const I1=["get","getKey","getAll","getAllKeys","count"],x1=["put","add","delete","clear"],wd=new Map;function Ug(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(wd.get(e))return wd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=x1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||I1.includes(t)))return;const l=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return wd.set(e,l),l}v1(r=>({...r,get:(e,t,i)=>Ug(e,t)||r.get(e,t,i),has:(e,t)=>!!Ug(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(A1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function A1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Od="@firebase/app",zg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new pf("@firebase/app"),C1="@firebase/app-compat",R1="@firebase/analytics-compat",k1="@firebase/analytics",P1="@firebase/app-check-compat",N1="@firebase/app-check",b1="@firebase/auth",D1="@firebase/auth-compat",V1="@firebase/database",O1="@firebase/data-connect",L1="@firebase/database-compat",F1="@firebase/functions",M1="@firebase/functions-compat",j1="@firebase/installations",U1="@firebase/installations-compat",z1="@firebase/messaging",B1="@firebase/messaging-compat",$1="@firebase/performance",q1="@firebase/performance-compat",H1="@firebase/remote-config",W1="@firebase/remote-config-compat",G1="@firebase/storage",K1="@firebase/storage-compat",Q1="@firebase/firestore",X1="@firebase/ai",Y1="@firebase/firestore-compat",J1="firebase",Z1="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="[DEFAULT]",eT={[Od]:"fire-core",[C1]:"fire-core-compat",[k1]:"fire-analytics",[R1]:"fire-analytics-compat",[N1]:"fire-app-check",[P1]:"fire-app-check-compat",[b1]:"fire-auth",[D1]:"fire-auth-compat",[V1]:"fire-rtdb",[O1]:"fire-data-connect",[L1]:"fire-rtdb-compat",[F1]:"fire-fn",[M1]:"fire-fn-compat",[j1]:"fire-iid",[U1]:"fire-iid-compat",[z1]:"fire-fcm",[B1]:"fire-fcm-compat",[$1]:"fire-perf",[q1]:"fire-perf-compat",[H1]:"fire-rc",[W1]:"fire-rc-compat",[G1]:"fire-gcs",[K1]:"fire-gcs-compat",[Q1]:"fire-fst",[Y1]:"fire-fst-compat",[X1]:"fire-vertex","fire-js":"fire-js",[J1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,tT=new Map,Fd=new Map;function Bg(r,e){try{r.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function zo(r){const e=r.name;if(Fd.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;Fd.set(e,r);for(const t of tc.values())Bg(t,r);for(const t of tT.values())Bg(t,r);return!0}function gf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new pl("app","Firebase",nT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=Z1;function R_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Ld,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw zs.create("bad-app-name",{appName:String(o)});if(t||(t=T_()),!t)throw zs.create("no-options");const l=tc.get(o);if(l){if(ji(t,l.options)&&ji(i,l.config))return l;throw zs.create("duplicate-app",{appName:o})}const h=new u1(o);for(const g of Fd.values())h.addComponent(g);const m=new rT(t,i,h);return tc.set(o,m),m}function k_(r=Ld){const e=tc.get(r);if(!e&&r===Ld&&T_())return R_();if(!e)throw zs.create("no-app",{appName:r});return e}function Bs(r,e,t){let i=eT[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(h.join(" "));return}zo(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="firebase-heartbeat-database",iT=1,sl="firebase-heartbeat-store";let Ed=null;function P_(){return Ed||(Ed=T1(sT,iT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(r=>{throw zs.create("idb-open",{originalErrorMessage:r.message})})),Ed}async function oT(r){try{const t=(await P_()).transaction(sl),i=await t.objectStore(sl).get(N_(r));return await t.done,i}catch(e){if(e instanceof os)ns.warn(e.message);else{const t=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(t.message)}}}async function $g(r,e){try{const i=(await P_()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,N_(r)),await i.done}catch(t){if(t instanceof os)ns.warn(t.message);else{const i=zs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ns.warn(i.message)}}}function N_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=1024,lT=30;class uT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hT(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=qg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>lT){const h=dT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ns.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qg(),{heartbeatsToSend:i,unsentEntries:o}=cT(this._heartbeatsCache.heartbeats),l=ec(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ns.warn(t),""}}}function qg(){return new Date().toISOString().substring(0,10)}function cT(r,e=aT){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Hg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Hg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class hT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y0()?J0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return $g(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return $g(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hg(r){return ec(JSON.stringify({version:2,heartbeats:r})).length}function dT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(r){zo(new Ui("platform-logger",e=>new S1(e),"PRIVATE")),zo(new Ui("heartbeat",e=>new uT(e),"PRIVATE")),Bs(Od,zg,r),Bs(Od,zg,"esm2020"),Bs("fire-js","")}fT("");var pT="firebase",mT="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(pT,mT,"app");var Wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,b_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function k(){}k.prototype=S.prototype,C.F=S.prototype,C.prototype=new k,C.prototype.constructor=C,C.D=function(b,N,O){for(var R=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)R[Ue-2]=arguments[Ue];return S.prototype[N].apply(b,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,S,k){k||(k=0);const b=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)b[N]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(N=0;N<16;++N)b[N]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=C.g[0],k=C.g[1],N=C.g[2];let O=C.g[3],R;R=S+(O^k&(N^O))+b[0]+3614090360&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(N^S&(k^N))+b[1]+3905402710&4294967295,O=S+(R<<12&4294967295|R>>>20),R=N+(k^O&(S^k))+b[2]+606105819&4294967295,N=O+(R<<17&4294967295|R>>>15),R=k+(S^N&(O^S))+b[3]+3250441966&4294967295,k=N+(R<<22&4294967295|R>>>10),R=S+(O^k&(N^O))+b[4]+4118548399&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(N^S&(k^N))+b[5]+1200080426&4294967295,O=S+(R<<12&4294967295|R>>>20),R=N+(k^O&(S^k))+b[6]+2821735955&4294967295,N=O+(R<<17&4294967295|R>>>15),R=k+(S^N&(O^S))+b[7]+4249261313&4294967295,k=N+(R<<22&4294967295|R>>>10),R=S+(O^k&(N^O))+b[8]+1770035416&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(N^S&(k^N))+b[9]+2336552879&4294967295,O=S+(R<<12&4294967295|R>>>20),R=N+(k^O&(S^k))+b[10]+4294925233&4294967295,N=O+(R<<17&4294967295|R>>>15),R=k+(S^N&(O^S))+b[11]+2304563134&4294967295,k=N+(R<<22&4294967295|R>>>10),R=S+(O^k&(N^O))+b[12]+1804603682&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(N^S&(k^N))+b[13]+4254626195&4294967295,O=S+(R<<12&4294967295|R>>>20),R=N+(k^O&(S^k))+b[14]+2792965006&4294967295,N=O+(R<<17&4294967295|R>>>15),R=k+(S^N&(O^S))+b[15]+1236535329&4294967295,k=N+(R<<22&4294967295|R>>>10),R=S+(N^O&(k^N))+b[1]+4129170786&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^N&(S^k))+b[6]+3225465664&4294967295,O=S+(R<<9&4294967295|R>>>23),R=N+(S^k&(O^S))+b[11]+643717713&4294967295,N=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(N^O))+b[0]+3921069994&4294967295,k=N+(R<<20&4294967295|R>>>12),R=S+(N^O&(k^N))+b[5]+3593408605&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^N&(S^k))+b[10]+38016083&4294967295,O=S+(R<<9&4294967295|R>>>23),R=N+(S^k&(O^S))+b[15]+3634488961&4294967295,N=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(N^O))+b[4]+3889429448&4294967295,k=N+(R<<20&4294967295|R>>>12),R=S+(N^O&(k^N))+b[9]+568446438&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^N&(S^k))+b[14]+3275163606&4294967295,O=S+(R<<9&4294967295|R>>>23),R=N+(S^k&(O^S))+b[3]+4107603335&4294967295,N=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(N^O))+b[8]+1163531501&4294967295,k=N+(R<<20&4294967295|R>>>12),R=S+(N^O&(k^N))+b[13]+2850285829&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^N&(S^k))+b[2]+4243563512&4294967295,O=S+(R<<9&4294967295|R>>>23),R=N+(S^k&(O^S))+b[7]+1735328473&4294967295,N=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(N^O))+b[12]+2368359562&4294967295,k=N+(R<<20&4294967295|R>>>12),R=S+(k^N^O)+b[5]+4294588738&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^N)+b[8]+2272392833&4294967295,O=S+(R<<11&4294967295|R>>>21),R=N+(O^S^k)+b[11]+1839030562&4294967295,N=O+(R<<16&4294967295|R>>>16),R=k+(N^O^S)+b[14]+4259657740&4294967295,k=N+(R<<23&4294967295|R>>>9),R=S+(k^N^O)+b[1]+2763975236&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^N)+b[4]+1272893353&4294967295,O=S+(R<<11&4294967295|R>>>21),R=N+(O^S^k)+b[7]+4139469664&4294967295,N=O+(R<<16&4294967295|R>>>16),R=k+(N^O^S)+b[10]+3200236656&4294967295,k=N+(R<<23&4294967295|R>>>9),R=S+(k^N^O)+b[13]+681279174&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^N)+b[0]+3936430074&4294967295,O=S+(R<<11&4294967295|R>>>21),R=N+(O^S^k)+b[3]+3572445317&4294967295,N=O+(R<<16&4294967295|R>>>16),R=k+(N^O^S)+b[6]+76029189&4294967295,k=N+(R<<23&4294967295|R>>>9),R=S+(k^N^O)+b[9]+3654602809&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^N)+b[12]+3873151461&4294967295,O=S+(R<<11&4294967295|R>>>21),R=N+(O^S^k)+b[15]+530742520&4294967295,N=O+(R<<16&4294967295|R>>>16),R=k+(N^O^S)+b[2]+3299628645&4294967295,k=N+(R<<23&4294967295|R>>>9),R=S+(N^(k|~O))+b[0]+4096336452&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~N))+b[7]+1126891415&4294967295,O=S+(R<<10&4294967295|R>>>22),R=N+(S^(O|~k))+b[14]+2878612391&4294967295,N=O+(R<<15&4294967295|R>>>17),R=k+(O^(N|~S))+b[5]+4237533241&4294967295,k=N+(R<<21&4294967295|R>>>11),R=S+(N^(k|~O))+b[12]+1700485571&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~N))+b[3]+2399980690&4294967295,O=S+(R<<10&4294967295|R>>>22),R=N+(S^(O|~k))+b[10]+4293915773&4294967295,N=O+(R<<15&4294967295|R>>>17),R=k+(O^(N|~S))+b[1]+2240044497&4294967295,k=N+(R<<21&4294967295|R>>>11),R=S+(N^(k|~O))+b[8]+1873313359&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~N))+b[15]+4264355552&4294967295,O=S+(R<<10&4294967295|R>>>22),R=N+(S^(O|~k))+b[6]+2734768916&4294967295,N=O+(R<<15&4294967295|R>>>17),R=k+(O^(N|~S))+b[13]+1309151649&4294967295,k=N+(R<<21&4294967295|R>>>11),R=S+(N^(k|~O))+b[4]+4149444226&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~N))+b[11]+3174756917&4294967295,O=S+(R<<10&4294967295|R>>>22),R=N+(S^(O|~k))+b[2]+718787259&4294967295,N=O+(R<<15&4294967295|R>>>17),R=k+(O^(N|~S))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+O&4294967295}i.prototype.v=function(C,S){S===void 0&&(S=C.length);const k=S-this.blockSize,b=this.C;let N=this.h,O=0;for(;O<S;){if(N==0)for(;O<=k;)o(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<S;)if(b[N++]=C.charCodeAt(O++),N==this.blockSize){o(this,b),N=0;break}}else for(;O<S;)if(b[N++]=C[O++],N==this.blockSize){o(this,b),N=0;break}}this.h=N,this.o+=S},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var k=C.length-8;k<C.length;++k)C[k]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,k=0;k<4;++k)for(let b=0;b<32;b+=8)C[S++]=this.g[k]>>>b&255;return C};function l(C,S){var k=m;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=S(C)}function h(C,S){this.h=S;const k=[];let b=!0;for(let N=C.length-1;N>=0;N--){const O=C[N]|0;b&&O==S||(k[N]=O,b=!1)}this.g=k}var m={};function g(C){return-128<=C&&C<128?l(C,function(S){return new h([S|0],S<0?-1:0)}):new h([C|0],C<0?-1:0)}function _(C){if(isNaN(C)||!isFinite(C))return I;if(C<0)return B(_(-C));const S=[];let k=1;for(let b=0;C>=k;b++)S[b]=C/k|0,k*=4294967296;return new h(S,0)}function E(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return B(E(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=_(Math.pow(S,8));let b=I;for(let O=0;O<C.length;O+=8){var N=Math.min(8,C.length-O);const R=parseInt(C.substring(O,O+N),S);N<8?(N=_(Math.pow(S,N)),b=b.j(N).add(_(R))):(b=b.j(k),b=b.add(_(R)))}return b}var I=g(0),x=g(1),j=g(16777216);r=h.prototype,r.m=function(){if($(this))return-B(this).m();let C=0,S=1;for(let k=0;k<this.g.length;k++){const b=this.i(k);C+=(b>=0?b:4294967296+b)*S,S*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(G(this))return"0";if($(this))return"-"+B(this).toString(C);const S=_(Math.pow(C,6));var k=this;let b="";for(;;){const N=J(k,S).g;k=K(k,N.j(S));let O=((k.g.length>0?k.g[0]:k.h)>>>0).toString(C);if(k=N,G(k))return O+b;for(;O.length<6;)O="0"+O;b=O+b}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function G(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function $(C){return C.h==-1}r.l=function(C){return C=K(this,C),$(C)?-1:G(C)?0:1};function B(C){const S=C.g.length,k=[];for(let b=0;b<S;b++)k[b]=~C.g[b];return new h(k,~C.h).add(x)}r.abs=function(){return $(this)?B(this):this},r.add=function(C){const S=Math.max(this.g.length,C.g.length),k=[];let b=0;for(let N=0;N<=S;N++){let O=b+(this.i(N)&65535)+(C.i(N)&65535),R=(O>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);b=R>>>16,O&=65535,R&=65535,k[N]=R<<16|O}return new h(k,k[k.length-1]&-2147483648?-1:0)};function K(C,S){return C.add(B(S))}r.j=function(C){if(G(this)||G(C))return I;if($(this))return $(C)?B(this).j(B(C)):B(B(this).j(C));if($(C))return B(this.j(B(C)));if(this.l(j)<0&&C.l(j)<0)return _(this.m()*C.m());const S=this.g.length+C.g.length,k=[];for(var b=0;b<2*S;b++)k[b]=0;for(b=0;b<this.g.length;b++)for(let N=0;N<C.g.length;N++){const O=this.i(b)>>>16,R=this.i(b)&65535,Ue=C.i(N)>>>16,ft=C.i(N)&65535;k[2*b+2*N]+=R*ft,te(k,2*b+2*N),k[2*b+2*N+1]+=O*ft,te(k,2*b+2*N+1),k[2*b+2*N+1]+=R*Ue,te(k,2*b+2*N+1),k[2*b+2*N+2]+=O*Ue,te(k,2*b+2*N+2)}for(C=0;C<S;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=S;C<2*S;C++)k[C]=0;return new h(k,0)};function te(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function oe(C,S){this.g=C,this.h=S}function J(C,S){if(G(S))throw Error("division by zero");if(G(C))return new oe(I,I);if($(C))return S=J(B(C),S),new oe(B(S.g),B(S.h));if($(S))return S=J(C,B(S)),new oe(B(S.g),S.h);if(C.g.length>30){if($(C)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var k=x,b=S;b.l(C)<=0;)k=ce(k),b=ce(b);var N=ie(k,1),O=ie(b,1);for(b=ie(b,2),k=ie(k,2);!G(b);){var R=O.add(b);R.l(C)<=0&&(N=N.add(k),O=R),b=ie(b,1),k=ie(k,1)}return S=K(C,N.j(S)),new oe(N,S)}for(N=I;C.l(S)>=0;){for(k=Math.max(1,Math.floor(C.m()/S.m())),b=Math.ceil(Math.log(k)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),O=_(k),R=O.j(S);$(R)||R.l(C)>0;)k-=b,O=_(k),R=O.j(S);G(O)&&(O=x),N=N.add(O),C=K(C,R)}return new oe(N,C)}r.B=function(C){return J(this,C).h},r.and=function(C){const S=Math.max(this.g.length,C.g.length),k=[];for(let b=0;b<S;b++)k[b]=this.i(b)&C.i(b);return new h(k,this.h&C.h)},r.or=function(C){const S=Math.max(this.g.length,C.g.length),k=[];for(let b=0;b<S;b++)k[b]=this.i(b)|C.i(b);return new h(k,this.h|C.h)},r.xor=function(C){const S=Math.max(this.g.length,C.g.length),k=[];for(let b=0;b<S;b++)k[b]=this.i(b)^C.i(b);return new h(k,this.h^C.h)};function ce(C){const S=C.g.length+1,k=[];for(let b=0;b<S;b++)k[b]=C.i(b)<<1|C.i(b-1)>>>31;return new h(k,C.h)}function ie(C,S){const k=S>>5;S%=32;const b=C.g.length-k,N=[];for(let O=0;O<b;O++)N[O]=S>0?C.i(O+k)>>>S|C.i(O+k+1)<<32-S:C.i(O+k);return new h(N,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,b_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,$s=h}).apply(typeof Wg<"u"?Wg:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D_,Wa,V_,qu,Md,O_,L_,F_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var y=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in y))break e;y=y[F]}u=u[u.length-1],T=y[u],p=p(T),p!=T&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var y=[],T;for(T in p)Object.prototype.hasOwnProperty.call(p,T)&&y.push([T,p[T]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function g(u,p,y){return u.call.apply(u.bind,arguments)}function _(u,p,y){return _=g,_.apply(null,arguments)}function E(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function I(u,p){function y(){}y.prototype=p.prototype,u.Z=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(T,F,z){for(var ee=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ee[Ce-2]=arguments[Ce];return p.prototype[F].apply(T,ee)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function j(u){const p=u.length;if(p>0){const y=Array(p);for(let T=0;T<p;T++)y[T]=u[T];return y}return[]}function G(u,p){for(let T=1;T<arguments.length;T++){const F=arguments[T];var y=typeof F;if(y=y!="object"?y:F?Array.isArray(F)?"array":y:"null",y=="array"||y=="object"&&typeof F.length=="number"){y=u.length||0;const z=F.length||0;u.length=y+z;for(let ee=0;ee<z;ee++)u[y+ee]=F[ee]}else u.push(F)}}class ${constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function B(u){h.setTimeout(()=>{throw u},0)}function K(){var u=C;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class te{constructor(){this.h=this.g=null}add(p,y){const T=oe.get();T.set(p,y),this.h?this.h.next=T:this.g=T,this.h=T}}var oe=new $(()=>new J,u=>u.reset());class J{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ie=!1,C=new te,S=()=>{const u=Promise.resolve(void 0);ce=()=>{u.then(k)}};function k(){for(var u;u=K();){try{u.h.call(u.g)}catch(y){B(y)}var p=oe;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}ie=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};h.addEventListener("test",y,p),h.removeEventListener("test",y,p)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Ue(u,p){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}I(Ue,N),Ue.prototype.init=function(u,p){const y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),at=0;function Qe(u,p,y,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!T,this.ha=F,this.key=++at,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,p,y){for(const T in u)p.call(y,u[T],T,u)}function le(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function V(u){const p={};for(const y in u)p[y]=u[y];return p}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,p){let y,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(y in T)u[y]=T[y];for(let z=0;z<H.length;z++)y=H[z],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function Ae(u){this.src=u,this.g={},this.h=0}Ae.prototype.add=function(u,p,y,T,F){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const ee=Pe(u,p,T,F);return ee>-1?(p=u[ee],y||(p.fa=!1)):(p=new Qe(p,this.src,z,!!T,F),p.fa=y,u.push(p)),p};function ke(u,p){const y=p.type;if(y in u.g){var T=u.g[y],F=Array.prototype.indexOf.call(T,p,void 0),z;(z=F>=0)&&Array.prototype.splice.call(T,F,1),z&&(re(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Pe(u,p,y,T){for(let F=0;F<u.length;++F){const z=u[F];if(!z.da&&z.listener==p&&z.capture==!!y&&z.ha==T)return F}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Oe={};function He(u,p,y,T,F){if(Array.isArray(p)){for(let z=0;z<p.length;z++)He(u,p[z],y,T,F);return null}return y=ri(y),u&&u[ft]?u.J(p,y,m(T)?!!T.capture:!1,F):Ct(u,p,y,!1,T,F)}function Ct(u,p,y,T,F,z){if(!p)throw Error("Invalid event type");const ee=m(F)?!!F.capture:!!F;let Ce=us(u);if(Ce||(u[Me]=Ce=new Ae(u)),y=Ce.add(p,y,T,ee,z),y.proxy)return y;if(T=as(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)O||(F=ee),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(ls(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function as(){function u(y){return p.call(u.src,u.listener,y)}const p=ni;return u}function ti(u,p,y,T,F){if(Array.isArray(p))for(var z=0;z<p.length;z++)ti(u,p[z],y,T,F);else T=m(T)?!!T.capture:!!T,y=ri(y),u&&u[ft]?(u=u.i,z=String(p).toString(),z in u.g&&(p=u.g[z],y=Pe(p,y,T,F),y>-1&&(re(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete u.g[z],u.h--)))):u&&(u=us(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Pe(p,y,T,F)),(y=u>-1?p[u]:null)&&Mn(y))}function Mn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ft])ke(p.i,u);else{var y=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(y,T,u.capture):p.detachEvent?p.detachEvent(ls(y),T):p.addListener&&p.removeListener&&p.removeListener(T),(y=us(p))?(ke(y,u),y.h==0&&(y.src=null,p[Me]=null)):re(u)}}}function ls(u){return u in Oe?Oe[u]:Oe[u]="on"+u}function ni(u,p){if(u.da)u=!0;else{p=new Ue(p,this);const y=u.listener,T=u.ha||u.src;u.fa&&Mn(u),u=y.call(T,p)}return u}function us(u){return u=u[Me],u instanceof Ae?u:null}var br="__closure_events_fn_"+(Math.random()*1e9>>>0);function ri(u){return typeof u=="function"?u:(u[br]||(u[br]=function(p){return u.handleEvent(p)}),u[br])}function lt(){b.call(this),this.i=new Ae(this),this.M=this,this.G=null}I(lt,b),lt.prototype[ft]=!0,lt.prototype.removeEventListener=function(u,p,y,T){ti(this,u,p,y,T)};function Xe(u,p){var y,T=u.G;if(T)for(y=[];T;T=T.G)y.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new N(p,u);else if(p instanceof N)p.target=p.target||u;else{var F=p;p=new N(T,u),Se(p,F)}F=!0;let z,ee;if(y)for(ee=y.length-1;ee>=0;ee--)z=p.g=y[ee],F=pn(z,T,!0,p)&&F;if(z=p.g=u,F=pn(z,T,!0,p)&&F,F=pn(z,T,!1,p)&&F,y)for(ee=0;ee<y.length;ee++)z=p.g=y[ee],F=pn(z,T,!1,p)&&F}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const y=u.g[p];for(let T=0;T<y.length;T++)re(y[T]);delete u.g[p],u.h--}}this.G=null},lt.prototype.J=function(u,p,y,T){return this.i.add(String(u),p,!1,y,T)},lt.prototype.K=function(u,p,y,T){return this.i.add(String(u),p,!0,y,T)};function pn(u,p,y,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let F=!0;for(let z=0;z<p.length;++z){const ee=p[z];if(ee&&!ee.da&&ee.capture==y){const Ce=ee.listener,yt=ee.ha||ee.src;ee.fa&&ke(u.i,ee),F=Ce.call(yt,T)!==!1&&F}}return F&&!T.defaultPrevented}function Dr(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function cs(u){u.g=Dr(()=>{u.g=null,u.i&&(u.i=!1,cs(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ra extends b{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:cs(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rr(u){b.call(this),this.h=u,this.g={}}I(rr,b);var si=[];function Vr(u){me(u.g,function(p,y){this.g.hasOwnProperty(y)&&Mn(p)},u),u.g={}}rr.prototype.N=function(){rr.Z.N.call(this),Vr(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=h.JSON.stringify,ii=h.JSON.parse,Or=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function jn(){}function Gi(){}var Un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hs(){N.call(this,"d")}I(hs,N);function oi(){N.call(this,"c")}I(oi,N);var gn={},ds=null;function zn(){return ds=ds||new lt}gn.Ia="serverreachability";function fs(u){N.call(this,gn.Ia,u)}I(fs,N);function Bn(u){const p=zn();Xe(p,new fs(p))}gn.STAT_EVENT="statevent";function $n(u,p){N.call(this,gn.STAT_EVENT,u),this.stat=p}I($n,N);function rt(u){const p=zn();Xe(p,new $n(p,u))}gn.Ja="timingevent";function ps(u,p){N.call(this,gn.Ja,u),this.size=p}I(ps,N);function sr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function ir(){this.g=!0}ir.prototype.ua=function(){this.g=!1};function Ki(u,p,y,T,F,z){u.info(function(){if(u.g)if(z){var ee="",Ce=z.split("&");for(let Ge=0;Ge<Ce.length;Ge++){var yt=Ce[Ge].split("=");if(yt.length>1){const Et=yt[0];yt=yt[1];const In=Et.split("_");ee=In.length>=2&&In[1]=="type"?ee+(Et+"="+yt+"&"):ee+(Et+"=redacted&")}}}else ee=null;else ee=z;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+y+`
`+ee})}function Qi(u,p,y,T,F,z,ee){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+y+`
`+z+" "+ee})}function Rn(u,p,y,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+we(u,y)+(T?" "+T:"")})}function ye(u,p){u.info(function(){return"TIMEOUT: "+p})}ir.prototype.info=function(){};function we(u,p){if(!u.g)return p;if(!p)return null;try{const z=JSON.parse(p);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var y=z[u];if(!(y.length<2)){var T=y[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ee=1;ee<T.length;ee++)T[ee]=""}}}}return mn(z)}catch{return p}}var ze={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},st={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ot;function Zt(){}I(Zt,jn),Zt.prototype.g=function(){return new XMLHttpRequest},Ot=new Zt;function yn(u){return encodeURIComponent(String(u))}function kn(u){var p=1;u=u.split(":");const y=[];for(;p>0&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function wt(u,p,y,T){this.j=u,this.i=p,this.l=y,this.S=T||1,this.V=new rr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pl}function Pl(){this.i=null,this.g="",this.h=!1}var Nl={},sa={};function qn(u,p,y){u.M=1,u.A=Fr(Pn(p)),u.u=y,u.R=!0,ia(u,null)}function ia(u,p){u.F=Date.now(),ai(u),u.B=Pn(u.A);var y=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ma(y.i,"t",T),u.C=0,y=u.j.L,u.h=new Pl,u.g=zl(u.j,y?p:null,!u.u),u.P>0&&(u.O=new ra(_(u.Y,u,u.g),u.P)),p=u.V,y=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(si[0]=F.toString()),F=si);for(let z=0;z<F.length;z++){const ee=He(y,F[z],T||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Bn(),Ki(u.i,u.v,u.B,u.l,u.S,u.u)}wt.prototype.ba=function(u){u=u.target;const p=this.O;p&&dr(u)==3?p.j():this.Y(u)},wt.prototype.Y=function(u){try{if(u==this.g)e:{const Ce=dr(this.g),yt=this.g.ya(),Ge=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||jl(this.g)))){this.K||Ce!=4||yt==7||(yt==8||Ge<=0?Bn(3):Bn(2)),Xi(this);var p=this.g.ca();this.X=p;var y=bl(this);if(this.o=p==200,Qi(this.i,this.v,this.B,this.l,this.S,Ce,p),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(T)){var z=T;break t}}z=null}if(u=z)Rn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,u);else{this.o=!1,this.m=3,rt(12),Lr(this),li(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<y.length;)if(Et=Vl(this,y),Et==sa){Ce==4&&(this.m=4,rt(14),u=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Nl){this.m=4,rt(15),Rn(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Rn(this.i,this.l,Et,null),Ze(this,Et);if(Dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||y.length!=0||this.h.h||(this.m=1,rt(16),u=!1),this.o=this.o&&u,!u)Rn(this.i,this.l,y,"[Invalid Chunked Response]"),Lr(this),li(this);else if(y.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),yi(ee),ee.P=!0,rt(11))}}else Rn(this.i,this.l,y,null),Ze(this,y);Ce==4&&Lr(this),this.o&&!this.K&&(Ce==4?oo(this.j,this):(this.o=!1,ai(this)))}else ya(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),Lr(this),li(this)}}}catch{}finally{}};function bl(u){if(!Dl(u))return u.g.la();const p=jl(u.g);if(p==="")return"";let y="";const T=p.length,F=dr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Lr(u),li(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<T;z++)u.h.h=!0,y+=u.h.i.decode(p[z],{stream:!(F&&z==T-1)});return p.length=0,u.h.g+=y,u.C=0,u.h.g}function Dl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Vl(u,p){var y=u.C,T=p.indexOf(`
`,y);return T==-1?sa:(y=Number(p.substring(y,T)),isNaN(y)?Nl:(T+=1,T+y>p.length?sa:(p=p.slice(T,T+y),u.C=T+y,p)))}wt.prototype.cancel=function(){this.K=!0,Lr(this)};function ai(u){u.T=Date.now()+u.H,oa(u,u.H)}function oa(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=sr(_(u.aa,u),p)}function Xi(u){u.D&&(h.clearTimeout(u.D),u.D=null)}wt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ye(this.i,this.B),this.M!=2&&(Bn(),rt(17)),Lr(this),this.m=2,li(this)):oa(this,this.T-u)};function li(u){u.j.I==0||u.K||oo(u.j,u)}function Lr(u){Xi(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Vr(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Ze(u,p){try{var y=u.j;if(y.I!=0&&(y.g==u||la(y.h,u))){if(!u.L&&la(y.h,u)&&y.I==3){try{var T=y.Ba.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)io(y),En(y);else break e;mr(y),rt(18)}}else y.xa=F[1],0<y.xa-y.K&&F[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=sr(_(y.Va,y),6e3));ui(y.h)<=1&&y.ta&&(y.ta=void 0)}else Tn(y,11)}else if((u.L||y.g==u)&&io(y),!R(p))for(F=y.Ba.g.parse(p),p=0;p<F.length;p++){let Ge=F[p];const Et=Ge[0];if(!(Et<=y.K))if(y.K=Et,Ge=Ge[1],y.I==2)if(Ge[0]=="c"){y.M=Ge[1],y.ba=Ge[2];const In=Ge[3];In!=null&&(y.ka=In,y.j.info("VER="+y.ka));const Br=Ge[4];Br!=null&&(y.za=Br,y.j.info("SVER="+y.za));const gr=Ge[5];gr!=null&&typeof gr=="number"&&gr>0&&(T=1.5*gr,y.O=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const yr=u.g;if(yr){const uo=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uo){var z=T.h;z.g||uo.indexOf("spdy")==-1&&uo.indexOf("quic")==-1&&uo.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ji(z,z.h),z.h=null))}if(T.G){const wa=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(T.wa=wa,$e(T.J,T.G,wa))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),T=y;var ee=u;if(T.na=va(T,T.L?T.ba:null,T.W),ee.L){ci(T.h,ee);var Ce=ee,yt=T.O;yt&&(Ce.H=yt),Ce.D&&(Xi(Ce),ai(Ce)),T.g=ee}else $t(T);y.i.length>0&&zr(y)}else Ge[0]!="stop"&&Ge[0]!="close"||Tn(y,7);else y.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Tn(y,7):ro(y):Ge[0]!="noop"&&y.l&&y.l.qa(Ge),y.A=0)}}Bn(4)}catch{}}var zc=class{constructor(u,p){this.g=u,this.map=p}};function Yi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ui(u){return u.h?1:u.g?u.g.size:0}function la(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ji(u,p){u.g?u.g.add(p):u.h=p}function ci(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Yi.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _n(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.G);return p}return j(u.i)}var Ol=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vn(u,p){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const T=u[y].indexOf("=");let F,z=null;T>=0?(F=u[y].substring(0,T),z=u[y].substring(T+1)):F=u[y],p(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function or(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof or?(this.l=u.l,hi(this,u.j),this.o=u.o,this.g=u.g,ar(this,u.u),this.h=u.h,ms(this,ga(u.i)),this.m=u.m):u&&(p=String(u).match(Ol))?(this.l=!1,hi(this,p[1]||"",!0),this.o=di(p[2]||""),this.g=di(p[3]||"",!0),ar(this,p[4]),this.h=di(p[5]||"",!0),ms(this,p[6]||"",!0),this.m=di(p[7]||"")):(this.l=!1,this.i=new Le(null,this.l))}or.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(fi(p,ca,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(fi(p,ca,!0),"@"),u.push(yn(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(fi(y,y.charAt(0)=="/"?pi:ha,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",fi(y,da)),u.join("")},or.prototype.resolve=function(u){const p=Pn(this);let y=!!u.j;y?hi(p,u.j):y=!!u.o,y?p.o=u.o:y=!!u.g,y?p.g=u.g:y=u.u!=null;var T=u.h;if(y)ar(p,u.u);else if(y=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=p.h.lastIndexOf("/");F!=-1&&(T=p.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let ee=0;ee<F.length;){const Ce=F[ee++];Ce=="."?T&&ee==F.length&&z.push(""):Ce==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),T&&ee==F.length&&z.push("")):(z.push(Ce),T=!0)}T=z.join("/")}else T=F}return y?p.h=T:y=u.i.toString()!=="",y?ms(p,ga(u.i)):y=!!u.m,y&&(p.m=u.m),p};function Pn(u){return new or(u)}function hi(u,p,y){u.j=y?di(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ar(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function ms(u,p,y){p instanceof Le?(u.i=p,eo(u.i,u.l)):(y||(p=fi(p,Bc)),u.i=new Le(p,u.l))}function $e(u,p,y){u.i.set(p,y)}function Fr(u){return $e(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function di(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fi(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,ua),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ua(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ca=/[#\/\?@]/g,ha=/[#\?:]/g,pi=/[#\?]/g,Bc=/[#\?@]/g,da=/#/g;function Le(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function lr(u){u.g||(u.g=new Map,u.h=0,u.i&&vn(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Le.prototype,r.add=function(u,p){lr(this),this.i=null,u=ur(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function fa(u,p){lr(u),p=ur(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Zi(u,p){return lr(u),p=ur(u,p),u.g.has(p)}r.forEach=function(u,p){lr(this),this.g.forEach(function(y,T){y.forEach(function(F){u.call(p,F,T,this)},this)},this)};function pa(u,p){lr(u);let y=[];if(typeof p=="string")Zi(u,p)&&(y=y.concat(u.g.get(ur(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)y=y.concat(u[p]);return y}r.set=function(u,p){return lr(this),this.i=null,u=ur(this,u),Zi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=pa(this,u),u.length>0?String(u[0]):p):p};function ma(u,p,y){fa(u,p),y.length>0&&(u.i=null,u.g.set(ur(u,p),j(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let T=0;T<p.length;T++){var y=p[T];const F=yn(y);y=pa(this,y);for(let z=0;z<y.length;z++){let ee=F;y[z]!==""&&(ee+="="+yn(y[z])),u.push(ee)}}return this.i=u.join("&")};function ga(u){const p=new Le;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function ur(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function eo(u,p){p&&!u.j&&(lr(u),u.i=null,u.g.forEach(function(y,T){const F=T.toLowerCase();T!=F&&(fa(this,T),ma(this,F,y))},u)),u.j=p}function cr(u,p){const y=new ir;if(h.Image){const T=new Image;T.onload=E(Lt,y,"TestLoadImage: loaded",!0,p,T),T.onerror=E(Lt,y,"TestLoadImage: error",!1,p,T),T.onabort=E(Lt,y,"TestLoadImage: abort",!1,p,T),T.ontimeout=E(Lt,y,"TestLoadImage: timeout",!1,p,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function hr(u,p){const y=new ir,T=new AbortController,F=setTimeout(()=>{T.abort(),Lt(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(F),z.ok?Lt(y,"TestPingServer: ok",!0,p):Lt(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Lt(y,"TestPingServer: error",!1,p)})}function Lt(u,p,y,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(y)}catch{}}function mi(){this.g=new Or}function Mr(u){this.i=u.Sb||null,this.h=u.ab||!1}I(Mr,jn),Mr.prototype.g=function(){return new wn(this.i,this.h)};function wn(u,p){lt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(wn,lt),r=wn.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Hn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ll(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ll(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?gs(this):Hn(this),this.readyState==3&&Ll(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,gs(this))},r.Na=function(u){this.g&&(this.response=u,gs(this))},r.ga=function(){this.g&&gs(this)};function gs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Hn(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Hn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fl(u){let p="";return me(u,function(y,T){p+=T,p+=":",p+=y,p+=`\r
`}),p}function to(u,p,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Fl(y),typeof u=="string"?y!=null&&yn(y):$e(u,p,y))}function Ke(u){lt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(Ke,lt);var Ml=/^https?$/i,$c=["POST","PUT"];r=Ke.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ot.g(),this.g.onreadystatechange=x(_(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(z){ys(this,z);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)y.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())y.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call($c,p,void 0)>=0)||T||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of y)this.g.setRequestHeader(z,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){ys(this,z)}};function ys(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,_s(u),Ur(u)}function _s(u){u.A||(u.A=!0,Xe(u,"complete"),Xe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Xe(this,"complete"),Xe(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?jr(this):this.Xa())},r.Xa=function(){jr(this)};function jr(u){if(u.h&&typeof l<"u"){if(u.v&&dr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Xe(u,"readystatechange"),dr(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var T;if(T=z===0){let ee=String(u.D).match(Ol)[1]||null;!ee&&h.self&&h.self.location&&(ee=h.self.location.protocol.slice(0,-1)),T=!Ml.test(ee?ee.toLowerCase():"")}y=T}if(y)Xe(u,"complete"),Xe(u,"success");else{u.o=6;try{var F=dr(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",_s(u)}}finally{Ur(u)}}}}function Ur(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,p||Xe(u,"ready");try{y.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function dr(u){return u.g?u.g.readyState:0}r.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),ii(p)}};function jl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(u){const p={};u=(u.g&&dr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(R(u[T]))continue;var y=kn(u[T]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=p[F]||[];p[F]=z,z.push(y)}le(p,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function no(u){this.za=0,this.i=[],this.j=new ir,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fr("baseRetryDelayMs",5e3,u),this.Za=fr("retryDelaySeedMs",1e4,u),this.Ta=fr("forwardChannelMaxRetries",2,u),this.va=fr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Yi(u&&u.concurrentRequestLimit),this.Ba=new mi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=no.prototype,r.ka=8,r.I=1,r.connect=function(u,p,y,T){rt(0),this.W=u,this.H=p||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.J=va(this,null,this.W),zr(this)};function ro(u){if(so(u),u.I==3){var p=u.V++,y=Pn(u.J);if($e(y,"SID",u.M),$e(y,"RID",p),$e(y,"TYPE","terminate"),pr(u,y),p=new wt(u,u.j,p),p.M=2,p.A=Fr(Pn(y)),y=!1,h.navigator&&h.navigator.sendBeacon)try{y=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&h.Image&&(new Image().src=p.A,y=!0),y||(p.g=zl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ai(p)}_i(u)}function En(u){u.g&&(yi(u),u.g.cancel(),u.g=null)}function so(u){En(u),u.v&&(h.clearTimeout(u.v),u.v=null),io(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function zr(u){if(!aa(u.h)&&!u.m){u.m=!0;var p=u.Ea;ce||S(),ie||(ce(),ie=!0),C.add(p,u),u.D=0}}function Ul(u,p){return ui(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=sr(_(u.Ea,u,p),ao(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new wt(this,this.j,u);let z=this.o;if(this.U&&(z?(z=V(z),Se(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=_a(this,F,p),y=Pn(this.J),$e(y,"RID",u),$e(y,"CVER",22),this.G&&$e(y,"X-HTTP-Session-Id",this.G),pr(this,y),z&&(this.R?p="headers="+yn(Fl(z))+"&"+p:this.u&&to(y,this.u,z)),Ji(this.h,F),this.Ra&&$e(y,"TYPE","init"),this.S?($e(y,"$req",p),$e(y,"SID","null"),F.U=!0,qn(F,y,null)):qn(F,y,p),this.I=2}}else this.I==3&&(u?gi(this,u):this.i.length==0||aa(this.h)||gi(this))};function gi(u,p){var y;p?y=p.l:y=u.V++;const T=Pn(u.J);$e(T,"SID",u.M),$e(T,"RID",y),$e(T,"AID",u.K),pr(u,T),u.u&&u.o&&to(T,u.u,u.o),y=new wt(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),p&&(u.i=p.G.concat(u.i)),p=_a(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ji(u.h,y),qn(y,T,p)}function pr(u,p){u.H&&me(u.H,function(y,T){$e(p,T,y)}),u.l&&me({},function(y,T){$e(p,T,y)})}function _a(u,p,y){y=Math.min(u.i.length,y);const T=u.l?_(u.l.Ka,u.l,u):null;e:{var F=u.i;let Ce=-1;for(;;){const yt=["count="+y];Ce==-1?y>0?(Ce=F[0].g,yt.push("ofs="+Ce)):Ce=0:yt.push("ofs="+Ce);let Ge=!0;for(let Et=0;Et<y;Et++){var z=F[Et].g;const In=F[Et].map;if(z-=Ce,z<0)Ce=Math.max(0,F[Et].g-100),Ge=!1;else try{z="req"+z+"_"||"";try{var ee=In instanceof Map?In:Object.entries(In);for(const[Br,gr]of ee){let yr=gr;m(gr)&&(yr=mn(gr)),yt.push(z+Br+"="+encodeURIComponent(yr))}}catch(Br){throw yt.push(z+"type="+encodeURIComponent("_badmap")),Br}}catch{T&&T(In)}}if(Ge){ee=yt.join("&");break e}}ee=void 0}return u=u.i.splice(0,y),p.G=u,ee}function $t(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;ce||S(),ie||(ce(),ie=!0),C.add(p,u),u.A=0}}function mr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=sr(_(u.Da,u),ao(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,vs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=sr(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),En(this),vs(this))};function yi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function vs(u){u.g=new wt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Pn(u.na);$e(p,"RID","rpc"),$e(p,"SID",u.M),$e(p,"AID",u.K),$e(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&$e(p,"TO",u.ia),$e(p,"TYPE","xmlhttp"),pr(u,p),u.u&&u.o&&to(p,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Fr(Pn(p)),y.u=null,y.R=!0,ia(y,u)}r.Va=function(){this.C!=null&&(this.C=null,En(this),mr(this),rt(19))};function io(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function oo(u,p){var y=null;if(u.g==p){io(u),yi(u),u.g=null;var T=2}else if(la(u.h,p))y=p.G,ci(u.h,p),T=1;else return;if(u.I!=0){if(p.o)if(T==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var F=u.D;T=zn(),Xe(T,new ps(T,y)),zr(u)}else $t(u);else if(F=p.m,F==3||F==0&&p.X>0||!(T==1&&Ul(u,p)||T==2&&mr(u)))switch(y&&y.length>0&&(p=u.h,p.i=p.i.concat(y)),F){case 1:Tn(u,5);break;case 4:Tn(u,10);break;case 3:Tn(u,6);break;default:Tn(u,2)}}}function ao(u,p){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*p}function Tn(u,p){if(u.j.info("Error code "+p),p==2){var y=_(u.bb,u),T=u.Ua;const F=!T;T=new or(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||hi(T,"https"),Fr(T),F?cr(T.toString(),y):hr(T.toString(),y)}else rt(2);u.I=0,u.l&&u.l.pa(p),_i(u),so(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function _i(u){if(u.I=0,u.ja=[],u.l){const p=_n(u.h);(p.length!=0||u.i.length!=0)&&(G(u.ja,p),G(u.ja,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.oa()}}function va(u,p,y){var T=y instanceof or?Pn(y):new or(y);if(T.g!="")p&&(T.g=p+"."+T.g),ar(T,T.u);else{var F=h.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;const z=new or(null);T&&hi(z,T),p&&(z.g=p),F&&ar(z,F),y&&(z.h=y),T=z}return y=u.G,p=u.wa,y&&p&&$e(T,y,p),$e(T,"VER",u.ka),pr(u,T),T}function zl(u,p,y){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Ke(new Mr({ab:y})):new Ke(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bl(){}r=Bl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function lo(){}lo.prototype.g=function(u,p){return new Ft(u,p)};function Ft(u,p){lt.call(this),this.g=new no(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!R(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ws(this)}I(Ft,lt),Ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){ro(this.g)},Ft.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=mn(u),u=y);p.i.push(new zc(p.Ya++,u)),p.I==3&&zr(p)},Ft.prototype.N=function(){this.g.l=null,delete this.j,ro(this.g),delete this.g,Ft.Z.N.call(this)};function $l(u){hs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}I($l,hs);function ql(){oi.call(this),this.status=1}I(ql,oi);function ws(u){this.g=u}I(ws,Bl),ws.prototype.ra=function(){Xe(this.g,"a")},ws.prototype.qa=function(u){Xe(this.g,new $l(u))},ws.prototype.pa=function(u){Xe(this.g,new ql)},ws.prototype.oa=function(){Xe(this.g,"b")},lo.prototype.createWebChannel=lo.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,F_=function(){return new lo},L_=function(){return zn()},O_=gn,Md={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ze.NO_ERROR=0,ze.TIMEOUT=8,ze.HTTP_ERROR=6,qu=ze,st.COMPLETE="complete",V_=st,Gi.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Wa=Gi,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,D_=Ke}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});const Gg="@firebase/firestore",Kg="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new pf("@firebase/firestore");function bo(){return zi.logLevel}function ue(r,...e){if(zi.logLevel<=be.DEBUG){const t=e.map(yf);zi.debug(`Firestore (${Yo}): ${r}`,...t)}}function rs(r,...e){if(zi.logLevel<=be.ERROR){const t=e.map(yf);zi.error(`Firestore (${Yo}): ${r}`,...t)}}function Bo(r,...e){if(zi.logLevel<=be.WARN){const t=e.map(yf);zi.warn(`Firestore (${Yo}): ${r}`,...t)}}function yf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,M_(r,i,t)}function M_(r,e,t){let i=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw rs(i),new Error(i)}function We(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||M_(e,o,i)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qt.UNAUTHENTICATED)))}shutdown(){}}class yT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _T{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ts,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ts)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new j_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class vT{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wT{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new vT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ET{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=TT(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function De(r,e){return r<e?-1:r>e?1:0}function jd(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return Td(o)===Td(l)?De(o,l):Td(o)?1:-1}return De(r.length,e.length)}const IT=55296,xT=57343;function Td(r){const e=r.charCodeAt(0);return e>=IT&&e<=xT}function $o(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="__name__";class Tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ee(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const i=Tr.isNumericId(e),o=Tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):jd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class Je extends Tr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const ST=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Tr{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return ST.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xg}static keyField(){return new zt([Xg])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(l(),o++)}if(l(),h)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Je.fromString(e))}static fromName(e){return new ge(Je.fromString(e).popFirst(5))}static empty(){return new ge(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(r,e,t){if(!t)throw new se(q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function AT(r,e,t,i){if(e===!0&&i===!0)throw new se(q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Yg(r){if(!ge.isDocumentKey(r))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Jg(r){if(ge.isDocumentKey(r))throw new se(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function z_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ec(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee(12329,{type:typeof r})}function nn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ec(r);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r,e){const t={typeString:r};return e&&(t.value=e),t}function gl(r,e){if(!z_(r))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new se(q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=-62135596800,ey=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ey);return new nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Zg)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ey}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gl(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:St("string",nt._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new nt(0,0))}static max(){return new xe(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=-1;function CT(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new Hs(o,ge.empty(),e)}function RT(r){return new Hs(r.readTime,r.key,il)}class Hs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Hs(xe.min(),ge.empty(),il)}static max(){return new Hs(xe.max(),ge.empty(),il)}}function kT(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r){if(r.code!==q.FAILED_PRECONDITION||r.message!==PT)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):W.reject(t)}static resolve(e){return new W(((t,i)=>{t(e)}))}static reject(e){return new W(((t,i)=>{i(e)}))}static waitFor(e){return new W(((t,i)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=W.resolve(!1);for(const i of e)t=t.next((o=>o?W.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new W(((i,o)=>{const l=e.length,h=new Array(l);let m=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next((E=>{h[_]=E,++m,m===l&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new W(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function bT(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=-1;function Ic(r){return r==null}function nc(r){return r===0&&1/r==-1/0}function DT(r){return typeof r=="number"&&Number.isInteger(r)&&!nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="";function VT(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ty(e)),e=OT(r.get(t),e);return ty(e)}function OT(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case B_:t+="";break;default:t+=l}}return t}function ty(r){return r+B_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Js(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function $_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ju(this.root,e,this.comparator,!0)}}class ju{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ut.RED,this.left=o??Ut.EMPTY,this.right=l??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ut(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ry(this.data.getIterator())}getIteratorFrom(e){return new ry(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class ry{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new Pt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new q_("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const LT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=LT.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vt(r.seconds),nanos:vt(r.nanos)}}function vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Gs(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="server_timestamp",W_="__type__",G_="__previous_value__",K_="__local_write_time__";function wf(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[W_])==null?void 0:i.stringValue)===H_}function xc(r){const e=r.mapValue.fields[G_];return wf(e)?xc(e):e}function ol(r){const e=Ws(r.mapValue.fields[K_].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t,i,o,l,h,m,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const rc="(default)";class al{constructor(e,t){this.projectId=e,this.database=t||rc}static empty(){return new al("","")}get isDefaultDatabase(){return this.database===rc}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="__type__",MT="__max__",Uu={mapValue:{}},X_="__vector__",sc="value";function Ks(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?wf(r)?4:UT(r)?9007199254740991:jT(r)?10:11:Ee(28295,{value:r})}function kr(r,e){if(r===e)return!0;const t=Ks(r);if(t!==Ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ol(r).isEqual(ol(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ws(o.timestampValue),m=Ws(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Gs(o.bytesValue).isEqual(Gs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return vt(o.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return vt(o.integerValue)===vt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=vt(o.doubleValue),m=vt(l.doubleValue);return h===m?nc(h)===nc(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return $o(r.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(ny(h)!==ny(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!kr(h[g],m[g])))return!1;return!0})(r,e);default:return Ee(52216,{left:r})}}function ll(r,e){return(r.values||[]).find((t=>kr(t,e)))!==void 0}function qo(r,e){if(r===e)return 0;const t=Ks(r),i=Ks(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=vt(l.integerValue||l.doubleValue),g=vt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return sy(r.timestampValue,e.timestampValue);case 4:return sy(ol(r),ol(e));case 5:return jd(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=Gs(l),g=Gs(h);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=De(m[_],g[_]);if(E!==0)return E}return De(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=De(vt(l.latitude),vt(h.latitude));return m!==0?m:De(vt(l.longitude),vt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return iy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var x,j,G,$;const m=l.fields||{},g=h.fields||{},_=(x=m[sc])==null?void 0:x.arrayValue,E=(j=g[sc])==null?void 0:j.arrayValue,I=De(((G=_==null?void 0:_.values)==null?void 0:G.length)||0,(($=E==null?void 0:E.values)==null?void 0:$.length)||0);return I!==0?I:iy(_,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Uu.mapValue&&h===Uu.mapValue)return 0;if(l===Uu.mapValue)return 1;if(h===Uu.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let I=0;I<g.length&&I<E.length;++I){const x=jd(g[I],E[I]);if(x!==0)return x;const j=qo(m[g[I]],_[E[I]]);if(j!==0)return j}return De(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function sy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=Ws(r),i=Ws(e),o=De(t.seconds,i.seconds);return o!==0?o:De(t.nanos,i.nanos)}function iy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=qo(t[o],i[o]);if(l)return l}return De(t.length,i.length)}function Ho(r){return Ud(r)}function Ud(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ws(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Gs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ge.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Ud(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Ud(t.fields[h])}`;return o+"}"})(r.mapValue):Ee(61005,{value:r})}function Hu(r){switch(Ks(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xc(r);return e?16+Hu(e):16;case 5:return 2*r.stringValue.length;case 6:return Gs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Hu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Js(i.fields,((l,h)=>{o+=l.length+Hu(h)})),o})(r.mapValue);default:throw Ee(13486,{value:r})}}function oy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function zd(r){return!!r&&"integerValue"in r}function Ef(r){return!!r&&"arrayValue"in r}function ay(r){return!!r&&"nullValue"in r}function ly(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Wu(r){return!!r&&"mapValue"in r}function jT(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Q_])==null?void 0:i.stringValue)===X_}function Ya(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Js(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ya(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ya(r.arrayValue.values[t]);return e}return{...r}}function UT(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===MT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Wu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(t)}setAll(e){let t=zt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=Ya(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Wu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Wu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Js(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new dn(Ya(this.value))}}function Y_(r){const e=[];return Js(r.fields,((t,i)=>{const o=new zt([t]);if(Wu(i)){const l=Y_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,i,o,l,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Yt(e,0,xe.min(),xe.min(),xe.min(),dn.empty(),0)}static newFoundDocument(e,t,i,o){return new Yt(e,1,t,xe.min(),i,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,xe.min(),xe.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,xe.min(),xe.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t){this.position=e,this.inclusive=t}}function uy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ge.comparator(ge.fromName(h.referenceValue),t.key):i=qo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function cy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t="asc"){this.field=e,this.dir=t}}function zT(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{}class xt extends J_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $T(e,t,i):t==="array-contains"?new WT(e,i):t==="in"?new GT(e,i):t==="not-in"?new KT(e,i):t==="array-contains-any"?new QT(e,i):new xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new qT(e,i):new HT(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qo(t,this.value)):t!==null&&Ks(this.value)===Ks(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends J_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new tr(e,t)}matches(e){return Z_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Z_(r){return r.op==="and"}function ev(r){return BT(r)&&Z_(r)}function BT(r){for(const e of r.filters)if(e instanceof tr)return!1;return!0}function Bd(r){if(r instanceof xt)return r.field.canonicalString()+r.op.toString()+Ho(r.value);if(ev(r))return r.filters.map((e=>Bd(e))).join(",");{const e=r.filters.map((t=>Bd(t))).join(",");return`${r.op}(${e})`}}function tv(r,e){return r instanceof xt?(function(i,o){return o instanceof xt&&i.op===o.op&&i.field.isEqual(o.field)&&kr(i.value,o.value)})(r,e):r instanceof tr?(function(i,o){return o instanceof tr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,m)=>l&&tv(h,o.filters[m])),!0):!1})(r,e):void Ee(19439)}function nv(r){return r instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ho(t.value)}`})(r):r instanceof tr?(function(t){return t.op.toString()+" {"+t.getFilters().map(nv).join(" ,")+"}"})(r):"Filter"}class $T extends xt{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class qT extends xt{constructor(e,t){super(e,"in",t),this.keys=rv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class HT extends xt{constructor(e,t){super(e,"not-in",t),this.keys=rv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ge.fromName(i.referenceValue)))}class WT extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ef(t)&&ll(t.arrayValue,this.value)}}class GT extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ll(this.value.arrayValue,t)}}class KT extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ll(this.value.arrayValue,t)}}class QT extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ef(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ll(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t=null,i=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function hy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new XT(r,e,t,i,o,l,h)}function Tf(r){const e=Re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Bd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ho(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ho(i))).join(",")),e.Te=t}return e.Te}function If(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!zT(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!tv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!cy(r.startAt,e.startAt)&&cy(r.endAt,e.endAt)}function $d(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t=null,i=[],o=[],l=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YT(r,e,t,i,o,l,h,m){return new ea(r,e,t,i,o,l,h,m)}function Sc(r){return new ea(r)}function dy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function sv(r){return r.collectionGroup!==null}function Ja(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Pt(zt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ul(l,i))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new ul(zt.keyField(),i))}return e.Ie}function xr(r){const e=Re(r);return e.Ee||(e.Ee=JT(e,Ja(r))),e.Ee}function JT(r,e){if(r.limitType==="F")return hy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new ul(o.field,l)}));const t=r.endAt?new ic(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ic(r.startAt.position,r.startAt.inclusive):null;return hy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function qd(r,e){const t=r.filters.concat([e]);return new ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Hd(r,e,t){return new ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ac(r,e){return If(xr(r),xr(e))&&r.limitType===e.limitType}function iv(r){return`${Tf(xr(r))}|lt:${r.limitType}`}function Do(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>nv(o))).join(", ")}]`),Ic(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ho(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ho(o))).join(",")),`Target(${i})`})(xr(r))}; limitType=${r.limitType})`}function Cc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ge.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ja(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const _=uy(h,m,g);return h.inclusive?_<=0:_<0})(i.startAt,Ja(i),o)||i.endAt&&!(function(h,m,g){const _=uy(h,m,g);return h.inclusive?_>=0:_>0})(i.endAt,Ja(i),o))})(r,e)}function ZT(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ov(r){return(e,t)=>{let i=!1;for(const o of Ja(r)){const l=eI(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function eI(r,e,t){const i=r.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,h,m){const g=h.data.field(l),_=m.data.field(l);return g!==null&&_!==null?qo(g,_):Ee(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return $_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new dt(ge.comparator);function ss(){return tI}const av=new dt(ge.comparator);function Ga(...r){let e=av;for(const t of r)e=e.insert(t.key,t);return e}function lv(r){let e=av;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Di(){return Za()}function uv(){return Za()}function Za(){return new qi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const nI=new dt(ge.comparator),rI=new Pt(ge.comparator);function Ve(...r){let e=rI;for(const t of r)e=e.add(t);return e}const sI=new Pt(De);function iI(){return sI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function cv(r){return{integerValue:""+r}}function oI(r,e){return DT(e)?cv(e):xf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this._=void 0}}function aI(r,e,t){return r instanceof cl?(function(o,l){const h={fields:{[W_]:{stringValue:H_},[K_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&wf(l)&&(l=xc(l)),l&&(h.fields[G_]=l),{mapValue:h}})(t,e):r instanceof hl?dv(r,e):r instanceof dl?fv(r,e):(function(o,l){const h=hv(o,l),m=fy(h)+fy(o.Ae);return zd(h)&&zd(o.Ae)?cv(m):xf(o.serializer,m)})(r,e)}function lI(r,e,t){return r instanceof hl?dv(r,e):r instanceof dl?fv(r,e):t}function hv(r,e){return r instanceof oc?(function(i){return zd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class cl extends Rc{}class hl extends Rc{constructor(e){super(),this.elements=e}}function dv(r,e){const t=pv(e);for(const i of r.elements)t.some((o=>kr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class dl extends Rc{constructor(e){super(),this.elements=e}}function fv(r,e){let t=pv(e);for(const i of r.elements)t=t.filter((o=>!kr(o,i)));return{arrayValue:{values:t}}}class oc extends Rc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function fy(r){return vt(r.integerValue||r.doubleValue)}function pv(r){return Ef(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t){this.field=e,this.transform=t}}function cI(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof hl&&o instanceof hl||i instanceof dl&&o instanceof dl?$o(i.elements,o.elements,kr):i instanceof oc&&o instanceof oc?kr(i.Ae,o.Ae):i instanceof cl&&o instanceof cl})(r.transform,e.transform)}class hI{constructor(e,t){this.version=e,this.transformResults=t}}class rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class kc{}function mv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Pc(r.key,rn.none()):new yl(r.key,r.data,rn.none());{const t=r.data,i=dn.empty();let o=new Pt(zt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Zs(r.key,i,new Cn(o.toArray()),rn.none())}}function dI(r,e,t){r instanceof yl?(function(o,l,h){const m=o.value.clone(),g=my(o.fieldTransforms,l,h.transformResults);m.setAll(g),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Zs?(function(o,l,h){if(!Gu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=my(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(gv(o)),g.setAll(m),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function el(r,e,t,i){return r instanceof yl?(function(l,h,m,g){if(!Gu(l.precondition,h))return m;const _=l.value.clone(),E=gy(l.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(r,e,t,i):r instanceof Zs?(function(l,h,m,g){if(!Gu(l.precondition,h))return m;const _=gy(l.fieldTransforms,g,h),E=h.data;return E.setAll(gv(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,h,m){return Gu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function fI(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=hv(i.transform,o||null);l!=null&&(t===null&&(t=dn.empty()),t.set(i.field,l))}return t||null}function py(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&$o(i,o,((l,h)=>cI(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yl extends kc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zs extends kc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function my(r,e,t){const i=new Map;We(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);i.set(l.field,lI(h,m,t[o]))}return i}function gy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,aI(l,h,e))}return i}class Pc extends kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pI extends kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&dI(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=uv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const g=mv(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,((t,i)=>py(t,i)))&&$o(this.baseMutations,e.baseMutations,((t,i)=>py(t,i)))}}class Sf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return nI})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Sf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Fe;function _I(r){switch(r){case q.OK:return Ee(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return Ee(15467,{code:r})}}function yv(r){if(r===void 0)return rs("GRPC error has no .code"),q.UNKNOWN;switch(r){case It.OK:return q.OK;case It.CANCELLED:return q.CANCELLED;case It.UNKNOWN:return q.UNKNOWN;case It.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case It.INTERNAL:return q.INTERNAL;case It.UNAVAILABLE:return q.UNAVAILABLE;case It.UNAUTHENTICATED:return q.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case It.NOT_FOUND:return q.NOT_FOUND;case It.ALREADY_EXISTS:return q.ALREADY_EXISTS;case It.PERMISSION_DENIED:return q.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case It.ABORTED:return q.ABORTED;case It.OUT_OF_RANGE:return q.OUT_OF_RANGE;case It.UNIMPLEMENTED:return q.UNIMPLEMENTED;case It.DATA_LOSS:return q.DATA_LOSS;default:return Ee(39323,{code:r})}}(Fe=It||(It={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new $s([4294967295,4294967295],0);function yy(r){const e=vI().encode(r),t=new b_;return t.update(e),new Uint8Array(t.digest())}function _y(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new $s([t,i],0),new $s([o,l],0)]}class Af{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(i<0)throw new Ka(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$s.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply($s.fromNumber(i)));return o.compare(wI)===1&&(o=new $s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yy(e),[i,o]=_y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Af(l,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=yy(e),[i,o]=_y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Nc(xe.min(),o,new dt(De),ss(),Ve())}}class _l{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new _l(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class _v{constructor(e,t){this.targetId=e,this.Ce=t}}class vv{constructor(e,t,i=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class vy{constructor(){this.ve=0,this.Fe=wy(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),i=Ve();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ee(38017,{changeType:l})}})),new _l(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=wy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ss(),this.Je=zu(),this.He=zu(),this.Ye=new dt(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if($d(l))if(i===0){const h=new ge(l.path);this.et(t,h,Yt.newNoDocument(h,xe.min()))}else We(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=Gs(i).toUint8Array()}catch(g){if(g instanceof q_)return Bo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Af(h,o,l)}catch(g){return Bo(g instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&$d(m.target)){const g=new ge(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Yt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Ve();this.He.forEach(((l,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Nc(e,t,this.Ye,this.je,i);return this.je=ss(),this.Je=zu(),this.He=zu(),this.Ye=new dt(De),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pt(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pt(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zu(){return new dt(ge.comparator)}function wy(){return new dt(ge.comparator)}const TI={asc:"ASCENDING",desc:"DESCENDING"},II={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xI={and:"AND",or:"OR"};class SI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wd(r,e){return r.useProto3Json||Ic(e)?e:{value:e}}function ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AI(r,e){return ac(r,e.toTimestamp())}function Sr(r){return We(!!r,49232),xe.fromTimestamp((function(t){const i=Ws(t);return new nt(i.seconds,i.nanos)})(r))}function Cf(r,e){return Gd(r,e).canonicalString()}function Gd(r,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Ev(r){const e=Je.fromString(r);return We(Av(e),10190,{key:e.toString()}),e}function Kd(r,e){return Cf(r.databaseId,e.path)}function Id(r,e){const t=Ev(e);if(t.get(1)!==r.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ge(Iv(t))}function Tv(r,e){return Cf(r.databaseId,e)}function CI(r){const e=Ev(r);return e.length===4?Je.emptyPath():Iv(e)}function Qd(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Iv(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ey(r,e,t){return{name:Kd(r,e),fields:t.value.mapValue.fields}}function RI(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ee(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(_,E){return _.useProto3Json?(We(E===void 0||typeof E=="string",58123),Bt.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Bt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const E=_.code===void 0?q.UNKNOWN:yv(_.code);return new se(E,_.message||"")})(h);t=new vv(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Id(r,i.document.name),l=Sr(i.document.updateTime),h=i.document.createTime?Sr(i.document.createTime):xe.min(),m=new dn({mapValue:{fields:i.document.fields}}),g=Yt.newFoundDocument(o,l,h,m),_=i.targetIds||[],E=i.removedTargetIds||[];t=new Ku(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Id(r,i.document),l=i.readTime?Sr(i.readTime):xe.min(),h=Yt.newNoDocument(o,l),m=i.removedTargetIds||[];t=new Ku([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Id(r,i.document),l=i.removedTargetIds||[];t=new Ku([],l,o,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new yI(o,l),m=i.targetId;t=new _v(m,h)}}return t}function kI(r,e){let t;if(e instanceof yl)t={update:Ey(r,e.key,e.value)};else if(e instanceof Pc)t={delete:Kd(r,e.key)};else if(e instanceof Zs)t={update:Ey(r,e.key,e.data),updateMask:MI(e.fieldMask)};else{if(!(e instanceof pI))return Ee(16599,{Vt:e.type});t={verify:Kd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const m=h.transform;if(m instanceof cl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof hl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof dl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof oc)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Ee(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:AI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(r,e.precondition)),t}function PI(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Sr(o.updateTime):Sr(l);return h.isEqual(xe.min())&&(h=Sr(l)),new hI(h,o.transformResults||[])})(t,e)))):[]}function NI(r,e){return{documents:[Tv(r,e.path)]}}function bI(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Tv(r,o);const l=(function(_){if(_.length!==0)return Sv(tr.create(_,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(_){if(_.length!==0)return _.map((E=>(function(x){return{field:Vo(x.field),direction:OI(x.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Wd(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function DI(r){let e=CI(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(I){const x=xv(I);return x instanceof tr&&ev(x)?x.getFilters():[x]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((x=>(function(G){return new ul(Oo(G.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(x)))})(t.orderBy));let m=null;t.limit&&(m=(function(I){let x;return x=typeof I=="object"?I.value:I,Ic(x)?null:x})(t.limit));let g=null;t.startAt&&(g=(function(I){const x=!!I.before,j=I.values||[];return new ic(j,x)})(t.startAt));let _=null;return t.endAt&&(_=(function(I){const x=!I.before,j=I.values||[];return new ic(j,x)})(t.endAt)),YT(e,o,h,l,m,"F",g,_)}function VI(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Oo(t.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oo(t.unaryFilter.field);return xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Oo(t.unaryFilter.field);return xt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(r):r.fieldFilter!==void 0?(function(t){return xt.create(Oo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return tr.create(t.compositeFilter.filters.map((i=>xv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(r):Ee(30097,{filter:r})}function OI(r){return TI[r]}function LI(r){return II[r]}function FI(r){return xI[r]}function Vo(r){return{fieldPath:r.canonicalString()}}function Oo(r){return zt.fromServerFormat(r.fieldPath)}function Sv(r){return r instanceof xt?(function(t){if(t.op==="=="){if(ly(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NAN"}};if(ay(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ly(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NAN"}};if(ay(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(t.field),op:LI(t.op),value:t.value}}})(r):r instanceof tr?(function(t){const i=t.getFilters().map((o=>Sv(o)));return i.length===1?i[0]:{compositeFilter:{op:FI(t.op),filters:i}}})(r):Ee(54877,{filter:r})}function MI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Av(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,i,o,l=xe.min(),h=xe.min(),m=Bt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.yt=e}}function UI(r){const e=DI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.Cn=new BI}addToCollectionParentIndex(e,t){return this.Cn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Hs.min())}updateCollectionGroup(e,t,i){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class BI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Pt(Je.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Pt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cv=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(Cv,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wo(0)}static cr(){return new Wo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="LruGarbageCollector",$I=1048576;function xy([r,e],[t,i]){const o=De(r,t);return o===0?De(e,i):o}class qI{constructor(e){this.Ir=e,this.buffer=new Pt(xy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();xy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Iy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?ue(Iy,"Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.Vr(3e5)}))}}class WI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Tc.ce);const i=new qI(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Ty)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ty):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,m,g,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,m=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(_=Date.now(),bo()<=be.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${I} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function GI(r,e){return new WI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.changes=new qi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?W.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&el(i.mutation,o,Cn.empty(),nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const o=Di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ga();return l.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Di();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let l=ss();const h=Za(),m=(function(){return Za()})();return t.forEach(((g,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Zs)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),el(E.mutation,_,E.mutation.getFieldMask(),nt.now())):h.set(_.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((_,E)=>h.set(_,E))),t.forEach(((_,E)=>m.set(_,new QI(E,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=Za();let o=new dt(((h,m)=>h-m)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let E=i.get(g)||Cn.empty();E=m.applyToLocalView(_,E),i.set(g,E);const I=(o.get(m.batchId)||Ve()).add(g);o=o.insert(m.batchId,I)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,I=uv();E.forEach((x=>{if(!l.has(x)){const j=mv(t.get(x),i.get(x));j!==null&&I.set(x,j),l=l.add(x)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,I))}return W.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):W.resolve(Di());let m=il,g=l;return h.next((_=>W.forEach(_,((E,I)=>(m<I.largestBatchId&&(m=I.largestBatchId),l.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next((x=>{g=g.insert(E,x)}))))).next((()=>this.populateOverlays(e,_,l))).next((()=>this.computeViews(e,g,_,Ve()))).next((E=>({batchId:m,changes:lv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((i=>{let o=Ga();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ga();return this.indexManager.getCollectionParents(e,l).next((m=>W.forEach(m,(g=>{const _=(function(I,x){return new ea(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((E=>{E.forEach(((I,x)=>{h=h.insert(I,x)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Yt.newInvalidDocument(E)))}));let m=Ga();return h.forEach(((g,_)=>{const E=l.get(g);E!==void 0&&el(E.mutation,_,Cn.empty(),nt.now()),Cc(t,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return W.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Sr(o.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:UI(o.bundledQuery),readTime:Sr(o.readTime)}})(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.overlays=new dt(ge.comparator),this.qr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Di();return W.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),W.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),W.resolve()}getOverlaysForCollection(e,t,i){const o=Di(),l=t.length+1,h=new ge(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return W.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new dt(((_,E)=>_-E));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=l.get(_.largestBatchId);E===null&&(E=Di(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=Di(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,E)=>m.set(_,E))),!(m.size()>=o)););return W.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new gI(t,i));let l=this.qr.get(t);l===void 0&&(l=Ve(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.Qr=new Pt(Vt.$r),this.Ur=new Pt(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Vt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Vt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ge(new Je([])),i=new Vt(t,e),o=new Vt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new Je([])),i=new Vt(t,e),o=new Vt(t,e+1);let l=Ve();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Vt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Vt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Vt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new mI(l,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Vt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,t){return W.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return W.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?vf:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vt(t,0),o=new Vt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const m=this.Xr(h.Yr);l.push(m)})),W.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Pt(De);return t.forEach((o=>{const l=new Vt(o,0),h=new Vt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(m=>{i=i.add(m.Yr)}))})),W.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ge.isDocumentKey(l)||(l=l.child(""));const h=new Vt(new ge(l),0);let m=new Pt(De);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),h),W.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return W.forEach(t.mutations,(o=>{const l=new Vt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Vt(t,0),o=this.Zr.firstAfterOrEqual(i);return W.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.ri=e,this.docs=(function(){return new dt(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return W.resolve(i?i.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let i=ss();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Yt.newInvalidDocument(o))})),W.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=ss();const h=t.path,m=new ge(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||kT(RT(E),i)<=0||(o.has(E.key)||Cc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return W.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ee(9500)}ii(e,t){return W.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new nx(this)}getSize(e){return W.resolve(this.size)}}class nx extends KI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),W.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.persistence=e,this.si=new qi((t=>Tf(t)),If),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Rf,this.targetCount=0,this.ai=Wo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),W.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Wo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Pr(t),W.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),W.waitFor(l).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return W.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),W.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),W.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return W.resolve(i)}containsKey(e,t){return W.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Tc(0),this.li=!1,this.li=!0,this.hi=new ZI,this.referenceDelegate=e(this),this.Pi=new rx(this),this.indexManager=new zI,this.remoteDocumentCache=(function(o){return new tx(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new jI(t),this.Ii=new YI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new ex(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new sx(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return W.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class sx extends NT{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Ri=new Rf,this.Vi=null}static mi(e){return new kf(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),W.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(i=>{const o=ge.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class lc{constructor(e,t){this.persistence=e,this.pi=new qi((i=>VT(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=GI(this,t)}static mi(e,t){return new lc(e,t)}Ei(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return W.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?W.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(i++,l.removeEntry(h,xe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hu(e.data.value)),t}br(e,t,i){return W.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return W.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Pf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return X0()?8:bT(Jt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new ix;return this.Ss(e,t,h).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(bo()<=be.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Do(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(bo()<=be.DEBUG&&ue("QueryEngine","Query:",Do(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(bo()<=be.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Do(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):W.resolve())}ys(e,t){if(dy(t))return W.resolve(null);let i=xr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Hd(t,null,"F"),i=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ve(...l);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.Ds(t,m);return this.Cs(t,_,h,g.readTime)?this.ys(e,Hd(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,i,o){return dy(t)||o.isEqual(xe.min())?W.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?W.resolve(null):(bo()<=be.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Do(t)),this.vs(e,h,t,CT(o,il)).next((m=>m)))}))}Ds(e,t){let i=new Pt(ov(e));return t.forEach(((o,l)=>{Cc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return bo()<=be.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Do(t)),this.ps.getDocumentsMatchingQuery(e,t,Hs.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="LocalStore",ax=3e8;class lx{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new dt(De),this.xs=new qi((l=>Tf(l)),If),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ux(r,e,t,i){return new lx(r,e,t,i)}async function kv(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],m=[];let g=Ve();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of l){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function cx(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,E){const I=_.batch,x=I.keys();let j=W.resolve();return x.forEach((G=>{j=j.next((()=>E.getEntry(g,G))).next(($=>{const B=_.docVersions.get(G);We(B!==null,48541),$.version.compareTo(B)<0&&(I.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),E.addEntry($)))}))})),j.next((()=>m.mutationQueue.removeMutationBatch(g,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Ve();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Pv(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function hx(r,e){const t=Re(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,I)=>{const x=o.get(I);if(!x)return;m.push(t.Pi.removeMatchingKeys(l,E.removedDocuments,I).next((()=>t.Pi.addMatchingKeys(l,E.addedDocuments,I))));let j=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?j=j.withResumeToken(Bt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,i)),o=o.insert(I,j),(function($,B,K){return $.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=ax?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(x,j,E)&&m.push(t.Pi.updateTargetData(l,j))}));let g=ss(),_=Ve();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),m.push(dx(l,h,e.documentUpdates).next((E=>{g=E.ks,_=E.qs}))),!i.isEqual(xe.min())){const E=t.Pi.getLastRemoteSnapshotVersion(l).next((I=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(E)}return W.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,_))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function dx(r,e,t){let i=Ve(),o=Ve();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=ss();return t.forEach(((m,g)=>{const _=l.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ue(Nf,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function fx(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=vf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function px(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,W.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new js(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Xd(r,e,t){const i=Re(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Zo(h))throw h;ue(Nf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Sy(r,e,t){const i=Re(r);let o=xe.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,E){const I=Re(g),x=I.xs.get(E);return x!==void 0?W.resolve(I.Ms.get(x)):I.Pi.getTargetData(_,E)})(i,h,xr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:xe.min(),t?l:Ve()))).next((m=>(mx(i,ZT(e),m),{documents:m,Qs:l})))))}function mx(r,e,t){let i=r.Os.get(e)||xe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Ay{constructor(){this.activeTargetIds=iI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gx{constructor(){this.Mo=new Ay,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ay,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="ConnectivityMonitor";class Ry{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Cy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Cy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function Yd(){return Bu===null?Bu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="RestConnection",_x={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===rc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=Yd(),m=this.zo(e,t.toUriEncodedString());ue(xd,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:_}=new URL(m),E=Qo(_);return this.Jo(e,m,g,i,E).then((I=>(ue(xd,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw Bo(xd,`RPC '${e}' ${h} failed with error: `,I,"url: ",m,"request:",i),I}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=_x[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class Ex extends vx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=Yd();return new Promise(((m,g)=>{const _=new D_;_.setWithCredentials(!0),_.listenOnce(V_.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case qu.NO_ERROR:const I=_.getResponseJson();ue(Kt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),m(I);break;case qu.TIMEOUT:ue(Kt,`RPC '${e}' ${h} timed out`),g(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const x=_.getStatus();if(ue(Kt,`RPC '${e}' ${h} failed with status:`,x,"response text:",_.getResponseText()),x>0){let j=_.getResponseJson();Array.isArray(j)&&(j=j[0]);const G=j==null?void 0:j.error;if(G&&G.status&&G.message){const $=(function(K){const te=K.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(te)>=0?te:q.UNKNOWN})(G.status);g(new se($,G.message))}else g(new se(q.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new se(q.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ue(Kt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);ue(Kt,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",E,i,15)}))}T_(e,t,i){const o=Yd(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=F_(),m=L_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");ue(Kt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const I=h.createWebChannel(E,g);this.I_(I);let x=!1,j=!1;const G=new wx({Yo:B=>{j?ue(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(x||(ue(Kt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),x=!0),ue(Kt,`RPC '${e}' stream ${o} sending:`,B),I.send(B))},Zo:()=>I.close()}),$=(B,K,te)=>{B.listen(K,(oe=>{try{te(oe)}catch(J){setTimeout((()=>{throw J}),0)}}))};return $(I,Wa.EventType.OPEN,(()=>{j||(ue(Kt,`RPC '${e}' stream ${o} transport opened.`),G.o_())})),$(I,Wa.EventType.CLOSE,(()=>{j||(j=!0,ue(Kt,`RPC '${e}' stream ${o} transport closed`),G.a_(),this.E_(I))})),$(I,Wa.EventType.ERROR,(B=>{j||(j=!0,Bo(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),G.a_(new se(q.UNAVAILABLE,"The operation could not be completed")))})),$(I,Wa.EventType.MESSAGE,(B=>{var K;if(!j){const te=B.data[0];We(!!te,16349);const oe=te,J=(oe==null?void 0:oe.error)||((K=oe[0])==null?void 0:K.error);if(J){ue(Kt,`RPC '${e}' stream ${o} received error:`,J);const ce=J.status;let ie=(function(k){const b=It[k];if(b!==void 0)return yv(b)})(ce),C=J.message;ie===void 0&&(ie=q.INTERNAL,C="Unknown error status: "+ce+" with message "+J.message),j=!0,G.a_(new se(ie,C)),I.close()}else ue(Kt,`RPC '${e}' stream ${o} received:`,te),G.u_(te)}})),$(m,O_.STAT_EVENT,(B=>{B.stat===Md.PROXY?ue(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Md.NOPROXY&&ue(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(r){return new SI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="PersistentStream";class bv{constructor(e,t,i,o,l,h,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Nv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new se(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(ky,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(ky,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tx extends bv{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RI(this.serializer,e),i=(function(l){if(!("targetChange"in l))return xe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?xe.min():h.readTime?Sr(h.readTime):xe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Qd(this.serializer),t.addTarget=(function(l,h){let m;const g=h.target;if(m=$d(g)?{documents:NI(l,g)}:{query:bI(l,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=wv(l,h.resumeToken);const _=Wd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(xe.min())>0){m.readTime=ac(l,h.snapshotVersion.toTimestamp());const _=Wd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=VI(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Qd(this.serializer),t.removeTarget=e,this.q_(t)}}class Ix extends bv{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=PI(e.writeResults,e.commitTime),i=Sr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Qd(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>kI(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{}class Sx extends xx{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Gd(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(q.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Gd(t,i),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new se(q.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ax{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rs(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="RemoteStore";class Cx{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Hi(this)&&(ue(Bi,"Restarting streams for network reachability change."),await(async function(g){const _=Re(g);_.Ea.add(4),await vl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Dc(_)})(this))}))})),this.Ra=new Ax(i,o)}}async function Dc(r){if(Hi(r))for(const e of r.da)await e(!0)}async function vl(r){for(const e of r.da)await e(!1)}function Dv(r,e){const t=Re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Of(t)?Vf(t):ta(t).O_()&&Df(t,e))}function bf(r,e){const t=Re(r),i=ta(t);t.Ia.delete(e),i.O_()&&Vv(t,e),t.Ia.size===0&&(i.O_()?i.L_():Hi(t)&&t.Ra.set("Unknown"))}function Df(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(r).Y_(e)}function Vv(r,e){r.Va.Ue(e),ta(r).Z_(e)}function Vf(r){r.Va=new EI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ta(r).start(),r.Ra.ua()}function Of(r){return Hi(r)&&!ta(r).x_()&&r.Ia.size>0}function Hi(r){return Re(r).Ea.size===0}function Ov(r){r.Va=void 0}async function Rx(r){r.Ra.set("Online")}async function kx(r){r.Ia.forEach(((e,t)=>{Df(r,e)}))}async function Px(r,e){Ov(r),Of(r)?(r.Ra.ha(e),Vf(r)):r.Ra.set("Unknown")}async function Nx(r,e,t){if(r.Ra.set("Online"),e instanceof vv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(i){ue(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uc(r,i)}else if(e instanceof Ku?r.Va.Ze(e):e instanceof _v?r.Va.st(e):r.Va.tt(e),!t.isEqual(xe.min()))try{const i=await Pv(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const m=l.Va.Tt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ia.get(_);E&&l.Ia.set(_,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const E=l.Ia.get(g);if(!E)return;l.Ia.set(g,E.withResumeToken(Bt.EMPTY_BYTE_STRING,E.snapshotVersion)),Vv(l,g);const I=new js(E.target,g,_,E.sequenceNumber);Df(l,I)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){ue(Bi,"Failed to raise snapshot:",i),await uc(r,i)}}async function uc(r,e,t){if(!Zo(e))throw e;r.Ea.add(1),await vl(r),r.Ra.set("Offline"),t||(t=()=>Pv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Bi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Dc(r)}))}function Lv(r,e){return e().catch((t=>uc(r,t,e)))}async function Vc(r){const e=Re(r),t=Qs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vf;for(;bx(e);)try{const o=await fx(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,Dx(e,o)}catch(o){await uc(e,o)}Fv(e)&&Mv(e)}function bx(r){return Hi(r)&&r.Ta.length<10}function Dx(r,e){r.Ta.push(e);const t=Qs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Fv(r){return Hi(r)&&!Qs(r).x_()&&r.Ta.length>0}function Mv(r){Qs(r).start()}async function Vx(r){Qs(r).ra()}async function Ox(r){const e=Qs(r);for(const t of r.Ta)e.ea(t.mutations)}async function Lx(r,e,t){const i=r.Ta.shift(),o=Sf.from(i,e,t);await Lv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Vc(r)}async function Fx(r,e){e&&Qs(r).X_&&await(async function(i,o){if((function(h){return _I(h)&&h!==q.ABORTED})(o.code)){const l=i.Ta.shift();Qs(i).B_(),await Lv(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Vc(i)}})(r,e),Fv(r)&&Mv(r)}async function Py(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),ue(Bi,"RemoteStore received new credentials");const i=Hi(t);t.Ea.add(3),await vl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dc(t)}async function Mx(r,e){const t=Re(r);e?(t.Ea.delete(2),await Dc(t)):e||(t.Ea.add(2),await vl(t),t.Ra.set("Unknown"))}function ta(r){return r.ma||(r.ma=(function(t,i,o){const l=Re(t);return l.sa(),new Tx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Rx.bind(null,r),t_:kx.bind(null,r),r_:Px.bind(null,r),H_:Nx.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Of(r)?Vf(r):r.Ra.set("Unknown")):(await r.ma.stop(),Ov(r))}))),r.ma}function Qs(r){return r.fa||(r.fa=(function(t,i,o){const l=Re(t);return l.sa(),new Ix(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Vx.bind(null,r),r_:Fx.bind(null,r),ta:Ox.bind(null,r),na:Lx.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Vc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Bi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,m=new Lf(e,t,h,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ff(r,e){if(rs("AsyncQueue",`${e}: ${r}`),Zo(r))return new se(q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=Ga(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Fo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.ga=new dt(ge.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Go{constructor(e,t,i,o,l,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Go(e,t,Fo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ux{constructor(){this.queries=by(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=by(),l.forEach(((h,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new se(q.ABORTED,"Firestore shutting down"))}}function by(){return new qi((r=>iv(r)),Ac)}async function Mf(r,e){const t=Re(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new jx,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Ff(h,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Uf(t)}async function jf(r,e){const t=Re(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function zx(r,e){const t=Re(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&Uf(t)}function Bx(r,e,t){const i=Re(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Uf(r){r.Ca.forEach((e=>{e.next()}))}var Jd,Dy;(Dy=Jd||(Jd={})).Ma="default",Dy.Cache="cache";class zf{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Go(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.key=e}}class Uv{constructor(e){this.key=e}}class $x{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=ov(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Ny,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,I)=>{const x=o.get(E),j=Cc(this.query,I)?I:null,G=!!x&&this.mutatedKeys.has(x.key),$=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let B=!1;x&&j?x.data.isEqual(j.data)?G!==$&&(i.track({type:3,doc:j}),B=!0):this.su(x,j)||(i.track({type:2,doc:j}),B=!0,(g&&this.eu(j,g)>0||_&&this.eu(j,_)<0)&&(m=!0)):!x&&j?(i.track({type:0,doc:j}),B=!0):x&&!j&&(i.track({type:1,doc:x}),B=!0,(g||_)&&(m=!0)),B&&(j?(h=h.add(j),l=$?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{tu:h,iu:i,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,I)=>(function(j,G){const $=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:B})}};return $(j)-$(G)})(E.type,I.type)||this.eu(E.doc,I.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,h.length!==0||_?{snapshot:new Go(this.query,e.tu,l,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ny,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Uv(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new jv(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Go.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bf="SyncEngine";class qx{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Hx{constructor(e){this.key=e,this.hu=!1}}class Wx{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new qi((m=>iv(m)),Ac),this.Iu=new Map,this.Eu=new Set,this.du=new dt(ge.comparator),this.Au=new Map,this.Ru=new Rf,this.Vu={},this.mu=new Map,this.fu=Wo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Gx(r,e,t=!0){const i=Wv(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await zv(i,e,t,!0),o}async function Kx(r,e){const t=Wv(r);await zv(t,e,!0,!1)}async function zv(r,e,t,i){const o=await px(r.localStore,xr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await Qx(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Dv(r.remoteStore,o),m}async function Qx(r,e,t,i,o){r.pu=(I,x,j)=>(async function($,B,K,te){let oe=B.view.ru(K);oe.Cs&&(oe=await Sy($.localStore,B.query,!1).then((({documents:C})=>B.view.ru(C,oe))));const J=te&&te.targetChanges.get(B.targetId),ce=te&&te.targetMismatches.get(B.targetId)!=null,ie=B.view.applyChanges(oe,$.isPrimaryClient,J,ce);return Oy($,B.targetId,ie.au),ie.snapshot})(r,I,x,j);const l=await Sy(r.localStore,e,!0),h=new $x(e,l.Qs),m=h.ru(l.documents),g=_l.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=h.applyChanges(m,r.isPrimaryClient,g);Oy(r,t,_.au);const E=new qx(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),_.snapshot}async function Xx(r,e,t){const i=Re(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Ac(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Xd(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&bf(i.remoteStore,o.targetId),Zd(i,o.targetId)})).catch(Jo)):(Zd(i,o.targetId),await Xd(i.localStore,o.targetId,!0))}async function Yx(r,e){const t=Re(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),bf(t.remoteStore,i.targetId))}async function Jx(r,e,t){const i=iS(r);try{const o=await(function(h,m){const g=Re(h),_=nt.now(),E=m.reduce(((j,G)=>j.add(G.key)),Ve());let I,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let G=ss(),$=Ve();return g.Ns.getEntries(j,E).next((B=>{G=B,G.forEach(((K,te)=>{te.isValidDocument()||($=$.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(j,G))).next((B=>{I=B;const K=[];for(const te of m){const oe=fI(te,I.get(te.key).overlayedDocument);oe!=null&&K.push(new Zs(te.key,oe,Y_(oe.value.mapValue),rn.exists(!0)))}return g.mutationQueue.addMutationBatch(j,_,K,m)})).next((B=>{x=B;const K=B.applyToLocalDocumentSet(I,$);return g.documentOverlayCache.saveOverlays(j,B.batchId,K)}))})).then((()=>({batchId:x.batchId,changes:lv(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let _=h.Vu[h.currentUser.toKey()];_||(_=new dt(De)),_=_.insert(m,g),h.Vu[h.currentUser.toKey()]=_})(i,o.batchId,t),await wl(i,o.changes),await Vc(i.remoteStore)}catch(o){const l=Ff(o,"Failed to persist write");t.reject(l)}}async function Bv(r,e){const t=Re(r);try{const i=await hx(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))})),await wl(t,i,e)}catch(i){await Jo(i)}}function Vy(r,e,t){const i=Re(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Re(h);g.onlineState=m;let _=!1;g.queries.forEach(((E,I)=>{for(const x of I.Sa)x.va(m)&&(_=!0)})),_&&Uf(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Zx(r,e,t){const i=Re(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new dt(ge.comparator);h=h.insert(l,Yt.newNoDocument(l,xe.min()));const m=Ve().add(l),g=new Nc(xe.min(),new Map,new dt(De),h,m);await Bv(i,g),i.du=i.du.remove(l),i.Au.delete(e),$f(i)}else await Xd(i.localStore,e,!1).then((()=>Zd(i,e,t))).catch(Jo)}async function eS(r,e){const t=Re(r),i=e.batch.batchId;try{const o=await cx(t.localStore,e);qv(t,i,null),$v(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await wl(t,o)}catch(o){await Jo(o)}}async function tS(r,e,t){const i=Re(r);try{const o=await(function(h,m){const g=Re(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next((I=>(We(I!==null,37113),E=I.keys(),g.mutationQueue.removeMutationBatch(_,I)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>g.localDocuments.getDocuments(_,E)))}))})(i.localStore,e);qv(i,e,t),$v(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await wl(i,o)}catch(o){await Jo(o)}}function $v(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function qv(r,e,t){const i=Re(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Zd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||Hv(r,i)}))}function Hv(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(bf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),$f(r))}function Oy(r,e,t){for(const i of t)i instanceof jv?(r.Ru.addReference(i.key,e),nS(r,i)):i instanceof Uv?(ue(Bf,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||Hv(r,i.key)):Ee(19791,{wu:i})}function nS(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ue(Bf,"New document in limbo: "+t),r.Eu.add(i),$f(r))}function $f(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ge(Je.fromString(e)),i=r.fu.next();r.Au.set(i,new Hx(t)),r.du=r.du.insert(t,i),Dv(r.remoteStore,new js(xr(Sc(t.path)),i,"TargetPurposeLimboResolution",Tc.ce))}}async function wl(r,e,t){const i=Re(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{h.push(i.pu(g,e,t).then((_=>{var E;if((_||t)&&i.isPrimaryClient){const I=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,I?"current":"not-current")}if(_){o.push(_);const I=Pf.As(g.targetId,_);l.push(I)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,_){const E=Re(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>W.forEach(_,(x=>W.forEach(x.Es,(j=>E.persistence.referenceDelegate.addReference(I,x.targetId,j))).next((()=>W.forEach(x.ds,(j=>E.persistence.referenceDelegate.removeReference(I,x.targetId,j)))))))))}catch(I){if(!Zo(I))throw I;ue(Nf,"Failed to update sequence numbers: "+I)}for(const I of _){const x=I.targetId;if(!I.fromCache){const j=E.Ms.get(x),G=j.snapshotVersion,$=j.withLastLimboFreeSnapshotVersion(G);E.Ms=E.Ms.insert(x,$)}}})(i.localStore,l))}async function rS(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){ue(Bf,"User change. New user:",e.toKey());const i=await kv(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new se(q.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wl(t,i.Ls)}}function sS(r,e){const t=Re(r),i=t.Au.get(e);if(i&&i.hu)return Ve().add(i.key);{let o=Ve();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function Wv(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zx.bind(null,e),e.Pu.H_=zx.bind(null,e.eventManager),e.Pu.yu=Bx.bind(null,e.eventManager),e}function iS(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tS.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ux(this.persistence,new ox,e.initialUser,this.serializer)}Cu(e){return new Rv(kf.mi,this.serializer)}Du(e){return new gx}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class oS extends cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof lc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new HI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Rv((i=>lc.mi(i,t)),this.serializer)}}class ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Vy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rS.bind(null,this.syncEngine),await Mx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ux})()}createDatastore(e){const t=bc(e.databaseInfo.databaseId),i=(function(l){return new Ex(l)})(e.databaseInfo);return(function(l,h,m,g){return new Sx(l,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,m){return new Cx(i,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Vy(this.syncEngine,t,0)),(function(){return Ry.v()?new Ry:new yx})())}createSyncEngine(e,t){return(function(o,l,h,m,g,_,E){const I=new Wx(o,l,h,m,g,_);return E&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);ue(Bi,"RemoteStore shutting down."),l.Ea.add(5),await vl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ef.provider={build:()=>new ef};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="FirestoreClient";class aS{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=_f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ue(Xs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ue(Xs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ff(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ad(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Xs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await kv(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Ly(r,e){r.asyncQueue.verifyOperationInProgress();const t=await lS(r);ue(Xs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Py(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Py(e.remoteStore,o))),r._onlineComponents=e}async function lS(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Xs,"Using user provided OfflineComponentProvider");try{await Ad(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===q.FAILED_PRECONDITION||o.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Bo("Error using user provided cache. Falling back to memory cache: "+t),await Ad(r,new cc)}}else ue(Xs,"Using default OfflineComponentProvider"),await Ad(r,new oS(void 0));return r._offlineComponents}async function Gv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Xs,"Using user provided OnlineComponentProvider"),await Ly(r,r._uninitializedComponentsProvider._online)):(ue(Xs,"Using default OnlineComponentProvider"),await Ly(r,new ef))),r._onlineComponents}function uS(r){return Gv(r).then((e=>e.syncEngine))}async function hc(r){const e=await Gv(r),t=e.eventManager;return t.onListen=Gx.bind(null,e.syncEngine),t.onUnlisten=Xx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Kx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Yx.bind(null,e.syncEngine),t}function cS(r,e,t={}){const i=new ts;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,g,_){const E=new qf({next:x=>{E.Nu(),h.enqueueAndForget((()=>jf(l,I)));const j=x.docs.has(m);!j&&x.fromCache?_.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&g&&g.source==="server"?_.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),I=new zf(Sc(m.path),E,{includeMetadataChanges:!0,qa:!0});return Mf(l,I)})(await hc(r),r.asyncQueue,e,t,i))),i.promise}function hS(r,e,t={}){const i=new ts;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,g,_){const E=new qf({next:x=>{E.Nu(),h.enqueueAndForget((()=>jf(l,I))),x.fromCache&&g.source==="server"?_.reject(new se(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),I=new zf(m,E,{includeMetadataChanges:!0,qa:!0});return Mf(l,I)})(await hc(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="firestore.googleapis.com",My=!0;class jy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qv,this.ssl=My}else this.host=e.host,this.ssl=e.ssl??My;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$I)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kv(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new gT;switch(i.type){case"firstParty":return new wT(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Fy.get(t);i&&(ue("ComponentProvider","Removing Datastore"),Fy.delete(t),i.terminate())})(this),Promise.resolve()}}function dS(r,e,t,i={}){var _;r=nn(r,Oc);const o=Qo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(x_(`https://${m}`),S_("Firestore",!0)),l.host!==Qv&&l.host!==m&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:i};if(!ji(g,h)&&(r._setSettings(g),i.mockUserToken)){let E,I;if(typeof i.mockUserToken=="string")E=i.mockUserToken,I=Qt.MOCK_USER;else{E=z0(i.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Qt(x)}r._authCredentials=new yT(new j_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class gt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(gl(t,gt._jsonSchema))return new gt(e,i||null,new ge(Je.fromString(t.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:St("string",gt._jsonSchemaVersion),referencePath:St("string")};class qs extends ei{constructor(e,t,i){super(e,t,Sc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ge(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function Oi(r,e,...t){if(r=At(r),U_("collection","path",e),r instanceof Oc){const i=Je.fromString(e,...t);return Jg(i),new qs(r,null,i)}{if(!(r instanceof gt||r instanceof qs))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return Jg(i),new qs(r.firestore,null,i)}}function fn(r,e,...t){if(r=At(r),arguments.length===1&&(e=_f.newId()),U_("doc","path",e),r instanceof Oc){const i=Je.fromString(e,...t);return Yg(i),new gt(r,null,new ge(i))}{if(!(r instanceof gt||r instanceof qs))throw new se(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return Yg(i),new gt(r.firestore,r instanceof qs?r.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="AsyncQueue";class zy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Nv(this,"async_queue_retry"),this._c=()=>{const i=Sd();i&&ue(Uy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Sd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zo(e))throw e;ue(Uy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",By(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Lf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:By(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function By(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Pr extends Oc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new zy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zy(e),this._firestoreClient=void 0,await e}}}function fS(r,e){const t=typeof r=="object"?r:k_(),i=typeof r=="string"?r:rc,o=gf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=j0("firestore");l&&dS(o,...l)}return o}function El(r){if(r._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pS(r),r._firestoreClient}function pS(r){var i,o,l;const e=r._freezeSettings(),t=(function(m,g,_,E){return new FT(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Kv(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new aS(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Bt.fromBase64String(e))}catch(t){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gl(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:St("string",Fn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ar._jsonSchemaVersion}}static fromJSON(e){if(gl(e,Ar._jsonSchema))return new Ar(e.latitude,e.longitude)}}Ar._jsonSchemaVersion="firestore/geoPoint/1.0",Ar._jsonSchema={type:St("string",Ar._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gl(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Cr(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:St("string",Cr._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=/^__.*__$/;class gS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}}class Xv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:r})}}class Hf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Yv(this.Ac)&&mS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yS{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||bc(e)}Cc(e,t,i,o=!1){return new Hf({Ac:e,methodName:t,Dc:i,path:zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Il(r){const e=r._freezeSettings(),t=bc(r._databaseId);return new yS(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Wf(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Kf("Data must be an object, but it was:",h,i);const m=ew(i,h);let g,_;if(l.merge)g=new Cn(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const x=tf(e,I,t);if(!h.contains(x))throw new se(q.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);nw(E,x)||E.push(x)}g=new Cn(E),_=h.fieldTransforms.filter((I=>g.covers(I.field)))}else g=null,_=h.fieldTransforms;return new gS(new dn(m),g,_)}class Fc extends Lc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fc}}class Gf extends Lc{_toFieldTransform(e){return new uI(e.path,new cl)}isEqual(e){return e instanceof Gf}}function Jv(r,e,t,i){const o=r.Cc(1,e,t);Kf("Data must be an object, but it was:",o,i);const l=[],h=dn.empty();Js(i,((g,_)=>{const E=Qf(e,g,t);_=At(_);const I=o.yc(E);if(_ instanceof Fc)l.push(E);else{const x=xl(_,I);x!=null&&(l.push(E),h.set(E,x))}}));const m=new Cn(l);return new Xv(h,m,o.fieldTransforms)}function Zv(r,e,t,i,o,l){const h=r.Cc(1,e,t),m=[tf(e,i,t)],g=[o];if(l.length%2!=0)throw new se(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)m.push(tf(e,l[x])),g.push(l[x+1]);const _=[],E=dn.empty();for(let x=m.length-1;x>=0;--x)if(!nw(_,m[x])){const j=m[x];let G=g[x];G=At(G);const $=h.yc(j);if(G instanceof Fc)_.push(j);else{const B=xl(G,$);B!=null&&(_.push(j),E.set(j,B))}}const I=new Cn(_);return new Xv(E,I,h.fieldTransforms)}function _S(r,e,t,i=!1){return xl(t,r.Cc(i?4:3,e))}function xl(r,e){if(tw(r=At(r)))return Kf("Unsupported field value:",e,r),ew(r,e);if(r instanceof Lc)return(function(i,o){if(!Yv(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const m of i){let g=xl(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return oI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=nt.fromDate(i);return{timestampValue:ac(o.serializer,l)}}if(i instanceof nt){const l=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ac(o.serializer,l)}}if(i instanceof Ar)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:wv(o.serializer,i._byteString)};if(i instanceof gt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Cr)return(function(h,m){return{mapValue:{fields:{[Q_]:{stringValue:X_},[sc]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return xf(m.serializer,_)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Ec(i)}`)})(r,e)}function ew(r,e){const t={};return $_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(r,((i,o)=>{const l=xl(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function tw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof Ar||r instanceof Fn||r instanceof gt||r instanceof Lc||r instanceof Cr)}function Kf(r,e,t){if(!tw(t)||!z_(t)){const i=Ec(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function tf(r,e,t){if((e=At(e))instanceof Tl)return e._internalPath;if(typeof e=="string")return Qf(r,e);throw dc("Field path arguments must be of type string or ",r,!1,void 0,t)}const vS=new RegExp("[~\\*/\\[\\]]");function Qf(r,e,t){if(e.search(vS)>=0)throw dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Tl(...e.split("."))._internalPath}catch{throw dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function dc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new se(q.INVALID_ARGUMENT,m+r+g)}function nw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wS extends rw{data(){return super.data()}}function Xf(r,e){return typeof e=="string"?Qf(r,e):e instanceof Tl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yf{}class iw extends Yf{}function ES(r,e,...t){let i=[];e instanceof Yf&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((g=>g instanceof Zf)).length,m=l.filter((g=>g instanceof Jf)).length;if(h>1||h>0&&m>0)throw new se(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Jf extends iw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Jf(e,t,i)}_apply(e){const t=this._parse(e);return ow(e._query,t),new ei(e.firestore,e.converter,qd(e._query,t))}_parse(e){const t=Il(e.firestore);return(function(l,h,m,g,_,E,I){let x;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new se(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Hy(I,E);const G=[];for(const $ of I)G.push(qy(g,l,$));x={arrayValue:{values:G}}}else x=qy(g,l,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Hy(I,E),x=_S(m,h,I,E==="in"||E==="not-in");return xt.create(_,E,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Zf extends Yf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:tr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const g of m)ow(h,g),h=qd(h,g)})(e._query,t),new ei(e.firestore,e.converter,qd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ep extends iw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ep(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new se(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new se(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ul(l,h)})(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new ea(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function TS(r,e="asc"){const t=e,i=Xf("orderBy",r);return ep._create(i,t)}function qy(r,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new se(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sv(e)&&t.indexOf("/")!==-1)throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!ge.isDocumentKey(i))throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return oy(r,new ge(i))}if(t instanceof gt)return oy(r,t._key);throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ec(t)}.`)}function Hy(r,e){if(!Array.isArray(r)||r.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ow(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class IS{convertValue(e,t="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Js(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[sc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>vt(h.doubleValue)));return new Cr(t)}convertGeoPoint(e){return new Ar(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=xc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);We(Av(i),9688,{name:e});const o=new al(i.get(1),i.get(3)),l=new ge(i.popFirst(5));return o.isEqual(t)||rs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Qa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Li extends rw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Xf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Li._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Li._jsonSchemaVersion="firestore/documentSnapshot/1.0",Li._jsonSchema={type:St("string",Li._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class Qu extends Li{data(e={}){return super.data(e)}}class Fi{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Qa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Qu(this._firestore,this._userDataWriter,i.key,i,new Qa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Qu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Qa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new Qu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Qa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:xS(m.type),doc:g,oldIndex:_,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xS(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(r){r=nn(r,gt);const e=nn(r.firestore,Pr);return cS(El(e),r._key).then((t=>lw(e,r,t)))}Fi._jsonSchemaVersion="firestore/querySnapshot/1.0",Fi._jsonSchema={type:St("string",Fi._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class np extends IS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function aw(r){r=nn(r,ei);const e=nn(r.firestore,Pr),t=El(e),i=new np(e);return sw(r._query),hS(t,r._query).then((o=>new Fi(e,i,r,o)))}function nr(r,e,t){r=nn(r,gt);const i=nn(r.firestore,Pr),o=tp(r.converter,e,t);return Al(i,[Wf(Il(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,rn.none())])}function Cd(r,e,t,...i){r=nn(r,gt);const o=nn(r.firestore,Pr),l=Il(o);let h;return h=typeof(e=At(e))=="string"||e instanceof Tl?Zv(l,"updateDoc",r._key,e,t,i):Jv(l,"updateDoc",r._key,e),Al(o,[h.toMutation(r._key,rn.exists(!0))])}function Sl(r){return Al(nn(r.firestore,Pr),[new Pc(r._key,rn.none())])}function SS(r,e){const t=nn(r.firestore,Pr),i=fn(r),o=tp(r.converter,e);return Al(t,[Wf(Il(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,rn.exists(!1))]).then((()=>i))}function Wi(r,...e){var g,_,E;r=At(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||$y(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($y(e[i])){const I=e[i];e[i]=(g=I.next)==null?void 0:g.bind(I),e[i+1]=(_=I.error)==null?void 0:_.bind(I),e[i+2]=(E=I.complete)==null?void 0:E.bind(I)}let l,h,m;if(r instanceof gt)h=nn(r.firestore,Pr),m=Sc(r._key.path),l={next:I=>{e[i]&&e[i](lw(h,r,I))},error:e[i+1],complete:e[i+2]};else{const I=nn(r,ei);h=nn(I.firestore,Pr),m=I._query;const x=new np(h);l={next:j=>{e[i]&&e[i](new Fi(h,x,I,j))},error:e[i+1],complete:e[i+2]},sw(r._query)}return(function(x,j,G,$){const B=new qf($),K=new zf(j,B,G);return x.asyncQueue.enqueueAndForget((async()=>Mf(await hc(x),K))),()=>{B.Nu(),x.asyncQueue.enqueueAndForget((async()=>jf(await hc(x),K)))}})(El(h),m,o,l)}function Al(r,e){return(function(i,o){const l=new ts;return i.asyncQueue.enqueueAndForget((async()=>Jx(await uS(i),o,l))),l.promise})(El(r),e)}function lw(r,e,t){const i=t.docs.get(e._key),o=new np(r);return new Li(r,o,e._key,i,new Qa(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Il(e)}set(e,t,i){this._verifyNotCommitted();const o=Rd(e,this._firestore),l=tp(o.converter,t,i),h=Wf(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,rn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=Rd(e,this._firestore);let h;return h=typeof(t=At(t))=="string"||t instanceof Tl?Zv(this._dataReader,"WriteBatch.update",l._key,t,i,o):Jv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rd(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(t._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rd(r,e){if((r=At(r)).firestore!==e)throw new se(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function mt(){return new Gf("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(r){return El(r=nn(r,Pr)),new AS(r,(e=>Al(r,e)))}(function(e,t=!0){(function(o){Yo=o})(Xo),zo(new Ui("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),m=new Pr(new _T(i.getProvider("auth-internal")),new ET(h,i.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(_.options.projectId,E)})(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Bs(Gg,Kg,e),Bs(Gg,Kg,"esm2020")})();function uw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CS=uw,cw=new pl("auth","Firebase",uw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new pf("@firebase/auth");function RS(r,...e){fc.logLevel<=be.WARN&&fc.warn(`Auth (${Xo}): ${r}`,...e)}function Xu(r,...e){fc.logLevel<=be.ERROR&&fc.error(`Auth (${Xo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(r,...e){throw sp(r,...e)}function er(r,...e){return sp(r,...e)}function rp(r,e,t){const i={...CS(),[e]:t};return new pl("auth","Firebase",i).create(e,{appName:r.name})}function Mi(r){return rp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kS(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Nr(r,"argument-error"),rp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return cw.create(r,...e)}function Ie(r,e,...t){if(!r)throw sp(e,...t)}function Zr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Xu(e),new Error(e)}function is(r,e){r||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function PS(){return Wy()==="http:"||Wy()==="https:"}function Wy(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PS()||G0()||"connection"in navigator)?navigator.onLine:!0}function bS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,is(t>e,"Short delay should be less than long delay!"),this.isMobile=q0()||K0()}get(){return NS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r,e){is(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OS=new Cl(3e4,6e4);function op(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function na(r,e,t,i,o={}){return dw(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const m=ml({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:g,...l};return W0()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Qo(r.emulatorConfig.host)&&(_.credentials="include"),hw.fetch()(await fw(r,r.config.apiHost,t,m),_)})}async function dw(r,e,t){r._canInitEmulator=!1;const i={...DS,...e};try{const o=new FS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw $u(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw $u(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw $u(r,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw rp(r,E,_);Nr(r,E)}}catch(o){if(o instanceof os)throw o;Nr(r,"network-request-failed",{message:String(o)})}}async function LS(r,e,t,i,o={}){const l=await na(r,e,t,i,o);return"mfaPendingCredential"in l&&Nr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function fw(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?ip(r.config,o):`${r.config.apiScheme}://${o}`;return VS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class FS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(er(this.auth,"network-request-failed")),OS.get())})}}function $u(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=er(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(r,e){return na(r,"POST","/v1/accounts:delete",e)}async function pc(r,e){return na(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jS(r,e=!1){const t=At(r),i=await t.getIdToken(e),o=ap(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:tl(Pd(o.auth_time)),issuedAtTime:tl(Pd(o.iat)),expirationTime:tl(Pd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Pd(r){return Number(r)*1e3}function ap(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const o=w_(t);return o?JSON.parse(o):(Xu("Failed to decode base64 JWT payload"),null)}catch(o){return Xu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Gy(r){const e=ap(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof os&&US(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function US({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(r){var I;const e=r.auth,t=await r.getIdToken(),i=await fl(r,pc(e,{idToken:t}));Ie(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(I=o.providerUserInfo)!=null&&I.length?pw(o.providerUserInfo):[],h=$S(r.providerData,l),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),_=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new sf(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,E)}async function BS(r){const e=At(r);await mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $S(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function pw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(r,e){const t=await dw(r,{},async()=>{const i=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await fw(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&Qo(r.emulatorConfig.host)&&(g.credentials="include"),hw.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HS(r,e){return na(r,"POST","/v2/accounts:revokeToken",op(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Gy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await qS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Mo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Zn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new zS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await fl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jS(this,e)}reload(){return BS(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await fl(this,MS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:I,emailVerified:x,isAnonymous:j,providerData:G,stsTokenManager:$}=t;Ie(I&&$,e,"internal-error");const B=Mo.fromJSON(this.name,$);Ie(typeof I=="string",e,"internal-error"),Os(i,e.name),Os(o,e.name),Ie(typeof x=="boolean",e,"internal-error"),Ie(typeof j=="boolean",e,"internal-error"),Os(l,e.name),Os(h,e.name),Os(m,e.name),Os(g,e.name),Os(_,e.name),Os(E,e.name);const K=new Zn({uid:I,auth:e,email:o,emailVerified:x,displayName:i,isAnonymous:j,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:B,createdAt:_,lastLoginAt:E});return G&&Array.isArray(G)&&(K.providerData=G.map(te=>({...te}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new Mo;o.updateFromServerResponse(t);const l=new Zn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await mc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?pw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new Mo;m.updateFromIdToken(i);const g=new Zn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new sf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new Map;function es(r){is(r instanceof Function,"Expected a class definition");let e=Ky.get(r);return e?(is(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ky.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mw.type="NONE";const Qy=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(r,e,t){return`firebase:${r}:${e}:${t}`}class jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Yu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pc(this.auth,{idToken:e}).catch(()=>{});return t?Zn._fromGetAccountInfoResponse(this.auth,t,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new jo(es(Qy),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||es(Qy);const h=Yu(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const E=await _._get(h);if(E){let I;if(typeof E=="string"){const x=await pc(e,{idToken:E}).catch(()=>{});if(!x)break;I=await Zn._fromGetAccountInfoResponse(e,x,E)}else I=Zn._fromJSON(e,E);_!==l&&(m=I),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new jo(l,e,i):(l=g[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new jo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ew(e))return"Blackberry";if(Tw(e))return"Webos";if(yw(e))return"Safari";if((e.includes("chrome/")||_w(e))&&!e.includes("edge/"))return"Chrome";if(ww(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gw(r=Jt()){return/firefox\//i.test(r)}function yw(r=Jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _w(r=Jt()){return/crios\//i.test(r)}function vw(r=Jt()){return/iemobile/i.test(r)}function ww(r=Jt()){return/android/i.test(r)}function Ew(r=Jt()){return/blackberry/i.test(r)}function Tw(r=Jt()){return/webos/i.test(r)}function lp(r=Jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function WS(r=Jt()){var e;return lp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function GS(){return Q0()&&document.documentMode===10}function Iw(r=Jt()){return lp(r)||ww(r)||Tw(r)||Ew(r)||/windows phone/i.test(r)||vw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r,e=[]){let t;switch(r){case"Browser":t=Xy(Jt());break;case"Worker":t=`${Xy(Jt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,m)=>{try{const g=e(l);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(r,e={}){return na(r,"GET","/v2/passwordPolicy",op(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=6;class YS{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??XS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yy(this),this.idTokenSubscription=new Yy(this),this.beforeStateQueue=new KS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pc(this,{idToken:e}),i=await Zn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Jn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Mi(this));const t=e?At(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QS(this),t=new YS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await HS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&es(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&RS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mc(r){return At(r)}class Yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=r1(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZS(r){up=r}function eA(r){return up.loadJS(r)}function tA(){return up.gapiScript}function nA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(r,e){const t=gf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ji(l,e??{}))return o;Nr(o,"already-initialized")}return t.initialize({options:e})}function sA(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(es);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function iA(r,e,t){const i=Mc(r);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Sw(e),{host:h,port:m}=oA(e),g=m===null?"":`:${m}`,_={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(ji(_,i.config.emulator)&&ji(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Qo(h)?(x_(`${l}//${h}${g}`),S_("Auth",!0)):aA()}function Sw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function oA(r){const e=Sw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Jy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Jy(h)}}}function Jy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function aA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(r,e){return LS(r,"POST","/v1/accounts:signInWithIdp",op(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="http://localhost";class $i extends Aw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new $i(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Uo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Uo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Uo(e,t)}buildRequest(){const e={requestUri:lA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ml(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Rl{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $i._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Jr.credential(t,i)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Rl{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Rl{constructor(){super("twitter.com")}static credential(e,t){return $i._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ms.credential(t,i)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Zn._fromIdTokenResponse(e,i,o),h=Zy(i);return new Ko({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Zy(i);return new Ko({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Zy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends os{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new gc(e,t,i,o)}}function Cw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(r,l,e,i):l})}async function uA(r,e,t=!1){const i=await fl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ko._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(r,e,t=!1){const{auth:i}=r;if(Jn(i.app))return Promise.reject(Mi(i));const o="reauthenticate";try{const l=await fl(r,Cw(i,o,e,r),t);Ie(l.idToken,i,"internal-error");const h=ap(l.idToken);Ie(h,i,"internal-error");const{sub:m}=h;return Ie(r.uid===m,i,"user-mismatch"),Ko._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Nr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(r,e,t=!1){if(Jn(r.app))return Promise.reject(Mi(r));const i="signIn",o=await Cw(r,i,e),l=await Ko._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function dA(r,e,t,i){return At(r).onIdTokenChanged(e,t,i)}function fA(r,e,t){return At(r).beforeAuthStateChanged(e,t)}function pA(r,e,t,i){return At(r).onAuthStateChanged(e,t,i)}function mA(r){return At(r).signOut()}const yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yc,"1"),this.storage.removeItem(yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=1e3,yA=10;class kw extends Rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);GS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,yA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},gA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kw.type="LOCAL";const _A=kw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends Rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pw.type="SESSION";const Nw=Pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new jc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,l)),g=await vA(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,g)=>{const _=hp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const x=I;if(x.data.eventId===_)switch(x.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(x.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function EA(r){Rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function TA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function xA(){return bw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firebaseLocalStorageDb",SA=1,_c="firebaseLocalStorage",Vw="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(r,e){return r.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function AA(){const r=indexedDB.deleteDatabase(Dw);return new kl(r).toPromise()}function of(){const r=indexedDB.open(Dw,SA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(_c,{keyPath:Vw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(_c)?e(i):(i.close(),await AA(),e(await of()))})})}async function e_(r,e,t){const i=Uc(r,!0).put({[Vw]:e,value:t});return new kl(i).toPromise()}async function CA(r,e){const t=Uc(r,!1).get(e),i=await new kl(t).toPromise();return i===void 0?null:i.value}function t_(r,e){const t=Uc(r,!0).delete(e);return new kl(t).toPromise()}const RA=800,kA=3;class Ow{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>kA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jc._getInstance(xA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await TA(),!this.activeServiceWorker)return;this.sender=new wA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await e_(e,yc,"1"),await t_(e,yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>e_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>CA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>t_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new kl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ow.type="LOCAL";const PA=Ow;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(r,e){return e?es(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends Aw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Uo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function NA(r){return hA(r.auth,new dp(r),r.bypassAuthState)}function bA(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),cA(t,new dp(r),r.bypassAuthState)}async function DA(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),uA(t,new dp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NA;case"linkViaPopup":case"linkViaRedirect":return DA;case"reauthViaPopup":case"reauthViaRedirect":return bA;default:Nr(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new Cl(2e3,1e4);async function OA(r,e,t){if(Jn(r.app))return Promise.reject(er(r,"operation-not-supported-in-this-environment"));const i=Mc(r);kS(r,e,cp);const o=Lw(i,t);return new Vi(i,"signInViaPopup",e,o).executeNotNull()}class Vi extends Fw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VA.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="pendingRedirect",Ju=new Map;class FA extends Fw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const i=await MA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MA(r,e){const t=zA(e),i=UA(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function jA(r,e){Ju.set(r._key(),e)}function UA(r){return es(r._redirectPersistence)}function zA(r){return Yu(LA,r.config.apiKey,r.name)}async function BA(r,e,t=!1){if(Jn(r.app))return Promise.reject(Mi(r));const i=Mc(r),o=Lw(i,e),h=await new FA(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=600*1e3;class qA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Mw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(er(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$A&&this.cachedEventUids.clear(),this.cachedEventUids.has(n_(e))}saveEventToCache(e){this.cachedEventUids.add(n_(e)),this.lastProcessedEventTime=Date.now()}}function n_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Mw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(r,e={}){return na(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KA=/^https?/;async function QA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await WA(r);for(const t of e)try{if(XA(t))return}catch{}Nr(r,"unauthorized-domain")}function XA(r){const e=rf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!KA.test(t))return!1;if(GA.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new Cl(3e4,6e4);function r_(){const r=Rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function JA(r){return new Promise((e,t)=>{var o,l,h;function i(){r_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r_(),t(er(r,"network-request-failed"))},timeout:YA.get()})}if((l=(o=Rr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Rr().gapi)!=null&&h.load)i();else{const m=nA("iframefcb");return Rr()[m]=()=>{gapi.load?i():t(er(r,"network-request-failed"))},eA(`${tA()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function ZA(r){return Zu=Zu||JA(r),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new Cl(5e3,15e3),t2="__/auth/iframe",n2="emulator/auth/iframe",r2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i2(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?ip(e,n2):`https://${r.config.authDomain}/${t2}`,i={apiKey:e.apiKey,appName:r.name,v:Xo},o=s2.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ml(i).slice(1)}`}async function o2(r){const e=await ZA(r),t=Rr().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:i2(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r2,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=er(r,"network-request-failed"),m=Rr().setTimeout(()=>{l(h)},e2.get());function g(){Rr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l2=500,u2=600,c2="_blank",h2="http://localhost";class s_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d2(r,e,t,i=l2,o=u2){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...a2,width:i.toString(),height:o.toString(),top:l,left:h},_=Jt().toLowerCase();t&&(m=_w(_)?c2:t),gw(_)&&(e=e||h2,g.scrollbars="yes");const E=Object.entries(g).reduce((x,[j,G])=>`${x}${j}=${G},`,"");if(WS(_)&&m!=="_self")return f2(e||"",m),new s_(null);const I=window.open(e||"",m,E);Ie(I,r,"popup-blocked");try{I.focus()}catch{}return new s_(I)}function f2(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="__/auth/handler",m2="emulator/auth/handler",g2=encodeURIComponent("fac");async function i_(r,e,t,i,o,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Xo,eventId:o};if(e instanceof cp){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",n1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))h[E]=I}if(e instanceof Rl){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),_=g?`#${g2}=${encodeURIComponent(g)}`:"";return`${y2(r)}?${ml(m).slice(1)}${_}`}function y2({config:r}){return r.emulator?ip(r,m2):`https://${r.authDomain}/${p2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class _2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nw,this._completeRedirectFn=BA,this._overrideRedirectResult=jA}async _openPopup(e,t,i,o){var h;is((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await i_(e,t,i,rf(),o);return d2(e,l,hp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await i_(e,t,i,rf(),o);return EA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(is(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await o2(e),i=new qA(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nd,{type:Nd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Nd];l!==void 0&&t(!!l),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Iw()||yw()||lp()}}const v2=_2;var o_="@firebase/auth",a_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T2(r){zo(new Ui("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xw(r)},_=new JS(i,o,l,g);return sA(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),zo(new Ui("auth-internal",e=>{const t=Mc(e.getProvider("auth").getImmediate());return(i=>new w2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bs(o_,a_,E2(r)),Bs(o_,a_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=300,x2=I_("authIdTokenMaxAge")||I2;let l_=null;const S2=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>x2)return;const o=t==null?void 0:t.token;l_!==o&&(l_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function A2(r=k_()){const e=gf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=rA(r,{popupRedirectResolver:v2,persistence:[PA,_A,Nw]}),i=I_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=S2(l.toString());fA(t,h,()=>h(t.currentUser)),dA(t,m=>h(m))}}const o=E_("auth");return o&&iA(t,`http://${o}`),t}function C2(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}ZS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=er("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",C2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T2("Browser");const R2={apiKey:"AIzaSyBBfpg8D4bqcqOTTuO5ONIQRInRCPOZM5k",authDomain:"comments-67079.firebaseapp.com",projectId:"comments-67079",storageBucket:"comments-67079.firebasestorage.app",messagingSenderId:"36001866008",appId:"1:36001866008:web:448de13685ad843551be6d"},jw=R_(R2),ht=fS(jw),Lo=A2(jw),Uw=new Jr;Uw.setCustomParameters({prompt:"select_account"});let Xt=null;const k2=r=>{Xt=r},qe={USERS:"users",STUDENTS:"students",SETTINGS:"settings",TEMPLATES:"templates",CLASSES:"classes",SCHOOLS:"schools"},af=r=>{if(!Xt)throw new Error(" ID  setCurrentUserId()");return Oi(ht,qe.USERS,Xt,r)},Ir=(r,e)=>{if(!Xt)throw new Error(" ID  setCurrentUserId()");return fn(ht,qe.USERS,Xt,r,e)},Yr={subscribe:(r,e=null)=>{if(!Xt)return console.error(" ID "),r([]),()=>{};const t=af(qe.STUDENTS);return Wi(t,i=>{let o=[];i.forEach(l=>{const h={id:l.id,...l.data()};(!e||h.classId===e)&&o.push(h)}),o.sort((l,h)=>{var m,g,_,E;return(((g=(m=l.createdAt)==null?void 0:m.toMillis)==null?void 0:g.call(m))||0)-(((E=(_=h.createdAt)==null?void 0:_.toMillis)==null?void 0:E.call(_))||0)}),r(o)},i=>{console.error("Firestore :",i),r([])})},add:async r=>{try{const e=Ir(qe.STUDENTS,r.id.toString());await nr(e,{...r,createdAt:mt(),updatedAt:mt()})}catch(e){throw console.error(":",e),e}},addBatch:async r=>{try{const e=kd(ht);r.forEach(t=>{const i=Ir(qe.STUDENTS,t.id.toString());e.set(i,{...t,createdAt:mt(),updatedAt:mt()})}),await e.commit()}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=Ir(qe.STUDENTS,r.toString());await nr(t,{...e,updatedAt:mt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=Ir(qe.STUDENTS,r.toString());await Sl(e)}catch(e){throw console.error(":",e),e}},deleteBatch:async r=>{try{const e=kd(ht);r.forEach(t=>{const i=Ir(qe.STUDENTS,t.toString());e.delete(i)}),await e.commit()}catch(e){throw console.error(":",e),e}},deleteAll:async()=>{try{const r=af(qe.STUDENTS),e=await aw(r),t=kd(ht);e.forEach(i=>{t.delete(i.ref)}),await t.commit()}catch(r){throw console.error(":",r),r}}},P2={subscribe:r=>{if(!Xt)return console.error(" ID "),r({}),()=>{};const e=Ir(qe.SETTINGS,"user");return Wi(e,t=>{t.exists()?r(t.data()):r({})},t=>{console.error(":",t),r({})})},save:async r=>{try{const e=Ir(qe.SETTINGS,"user");await nr(e,{...r,updatedAt:mt()},{merge:!0})}catch(e){throw console.error(":",e),e}}},u_={subscribe:r=>{if(!Xt)return console.error(" ID "),r([]),()=>{};const e=af(qe.TEMPLATES);return Wi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,m,g,_;return(((m=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:m.call(h))||0)-(((_=(g=o.createdAt)==null?void 0:g.toMillis)==null?void 0:_.call(g))||0)}),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=Ir(qe.TEMPLATES,e);return await nr(t,{...r,createdAt:mt(),usageCount:0}),e}catch(e){throw console.error(":",e),e}},delete:async r=>{try{const e=Ir(qe.TEMPLATES,r.toString());await Sl(e)}catch(e){throw console.error(":",e),e}},incrementUsage:async r=>{try{const e=Ir(qe.TEMPLATES,r.toString()),t=await nf(e);t.exists()&&await nr(e,{usageCount:(t.data().usageCount||0)+1,updatedAt:mt()},{merge:!0})}catch(e){console.error(":",e)}}},zw={subscribe:r=>{const e=Oi(ht,qe.CLASSES);return Wi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,m,g,_;return(((m=(h=o.createdAt)==null?void 0:h.toMillis)==null?void 0:m.call(h))||0)-(((_=(g=l.createdAt)==null?void 0:g.toMillis)==null?void 0:_.call(g))||0)}),r(i)},t=>{console.error(":",t)})},add:async r=>{try{const e=Date.now().toString(),t=fn(ht,qe.CLASSES,e);return await nr(t,{...r,createdAt:mt(),updatedAt:mt()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=fn(ht,qe.CLASSES,r.toString());await nr(t,{...e,updatedAt:mt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=fn(ht,qe.CLASSES,r.toString());await Sl(e)}catch(e){throw console.error(":",e),e}}},N2={subscribe:r=>{const e=Oi(ht,qe.SCHOOLS);return Wi(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>(o.name||"").localeCompare(l.name||"","zh-TW")),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=fn(ht,qe.SCHOOLS,e);return await nr(t,{...r,createdAt:mt(),updatedAt:mt()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=fn(ht,qe.SCHOOLS,r.toString());await nr(t,{...e,updatedAt:mt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=fn(ht,qe.SCHOOLS,r.toString());await Sl(e)}catch(e){throw console.error(":",e),e}}},b2={subscribe:(r,e)=>{if(!Xt)return console.error(" ID "),e([]),()=>{};const t=Oi(ht,qe.USERS,Xt,qe.STUDENTS,r.toString(),"history");return Wi(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),o.sort((l,h)=>{var m,g,_,E;return(((g=(m=h.createdAt)==null?void 0:m.toMillis)==null?void 0:g.call(m))||0)-(((E=(_=l.createdAt)==null?void 0:_.toMillis)==null?void 0:E.call(_))||0)}),e(o)},i=>{console.error(":",i),e([])})},add:async(r,e,t=[])=>{if(!Xt)throw new Error(" ID ");try{const i=Oi(ht,qe.USERS,Xt,qe.STUDENTS,r.toString(),"history");await SS(i,{comment:e,styles:t,createdAt:mt()})}catch(i){throw console.error(":",i),i}},getAll:async r=>{if(!Xt)return console.error(" ID "),[];try{const e=Oi(ht,qe.USERS,Xt,qe.STUDENTS,r.toString(),"history"),t=await aw(e),i=[];return t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,m,g,_;return(((m=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:m.call(h))||0)-(((_=(g=o.createdAt)==null?void 0:g.toMillis)==null?void 0:_.call(g))||0)})}catch(e){return console.error(":",e),[]}},delete:async(r,e)=>{if(!Xt)throw new Error(" ID ");try{const t=fn(ht,qe.USERS,Xt,qe.STUDENTS,r.toString(),"history",e);await Sl(t)}catch(t){throw console.error(":",t),t}}},D2="cagooo@gmail.com",No={USERS:"users"},Ni={ADMIN:"admin",TEACHER:"teacher",PENDING:"pending"},lf={getCurrentUser:()=>Lo.currentUser,onAuthStateChange:r=>pA(Lo,async e=>{if(e){const t=await nl.getOrCreate(e);r({...e,...t})}else r(null)}),signInWithGoogle:async()=>{try{const e=(await OA(Lo,Uw)).user;return await nl.getOrCreate(e),{success:!0,user:e}}catch(r){return console.error("Google :",r),{success:!1,error:r.message}}},signOut:async()=>{try{return await mA(Lo),{success:!0}}catch(r){return console.error(":",r),{success:!1,error:r.message}}}},nl={getOrCreate:async r=>{const e=fn(ht,No.USERS,r.uid),t=await nf(e);if(t.exists())return await nr(e,{lastLoginAt:mt()},{merge:!0}),{id:t.id,...t.data()};const i=r.email===D2,o={uid:r.uid,email:r.email,displayName:r.displayName||"",photoURL:r.photoURL||null,role:i?Ni.ADMIN:Ni.PENDING,assignedClasses:[],createdAt:mt(),lastLoginAt:mt(),approvedAt:i?mt():null,approvedBy:i?"system":null};return await nr(e,o),{id:r.uid,...o}},get:async r=>{const e=fn(ht,No.USERS,r),t=await nf(e);return t.exists()?{id:t.id,...t.data()}:null},subscribeAll:r=>{const e=Oi(ht,No.USERS),t=ES(e,TS("createdAt","desc"));return Wi(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),r(o)},i=>{console.error(":",i)})},approve:async(r,e=[],t=null)=>{var i;try{const o=fn(ht,No.USERS,r),l={role:Ni.TEACHER,assignedClasses:e,approvedAt:mt(),approvedBy:((i=Lo.currentUser)==null?void 0:i.uid)||"unknown"};return t&&(l.schoolId=t),await Cd(o,l),{success:!0}}catch(o){return console.error(":",o),{success:!1,error:o.message}}},updateAssignedClasses:async(r,e,t=null)=>{try{const i=fn(ht,No.USERS,r),o={assignedClasses:e,updatedAt:mt()};return t!==void 0&&(o.schoolId=t),await Cd(i,o),{success:!0}}catch(i){return console.error(":",i),{success:!1,error:i.message}}},reject:async r=>{var e;try{const t=fn(ht,No.USERS,r);return await Cd(t,{role:Ni.PENDING,assignedClasses:[],rejectedAt:mt(),rejectedBy:((e=Lo.currentUser)==null?void 0:e.uid)||"unknown"}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},isAdmin:r=>(r==null?void 0:r.role)===Ni.ADMIN,isApproved:r=>(r==null?void 0:r.role)===Ni.ADMIN||(r==null?void 0:r.role)===Ni.TEACHER},V2=r=>{const[e,t]=ne.useState([]),[i,o]=ne.useState(new Set),[l,h]=ne.useState(!0),[m,g]=ne.useState(!1);ne.useEffect(()=>{if(!r){t([]),h(!1);return}k2(r),h(!0);const J=Yr.subscribe(ce=>{const ie=ce.map(C=>({...C,id:parseInt(C.id)||C.id,selectedTags:C.selectedTags||[],manualTraits:C.manualTraits||"",comment:C.comment||""}));t(ie),h(!1)});return()=>J()},[r]);const _=ne.useCallback(async J=>{const ce=J.split(`
`).map(C=>C.trim()).filter(C=>C!=="");if(ce.length===0)return[];const ie=ce.map((C,S)=>({id:Date.now()+S,name:C,selectedTags:[],manualTraits:"",comment:""}));g(!0);try{await Yr.addBatch(ie)}catch(C){console.error(":",C)}return g(!1),ie},[]),E=ne.useCallback(async(J,ce,ie)=>{t(C=>C.map(S=>S.id===J?{...S,[ce]:ie}:S));try{const C=e.find(S=>S.id===J);C&&await Yr.update(J,{...C,[ce]:ie})}catch(C){console.error(":",C)}},[e]),I=ne.useCallback(async J=>{t(ce=>ce.filter(ie=>ie.id!==J)),o(ce=>{const ie=new Set(ce);return ie.delete(J),ie});try{await Yr.delete(J)}catch(ce){console.error(":",ce)}},[]),x=ne.useCallback(async()=>{const J=Array.from(i);t(ce=>ce.filter(ie=>!i.has(ie.id))),o(new Set);try{await Yr.deleteBatch(J)}catch(ce){console.error(":",ce)}},[i]),j=ne.useCallback(async()=>{t([]),o(new Set);try{await Yr.deleteAll()}catch(J){console.error(":",J)}},[]),G=ne.useCallback(J=>{o(ce=>{const ie=new Set(ce);return ie.has(J)?ie.delete(J):ie.add(J),ie})},[]),$=ne.useCallback(()=>{if(i.size===e.length&&e.length>0)o(new Set);else{const J=new Set(e.map(ce=>ce.id));o(J)}},[i.size,e]),B=ne.useCallback(async(J,ce)=>{t(ie=>ie.map(C=>J.includes(C.id)?C.selectedTags.includes(ce)?C:{...C,selectedTags:[...C.selectedTags,ce]}:C));try{for(const ie of J){const C=e.find(S=>S.id===ie);C&&!C.selectedTags.includes(ce)&&await Yr.update(ie,{selectedTags:[...C.selectedTags,ce]})}}catch(ie){console.error(":",ie)}},[e]),K=ne.useCallback(async(J,ce)=>{t(ie=>ie.map(C=>C.id===J?{...C,selectedTags:C.selectedTags.filter(S=>S!==ce)}:C));try{const ie=e.find(C=>C.id===J);ie&&await Yr.update(J,{selectedTags:ie.selectedTags.filter(C=>C!==ce)})}catch(ie){console.error(":",ie)}},[e]),te=ne.useCallback(J=>{t(ce=>typeof J=="function"?J(ce):J)},[]),oe=ne.useCallback(async(J,ce)=>{try{await Yr.update(J,{comment:ce})}catch(ie){console.error(":",ie)}},[]);return{students:e,setStudents:te,selectedIds:i,isLoading:l,isSyncing:m,generateStudents:_,updateStudent:E,deleteStudent:I,deleteSelected:x,resetStudents:j,toggleSelection:G,toggleAllSelection:$,addTagToStudents:B,removeTag:K,syncComment:oe}},O2=({isSidebarOpen:r,setIsSidebarOpen:e,onOpenSettings:t,onOpenTemplates:i,onOpenClasses:o,onOpenAdmin:l,onOpenImportExport:h,onOpenPrint:m,onLogout:g,hasApiKey:_,templateCount:E=0,currentClassName:I="",currentUser:x,isAdmin:j})=>v.jsxs("header",{className:"bg-[#FFF9E6] border-b-4 border-[#2D3436] h-16 sm:h-20 flex items-center justify-between px-3 sm:px-6 shrink-0 z-20 sticky top-0 shadow-[0_4px_0_#2D3436]",children:[v.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[v.jsx("div",{className:"bg-[#FECA57] text-[#2D3436] p-2 sm:p-3 border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] transform rotate-[-2deg] rounded-lg",children:v.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),v.jsxs("div",{children:[v.jsxs("h1",{className:"text-lg sm:text-2xl font-black text-[#2D3436] tracking-wide",children:[v.jsxs("span",{className:"hidden sm:inline relative",children:[v.jsx("span",{className:"relative z-10",children:""}),v.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]}),v.jsx("span",{className:"hidden sm:inline ml-1",children:""}),v.jsx("span",{className:"sm:hidden",children:""})]}),v.jsxs("button",{onClick:o,className:"text-xs font-bold text-[#636E72] hover:text-[#A29BFE] transition-colors flex items-center gap-1 mt-0.5",children:[v.jsx(Dg,{size:12}),I,v.jsx("span",{className:"text-[10px]",children:""})]})]})]}),v.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[j&&v.jsxs("button",{onClick:l,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#FF6B9D] text-white flex items-center gap-1 text-sm",title:"",children:[v.jsx(I0,{size:18}),v.jsx("span",{className:"hidden sm:inline",children:""})]}),v.jsxs("button",{onClick:i,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#A29BFE] text-white flex items-center gap-1 text-sm relative",title:"",children:[v.jsx(hf,{size:18}),v.jsx("span",{className:"hidden sm:inline",children:""}),E>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[#2D3436] text-white text-xs font-bold rounded-full flex items-center justify-center",children:E>9?"9+":E})]}),v.jsxs("button",{onClick:h,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#54A0FF] text-white flex items-center gap-1 text-sm",title:"Excel /",children:[v.jsx(p0,{size:18}),v.jsx("span",{className:"hidden sm:inline",children:"Excel"})]}),v.jsxs("button",{onClick:m,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#FF6B9D] text-white flex items-center gap-1 text-sm",title:" PDF ",children:[v.jsx(w0,{size:18}),v.jsx("span",{className:"hidden sm:inline",children:""})]}),v.jsxs("button",{onClick:t,className:`btn-pop p-2 sm:px-3 sm:py-2 flex items-center gap-1 text-sm
            ${_?"bg-[#1DD1A1] text-white":"bg-[#FF6B6B] text-white animate-pulse"}`,title:_?"API Key ":" API Key",children:[v.jsx(T0,{size:18}),v.jsx("span",{className:"hidden sm:inline",children:_?"":""})]}),v.jsxs("button",{onClick:()=>e(!r),className:`btn-pop px-3 sm:px-4 py-2 flex items-center gap-1 sm:gap-2 text-sm sm:text-base
            ${r?"bg-[#FF6B9D] text-white":"bg-[#54A0FF] text-white"}`,children:[r?v.jsx(vc,{size:18}):v.jsx(y0,{size:18}),v.jsx("span",{className:"hidden sm:inline",children:r?"":""}),v.jsx("span",{className:"sm:hidden",children:""})]}),v.jsxs("div",{className:"relative group",children:[x!=null&&x.photoURL?v.jsx("img",{src:x.photoURL,alt:x.displayName,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 border-[#2D3436] cursor-pointer hover:ring-2 hover:ring-[#FECA57] transition-all"}):v.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center cursor-pointer",children:v.jsx("span",{className:"text-lg",children:""})}),v.jsxs("div",{className:"absolute right-0 top-12 bg-white border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] p-3 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[v.jsx("div",{className:"text-sm font-bold text-[#2D3436] truncate",children:x==null?void 0:x.displayName}),v.jsx("div",{className:"text-xs text-[#636E72] truncate",children:x==null?void 0:x.email}),(x==null?void 0:x.schoolName)&&v.jsx("div",{className:"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]",children:v.jsxs("div",{className:"text-xs text-[#636E72] flex items-center gap-1",children:[" ",v.jsx("span",{className:"font-bold text-[#A29BFE]",children:x.schoolName})]})}),(x==null?void 0:x.assignedClassNames)&&x.assignedClassNames.length>0&&v.jsx("div",{className:`${x!=null&&x.schoolName?"mt-1":"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]"}`,children:v.jsxs("div",{className:"text-xs text-[#636E72] flex items-start gap-1",children:[v.jsx(Dg,{size:12,className:"mt-0.5 shrink-0"}),v.jsx("span",{className:"font-bold text-[#54A0FF]",children:x.assignedClassNames.join("")})]})}),v.jsxs("button",{onClick:g,className:"w-full btn-pop px-3 py-2 bg-[#636E72] text-white text-xs font-bold flex items-center justify-center gap-2 mt-3",children:[v.jsx(g0,{size:14}),""]})]})]})]})]}),L2=()=>v.jsx("footer",{className:"bg-[#FECA57] text-[#2D3436] text-xs sm:text-sm py-3 sm:py-4 text-center border-t-4 border-[#2D3436] shrink-0 font-bold",children:v.jsxs("p",{className:"flex items-center justify-center gap-2",children:[v.jsx("span",{children:""}),v.jsx("span",{children:" "}),v.jsx("span",{children:""})]})}),F2=({dialog:r,closeDialog:e})=>r.isOpen?v.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:v.jsxs("div",{className:"card-pop w-full max-w-sm overflow-hidden animate-in",children:[v.jsx("div",{className:"p-4 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436]",children:v.jsxs("h3",{className:"font-black text-lg sm:text-xl text-white flex items-center gap-2",children:[r.type==="confirm"?v.jsx(g_,{size:24}):v.jsx(p_,{size:24}),r.title]})}),v.jsx("div",{className:"p-4 sm:p-6 bg-[#FFFDF5] text-[#2D3436] font-bold text-base sm:text-lg",children:r.message}),v.jsx("div",{className:"p-3 sm:p-4 bg-[#FFF9E6] flex justify-end gap-2 sm:gap-3 border-t-2 border-dashed border-[#E8DCC8]",children:r.type==="confirm"?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-white text-[#2D3436] text-sm sm:text-base",children:" "}),v.jsx("button",{onClick:r.onConfirm,className:"btn-pop px-4 sm:px-6 py-2 bg-[#FF6B6B] text-white text-sm sm:text-base",children:" "})]}):v.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-[#1DD1A1] text-white text-sm sm:text-base",children:" "})})]})}):null,M2=({progress:r})=>{const e=r.total>0?r.current/r.total*100:0;return v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#2D3436]/70 backdrop-blur-md p-4",children:v.jsxs("div",{className:"card-pop w-[95%] sm:w-[90%] max-w-2xl flex flex-col items-center justify-center p-6 sm:p-10 text-center animate-in bg-[#FFF9E6]",children:[v.jsx("div",{className:"mb-4 sm:mb-6 text-6xl sm:text-8xl animate-bounce-soft",children:""}),v.jsxs("h2",{className:"text-2xl sm:text-4xl md:text-5xl font-black text-[#2D3436] mb-4 sm:mb-6",children:[v.jsxs("span",{className:"relative inline-block",children:["",v.jsx("span",{className:"absolute bottom-1 left-0 right-0 h-3 bg-[#FECA57] -z-10 transform rotate-1"})]}),v.jsx("span",{className:"animate-pulse",children:"..."})]}),v.jsx("div",{className:"w-full max-w-md bg-white border-3 border-[#2D3436] h-8 sm:h-10 mb-3 sm:mb-4 overflow-hidden rounded-full shadow-[4px_4px_0_#2D3436]",children:v.jsx("div",{className:"h-full transition-all duration-300 ease-out bg-gradient-to-r from-[#FF6B9D] via-[#FECA57] to-[#1DD1A1]",style:{width:`${e}%`}})}),v.jsxs("p",{className:"text-lg sm:text-2xl text-[#2D3436] font-bold mb-4 sm:mb-6",children:[" ",r.current," / ",r.total," "]}),v.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-[#FF6B9D] font-black",children:" "})]})})},j2=({rawInput:r,setRawInput:e,numberCount:t,setNumberCount:i,onGenerateStudents:o,onGenerateNumbers:l,onResetList:h,isGenerating:m})=>v.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 p-3 sm:p-4 bg-[#FF9F43] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[-0.5deg]",children:[v.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl mb-1",children:[v.jsx("span",{className:"text-2xl",children:""}),"1. "]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[v.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[v.jsx("textarea",{className:"flex-1 min-h-[100px] sm:min-h-[120px] p-3 sm:p-4 border-3 border-[#2D3436] rounded-lg outline-none text-sm sm:text-base resize-none font-medium placeholder:text-[#2D3436]/40 text-[#2D3436] leading-relaxed bg-white shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1)]",placeholder:`...


`,value:r,onChange:g=>e(g.target.value),disabled:m}),v.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 bg-white p-2 sm:p-3 border-2 border-[#2D3436] rounded-lg",children:[v.jsxs("span",{className:"text-[#2D3436] font-bold text-xs sm:text-sm flex items-center gap-1",children:[v.jsx(m0,{size:14})," "]}),v.jsx("input",{type:"number",min:"1",max:"100",value:t,onChange:g=>i(Number(g.target.value)),className:"w-14 sm:w-16 text-center border-2 border-[#2D3436] text-[#2D3436] font-bold text-xs sm:text-sm py-1.5 outline-none rounded"}),v.jsx("span",{className:"text-[#2D3436] text-xs sm:text-sm font-bold",children:""}),v.jsx("button",{onClick:l,className:"btn-pop ml-auto bg-[#FECA57] text-[#2D3436] px-3 py-1 text-xs sm:text-sm",children:" "})]})]}),v.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 sm:gap-3 sm:w-24",children:[v.jsxs("button",{onClick:o,disabled:m,className:"flex-1 btn-pop bg-[#1DD1A1] text-white font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[v.jsx(v0,{size:20}),v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:h,disabled:m,className:"flex-1 btn-pop bg-white text-[#FF6B6B] font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[v.jsx(m_,{size:18}),v.jsx("span",{children:""})]})]})]})]}),U2=({students:r,selectedIds:e,isGenerating:t,extraSettings:i,setExtraSettings:o,onGenerateSelected:l,onGenerateAll:h,onDownload:m,onDeleteSelected:g,onResetList:_})=>v.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 sm:gap-4 p-3 sm:p-4 bg-[#54A0FF] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[0.5deg]",children:[v.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl",children:[v.jsx("span",{className:"text-2xl",children:""}),"2. AI "]}),v.jsxs("div",{className:"bg-white/90 border-2 border-[#2D3436] rounded-lg p-2 sm:p-3 flex flex-col gap-2 sm:gap-3",children:[v.jsx("div",{className:"flex items-center justify-between text-xs sm:text-sm font-bold text-[#2D3436] border-b-2 border-dashed border-[#E8DCC8] pb-2",children:v.jsx("span",{className:"flex items-center gap-1",children:" "})}),v.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[v.jsx("div",{className:"flex bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg overflow-hidden",children:[{val:"normal",label:"",emoji:""},{val:"casual",label:"",emoji:""},{val:"formal",label:"",emoji:""}].map(E=>v.jsxs("button",{onClick:()=>o(I=>({...I,tone:E.val})),className:`px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-bold transition-colors 
                  ${i.tone===E.val?"bg-[#FF6B9D] text-white":"text-[#2D3436] hover:bg-[#FECA57]"}`,children:[v.jsx("span",{className:"hidden sm:inline",children:E.emoji})," ",E.label]},E.val))}),v.jsxs("div",{className:"flex items-center gap-2 bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg px-2 sm:px-3 py-1.5 ml-auto",children:[v.jsx("span",{className:"text-xs sm:text-sm font-bold text-[#2D3436]",children:" "}),v.jsx("input",{type:"number",min:"20",max:"500",step:"10",value:i.wordCount,onChange:E=>o(I=>({...I,wordCount:Number(E.target.value)})),className:"w-12 text-xs sm:text-sm font-bold text-[#2D3436] text-center outline-none bg-white border-2 border-[#2D3436] rounded"})]})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[v.jsxs("button",{onClick:l,disabled:e.size===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2 
            ${e.size>0&&!t?"bg-white text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[v.jsx(x0,{size:18}),t?"...":` (${e.size})`]}),v.jsxs("button",{onClick:h,disabled:r.length===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2
            ${r.length>0&&!t?"bg-[#FECA57] text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[v.jsx("span",{className:"text-xl",children:""}),t?"AI ...":""]})]}),v.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs sm:text-sm pt-2 border-t-2 border-dashed border-white/50",children:[v.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[v.jsxs("button",{onClick:()=>m("txt"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[v.jsx(bd,{size:14})," TXT"]}),v.jsxs("button",{onClick:()=>m("csv"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[v.jsx(bd,{size:14})," CSV"]})]}),v.jsxs("div",{className:"flex gap-2",children:[e.size>0&&v.jsxs("button",{onClick:g,disabled:t,className:"btn-pop bg-[#FF6B6B] text-white px-2 sm:px-3 py-1 flex items-center gap-1 text-xs sm:text-sm disabled:opacity-50",children:[v.jsx(ff,{size:12}),"  (",e.size,")"]}),v.jsx("button",{onClick:_,disabled:t||r.length===0,className:"text-white/80 hover:text-white font-bold transition-colors disabled:opacity-50",children:" "})]})]})]}),z2=({globalStyles:r,onOpenStyleModal:e,isGenerating:t})=>{const i={qualitative:"#FF6B9D",emotional:"#FF9F43",friendly:"#FECA57",humorous:"#1DD1A1",internal:"#54A0FF",philosophical:"#A29BFE",practical:"#FF6B6B",resonance:"#FF6B9D",blessing:"#FF9F43",scenario:"#FECA57",milestone:"#1DD1A1",journey:"#54A0FF"};return v.jsxs("div",{className:"mb-4 sm:mb-6 bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 shadow-[4px_4px_0_#2D3436]",children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-[#2D3436] text-sm sm:text-base font-black",children:[v.jsx("span",{className:"text-xl",children:""}),v.jsx("span",{children:""}),v.jsx("div",{className:"flex gap-2 flex-wrap",children:r.length>0?r.map(o=>{var l;return v.jsx("span",{className:"px-3 py-1 border-2 border-[#2D3436] rounded-full text-xs sm:text-sm font-bold text-white shadow-[2px_2px_0_#2D3436]",style:{backgroundColor:i[o]||"#A29BFE"},children:(l=h_.find(h=>h.id===o))==null?void 0:l.name},o)}):v.jsx("span",{className:"text-[#636E72] font-medium text-xs sm:text-sm bg-[#E8DCC8] px-3 py-1 rounded-full",children:" (: )"})})]}),v.jsxs("button",{onClick:e,disabled:t,className:"btn-pop w-full sm:w-auto bg-[#A29BFE] text-white px-4 sm:px-6 py-2 text-xs sm:text-sm font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[v.jsx(_0,{size:14})," "]})]})},B2=({student:r,isSelected:e,isFocused:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:h,onOpenSidebar:m,onRemoveTag:g,onUpdateStudent:_,onDeleteStudent:E,onGenerateSingle:I,onSaveTemplate:x,onOpenHistory:j})=>{const G=["-1deg","0.5deg","-0.5deg","1deg","0deg"],$=G[r.id%G.length],B=o===r.id,K=te=>te<50?"text-[#FF6B6B]":te>120?"text-[#FF9F43]":"text-[#1DD1A1]";return v.jsxs("div",{className:`bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg overflow-hidden shadow-[4px_4px_0_#2D3436] transition-all
        ${e?"ring-4 ring-[#FF6B9D]":""}
        ${t?"ring-4 ring-[#54A0FF]":""}
        ${B?"ring-4 ring-[#FECA57] animate-pulse":""}`,style:{transform:`rotate(${$})`},children:[v.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FECA57] border-b-2 border-[#2D3436]",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:()=>l(r.id),disabled:i||B,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center
              ${e?"bg-[#FF6B9D] text-white":"bg-white"}`,children:e&&v.jsx("span",{className:"text-sm font-bold",children:""})}),v.jsxs("span",{className:"font-black text-[#2D3436] text-base",children:[" ",r.name]})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsxs("button",{onClick:()=>I(r.id),disabled:i||B,className:"btn-pop px-2 py-1 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50",children:[B?v.jsx(df,{size:14,className:"animate-spin"}):v.jsx(v.Fragment,{children:""}),v.jsx("span",{className:"hidden sm:inline",children:B?"":""})]}),v.jsx("button",{onClick:()=>E(r.id),disabled:i||B,className:"text-[#2D3436]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30 p-1",children:v.jsx(ff,{size:18})})]})]}),v.jsxs("div",{className:"p-3 border-b-2 border-dashed border-[#E8DCC8]",children:[v.jsx("div",{className:"text-xs font-bold text-[#636E72] mb-2",children:" "}),v.jsx("div",{onClick:()=>{h(r.id),m()},className:`p-2 border-2 border-dashed bg-white min-h-[50px] flex flex-col gap-2 cursor-pointer transition-colors rounded-lg
            ${t?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8]"}`,children:r.selectedTags.length>0?v.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.selectedTags.map((te,oe)=>v.jsxs("span",{className:"tag-handwrite text-xs",children:[te,v.jsx("button",{onClick:J=>{J.stopPropagation(),g(r.id,te)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},oe))}):v.jsx("span",{className:"text-[#636E72]/50 text-xs",children:" ..."})}),v.jsx("input",{type:"text",value:r.manualTraits,onChange:te=>_(r.id,"manualTraits",te.target.value),placeholder:" ...",disabled:i||B,className:"w-full mt-2 p-2 text-sm font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40"})]}),v.jsxs("div",{className:"p-3 bg-[#FFF9E6]",children:[v.jsxs("div",{className:"text-xs font-bold text-[#636E72] mb-2 flex items-center justify-between",children:[v.jsx("span",{className:"flex items-center gap-1",children:" AI "}),v.jsxs("div",{className:"flex items-center gap-2",children:[j&&v.jsxs("button",{onClick:()=>j(r),className:"flex items-center gap-1 text-[#54A0FF] hover:text-[#2D3436] transition-colors",title:"",children:[v.jsx(cf,{size:14}),v.jsx("span",{children:""})]}),r.comment&&!r.comment.includes("")&&!r.comment.includes("")&&v.jsxs("button",{onClick:()=>x(r),className:"flex items-center gap-1 text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors",title:"",children:[v.jsx(hf,{size:14}),v.jsx("span",{children:""})]})]})]}),v.jsx("textarea",{value:r.comment,onChange:te=>_(r.id,"comment",te.target.value),placeholder:" AI ...",disabled:B,className:`w-full text-sm p-3 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[100px] leading-relaxed font-medium text-[#2D3436] rounded-lg
            ${B?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),r.comment&&v.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${K(r.comment.length)}`,children:[r.comment.length," "]})]})]})},$2=({students:r,selectedIds:e,focusedStudentId:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onToggleAllSelection:h,onFocusStudent:m,onOpenSidebar:g,onRemoveTag:_,onUpdateStudent:E,onDeleteStudent:I,onGenerateSingle:x,onSaveTemplate:j,onOpenHistory:G})=>{const $=typeof window<"u"&&window.innerWidth<768,B=K=>K<50?"text-[#FF6B6B]":K>120?"text-[#FF9F43]":"text-[#1DD1A1]";return $?v.jsx("div",{className:"space-y-4",children:r.length===0?v.jsxs("div",{className:"p-10 text-center font-bold text-lg bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436]",children:[v.jsx("span",{className:"text-4xl block mb-3",children:""}),v.jsx("span",{className:"text-[#636E72]",children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"flex items-center justify-between bg-[#A29BFE] text-white border-3 border-[#2D3436] p-3 rounded-lg shadow-[3px_3px_0_#2D3436]",children:v.jsxs("button",{onClick:h,className:"flex items-center gap-2 font-bold text-sm",disabled:i,children:[v.jsx("span",{className:`w-5 h-5 border-2 border-white rounded flex items-center justify-center ${e.size===r.length&&r.length>0?"bg-white text-[#A29BFE]":""}`,children:e.size===r.length&&r.length>0&&v.jsx("span",{className:"text-xs",children:""})})," (",e.size,"/",r.length,")"]})}),r.map(K=>v.jsx(B2,{student:K,isSelected:e.has(K.id),isFocused:t===K.id,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:m,onOpenSidebar:g,onRemoveTag:_,onUpdateStudent:E,onDeleteStudent:I,onGenerateSingle:x,onSaveTemplate:j,onOpenHistory:G},K.id))]})}):v.jsx("div",{className:"card-pop overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left border-collapse min-w-[1000px]",children:[v.jsx("thead",{className:"bg-[#FF6B9D] text-white",children:v.jsxs("tr",{className:"text-base font-black",children:[v.jsx("th",{className:"p-4 lg:p-5 w-12 text-center border-r-2 border-[#2D3436]/20",children:v.jsx("button",{onClick:h,className:"w-6 h-6 border-2 border-white rounded flex items-center justify-center mx-auto bg-white/20 hover:bg-white/40 transition",disabled:i,children:e.size===r.length&&r.length>0&&v.jsx("span",{className:"text-sm",children:""})})}),v.jsx("th",{className:"p-4 lg:p-5 w-32 lg:w-40 border-r-2 border-[#2D3436]/20",children:" "}),v.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20 w-1/4",children:" "}),v.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20",children:" AI "}),v.jsx("th",{className:"p-4 lg:p-5 w-20 text-center",children:""})]})}),v.jsxs("tbody",{className:"bg-[#FFFDF5]",children:[r.length===0&&v.jsx("tr",{children:v.jsxs("td",{colSpan:"5",className:"p-16 lg:p-20 text-center font-bold text-xl text-[#636E72]",children:[v.jsx("span",{className:"text-5xl block mb-4",children:""}),""]})}),r.map(K=>{const te=o===K.id;return v.jsxs("tr",{className:`border-t-2 border-dashed border-[#E8DCC8] hover:bg-[#FECA57]/20 transition-colors ${e.has(K.id)?"bg-[#FF6B9D]/10":""} ${te?"bg-[#FECA57]/30":""}`,children:[v.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:v.jsx("button",{onClick:()=>l(K.id),disabled:i||te,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center mx-auto transition ${e.has(K.id)?"bg-[#FF6B9D] text-white":"bg-white hover:bg-[#FECA57]"}`,children:e.has(K.id)&&v.jsx("span",{className:"text-sm font-bold",children:""})})}),v.jsxs("td",{className:"p-4 lg:p-5 align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:[v.jsx("div",{className:"font-black text-[#2D3436] text-base lg:text-lg mb-2",children:K.name}),v.jsx("button",{onClick:()=>x(K.id),disabled:i||te,className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50 w-full justify-center",children:te?v.jsxs(v.Fragment,{children:[v.jsx(df,{size:14,className:"animate-spin"})," ..."]}):v.jsx(v.Fragment,{children:" "})})]}),v.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[v.jsx("div",{onClick:()=>{m(K.id),g()},className:`p-3 border-2 border-dashed bg-white min-h-[80px] lg:min-h-[100px] flex flex-col gap-3 cursor-pointer transition-colors rounded-lg ${t===K.id?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8] hover:border-[#FF9F43]"}`,children:K.selectedTags.length>0?v.jsx("div",{className:"flex flex-wrap gap-2",children:K.selectedTags.map((oe,J)=>v.jsxs("span",{className:"tag-handwrite text-sm",children:[oe,v.jsx("button",{onClick:ce=>{ce.stopPropagation(),_(K.id,oe)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},J))}):v.jsx("span",{className:"text-[#636E72]/50 text-sm",children:" ..."})}),v.jsx("input",{type:"text",value:K.manualTraits,onChange:oe=>E(K.id,"manualTraits",oe.target.value),placeholder:" ...",disabled:i||te,className:"w-full mt-3 p-3 text-sm lg:text-base font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40 transition-all"})]}),v.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-xs font-bold text-[#636E72]",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[G&&v.jsxs("button",{onClick:()=>G(K),className:"flex items-center gap-1 text-xs text-[#54A0FF] hover:text-[#2D3436] transition-colors font-bold",title:"",children:[v.jsx(cf,{size:12})," "]}),K.comment&&!K.comment.includes("")&&!K.comment.includes("")&&v.jsxs("button",{onClick:()=>j(K),className:"flex items-center gap-1 text-xs text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors font-bold",title:"",children:[v.jsx(hf,{size:12})," "]})]})]}),v.jsx("textarea",{value:K.comment,onChange:oe=>E(K.id,"comment",oe.target.value),placeholder:" AI ...",disabled:te,className:`w-full text-sm lg:text-base p-3 lg:p-4 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[180px] lg:min-h-[200px] leading-relaxed font-medium text-[#2D3436] rounded-lg transition-all ${te?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),K.comment&&v.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${B(K.comment.length)}`,children:[K.comment.length," "]})]}),v.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8",children:v.jsx("button",{onClick:()=>I(K.id),disabled:i||te,className:"text-[#636E72]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30",children:v.jsx(ff,{size:18})})})]},K.id)})]})]})})},q2=({isOpen:r,onClose:e,selectedIds:t,expandedCategories:i,onToggleCategory:o,onIdiomClick:l})=>{const[h,m]=ne.useState(""),g={" ()":"#1DD1A1"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#FECA57"," ()":"#FF9F43"," ()":"#A29BFE"," ()":"#FF6B9D"," ()":"#1DD1A1"," ()":"#FECA57"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#A29BFE"," ()":"#FF9F43",:"#FF6B9D",:"#636E72"},_=$=>{try{return JSON.parse(localStorage.getItem("idiom_usage")||"{}")[$]||0}catch{return 0}},E=$=>{try{const B=JSON.parse(localStorage.getItem("idiom_usage")||"{}");B[$]=(B[$]||0)+1,localStorage.setItem("idiom_usage",JSON.stringify(B))}catch(B){console.error(":",B)}},I=$=>{E($),l($)},x=ne.useMemo(()=>{if(!h.trim())return gd;const $=h.trim().toLowerCase(),B={};return Object.entries(gd).forEach(([K,te])=>{const oe=te.filter(J=>J.toLowerCase().includes($));oe.length>0&&(B[K]=oe)}),B},[h]),j=ne.useMemo(()=>Object.values(gd).flat().map(K=>({idiom:K,count:_(K)})).filter(K=>K.count>0).sort((K,te)=>te.count-K.count).slice(0,12).map(K=>K.idiom),[r]),G=Object.values(x).reduce(($,B)=>$+B.length,0);return v.jsxs(v.Fragment,{children:[r&&v.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 backdrop-blur-[2px] transition-opacity",onClick:e}),v.jsxs("div",{className:`fixed top-0 right-0 bottom-0 bg-[#FFF9E6] border-l-4 border-[#2D3436] shadow-[-8px_0_0_#2D3436] transform transition-transform duration-300 ease-in-out flex flex-col z-50
          ${r?"translate-x-0":"translate-x-full"}
          w-full sm:w-[80%] md:w-[50%] lg:w-[35%] xl:w-[30%] max-w-[400px]`,children:[v.jsxs("div",{className:"p-3 sm:p-5 bg-[#1DD1A1] border-b-3 border-[#2D3436] flex items-center justify-between shrink-0",children:[v.jsxs("h2",{className:"font-black text-white flex items-center gap-2 sm:gap-3 text-base sm:text-xl",children:[v.jsx("span",{className:"text-2xl",children:""})," "]}),v.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:v.jsx(vc,{size:20})})]}),v.jsxs("div",{className:"p-3 sm:p-4 bg-white border-b-2 border-dashed border-[#E8DCC8]",children:[v.jsxs("div",{className:"relative",children:[v.jsx(E0,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#636E72]"}),v.jsx("input",{type:"text",value:h,onChange:$=>m($.target.value),placeholder:" ...",className:"w-full pl-10 pr-4 py-2.5 border-2 border-[#2D3436] rounded-lg text-sm font-medium outline-none focus:border-[#1DD1A1] bg-[#FFFDF5]"}),h&&v.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#636E72] hover:text-[#FF6B6B]",children:""})]}),h&&v.jsxs("div",{className:"mt-2 text-xs text-[#636E72] font-bold",children:[" ",G," "]})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 mobile-scroll-hide",children:[v.jsxs("div",{className:"text-sm font-bold text-[#2D3436] bg-[#FECA57] px-3 py-2 border-2 border-[#2D3436] rounded-lg inline-flex items-center gap-2 shadow-[2px_2px_0_#2D3436]",children:[v.jsx("span",{children:""})," "]}),t.size>0&&v.jsxs("div",{className:"bg-[#54A0FF] text-white p-3 sm:p-4 border-2 border-[#2D3436] text-xs sm:text-sm font-bold rounded-lg shadow-[3px_3px_0_#2D3436]",children:[v.jsx("span",{className:"block mb-1 text-white/80",children:" "})," ",v.jsx("strong",{children:t.size})," "]}),j.length>0&&!h&&v.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[v.jsxs("div",{className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white bg-[#FF6B9D]",children:[v.jsx("span",{children:" "}),v.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:j.length})]}),v.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:j.map(($,B)=>v.jsx("button",{onClick:()=>I($),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-[#FF6B9D] border-2 border-[#2D3436] text-white font-bold rounded-lg hover:bg-[#FF5291] transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5",children:$},`popular-${$}-${B}`))})]}),Object.entries(x).map(([$,B])=>{const K=g[$]||"#A29BFE";return v.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[v.jsxs("button",{onClick:()=>o($),className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white transition-colors",style:{backgroundColor:K},children:[v.jsx("span",{children:$}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:B.length}),v.jsx("span",{className:"bg-white/20 rounded-full w-6 h-6 flex items-center justify-center",children:i[$]?"":""})]})]}),(i[$]||h)&&v.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:B.map((te,oe)=>v.jsx("button",{onClick:()=>I(te),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-white border-2 border-[#2D3436] text-[#2D3436] font-bold rounded-lg hover:text-white transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5 hover:shadow-[3px_3px_0_#2D3436] active:translate-y-0 active:shadow-[1px_1px_0_#2D3436]",style:{"--hover-bg":K},onMouseEnter:J=>J.target.style.backgroundColor=K,onMouseLeave:J=>J.target.style.backgroundColor="white",children:h&&te.includes(h)?v.jsx("span",{dangerouslySetInnerHTML:{__html:te.replace(new RegExp(`(${h})`,"gi"),'<mark class="bg-[#FECA57] px-0.5 rounded">$1</mark>')}}):te},`${te}-${oe}`))})]},$)}),h&&Object.keys(x).length===0&&v.jsxs("div",{className:"text-center py-10",children:[v.jsx("div",{className:"text-4xl mb-3",children:""}),v.jsxs("p",{className:"text-[#636E72] font-bold",children:["",h,""]})]})]})]})]})},H2=()=>v.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-[#FFF9E6]",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),v.jsx("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:"..."}),v.jsx("p",{className:"text-[#636E72] font-medium",children:""}),v.jsxs("div",{className:"mt-4 flex justify-center gap-1",children:[v.jsx("span",{className:"w-3 h-3 bg-[#FF6B9D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),v.jsx("span",{className:"w-3 h-3 bg-[#FECA57] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),v.jsx("span",{className:"w-3 h-3 bg-[#1DD1A1] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),W2=()=>{const[r,e]=ne.useState(null),[t,i]=ne.useState(!1);ne.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const m=localStorage.getItem("pwa_install_dismissed");if(m&&Date.now()-parseInt(m)<1e3*60*60*24*7)return;const g=_=>{_.preventDefault(),e(_),i(!0)};return window.addEventListener("beforeinstallprompt",g),()=>window.removeEventListener("beforeinstallprompt",g)},[]);const o=async()=>{if(!r)return;r.prompt();const{outcome:h}=await r.userChoice;h==="accepted"&&i(!1),e(null)},l=()=>{i(!1),localStorage.setItem("pwa_install_dismissed",Date.now().toString())};return t?v.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-sm z-[100] animate-in",children:v.jsxs("div",{className:"bg-[#2D3436] text-white p-4 rounded-lg border-3 border-[#FECA57] shadow-[4px_4px_0_#FECA57] flex items-center gap-3",children:[v.jsx("div",{className:"text-3xl",children:""}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-black text-sm",children:""}),v.jsx("p",{className:"text-xs text-white/70 mt-0.5",children:""})]}),v.jsxs("button",{onClick:o,className:"btn-pop px-3 py-2 bg-[#FECA57] text-[#2D3436] text-xs font-bold flex items-center gap-1",children:[v.jsx(bd,{size:14}),""]}),v.jsx("button",{onClick:l,className:"text-white/50 hover:text-white p-1",children:v.jsx(vc,{size:16})})]})}):null},G2=()=>v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-[#FFF9E6] border-3 border-[#2D3436] rounded-lg p-6 shadow-lg flex flex-col items-center gap-3",children:[v.jsx(df,{size:32,className:"animate-spin text-[#FF6B9D]"}),v.jsx("span",{className:"font-bold text-[#2D3436]",children:"..."})]})}),K2=ne.lazy(()=>Ys(()=>import("./StyleModal-BbttiloV.js"),[])),Q2=ne.lazy(()=>Ys(()=>import("./ApiKeyModal-WdBn2d8C.js"),[])),X2=ne.lazy(()=>Ys(()=>import("./TemplateModal-D-p1QNf_.js"),[])),Y2=ne.lazy(()=>Ys(()=>import("./ClassModal-BPrZL7yP.js"),__vite__mapDeps([0,1]))),J2=ne.lazy(()=>Ys(()=>import("./HistoryModal-zcygJE1g.js"),[])),Z2=ne.lazy(()=>Ys(()=>import("./AdminPanel-CzHp1i4P.js"),__vite__mapDeps([2,1]))),eC=ne.lazy(()=>Ys(()=>import("./ImportExportModal-BYwlx8vH.js"),__vite__mapDeps([3,4,1]))),tC=ne.lazy(()=>Ys(()=>import("./PrintModal-BRNJNkcT.js").then(r=>r.P),__vite__mapDeps([5,4]))),nC=({currentUser:r,onLogout:e,isAdmin:t})=>{const{toast:i}=R0(),{dialog:o,closeDialog:l,showConfirm:h,showAlert:m}=P0(),[g,_]=ne.useState(!1),{students:E,setStudents:I,selectedIds:x,isLoading:j,generateStudents:G,updateStudent:$,deleteStudent:B,deleteSelected:K,resetStudents:te,toggleSelection:oe,toggleAllSelection:J,addTagToStudents:ce,removeTag:ie,syncComment:C}=V2(r==null?void 0:r.uid),[S,k]=ne.useState(`

`),[b,N]=ne.useState(30),[O,R]=ne.useState(!1),[Ue,ft]=ne.useState(!1),[at,Qe]=ne.useState(null),[re,me]=ne.useState({current:0,total:0}),[le,V]=ne.useState(!1),[H,Se]=ne.useState(["qualitative"]),[Ae,ke]=ne.useState(!1),[Pe,Me]=ne.useState(!1),[Oe,He]=ne.useState(Ng()),[Ct,as]=ne.useState({tone:"normal",wordCount:80}),[ti,Mn]=ne.useState(null),[ls,ni]=ne.useState(!1),[us,br]=ne.useState(0),[ri,lt]=ne.useState(!1),[Xe,pn]=ne.useState(null),[Dr,cs]=ne.useState(""),[ra,rr]=ne.useState([]),[si,Vr]=ne.useState(!1),[mn,ii]=ne.useState(null),[Or,jn]=ne.useState(!1),[Gi,Un]=ne.useState(!1);ne.useEffect(()=>{if(!r)return;const ye=P2.subscribe(we=>{we!=null&&we.apiKey&&(localStorage.setItem("gemini_api_key",we.apiKey),He(!0))});return()=>ye()},[r]),ne.useEffect(()=>{const ye=u_.subscribe(we=>{br(we.length)});return()=>ye()},[]),ne.useEffect(()=>{const ye=zw.subscribe(we=>{if(rr(we),Xe){const ze=we.find(st=>st.id===Xe);cs(ze?ze.name:"")}});return()=>ye()},[Xe]);const[hs,oi]=ne.useState({" ()":!0," ()":!0});ne.useEffect(()=>{const ye=()=>V(window.innerWidth<768);return ye(),window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[]);const gn=()=>{S.trim()&&(G(S),k(""))},ds=()=>{if(b<1)return;const ye=[];for(let ze=1;ze<=b;ze++){const st=ze<10?`0${ze}`:`${ze}`;ye.push(`${st}`)}const we=ye.join(`
`);k(ze=>ze?`${ze}
${we}`:we)},zn=()=>{h("","",()=>{te(),l()})},fs=()=>{x.size!==0&&h("",` ${x.size} `,()=>{K(),l()})},Bn=ye=>{let we=[];if(x.size>0?we=Array.from(x):at&&(we=[at]),we.length===0){m("");return}ce(we,ye)},$n=ye=>{oi(we=>({...we,[ye]:!we[ye]}))},rt=ye=>{Se(we=>we.includes(ye)?we.filter(st=>st!==ye):we.length>=2?we:[...we,ye])},ps=async(ye=!1)=>{ft(!0);const we=E.filter(st=>ye?x.has(st.id):!0),ze=we.length;if(ze===0){ft(!1);return}me({current:0,total:ze});for(let st=0;st<ze;st++){const Ot=we[st];I(kn=>kn.map(wt=>wt.id===Ot.id?{...wt,comment:""}:wt));const Zt=[...Ot.selectedTags,Ot.manualTraits].filter(Boolean).join(""),yn=await bg(Ot.name,Zt,H,Ct);I(kn=>kn.map(wt=>wt.id===Ot.id?{...wt,comment:yn}:wt)),await C(Ot.id,yn),me(kn=>({...kn,current:st+1}))}ft(!1),me({current:0,total:0}),i.success(`  ${ze} `)},sr=ye=>{k0(E,ye)},ir=async ye=>{const we=E.find(Ot=>Ot.id===ye);if(!we)return;if(Mn(ye),we.comment&&!we.comment.includes(""))try{await b2.add(ye,we.comment,H)}catch(Ot){console.error(":",Ot)}const ze=[...we.selectedTags,we.manualTraits].filter(Boolean).join(""),st=await bg(we.name,ze,H,Ct);I(Ot=>Ot.map(Zt=>Zt.id===ye?{...Zt,comment:st}:Zt)),await C(ye,st),Mn(null),i.success(` ${we.name} `)},Ki=async ye=>{try{await u_.add({content:ye.comment,studentName:ye.name,tags:ye.selectedTags,styles:H}),i.success(" ")}catch(we){console.error(":",we),i.error("")}},Qi=ye=>{at&&($(at,"comment",ye),C(at,ye))},Rn=async(ye,we)=>{we==="replace"&&await clearAllStudents();for(const ze of ye)await addStudent(ze.name,ze.selectedTags,ze.comment)};return v.jsxs("div",{className:"min-h-screen text-[#2D3436] font-sans flex flex-col relative",children:[j&&v.jsx(H2,{}),v.jsx(F2,{dialog:o,closeDialog:l}),Ue&&v.jsx(M2,{progress:re}),v.jsxs(ne.Suspense,{fallback:v.jsx(G2,{}),children:[v.jsx(K2,{isOpen:Ae,onClose:()=>ke(!1),globalStyles:H,toggleGlobalStyle:rt}),v.jsx(Q2,{isOpen:Pe,onClose:()=>{Me(!1),He(Ng())},currentUser:r}),v.jsx(X2,{isOpen:ls,onClose:()=>ni(!1),onApplyTemplate:Qi}),v.jsx(Y2,{isOpen:ri,onClose:()=>lt(!1),currentClassId:Xe,onSelectClass:ye=>{pn(ye),ye||cs("")}}),v.jsx(J2,{isOpen:si,onClose:()=>{Vr(!1),ii(null)},student:mn,onRestore:ye=>{mn&&($(mn.id,"comment",ye),C(mn.id,ye))}}),v.jsx(Z2,{isOpen:g,onClose:()=>_(!1),currentUser:r}),v.jsx(eC,{isOpen:Or,onClose:()=>jn(!1),students:E,onImport:Rn,currentClassName:Dr}),v.jsx(tC,{isOpen:Gi,onClose:()=>Un(!1),students:E,currentClassName:Dr})]}),v.jsx(O2,{isSidebarOpen:O,setIsSidebarOpen:R,onOpenSettings:()=>Me(!0),onOpenTemplates:()=>ni(!0),onOpenClasses:()=>lt(!0),onOpenAdmin:()=>_(!0),onOpenImportExport:()=>jn(!0),onOpenPrint:()=>Un(!0),onLogout:e,hasApiKey:Oe,templateCount:us,currentClassName:Dr,currentUser:r,isAdmin:t}),v.jsxs("div",{className:"flex flex-col flex-1 w-full mx-auto relative",children:[v.jsxs("div",{className:"p-3 sm:p-6 bg-[#FFFDF5] border-b-4 border-[#2D3436] flex flex-col lg:flex-row gap-4 sm:gap-6 items-stretch",children:[v.jsx(j2,{rawInput:S,setRawInput:k,numberCount:b,setNumberCount:N,onGenerateStudents:gn,onGenerateNumbers:ds,onResetList:zn,isGenerating:Ue}),v.jsx(U2,{students:E,selectedIds:x,isGenerating:Ue,extraSettings:Ct,setExtraSettings:as,onGenerateSelected:()=>ps(!0),onGenerateAll:()=>ps(!1),onDownload:sr,onDeleteSelected:fs,onResetList:zn})]}),v.jsxs("div",{className:"flex-1 p-3 sm:p-6",children:[v.jsx(z2,{globalStyles:H,onOpenStyleModal:()=>ke(!0),isGenerating:Ue}),v.jsx($2,{students:E,selectedIds:x,focusedStudentId:at,isGenerating:Ue,isGeneratingSingle:ti,onToggleSelection:oe,onToggleAllSelection:J,onFocusStudent:Qe,onOpenSidebar:()=>R(!0),onRemoveTag:ie,onUpdateStudent:$,onDeleteStudent:B,onGenerateSingle:ir,onSaveTemplate:Ki,onOpenHistory:ye=>{ii(ye),Vr(!0)}})]}),v.jsx(q2,{isOpen:O,onClose:()=>R(!1),selectedIds:x,expandedCategories:hs,onToggleCategory:$n,onIdiomClick:Bn})]}),v.jsx(L2,{}),v.jsx(W2,{})]})},rC=({onLogin:r})=>{const[e,t]=rl.useState(!1),[i,o]=rl.useState(null),l=async()=>{t(!0),o(null);const h=await lf.signInWithGoogle();h.success||o(h.error),t(!1)};return v.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:v.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"inline-block bg-[#FECA57] text-[#2D3436] p-4 border-3 border-[#2D3436] shadow-[4px_4px_0_#2D3436] transform rotate-[-3deg] rounded-lg mb-4",children:v.jsx("span",{className:"text-5xl",children:""})}),v.jsx("h1",{className:"text-3xl font-black text-[#2D3436]",children:v.jsxs("span",{className:"relative",children:[v.jsx("span",{className:"relative z-10",children:""}),v.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]})}),v.jsx("p",{className:"text-[#636E72] font-bold mt-2",children:"AI "})]}),v.jsx("div",{className:"bg-[#54A0FF]/20 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:v.jsx("p",{className:"text-sm text-[#2D3436] font-medium",children:"  Google "})}),i&&v.jsxs("div",{className:"bg-[#FF6B6B]/20 border-2 border-[#FF6B6B] rounded-lg p-3 mb-4 text-sm text-[#FF6B6B] font-bold",children:[" ",i]}),v.jsx("button",{onClick:l,disabled:e,className:"btn-pop w-full py-4 bg-white text-[#2D3436] font-bold flex items-center justify-center gap-3 text-lg disabled:opacity-50",children:e?v.jsx("span",{className:"animate-spin text-2xl",children:""}):v.jsxs(v.Fragment,{children:[v.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[v.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),v.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),v.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),v.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})," Google "]})}),v.jsx("p",{className:"text-xs text-[#636E72]/50 mt-6",children:" 2026 "})]})})},sC=({user:r,onLogout:e})=>v.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:v.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[v.jsx("div",{className:"mb-6",children:r!=null&&r.photoURL?v.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-20 h-20 rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto"}):v.jsx("div",{className:"w-20 h-20 bg-[#FECA57] rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto flex items-center justify-center",children:v.jsx("span",{className:"text-4xl",children:""})})}),v.jsxs("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:["",(r==null?void 0:r.displayName)||"",""]}),v.jsx("p",{className:"text-[#636E72] text-sm mb-6",children:r==null?void 0:r.email}),v.jsxs("div",{className:"bg-[#FECA57]/30 border-3 border-[#FECA57] rounded-lg p-6 mb-6",children:[v.jsx("div",{className:"text-4xl mb-3 animate-bounce",children:v.jsx(cf,{size:48,className:"mx-auto text-[#FF9F43]"})}),v.jsx("h3",{className:"text-xl font-black text-[#2D3436] mb-2",children:" "}),v.jsxs("p",{className:"text-sm text-[#636E72] font-medium",children:["",v.jsx("br",{}),""]})]}),v.jsx("div",{className:"bg-[#54A0FF]/10 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:v.jsxs("p",{className:"text-xs text-[#636E72]",children:[" ",v.jsx("strong",{children:""})," (cagooo@gmail.com) "]})}),v.jsx("button",{onClick:e,className:"btn-pop px-6 py-3 bg-[#636E72] text-white font-bold",children:""})]})}),iC=({children:r})=>{var I;const[e,t]=ne.useState(null),[i,o]=ne.useState(!0),[l,h]=ne.useState([]),[m,g]=ne.useState([]);ne.useEffect(()=>{const x=lf.onAuthStateChange(j=>{t(j),o(!1)});return()=>x()},[]),ne.useEffect(()=>{if(!e||!nl.isApproved(e))return;const x=N2.subscribe(G=>{h(G)}),j=zw.subscribe(G=>{g(G)});return()=>{x(),j()}},[e]);const _=e?{...e,schoolName:e.schoolId?(I=l.find(x=>x.id===e.schoolId))==null?void 0:I.name:null,assignedClassNames:(e.assignedClasses||[]).map(x=>{var j;return(j=m.find(G=>G.id===x))==null?void 0:j.name}).filter(Boolean)}:null,E=async()=>{await lf.signOut(),t(null)};return i?v.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl animate-bounce mb-4",children:""}),v.jsx("p",{className:"font-bold text-[#2D3436]",children:"..."})]})}):e?nl.isApproved(e)?rl.cloneElement(r,{currentUser:_,onLogout:E,isAdmin:nl.isAdmin(e)}):v.jsx(sC,{user:e,onLogout:E}):v.jsx(rC,{})};class oC extends rl.Component{constructor(t){super(t);cd(this,"handleReload",()=>{window.location.reload()});cd(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,i){this.setState({errorInfo:i}),console.error(" ErrorBoundary :",t,i)}render(){return this.state.hasError?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#FFF9E6] to-[#FFE4E1] p-4",children:v.jsxs("div",{className:"card-pop max-w-md w-full p-8 bg-white text-center",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-[#FF6B6B]/20 rounded-full mb-4",children:v.jsx(g_,{size:40,className:"text-[#FF6B6B]"})}),v.jsx("div",{className:"text-4xl",children:""})]}),v.jsx("h1",{className:"text-2xl font-black text-[#2D3436] mb-2",children:""}),v.jsx("p",{className:"text-[#636E72] mb-6",children:""}),!1,v.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[v.jsx("button",{onClick:this.handleReset,className:"btn-pop flex-1 py-3 px-4 bg-[#636E72] text-white font-bold flex items-center justify-center gap-2",children:""}),v.jsxs("button",{onClick:this.handleReload,className:"btn-pop flex-1 py-3 px-4 bg-[#FF6B9D] text-white font-bold flex items-center justify-center gap-2",children:[v.jsx(m_,{size:18}),""]})]}),v.jsx("p",{className:"mt-6 text-xs text-[#636E72]",children:""})]})}):this.props.children}}i0.createRoot(document.getElementById("root")).render(v.jsx(rl.StrictMode,{children:v.jsx(oC,{children:v.jsx(C0,{children:v.jsx(iC,{children:v.jsx(nC,{})})})})}));export{d0 as C,bd as D,p0 as F,hf as H,df as L,v0 as P,h_ as S,ff as T,Ni as U,vc as X,Ys as _,h0 as a,zw as b,ot as c,Dg as d,cf as e,N2 as f,I0 as g,b2 as h,f0 as i,v as j,lC as k,R0 as l,w0 as m,c_ as n,ne as r,P2 as s,u_ as t,nl as u};
