import{c as u,r as c,h as x,j as e,e as o,X as g,T as y}from"./index-CjNFU7lt.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=u("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),w=({isOpen:a,onClose:i,student:s,onRestore:h})=>{const[l,m]=c.useState([]),[b,n]=c.useState(!0);c.useEffect(()=>{if(!a||!s)return;n(!0);const t=x.subscribe(s.id,r=>{m(r),n(!1)});return()=>t()},[a,s]);const p=t=>{h(t),i()},f=async t=>{if(window.confirm("ç¢ºå®šè¦åˆªé™¤æ­¤æ­·å²è¨˜éŒ„å—ï¼Ÿ"))try{await x.delete(s.id,t)}catch(r){console.error("åˆªé™¤æ­·å²è¨˜éŒ„å¤±æ•—:",r)}},j=t=>t!=null&&t.toDate?t.toDate().toLocaleString("zh-TW",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"æœªçŸ¥æ™‚é–“";return!a||!s?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[e.jsxs("div",{className:"p-3 sm:p-5 bg-[#54A0FF] border-b-3 border-[#2D3436] flex items-center justify-between",children:[e.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(o,{size:24}),s.name," çš„è©•èªæ­·å²"]}),e.jsx("button",{onClick:i,className:"btn-pop p-2 bg-white text-[#2D3436]",children:e.jsx(g,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:b?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"text-4xl animate-bounce",children:"ğŸ“œ"})}):l.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ğŸ“œ"}),e.jsx("p",{className:"text-lg font-bold text-[#636E72]",children:"é‚„æ²’æœ‰æ­·å²è¨˜éŒ„"}),e.jsx("p",{className:"text-sm text-[#636E72]/70 mt-2",children:"ç”Ÿæˆè©•èªå¾Œæœƒè‡ªå‹•ä¿å­˜æ­·å²ç‰ˆæœ¬"})]}):e.jsx("div",{className:"space-y-3",children:l.map((t,r)=>{var d;return e.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[e.jsxs("div",{className:"px-3 py-2 bg-[#E8DCC8] border-b border-dashed border-[#2D3436]/20 flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-bold text-[#636E72] flex items-center gap-1",children:[e.jsx(o,{size:12}),j(t.createdAt),r===0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#1DD1A1] text-white rounded-full text-[10px]",children:"æœ€æ–°"})]}),e.jsxs("span",{className:"text-xs text-[#636E72]",children:[((d=t.comment)==null?void 0:d.length)||0," å­—"]})]}),e.jsx("div",{className:"p-3 text-sm text-[#2D3436] leading-relaxed max-h-[120px] overflow-y-auto",children:t.comment}),e.jsxs("div",{className:"p-2 bg-[#FFF9E6] border-t border-dashed border-[#E8DCC8] flex items-center justify-end gap-2",children:[e.jsxs("button",{onClick:()=>p(t.comment),className:"btn-pop px-3 py-1.5 bg-[#54A0FF] text-white text-xs font-bold flex items-center gap-1",children:[e.jsx(N,{size:12}),"é‚„åŸ"]}),e.jsx("button",{onClick:()=>f(t.id),className:"btn-pop px-3 py-1.5 bg-[#FF6B6B] text-white text-xs font-bold flex items-center gap-1",children:e.jsx(y,{size:12})})]})]},t.id)})})}),e.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:["å…± ",l.length," ç­†æ­·å²è¨˜éŒ„ | é»æ“Šã€Œé‚„åŸã€å¯æ¢å¾©èˆŠç‰ˆæœ¬"]})]})})};export{w as default};
