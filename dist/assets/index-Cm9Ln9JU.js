(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function g_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yd={exports:{}},Qa={},_d={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function X0(){if(Ag)return Re;Ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function U(j,Q,Se){this.props=j,this.context=Q,this.refs=$,this.updater=Se||O}U.prototype.isReactComponent={},U.prototype.setState=function(j,Q){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Q,"setState")},U.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function G(){}G.prototype=U.prototype;function te(j,Q,Se){this.props=j,this.context=Q,this.refs=$,this.updater=Se||O}var oe=te.prototype=new G;oe.constructor=te,q(oe,U.prototype),oe.isPureReactComponent=!0;var W=Array.isArray,ie=Object.prototype.hasOwnProperty,re={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(j,Q,Se){var Te,ke={},Ne=null,Me=null;if(Q!=null)for(Te in Q.ref!==void 0&&(Me=Q.ref),Q.key!==void 0&&(Ne=""+Q.key),Q)ie.call(Q,Te)&&!C.hasOwnProperty(Te)&&(ke[Te]=Q[Te]);var Ve=arguments.length-2;if(Ve===1)ke.children=Se;else if(1<Ve){for(var ze=Array(Ve),jt=0;jt<Ve;jt++)ze[jt]=arguments[jt+2];ke.children=ze}if(j&&j.defaultProps)for(Te in Ve=j.defaultProps,Ve)ke[Te]===void 0&&(ke[Te]=Ve[Te]);return{$$typeof:r,type:j,key:Ne,ref:Me,props:ke,_owner:re.current}}function N(j,Q){return{$$typeof:r,type:j.type,key:Q,ref:j.ref,props:j.props,_owner:j._owner}}function P(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function R(j){var Q={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Se){return Q[Se]})}var V=/\/+/g;function b(j,Q){return typeof j=="object"&&j!==null&&j.key!=null?R(""+j.key):Q.toString(36)}function qe(j,Q,Se,Te,ke){var Ne=typeof j;(Ne==="undefined"||Ne==="boolean")&&(j=null);var Me=!1;if(j===null)Me=!0;else switch(Ne){case"string":case"number":Me=!0;break;case"object":switch(j.$$typeof){case r:case e:Me=!0}}if(Me)return Me=j,ke=ke(Me),j=Te===""?"."+b(Me,0):Te,W(ke)?(Se="",j!=null&&(Se=j.replace(V,"$&/")+"/"),qe(ke,Q,Se,"",function(jt){return jt})):ke!=null&&(P(ke)&&(ke=N(ke,Se+(!ke.key||Me&&Me.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+j)),Q.push(ke)),1;if(Me=0,Te=Te===""?".":Te+":",W(j))for(var Ve=0;Ve<j.length;Ve++){Ne=j[Ve];var ze=Te+b(Ne,Ve);Me+=qe(Ne,Q,Se,ze,ke)}else if(ze=S(j),typeof ze=="function")for(j=ze.call(j),Ve=0;!(Ne=j.next()).done;)Ne=Ne.value,ze=Te+b(Ne,Ve++),Me+=qe(Ne,Q,Se,ze,ke);else if(Ne==="object")throw Q=String(j),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Me}function Ze(j,Q,Se){if(j==null)return j;var Te=[],ke=0;return qe(j,Te,"","",function(Ne){return Q.call(Se,Ne,ke++)}),Te}function Nt(j){if(j._status===-1){var Q=j._result;Q=Q(),Q.then(function(Se){(j._status===0||j._status===-1)&&(j._status=1,j._result=Se)},function(Se){(j._status===0||j._status===-1)&&(j._status=2,j._result=Se)}),j._status===-1&&(j._status=0,j._result=Q)}if(j._status===1)return j._result.default;throw j._result}var Xe={current:null},se={transition:null},me={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:se,ReactCurrentOwner:re};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:Ze,forEach:function(j,Q,Se){Ze(j,function(){Q.apply(this,arguments)},Se)},count:function(j){var Q=0;return Ze(j,function(){Q++}),Q},toArray:function(j){return Ze(j,function(Q){return Q})||[]},only:function(j){if(!P(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Re.Component=U,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=te,Re.StrictMode=i,Re.Suspense=y,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Re.act=ue,Re.cloneElement=function(j,Q,Se){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Te=q({},j.props),ke=j.key,Ne=j.ref,Me=j._owner;if(Q!=null){if(Q.ref!==void 0&&(Ne=Q.ref,Me=re.current),Q.key!==void 0&&(ke=""+Q.key),j.type&&j.type.defaultProps)var Ve=j.type.defaultProps;for(ze in Q)ie.call(Q,ze)&&!C.hasOwnProperty(ze)&&(Te[ze]=Q[ze]===void 0&&Ve!==void 0?Ve[ze]:Q[ze])}var ze=arguments.length-2;if(ze===1)Te.children=Se;else if(1<ze){Ve=Array(ze);for(var jt=0;jt<ze;jt++)Ve[jt]=arguments[jt+2];Te.children=Ve}return{$$typeof:r,type:j.type,key:ke,ref:Ne,props:Te,_owner:Me}},Re.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Re.createElement=T,Re.createFactory=function(j){var Q=T.bind(null,j);return Q.type=j,Q},Re.createRef=function(){return{current:null}},Re.forwardRef=function(j){return{$$typeof:m,render:j}},Re.isValidElement=P,Re.lazy=function(j){return{$$typeof:x,_payload:{_status:-1,_result:j},_init:Nt}},Re.memo=function(j,Q){return{$$typeof:v,type:j,compare:Q===void 0?null:Q}},Re.startTransition=function(j){var Q=se.transition;se.transition={};try{j()}finally{se.transition=Q}},Re.unstable_act=ue,Re.useCallback=function(j,Q){return Xe.current.useCallback(j,Q)},Re.useContext=function(j){return Xe.current.useContext(j)},Re.useDebugValue=function(){},Re.useDeferredValue=function(j){return Xe.current.useDeferredValue(j)},Re.useEffect=function(j,Q){return Xe.current.useEffect(j,Q)},Re.useId=function(){return Xe.current.useId()},Re.useImperativeHandle=function(j,Q,Se){return Xe.current.useImperativeHandle(j,Q,Se)},Re.useInsertionEffect=function(j,Q){return Xe.current.useInsertionEffect(j,Q)},Re.useLayoutEffect=function(j,Q){return Xe.current.useLayoutEffect(j,Q)},Re.useMemo=function(j,Q){return Xe.current.useMemo(j,Q)},Re.useReducer=function(j,Q,Se){return Xe.current.useReducer(j,Q,Se)},Re.useRef=function(j){return Xe.current.useRef(j)},Re.useState=function(j){return Xe.current.useState(j)},Re.useSyncExternalStore=function(j,Q,Se){return Xe.current.useSyncExternalStore(j,Q,Se)},Re.useTransition=function(){return Xe.current.useTransition()},Re.version="18.3.1",Re}var Cg;function gf(){return Cg||(Cg=1,_d.exports=X0()),_d.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function Y0(){if(bg)return Qa;bg=1;var r=gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,y,v){var x,E={},S=null,O=null;v!==void 0&&(S=""+v),y.key!==void 0&&(S=""+y.key),y.ref!==void 0&&(O=y.ref);for(x in y)i.call(y,x)&&!l.hasOwnProperty(x)&&(E[x]=y[x]);if(m&&m.defaultProps)for(x in y=m.defaultProps,y)E[x]===void 0&&(E[x]=y[x]);return{$$typeof:e,type:m,key:S,ref:O,props:E,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=h,Qa.jsxs=h,Qa}var Ng;function J0(){return Ng||(Ng=1,yd.exports=Y0()),yd.exports}var f=J0(),Z=gf();const oc=g_(Z);var Bu={},vd={exports:{}},hn={},wd={exports:{}},xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function Z0(){return kg||(kg=1,(function(r){function e(se,me){var ue=se.length;se.push(me);e:for(;0<ue;){var j=ue-1>>>1,Q=se[j];if(0<o(Q,me))se[j]=me,se[ue]=Q,ue=j;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var me=se[0],ue=se.pop();if(ue!==me){se[0]=ue;e:for(var j=0,Q=se.length,Se=Q>>>1;j<Se;){var Te=2*(j+1)-1,ke=se[Te],Ne=Te+1,Me=se[Ne];if(0>o(ke,ue))Ne<Q&&0>o(Me,ke)?(se[j]=Me,se[Ne]=ue,j=Ne):(se[j]=ke,se[Te]=ue,j=Te);else if(Ne<Q&&0>o(Me,ue))se[j]=Me,se[Ne]=ue,j=Ne;else break e}}return me}function o(se,me){var ue=se.sortIndex-me.sortIndex;return ue!==0?ue:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var y=[],v=[],x=1,E=null,S=3,O=!1,q=!1,$=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(se){for(var me=t(v);me!==null;){if(me.callback===null)i(v);else if(me.startTime<=se)i(v),me.sortIndex=me.expirationTime,e(y,me);else break;me=t(v)}}function W(se){if($=!1,oe(se),!q)if(t(y)!==null)q=!0,Nt(ie);else{var me=t(v);me!==null&&Xe(W,me.startTime-se)}}function ie(se,me){q=!1,$&&($=!1,G(T),T=-1),O=!0;var ue=S;try{for(oe(me),E=t(y);E!==null&&(!(E.expirationTime>me)||se&&!R());){var j=E.callback;if(typeof j=="function"){E.callback=null,S=E.priorityLevel;var Q=j(E.expirationTime<=me);me=r.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(y)&&i(y),oe(me)}else i(y);E=t(y)}if(E!==null)var Se=!0;else{var Te=t(v);Te!==null&&Xe(W,Te.startTime-me),Se=!1}return Se}finally{E=null,S=ue,O=!1}}var re=!1,C=null,T=-1,N=5,P=-1;function R(){return!(r.unstable_now()-P<N)}function V(){if(C!==null){var se=r.unstable_now();P=se;var me=!0;try{me=C(!0,se)}finally{me?b():(re=!1,C=null)}}else re=!1}var b;if(typeof te=="function")b=function(){te(V)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Ze=qe.port2;qe.port1.onmessage=V,b=function(){Ze.postMessage(null)}}else b=function(){U(V,0)};function Nt(se){C=se,re||(re=!0,b())}function Xe(se,me){T=U(function(){se(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){q||O||(q=!0,Nt(ie))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(se){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var ue=S;S=me;try{return se()}finally{S=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ue=S;S=se;try{return me()}finally{S=ue}},r.unstable_scheduleCallback=function(se,me,ue){var j=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?j+ue:j):ue=j,se){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ue+Q,se={id:x++,callback:me,priorityLevel:se,startTime:ue,expirationTime:Q,sortIndex:-1},ue>j?(se.sortIndex=ue,e(v,se),t(y)===null&&se===t(v)&&($?(G(T),T=-1):$=!0,Xe(W,ue-j))):(se.sortIndex=Q,e(y,se),q||O||(q=!0,Nt(ie))),se},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(se){var me=S;return function(){var ue=S;S=me;try{return se.apply(this,arguments)}finally{S=ue}}}})(xd)),xd}var Rg;function ex(){return Rg||(Rg=1,wd.exports=Z0()),wd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function tx(){if(Pg)return hn;Pg=1;var r=gf(),e=ex();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},E={};function S(n){return y.call(E,n)?!0:y.call(x,n)?!1:v.test(n)?E[n]=!0:(x[n]=!0,!1)}function O(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||O(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,c,d,p,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=p,this.removeEmptyString=w}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function te(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(G,te);U[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(G,te);U[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(G,te);U[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function oe(n,s,a,c){var d=U.hasOwnProperty(s)?U[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,d,c)&&(a=null),c||d===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var W=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),re=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),R=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),se=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Object.assign,j;function Q(n){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+n}var Se=!1;function Te(n,s){if(!n||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){c=z}n.call(s.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,A=p.length-1;1<=w&&0<=A&&d[w]!==p[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==p[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==p[A]){var k=`
`+d[w].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=w&&0<=A);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function ke(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Te(n.type,!1),n;case 11:return n=Te(n.type.render,!1),n;case 1:return n=Te(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case re:return"Portal";case N:return"Profiler";case T:return"StrictMode";case b:return"Suspense";case qe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case R:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ze:return s=n.displayName||null,s!==null?s:Ne(n.type)||"Memo";case Nt:s=n._payload,n=n._init;try{return Ne(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ve(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ze(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function jt(n){var s=ze(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function us(n){n._valueTracker||(n._valueTracker=jt(n))}function cs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=ze(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Pr(n,s){var a=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Wi(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ve(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function hs(n,s){s=s.checked,s!=null&&oe(n,"checked",s,!1)}function Dr(n,s){hs(n,s);var a=Ve(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?et(n,s.type,a):s.hasOwnProperty("defaultValue")&&et(n,s.type,Ve(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ds(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function et(n,s,a){(s!=="number"||nr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var at=Array.isArray;function mn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ve(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function fs(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ki(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ve(a)}}function Gi(n,s){var a=Ve(s.value),c=Ve(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function rr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ps(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function On(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ps(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ln,Qi=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Ln=Ln||document.createElement("div"),Ln.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ln.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function jr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var sr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xi=["Webkit","ms","Moz","O"];Object.keys(sr).forEach(function(n){Xi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),sr[s]=sr[n]})});function Mn(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||sr.hasOwnProperty(n)&&sr[n]?(""+s).trim():s+"px"}function ms(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Mn(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var oi=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gn(n,s){if(s){if(oi[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function gs(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function ys(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zn=null,Bn=null,it=null;function ve(n){if(n=ja(n)){if(typeof zn!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ru(s),zn(n.stateNode,n.type,s))}}function be(n){Bn?it?it.push(n):it=[n]:Bn=n}function Ge(){if(Bn){var n=Bn,s=it;if(it=Bn=null,ve(n),s)for(n=0;n<s.length;n++)ve(s[n])}}function _t(n,s){return n(s)}function Vt(){}var $t=!1;function ai(n,s,a){if($t)return n(s,a);$t=!0;try{return _t(n,s,a)}finally{$t=!1,(Bn!==null||it!==null)&&(Vt(),Ge())}}function yn(n,s){var a=n.stateNode;if(a===null)return null;var c=ru(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var qt=!1;if(m)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){qt=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{qt=!1}function jl(n,s,a,c,d,p,w,A,k){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var Vr=!1,ir=null,Yi=!1,bn=null,Vl={onError:function(n){Vr=!0,ir=n}};function Fl(n,s,a,c,d,p,w,A,k){Vr=!1,ir=null,jl.apply(Vl,arguments)}function la(n,s,a,c,d,p,w,A,k){if(Fl.apply(this,arguments),Vr){if(Vr){var z=ir;Vr=!1,ir=null}else throw Error(t(198));Yi||(Yi=!0,bn=z)}}function $n(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ua(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Ol(n){if($n(n)!==n)throw Error(t(188))}function Ll(n){var s=n.alternate;if(!s){if(s=$n(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Ol(d),n;if(p===c)return Ol(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,c=p;break}if(A===c){w=!0,c=d,a=p;break}A=A.sibling}if(!w){for(A=p.child;A;){if(A===a){w=!0,a=p,c=d;break}if(A===c){w=!0,c=p,a=d;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Ml(n){return n=Ll(n),n!==null?li(n):null}function li(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=li(n);if(s!==null)return s;n=n.sibling}return null}var ca=e.unstable_scheduleCallback,Ji=e.unstable_cancelCallback,ui=e.unstable_shouldYield,Fr=e.unstable_requestPaint,tt=e.unstable_now,Gc=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,ha=e.unstable_UserBlockingPriority,ci=e.unstable_NormalPriority,da=e.unstable_LowPriority,eo=e.unstable_IdlePriority,hi=null,_n=null;function Ul(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(hi,n,void 0,(n.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:di,or=Math.log,Nn=Math.LN2;function di(n){return n>>>=0,n===0?32:31-(or(n)/Nn|0)|0}var ar=64,vs=4194304;function Be(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Or(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~d;A!==0?c=Be(A):(p&=w,p!==0&&(c=Be(p)))}else w=a&~d,w!==0?c=Be(w):p!==0&&(c=Be(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-vn(s),d=1<<a,c|=n[a],s&=~d;return c}function fi(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-vn(p),A=1<<w,k=d[w];k===-1?((A&a)===0||(A&c)!==0)&&(d[w]=fi(A,s)):k<=s&&(n.expiredLanes|=A),p&=~A}}function fa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function pa(){var n=ar;return ar<<=1,(ar&4194240)===0&&(ar=64),n}function ma(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function mi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-vn(s),n[s]=a}function Qc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-vn(a),p=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function ga(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-vn(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Fe=0;function lr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ya,to,_a,va,wa,ur=!1,no=[],cr=null,hr=null,Ft=null,gi=new Map,Lr=new Map,wn=[],zl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ws(n,s){switch(n){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":gi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lr.delete(s.pointerId)}}function qn(n,s,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=ja(s),s!==null&&to(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Bl(n,s,a,c,d){switch(s){case"focusin":return cr=qn(cr,n,s,a,c,d),!0;case"dragenter":return hr=qn(hr,n,s,a,c,d),!0;case"mouseover":return Ft=qn(Ft,n,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return gi.set(p,qn(gi.get(p)||null,n,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Lr.set(p,qn(Lr.get(p)||null,n,s,a,c,d)),!0}return!1}function ro(n){var s=wi(n.target);if(s!==null){var a=$n(s);if(a!==null){if(s=a.tag,s===13){if(s=ua(a),s!==null){n.blockedOn=s,wa(n.priority,function(){_a(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qe(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=so(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Un=c,a.target.dispatchEvent(c),Un=null}else return s=ja(a),s!==null&&to(s),n.blockedOn=a,!1;s.shift()}return!0}function $l(n,s,a){Qe(n)&&a.delete(s)}function Xc(){ur=!1,cr!==null&&Qe(cr)&&(cr=null),hr!==null&&Qe(hr)&&(hr=null),Ft!==null&&Qe(Ft)&&(Ft=null),gi.forEach($l),Lr.forEach($l)}function xs(n,s){n.blockedOn===s&&(n.blockedOn=null,ur||(ur=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xc)))}function Es(n){function s(d){return xs(d,n)}if(0<no.length){xs(no[0],n);for(var a=1;a<no.length;a++){var c=no[a];c.blockedOn===n&&(c.blockedOn=null)}}for(cr!==null&&xs(cr,n),hr!==null&&xs(hr,n),Ft!==null&&xs(Ft,n),gi.forEach(s),Lr.forEach(s),a=0;a<wn.length;a++)c=wn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<wn.length&&(a=wn[0],a.blockedOn===null);)ro(a),a.blockedOn===null&&wn.shift()}var Mr=W.ReactCurrentBatchConfig,Ur=!0;function dr(n,s,a,c){var d=Fe,p=Mr.transition;Mr.transition=null;try{Fe=1,xa(n,s,a,c)}finally{Fe=d,Mr.transition=p}}function ql(n,s,a,c){var d=Fe,p=Mr.transition;Mr.transition=null;try{Fe=4,xa(n,s,a,c)}finally{Fe=d,Mr.transition=p}}function xa(n,s,a,c){if(Ur){var d=so(n,s,a,c);if(d===null)ah(n,s,c,fr,a),ws(n,c);else if(Bl(d,n,s,a,c))c.stopPropagation();else if(ws(n,c),s&4&&-1<zl.indexOf(n)){for(;d!==null;){var p=ja(d);if(p!==null&&ya(p),p=so(n,s,a,c),p===null&&ah(n,s,c,fr,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else ah(n,s,c,null,a)}}var fr=null;function so(n,s,a,c){if(fr=null,n=ys(c),n=wi(n),n!==null)if(s=$n(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ua(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return fr=n,null}function io(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gc()){case Zi:return 1;case ha:return 4;case ci:case da:return 16;case eo:return 536870912;default:return 16}default:return 16}}var xn=null,oo=null,zr=null;function Hl(){if(zr)return zr;var n,s=oo,a=s.length,c,d="value"in xn?xn.value:xn.textContent,p=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[p-c];c++);return zr=d.slice(n,1<c?1-c:void 0)}function yi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function pr(){return!0}function Ea(){return!1}function Ht(n){function s(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?pr:Ea,this.isPropagationStopped=Ea,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),s}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=Ht(mr),Ts=ue({},mr,{view:0,detail:0}),ao=Ht(Ts),lo,uo,En,vi=ue({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==En&&(En&&n.type==="mousemove"?(lo=n.screenX-En.screenX,uo=n.screenY-En.screenY):uo=lo=0,En=n),lo)},movementY:function(n){return"movementY"in n?n.movementY:uo}}),Ta=Ht(vi),Wl=ue({},vi,{dataTransfer:0}),Kl=Ht(Wl),co=ue({},Ts,{relatedTarget:0}),Ot=Ht(co),Gl=ue({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ql=Ht(Gl),Is=ue({},mr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ht(Is),g=ue({},mr,{data:0}),_=Ht(g),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=B[n])?!!s[n]:!1}function Ae(){return ne}var pt=ue({},Ts,{key:function(n){if(n.key){var s=I[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=yi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?L[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(n){return n.type==="keypress"?yi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),We=Ht(pt),vt=ue({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tn=Ht(vt),Br=ue({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),gr=Ht(Br),yr=ue({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ho=Ht(yr),Ia=ue({},vi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qw=Ht(Ia),Hw=[9,13,27,32],Yc=m&&"CompositionEvent"in window,Sa=null;m&&"documentMode"in document&&(Sa=document.documentMode);var Ww=m&&"TextEvent"in window&&!Sa,_p=m&&(!Yc||Sa&&8<Sa&&11>=Sa),vp=" ",wp=!1;function xp(n,s){switch(n){case"keyup":return Hw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fo=!1;function Kw(n,s){switch(n){case"compositionend":return Ep(s);case"keypress":return s.which!==32?null:(wp=!0,vp);case"textInput":return n=s.data,n===vp&&wp?null:n;default:return null}}function Gw(n,s){if(fo)return n==="compositionend"||!Yc&&xp(n,s)?(n=Hl(),zr=oo=xn=null,fo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _p&&s.locale!=="ko"?null:s.data;default:return null}}var Qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Qw[n.type]:s==="textarea"}function Ip(n,s,a,c){be(c),s=eu(s,"onChange"),0<s.length&&(a=new _i("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Aa=null,Ca=null;function Xw(n){Bp(n,0)}function Xl(n){var s=_o(n);if(cs(s))return n}function Yw(n,s){if(n==="change")return s}var Sp=!1;if(m){var Jc;if(m){var Zc="oninput"in document;if(!Zc){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),Zc=typeof Ap.oninput=="function"}Jc=Zc}else Jc=!1;Sp=Jc&&(!document.documentMode||9<document.documentMode)}function Cp(){Aa&&(Aa.detachEvent("onpropertychange",bp),Ca=Aa=null)}function bp(n){if(n.propertyName==="value"&&Xl(Ca)){var s=[];Ip(s,Ca,n,ys(n)),ai(Xw,s)}}function Jw(n,s,a){n==="focusin"?(Cp(),Aa=s,Ca=a,Aa.attachEvent("onpropertychange",bp)):n==="focusout"&&Cp()}function Zw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xl(Ca)}function e0(n,s){if(n==="click")return Xl(s)}function t0(n,s){if(n==="input"||n==="change")return Xl(s)}function n0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Hn=typeof Object.is=="function"?Object.is:n0;function ba(n,s){if(Hn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!y.call(s,d)||!Hn(n[d],s[d]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kp(n,s){var a=Np(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Rp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Rp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Pp(){for(var n=window,s=nr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=nr(n.document)}return s}function eh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function r0(n){var s=Pp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Rp(a.ownerDocument.documentElement,a)){if(c!==null&&eh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=kp(a,p);var w=kp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var s0=m&&"documentMode"in document&&11>=document.documentMode,po=null,th=null,Na=null,nh=!1;function Dp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nh||po==null||po!==nr(c)||(c=po,"selectionStart"in c&&eh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Na&&ba(Na,c)||(Na=c,c=eu(th,"onSelect"),0<c.length&&(s=new _i("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=po)))}function Yl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var mo={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},rh={},jp={};m&&(jp=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Jl(n){if(rh[n])return rh[n];if(!mo[n])return n;var s=mo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in jp)return rh[n]=s[a];return n}var Vp=Jl("animationend"),Fp=Jl("animationiteration"),Op=Jl("animationstart"),Lp=Jl("transitionend"),Mp=new Map,Up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(n,s){Mp.set(n,s),l(s,[n])}for(var sh=0;sh<Up.length;sh++){var ih=Up[sh],i0=ih.toLowerCase(),o0=ih[0].toUpperCase()+ih.slice(1);Ss(i0,"on"+o0)}Ss(Vp,"onAnimationEnd"),Ss(Fp,"onAnimationIteration"),Ss(Op,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(Lp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function zp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,la(c,s,void 0,n),n.currentTarget=null}function Bp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var w=c.length-1;0<=w;w--){var A=c[w],k=A.instance,z=A.currentTarget;if(A=A.listener,k!==p&&d.isPropagationStopped())break e;zp(d,A,z),p=k}else for(w=0;w<c.length;w++){if(A=c[w],k=A.instance,z=A.currentTarget,A=A.listener,k!==p&&d.isPropagationStopped())break e;zp(d,A,z),p=k}}}if(Yi)throw n=bn,Yi=!1,bn=null,n}function nt(n,s){var a=s[fh];a===void 0&&(a=s[fh]=new Set);var c=n+"__bubble";a.has(c)||($p(s,n,2,!1),a.add(c))}function oh(n,s,a){var c=0;s&&(c|=4),$p(a,n,c,s)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Ra(n){if(!n[Zl]){n[Zl]=!0,i.forEach(function(a){a!=="selectionchange"&&(a0.has(a)||oh(a,!1,n),oh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Zl]||(s[Zl]=!0,oh("selectionchange",!1,s))}}function $p(n,s,a,c){switch(io(s)){case 1:var d=dr;break;case 4:d=ql;break;default:d=xa}a=d.bind(null,s,a,n),d=void 0,!qt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function ah(n,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var k=w.tag;if((k===3||k===4)&&(k=w.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;w=w.return}for(;A!==null;){if(w=wi(A),w===null)return;if(k=w.tag,k===5||k===6){c=p=w;continue e}A=A.parentNode}}c=c.return}ai(function(){var z=p,Y=ys(a),J=[];e:{var X=Mp.get(n);if(X!==void 0){var le=_i,de=n;switch(n){case"keypress":if(yi(a)===0)break e;case"keydown":case"keyup":le=We;break;case"focusin":de="focus",le=Ot;break;case"focusout":de="blur",le=Ot;break;case"beforeblur":case"afterblur":le=Ot;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=gr;break;case Vp:case Fp:case Op:le=Ql;break;case Lp:le=ho;break;case"scroll":le=ao;break;case"wheel":le=qw;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Tn}var fe=(s&4)!==0,mt=!fe&&n==="scroll",F=fe?X!==null?X+"Capture":null:X;fe=[];for(var D=z,M;D!==null;){M=D;var ee=M.stateNode;if(M.tag===5&&ee!==null&&(M=ee,F!==null&&(ee=yn(D,F),ee!=null&&fe.push(Pa(D,ee,M)))),mt)break;D=D.return}0<fe.length&&(X=new le(X,de,null,a,Y),J.push({event:X,listeners:fe}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",X&&a!==Un&&(de=a.relatedTarget||a.fromElement)&&(wi(de)||de[$r]))break e;if((le||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=z,de=de?wi(de):null,de!==null&&(mt=$n(de),de!==mt||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=z),le!==de)){if(fe=Ta,ee="onMouseLeave",F="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(fe=Tn,ee="onPointerLeave",F="onPointerEnter",D="pointer"),mt=le==null?X:_o(le),M=de==null?X:_o(de),X=new fe(ee,D+"leave",le,a,Y),X.target=mt,X.relatedTarget=M,ee=null,wi(Y)===z&&(fe=new fe(F,D+"enter",de,a,Y),fe.target=M,fe.relatedTarget=mt,ee=fe),mt=ee,le&&de)t:{for(fe=le,F=de,D=0,M=fe;M;M=go(M))D++;for(M=0,ee=F;ee;ee=go(ee))M++;for(;0<D-M;)fe=go(fe),D--;for(;0<M-D;)F=go(F),M--;for(;D--;){if(fe===F||F!==null&&fe===F.alternate)break t;fe=go(fe),F=go(F)}fe=null}else fe=null;le!==null&&qp(J,X,le,fe,!1),de!==null&&mt!==null&&qp(J,mt,de,fe,!0)}}e:{if(X=z?_o(z):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var pe=Yw;else if(Tp(X))if(Sp)pe=t0;else{pe=Zw;var ye=Jw}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=e0);if(pe&&(pe=pe(n,z))){Ip(J,pe,a,Y);break e}ye&&ye(n,X,z),n==="focusout"&&(ye=X._wrapperState)&&ye.controlled&&X.type==="number"&&et(X,"number",X.value)}switch(ye=z?_o(z):window,n){case"focusin":(Tp(ye)||ye.contentEditable==="true")&&(po=ye,th=z,Na=null);break;case"focusout":Na=th=po=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Dp(J,a,Y);break;case"selectionchange":if(s0)break;case"keydown":case"keyup":Dp(J,a,Y)}var _e;if(Yc)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else fo?xp(n,a)&&(xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(_p&&a.locale!=="ko"&&(fo||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&fo&&(_e=Hl()):(xn=Y,oo="value"in xn?xn.value:xn.textContent,fo=!0)),ye=eu(z,xe),0<ye.length&&(xe=new _(xe,n,null,a,Y),J.push({event:xe,listeners:ye}),_e?xe.data=_e:(_e=Ep(a),_e!==null&&(xe.data=_e)))),(_e=Ww?Kw(n,a):Gw(n,a))&&(z=eu(z,"onBeforeInput"),0<z.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),J.push({event:Y,listeners:z}),Y.data=_e))}Bp(J,s)})}function Pa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function eu(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=yn(n,a),p!=null&&c.unshift(Pa(n,p,d)),p=yn(n,s),p!=null&&c.push(Pa(n,p,d))),n=n.return}return c}function go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function qp(n,s,a,c,d){for(var p=s._reactName,w=[];a!==null&&a!==c;){var A=a,k=A.alternate,z=A.stateNode;if(k!==null&&k===c)break;A.tag===5&&z!==null&&(A=z,d?(k=yn(a,p),k!=null&&w.unshift(Pa(a,k,A))):d||(k=yn(a,p),k!=null&&w.push(Pa(a,k,A)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var l0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function Hp(n){return(typeof n=="string"?n:""+n).replace(l0,`
`).replace(u0,"")}function tu(n,s,a){if(s=Hp(s),Hp(n)!==s&&a)throw Error(t(425))}function nu(){}var lh=null,uh=null;function ch(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,c0=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(n){return Wp.resolve(null).then(n).catch(d0)}:hh;function d0(n){setTimeout(function(){throw n})}function dh(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Es(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Es(s)}function As(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Kp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var yo=Math.random().toString(36).slice(2),_r="__reactFiber$"+yo,Da="__reactProps$"+yo,$r="__reactContainer$"+yo,fh="__reactEvents$"+yo,f0="__reactListeners$"+yo,p0="__reactHandles$"+yo;function wi(n){var s=n[_r];if(s)return s;for(var a=n.parentNode;a;){if(s=a[$r]||a[_r]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Kp(n);n!==null;){if(a=n[_r])return a;n=Kp(n)}return s}n=a,a=n.parentNode}return null}function ja(n){return n=n[_r]||n[$r],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function _o(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ru(n){return n[Da]||null}var ph=[],vo=-1;function Cs(n){return{current:n}}function rt(n){0>vo||(n.current=ph[vo],ph[vo]=null,vo--)}function Ye(n,s){vo++,ph[vo]=n.current,n.current=s}var bs={},Wt=Cs(bs),on=Cs(!1),xi=bs;function wo(n,s){var a=n.type.contextTypes;if(!a)return bs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function an(n){return n=n.childContextTypes,n!=null}function su(){rt(on),rt(Wt)}function Gp(n,s,a){if(Wt.current!==bs)throw Error(t(168));Ye(Wt,s),Ye(on,a)}function Qp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Me(n)||"Unknown",d));return ue({},a,c)}function iu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||bs,xi=Wt.current,Ye(Wt,n),Ye(on,on.current),!0}function Xp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Qp(n,s,xi),c.__reactInternalMemoizedMergedChildContext=n,rt(on),rt(Wt),Ye(Wt,n)):rt(on),Ye(on,a)}var qr=null,ou=!1,mh=!1;function Yp(n){qr===null?qr=[n]:qr.push(n)}function m0(n){ou=!0,Yp(n)}function Ns(){if(!mh&&qr!==null){mh=!0;var n=0,s=Fe;try{var a=qr;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}qr=null,ou=!1}catch(d){throw qr!==null&&(qr=qr.slice(n+1)),ca(Zi,Ns),d}finally{Fe=s,mh=!1}}return null}var xo=[],Eo=0,au=null,lu=0,kn=[],Rn=0,Ei=null,Hr=1,Wr="";function Ti(n,s){xo[Eo++]=lu,xo[Eo++]=au,au=n,lu=s}function Jp(n,s,a){kn[Rn++]=Hr,kn[Rn++]=Wr,kn[Rn++]=Ei,Ei=n;var c=Hr;n=Wr;var d=32-vn(c)-1;c&=~(1<<d),a+=1;var p=32-vn(s)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Hr=1<<32-vn(s)+d|a<<d|c,Wr=p+n}else Hr=1<<p|a<<d|c,Wr=n}function gh(n){n.return!==null&&(Ti(n,1),Jp(n,1,0))}function yh(n){for(;n===au;)au=xo[--Eo],xo[Eo]=null,lu=xo[--Eo],xo[Eo]=null;for(;n===Ei;)Ei=kn[--Rn],kn[Rn]=null,Wr=kn[--Rn],kn[Rn]=null,Hr=kn[--Rn],kn[Rn]=null}var In=null,Sn=null,ot=!1,Wn=null;function Zp(n,s){var a=Vn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function em(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,In=n,Sn=As(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,In=n,Sn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ei!==null?{id:Hr,overflow:Wr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Vn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,In=n,Sn=null,!0):!1;default:return!1}}function _h(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vh(n){if(ot){var s=Sn;if(s){var a=s;if(!em(n,s)){if(_h(n))throw Error(t(418));s=As(a.nextSibling);var c=In;s&&em(n,s)?Zp(c,a):(n.flags=n.flags&-4097|2,ot=!1,In=n)}}else{if(_h(n))throw Error(t(418));n.flags=n.flags&-4097|2,ot=!1,In=n}}}function tm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;In=n}function uu(n){if(n!==In)return!1;if(!ot)return tm(n),ot=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!ch(n.type,n.memoizedProps)),s&&(s=Sn)){if(_h(n))throw nm(),Error(t(418));for(;s;)Zp(n,s),s=As(s.nextSibling)}if(tm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Sn=As(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Sn=null}}else Sn=In?As(n.stateNode.nextSibling):null;return!0}function nm(){for(var n=Sn;n;)n=As(n.nextSibling)}function To(){Sn=In=null,ot=!1}function wh(n){Wn===null?Wn=[n]:Wn.push(n)}var g0=W.ReactCurrentBatchConfig;function Va(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(w){var A=d.refs;w===null?delete A[p]:A[p]=w},s._stringRef=p,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function cu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function rm(n){var s=n._init;return s(n._payload)}function sm(n){function s(F,D){if(n){var M=F.deletions;M===null?(F.deletions=[D],F.flags|=16):M.push(D)}}function a(F,D){if(!n)return null;for(;D!==null;)s(F,D),D=D.sibling;return null}function c(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function d(F,D){return F=Os(F,D),F.index=0,F.sibling=null,F}function p(F,D,M){return F.index=M,n?(M=F.alternate,M!==null?(M=M.index,M<D?(F.flags|=2,D):M):(F.flags|=2,D)):(F.flags|=1048576,D)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function A(F,D,M,ee){return D===null||D.tag!==6?(D=hd(M,F.mode,ee),D.return=F,D):(D=d(D,M),D.return=F,D)}function k(F,D,M,ee){var pe=M.type;return pe===C?Y(F,D,M.props.children,ee,M.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Nt&&rm(pe)===D.type)?(ee=d(D,M.props),ee.ref=Va(F,D,M),ee.return=F,ee):(ee=ju(M.type,M.key,M.props,null,F.mode,ee),ee.ref=Va(F,D,M),ee.return=F,ee)}function z(F,D,M,ee){return D===null||D.tag!==4||D.stateNode.containerInfo!==M.containerInfo||D.stateNode.implementation!==M.implementation?(D=dd(M,F.mode,ee),D.return=F,D):(D=d(D,M.children||[]),D.return=F,D)}function Y(F,D,M,ee,pe){return D===null||D.tag!==7?(D=Ri(M,F.mode,ee,pe),D.return=F,D):(D=d(D,M),D.return=F,D)}function J(F,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return D=hd(""+D,F.mode,M),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ie:return M=ju(D.type,D.key,D.props,null,F.mode,M),M.ref=Va(F,null,D),M.return=F,M;case re:return D=dd(D,F.mode,M),D.return=F,D;case Nt:var ee=D._init;return J(F,ee(D._payload),M)}if(at(D)||me(D))return D=Ri(D,F.mode,M,null),D.return=F,D;cu(F,D)}return null}function X(F,D,M,ee){var pe=D!==null?D.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return pe!==null?null:A(F,D,""+M,ee);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ie:return M.key===pe?k(F,D,M,ee):null;case re:return M.key===pe?z(F,D,M,ee):null;case Nt:return pe=M._init,X(F,D,pe(M._payload),ee)}if(at(M)||me(M))return pe!==null?null:Y(F,D,M,ee,null);cu(F,M)}return null}function le(F,D,M,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(M)||null,A(D,F,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ie:return F=F.get(ee.key===null?M:ee.key)||null,k(D,F,ee,pe);case re:return F=F.get(ee.key===null?M:ee.key)||null,z(D,F,ee,pe);case Nt:var ye=ee._init;return le(F,D,M,ye(ee._payload),pe)}if(at(ee)||me(ee))return F=F.get(M)||null,Y(D,F,ee,pe,null);cu(D,ee)}return null}function de(F,D,M,ee){for(var pe=null,ye=null,_e=D,xe=D=0,Pt=null;_e!==null&&xe<M.length;xe++){_e.index>xe?(Pt=_e,_e=null):Pt=_e.sibling;var Ue=X(F,_e,M[xe],ee);if(Ue===null){_e===null&&(_e=Pt);break}n&&_e&&Ue.alternate===null&&s(F,_e),D=p(Ue,D,xe),ye===null?pe=Ue:ye.sibling=Ue,ye=Ue,_e=Pt}if(xe===M.length)return a(F,_e),ot&&Ti(F,xe),pe;if(_e===null){for(;xe<M.length;xe++)_e=J(F,M[xe],ee),_e!==null&&(D=p(_e,D,xe),ye===null?pe=_e:ye.sibling=_e,ye=_e);return ot&&Ti(F,xe),pe}for(_e=c(F,_e);xe<M.length;xe++)Pt=le(_e,F,xe,M[xe],ee),Pt!==null&&(n&&Pt.alternate!==null&&_e.delete(Pt.key===null?xe:Pt.key),D=p(Pt,D,xe),ye===null?pe=Pt:ye.sibling=Pt,ye=Pt);return n&&_e.forEach(function(Ls){return s(F,Ls)}),ot&&Ti(F,xe),pe}function fe(F,D,M,ee){var pe=me(M);if(typeof pe!="function")throw Error(t(150));if(M=pe.call(M),M==null)throw Error(t(151));for(var ye=pe=null,_e=D,xe=D=0,Pt=null,Ue=M.next();_e!==null&&!Ue.done;xe++,Ue=M.next()){_e.index>xe?(Pt=_e,_e=null):Pt=_e.sibling;var Ls=X(F,_e,Ue.value,ee);if(Ls===null){_e===null&&(_e=Pt);break}n&&_e&&Ls.alternate===null&&s(F,_e),D=p(Ls,D,xe),ye===null?pe=Ls:ye.sibling=Ls,ye=Ls,_e=Pt}if(Ue.done)return a(F,_e),ot&&Ti(F,xe),pe;if(_e===null){for(;!Ue.done;xe++,Ue=M.next())Ue=J(F,Ue.value,ee),Ue!==null&&(D=p(Ue,D,xe),ye===null?pe=Ue:ye.sibling=Ue,ye=Ue);return ot&&Ti(F,xe),pe}for(_e=c(F,_e);!Ue.done;xe++,Ue=M.next())Ue=le(_e,F,xe,Ue.value,ee),Ue!==null&&(n&&Ue.alternate!==null&&_e.delete(Ue.key===null?xe:Ue.key),D=p(Ue,D,xe),ye===null?pe=Ue:ye.sibling=Ue,ye=Ue);return n&&_e.forEach(function(Q0){return s(F,Q0)}),ot&&Ti(F,xe),pe}function mt(F,D,M,ee){if(typeof M=="object"&&M!==null&&M.type===C&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case ie:e:{for(var pe=M.key,ye=D;ye!==null;){if(ye.key===pe){if(pe=M.type,pe===C){if(ye.tag===7){a(F,ye.sibling),D=d(ye,M.props.children),D.return=F,F=D;break e}}else if(ye.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Nt&&rm(pe)===ye.type){a(F,ye.sibling),D=d(ye,M.props),D.ref=Va(F,ye,M),D.return=F,F=D;break e}a(F,ye);break}else s(F,ye);ye=ye.sibling}M.type===C?(D=Ri(M.props.children,F.mode,ee,M.key),D.return=F,F=D):(ee=ju(M.type,M.key,M.props,null,F.mode,ee),ee.ref=Va(F,D,M),ee.return=F,F=ee)}return w(F);case re:e:{for(ye=M.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===M.containerInfo&&D.stateNode.implementation===M.implementation){a(F,D.sibling),D=d(D,M.children||[]),D.return=F,F=D;break e}else{a(F,D);break}else s(F,D);D=D.sibling}D=dd(M,F.mode,ee),D.return=F,F=D}return w(F);case Nt:return ye=M._init,mt(F,D,ye(M._payload),ee)}if(at(M))return de(F,D,M,ee);if(me(M))return fe(F,D,M,ee);cu(F,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,D!==null&&D.tag===6?(a(F,D.sibling),D=d(D,M),D.return=F,F=D):(a(F,D),D=hd(M,F.mode,ee),D.return=F,F=D),w(F)):a(F,D)}return mt}var Io=sm(!0),im=sm(!1),hu=Cs(null),du=null,So=null,xh=null;function Eh(){xh=So=du=null}function Th(n){var s=hu.current;rt(hu),n._currentValue=s}function Ih(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Ao(n,s){du=n,xh=So=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(ln=!0),n.firstContext=null)}function Pn(n){var s=n._currentValue;if(xh!==n)if(n={context:n,memoizedValue:s,next:null},So===null){if(du===null)throw Error(t(308));So=n,du.dependencies={lanes:0,firstContext:n}}else So=So.next=n;return s}var Ii=null;function Sh(n){Ii===null?Ii=[n]:Ii.push(n)}function om(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Sh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Kr(n,c)}function Kr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ks=!1;function Ah(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function am(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Rs(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Le&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Kr(n,a)}return d=c.interleaved,d===null?(s.next=s,Sh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Kr(n,a)}function fu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ga(n,a)}}function lm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function pu(n,s,a,c){var d=n.updateQueue;ks=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var k=A,z=k.next;k.next=null,w===null?p=z:w.next=z,w=k;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==w&&(A===null?Y.firstBaseUpdate=z:A.next=z,Y.lastBaseUpdate=k))}if(p!==null){var J=d.baseState;w=0,Y=z=k=null,A=p;do{var X=A.lane,le=A.eventTime;if((c&X)===X){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=n,fe=A;switch(X=s,le=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){J=de.call(le,J,X);break e}J=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,X=typeof de=="function"?de.call(le,J,X):de,X==null)break e;J=ue({},J,X);break e;case 2:ks=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[A]:X.push(A))}else le={eventTime:le,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(z=Y=le,k=J):Y=Y.next=le,w|=X;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;X=A,A=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Y===null&&(k=J),d.baseState=k,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);Ci|=w,n.lanes=w,n.memoizedState=J}}function um(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Fa={},vr=Cs(Fa),Oa=Cs(Fa),La=Cs(Fa);function Si(n){if(n===Fa)throw Error(t(174));return n}function Ch(n,s){switch(Ye(La,s),Ye(Oa,n),Ye(vr,Fa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:On(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=On(s,n)}rt(vr),Ye(vr,s)}function Co(){rt(vr),rt(Oa),rt(La)}function cm(n){Si(La.current);var s=Si(vr.current),a=On(s,n.type);s!==a&&(Ye(Oa,n),Ye(vr,a))}function bh(n){Oa.current===n&&(rt(vr),rt(Oa))}var lt=Cs(0);function mu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh=[];function kh(){for(var n=0;n<Nh.length;n++)Nh[n]._workInProgressVersionPrimary=null;Nh.length=0}var gu=W.ReactCurrentDispatcher,Rh=W.ReactCurrentBatchConfig,Ai=0,ut=null,At=null,kt=null,yu=!1,Ma=!1,Ua=0,y0=0;function Kt(){throw Error(t(321))}function Ph(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Hn(n[a],s[a]))return!1;return!0}function Dh(n,s,a,c,d,p){if(Ai=p,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,gu.current=n===null||n.memoizedState===null?x0:E0,n=a(c,d),Ma){p=0;do{if(Ma=!1,Ua=0,25<=p)throw Error(t(301));p+=1,kt=At=null,s.updateQueue=null,gu.current=T0,n=a(c,d)}while(Ma)}if(gu.current=wu,s=At!==null&&At.next!==null,Ai=0,kt=At=ut=null,yu=!1,s)throw Error(t(300));return n}function jh(){var n=Ua!==0;return Ua=0,n}function wr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ut.memoizedState=kt=n:kt=kt.next=n,kt}function Dn(){if(At===null){var n=ut.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var s=kt===null?ut.memoizedState:kt.next;if(s!==null)kt=s,At=n;else{if(n===null)throw Error(t(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},kt===null?ut.memoizedState=kt=n:kt=kt.next=n}return kt}function za(n,s){return typeof s=="function"?s(n):s}function Vh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=At,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var A=w=null,k=null,z=p;do{var Y=z.lane;if((Ai&Y)===Y)k!==null&&(k=k.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var J={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};k===null?(A=k=J,w=c):k=k.next=J,ut.lanes|=Y,Ci|=Y}z=z.next}while(z!==null&&z!==p);k===null?w=c:k.next=A,Hn(c,s.memoizedState)||(ln=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,ut.lanes|=p,Ci|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Fh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);Hn(p,s.memoizedState)||(ln=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function hm(){}function dm(n,s){var a=ut,c=Dn(),d=s(),p=!Hn(c.memoizedState,d);if(p&&(c.memoizedState=d,ln=!0),c=c.queue,Oh(mm.bind(null,a,c,n),[n]),c.getSnapshot!==s||p||kt!==null&&kt.memoizedState.tag&1){if(a.flags|=2048,Ba(9,pm.bind(null,a,c,d,s),void 0,null),Rt===null)throw Error(t(349));(Ai&30)!==0||fm(a,s,d)}return d}function fm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function pm(n,s,a,c){s.value=a,s.getSnapshot=c,gm(s)&&ym(n)}function mm(n,s,a){return a(function(){gm(s)&&ym(n)})}function gm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Hn(n,a)}catch{return!0}}function ym(n){var s=Kr(n,1);s!==null&&Xn(s,n,1,-1)}function _m(n){var s=wr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:n},s.queue=n,n=n.dispatch=w0.bind(null,ut,n),[s.memoizedState,n]}function Ba(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function vm(){return Dn().memoizedState}function _u(n,s,a,c){var d=wr();ut.flags|=n,d.memoizedState=Ba(1|s,a,void 0,c===void 0?null:c)}function vu(n,s,a,c){var d=Dn();c=c===void 0?null:c;var p=void 0;if(At!==null){var w=At.memoizedState;if(p=w.destroy,c!==null&&Ph(c,w.deps)){d.memoizedState=Ba(s,a,p,c);return}}ut.flags|=n,d.memoizedState=Ba(1|s,a,p,c)}function wm(n,s){return _u(8390656,8,n,s)}function Oh(n,s){return vu(2048,8,n,s)}function xm(n,s){return vu(4,2,n,s)}function Em(n,s){return vu(4,4,n,s)}function Tm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Im(n,s,a){return a=a!=null?a.concat([n]):null,vu(4,4,Tm.bind(null,s,n),a)}function Lh(){}function Sm(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ph(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Am(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ph(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Cm(n,s,a){return(Ai&21)===0?(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=a):(Hn(a,s)||(a=pa(),ut.lanes|=a,Ci|=a,n.baseState=!0),s)}function _0(n,s){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=Rh.transition;Rh.transition={};try{n(!1),s()}finally{Fe=a,Rh.transition=c}}function bm(){return Dn().memoizedState}function v0(n,s,a){var c=Vs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Nm(n))km(s,a);else if(a=om(n,s,a,c),a!==null){var d=tn();Xn(a,n,c,d),Rm(a,s,c)}}function w0(n,s,a){var c=Vs(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nm(n))km(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,A=p(w,a);if(d.hasEagerState=!0,d.eagerState=A,Hn(A,w)){var k=s.interleaved;k===null?(d.next=d,Sh(s)):(d.next=k.next,k.next=d),s.interleaved=d;return}}catch{}finally{}a=om(n,s,d,c),a!==null&&(d=tn(),Xn(a,n,c,d),Rm(a,s,c))}}function Nm(n){var s=n.alternate;return n===ut||s!==null&&s===ut}function km(n,s){Ma=yu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Rm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ga(n,a)}}var wu={readContext:Pn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},x0={readContext:Pn,useCallback:function(n,s){return wr().memoizedState=[n,s===void 0?null:s],n},useContext:Pn,useEffect:wm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,_u(4194308,4,Tm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return _u(4194308,4,n,s)},useInsertionEffect:function(n,s){return _u(4,2,n,s)},useMemo:function(n,s){var a=wr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=wr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=v0.bind(null,ut,n),[c.memoizedState,n]},useRef:function(n){var s=wr();return n={current:n},s.memoizedState=n},useState:_m,useDebugValue:Lh,useDeferredValue:function(n){return wr().memoizedState=n},useTransition:function(){var n=_m(!1),s=n[0];return n=_0.bind(null,n[1]),wr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=ut,d=wr();if(ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Rt===null)throw Error(t(349));(Ai&30)!==0||fm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,wm(mm.bind(null,c,p,n),[n]),c.flags|=2048,Ba(9,pm.bind(null,c,p,a,s),void 0,null),a},useId:function(){var n=wr(),s=Rt.identifierPrefix;if(ot){var a=Wr,c=Hr;a=(c&~(1<<32-vn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=y0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},E0={readContext:Pn,useCallback:Sm,useContext:Pn,useEffect:Oh,useImperativeHandle:Im,useInsertionEffect:xm,useLayoutEffect:Em,useMemo:Am,useReducer:Vh,useRef:vm,useState:function(){return Vh(za)},useDebugValue:Lh,useDeferredValue:function(n){var s=Dn();return Cm(s,At.memoizedState,n)},useTransition:function(){var n=Vh(za)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:hm,useSyncExternalStore:dm,useId:bm,unstable_isNewReconciler:!1},T0={readContext:Pn,useCallback:Sm,useContext:Pn,useEffect:Oh,useImperativeHandle:Im,useInsertionEffect:xm,useLayoutEffect:Em,useMemo:Am,useReducer:Fh,useRef:vm,useState:function(){return Fh(za)},useDebugValue:Lh,useDeferredValue:function(n){var s=Dn();return At===null?s.memoizedState=n:Cm(s,At.memoizedState,n)},useTransition:function(){var n=Fh(za)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:hm,useSyncExternalStore:dm,useId:bm,unstable_isNewReconciler:!1};function Kn(n,s){if(n&&n.defaultProps){s=ue({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Mh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ue({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var xu={isMounted:function(n){return(n=n._reactInternals)?$n(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=tn(),d=Vs(n),p=Gr(c,d);p.payload=s,a!=null&&(p.callback=a),s=Rs(n,p,d),s!==null&&(Xn(s,n,d,c),fu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=tn(),d=Vs(n),p=Gr(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Rs(n,p,d),s!==null&&(Xn(s,n,d,c),fu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=tn(),c=Vs(n),d=Gr(a,c);d.tag=2,s!=null&&(d.callback=s),s=Rs(n,d,c),s!==null&&(Xn(s,n,c,a),fu(s,n,c))}};function Pm(n,s,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):s.prototype&&s.prototype.isPureReactComponent?!ba(a,c)||!ba(d,p):!0}function Dm(n,s,a){var c=!1,d=bs,p=s.contextType;return typeof p=="object"&&p!==null?p=Pn(p):(d=an(s)?xi:Wt.current,c=s.contextTypes,p=(c=c!=null)?wo(n,d):bs),s=new s(a,p),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=xu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),s}function jm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&xu.enqueueReplaceState(s,s.state,null)}function Uh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Ah(n);var p=s.contextType;typeof p=="object"&&p!==null?d.context=Pn(p):(p=an(s)?xi:Wt.current,d.context=wo(n,p)),d.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Mh(n,s,p,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&xu.enqueueReplaceState(d,d.state,null),pu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function bo(n,s){try{var a="",c=s;do a+=ke(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:s,stack:d,digest:null}}function zh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Bh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var I0=typeof WeakMap=="function"?WeakMap:Map;function Vm(n,s,a){a=Gr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){bu||(bu=!0,rd=c),Bh(n,s)},a}function Fm(n,s,a){a=Gr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Bh(n,s)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Bh(n,s),typeof c!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Om(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new I0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=L0.bind(null,n,s,a),s.then(n,n))}function Lm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Mm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Gr(-1,1),s.tag=2,Rs(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var S0=W.ReactCurrentOwner,ln=!1;function en(n,s,a,c){s.child=n===null?im(s,null,a,c):Io(s,n.child,a,c)}function Um(n,s,a,c,d){a=a.render;var p=s.ref;return Ao(s,d),c=Dh(n,s,a,c,p,d),a=jh(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Qr(n,s,d)):(ot&&a&&gh(s),s.flags|=1,en(n,s,c,d),s.child)}function zm(n,s,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!cd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Bm(n,s,p,c,d)):(n=ju(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(w,c)&&n.ref===s.ref)return Qr(n,s,d)}return s.flags|=1,n=Os(p,c),n.ref=s.ref,n.return=s,s.child=n}function Bm(n,s,a,c,d){if(n!==null){var p=n.memoizedProps;if(ba(p,c)&&n.ref===s.ref)if(ln=!1,s.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(ln=!0);else return s.lanes=n.lanes,Qr(n,s,d)}return $h(n,s,a,c,d)}function $m(n,s,a){var c=s.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ko,An),An|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ye(ko,An),An|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ye(ko,An),An|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,Ye(ko,An),An|=c;return en(n,s,d,a),s.child}function qm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function $h(n,s,a,c,d){var p=an(a)?xi:Wt.current;return p=wo(s,p),Ao(s,d),a=Dh(n,s,a,c,p,d),c=jh(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Qr(n,s,d)):(ot&&c&&gh(s),s.flags|=1,en(n,s,a,d),s.child)}function Hm(n,s,a,c,d){if(an(a)){var p=!0;iu(s)}else p=!1;if(Ao(s,d),s.stateNode===null)Tu(n,s),Dm(s,a,c),Uh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var k=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=Pn(z):(z=an(a)?xi:Wt.current,z=wo(s,z));var Y=a.getDerivedStateFromProps,J=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||k!==z)&&jm(s,w,c,z),ks=!1;var X=s.memoizedState;w.state=X,pu(s,c,w,d),k=s.memoizedState,A!==c||X!==k||on.current||ks?(typeof Y=="function"&&(Mh(s,a,Y,c),k=s.memoizedState),(A=ks||Pm(s,a,A,c,X,k,z))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=k),w.props=c,w.state=k,w.context=z,c=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,am(n,s),A=s.memoizedProps,z=s.type===s.elementType?A:Kn(s.type,A),w.props=z,J=s.pendingProps,X=w.context,k=a.contextType,typeof k=="object"&&k!==null?k=Pn(k):(k=an(a)?xi:Wt.current,k=wo(s,k));var le=a.getDerivedStateFromProps;(Y=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==J||X!==k)&&jm(s,w,c,k),ks=!1,X=s.memoizedState,w.state=X,pu(s,c,w,d);var de=s.memoizedState;A!==J||X!==de||on.current||ks?(typeof le=="function"&&(Mh(s,a,le,c),de=s.memoizedState),(z=ks||Pm(s,a,z,c,X,de,k)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,de,k),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,de,k)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=de),w.props=c,w.state=de,w.context=k,c=z):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),c=!1)}return qh(n,s,a,c,p,d)}function qh(n,s,a,c,d,p){qm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Xp(s,a,!1),Qr(n,s,p);c=s.stateNode,S0.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Io(s,n.child,null,p),s.child=Io(s,null,A,p)):en(n,s,A,p),s.memoizedState=c.state,d&&Xp(s,a,!0),s.child}function Wm(n){var s=n.stateNode;s.pendingContext?Gp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Gp(n,s.context,!1),Ch(n,s.containerInfo)}function Km(n,s,a,c,d){return To(),wh(d),s.flags|=256,en(n,s,a,c),s.child}var Hh={dehydrated:null,treeContext:null,retryLane:0};function Wh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gm(n,s,a){var c=s.pendingProps,d=lt.current,p=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(p=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(lt,d&1),n===null)return vh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=s.mode,p=s.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Vu(w,c,0,null),n=Ri(n,c,a,null),p.return=s,n.return=s,p.sibling=n,s.child=p,s.child.memoizedState=Wh(a),s.memoizedState=Hh,n):Kh(s,w));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return A0(n,s,w,c,A,d,a);if(p){p=c.fallback,w=s.mode,d=n.child,A=d.sibling;var k={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=k,s.deletions=null):(c=Os(d,k),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?p=Os(A,p):(p=Ri(p,w,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,w=n.child.memoizedState,w=w===null?Wh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,s.memoizedState=Hh,c}return p=n.child,n=p.sibling,c=Os(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Kh(n,s){return s=Vu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Eu(n,s,a,c){return c!==null&&wh(c),Io(s,n.child,null,a),n=Kh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function A0(n,s,a,c,d,p,w){if(a)return s.flags&256?(s.flags&=-257,c=zh(Error(t(422))),Eu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=Vu({mode:"visible",children:c.children},d,0,null),p=Ri(p,d,w,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&Io(s,n.child,null,w),s.child.memoizedState=Wh(w),s.memoizedState=Hh,p);if((s.mode&1)===0)return Eu(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,p=Error(t(419)),c=zh(p,c,void 0),Eu(n,s,w,c)}if(A=(w&n.childLanes)!==0,ln||A){if(c=Rt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Kr(n,d),Xn(c,n,d,-1))}return ud(),c=zh(Error(t(421))),Eu(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=M0.bind(null,n),d._reactRetry=s,null):(n=p.treeContext,Sn=As(d.nextSibling),In=s,ot=!0,Wn=null,n!==null&&(kn[Rn++]=Hr,kn[Rn++]=Wr,kn[Rn++]=Ei,Hr=n.id,Wr=n.overflow,Ei=s),s=Kh(s,c.children),s.flags|=4096,s)}function Qm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ih(n.return,s,a)}function Gh(n,s,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Xm(n,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(en(n,s,c.children,a),c=lt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Qm(n,a,s);else if(n.tag===19)Qm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(lt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&mu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Gh(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&mu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Gh(s,!0,a,null,p);break;case"together":Gh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Qr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ci|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Os(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Os(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function C0(n,s,a){switch(s.tag){case 3:Wm(s),To();break;case 5:cm(s);break;case 1:an(s.type)&&iu(s);break;case 4:Ch(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ye(hu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ye(lt,lt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Gm(n,s,a):(Ye(lt,lt.current&1),n=Qr(n,s,a),n!==null?n.sibling:null);Ye(lt,lt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Xm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(lt,lt.current),c)break;return null;case 22:case 23:return s.lanes=0,$m(n,s,a)}return Qr(n,s,a)}var Ym,Qh,Jm,Zm;Ym=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Qh=function(){},Jm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,Si(vr.current);var p=null;switch(a){case"input":d=Pr(n,d),c=Pr(n,c),p=[];break;case"select":d=ue({},d,{value:void 0}),c=ue({},c,{value:void 0}),p=[];break;case"textarea":d=fs(n,d),c=fs(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=nu)}gn(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var A=d[z];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var k=c[z];if(A=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&k!==A&&(k!=null||A!=null))if(z==="style")if(A){for(w in A)!A.hasOwnProperty(w)||k&&k.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in k)k.hasOwnProperty(w)&&A[w]!==k[w]&&(a||(a={}),a[w]=k[w])}else a||(p||(p=[]),p.push(z,a)),a=k;else z==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(p=p||[]).push(z,k)):z==="children"?typeof k!="string"&&typeof k!="number"||(p=p||[]).push(z,""+k):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(k!=null&&z==="onScroll"&&nt("scroll",n),p||A===k||(p=[])):(p=p||[]).push(z,k))}a&&(p=p||[]).push("style",a);var z=p;(s.updateQueue=z)&&(s.flags|=4)}},Zm=function(n,s,a,c){a!==c&&(s.flags|=4)};function $a(n,s){if(!ot)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Gt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function b0(n,s,a){var c=s.pendingProps;switch(yh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(s),null;case 1:return an(s.type)&&su(),Gt(s),null;case 3:return c=s.stateNode,Co(),rt(on),rt(Wt),kh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(uu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wn!==null&&(od(Wn),Wn=null))),Qh(n,s),Gt(s),null;case 5:bh(s);var d=Si(La.current);if(a=s.type,n!==null&&s.stateNode!=null)Jm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Gt(s),null}if(n=Si(vr.current),uu(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[_r]=s,c[Da]=p,n=(s.mode&1)!==0,a){case"dialog":nt("cancel",c),nt("close",c);break;case"iframe":case"object":case"embed":nt("load",c);break;case"video":case"audio":for(d=0;d<ka.length;d++)nt(ka[d],c);break;case"source":nt("error",c);break;case"img":case"image":case"link":nt("error",c),nt("load",c);break;case"details":nt("toggle",c);break;case"input":Wi(c,p),nt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},nt("invalid",c);break;case"textarea":Ki(c,p),nt("invalid",c)}gn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var A=p[w];w==="children"?typeof A=="string"?c.textContent!==A&&(p.suppressHydrationWarning!==!0&&tu(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(p.suppressHydrationWarning!==!0&&tu(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&nt("scroll",c)}switch(a){case"input":us(c),ds(c,p,!0);break;case"textarea":us(c),rr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=nu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ps(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[_r]=s,n[Da]=c,Ym(n,s,!1,!1),s.stateNode=n;e:{switch(w=gs(a,c),a){case"dialog":nt("cancel",n),nt("close",n),d=c;break;case"iframe":case"object":case"embed":nt("load",n),d=c;break;case"video":case"audio":for(d=0;d<ka.length;d++)nt(ka[d],n);d=c;break;case"source":nt("error",n),d=c;break;case"img":case"image":case"link":nt("error",n),nt("load",n),d=c;break;case"details":nt("toggle",n),d=c;break;case"input":Wi(n,c),d=Pr(n,c),nt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ue({},c,{value:void 0}),nt("invalid",n);break;case"textarea":Ki(n,c),d=fs(n,c),nt("invalid",n);break;default:d=c}gn(a,d),A=d;for(p in A)if(A.hasOwnProperty(p)){var k=A[p];p==="style"?ms(n,k):p==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Qi(n,k)):p==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&jr(n,k):typeof k=="number"&&jr(n,""+k):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?k!=null&&p==="onScroll"&&nt("scroll",n):k!=null&&oe(n,p,k,w))}switch(a){case"input":us(n),ds(n,c,!1);break;case"textarea":us(n),rr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ve(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?mn(n,!!c.multiple,p,!1):c.defaultValue!=null&&mn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=nu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Gt(s),null;case 6:if(n&&s.stateNode!=null)Zm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Si(La.current),Si(vr.current),uu(s)){if(c=s.stateNode,a=s.memoizedProps,c[_r]=s,(p=c.nodeValue!==a)&&(n=In,n!==null))switch(n.tag){case 3:tu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&tu(c.nodeValue,a,(n.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[_r]=s,s.stateNode=c}return Gt(s),null;case 13:if(rt(lt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ot&&Sn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)nm(),To(),s.flags|=98560,p=!1;else if(p=uu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[_r]=s}else To(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),p=!1}else Wn!==null&&(od(Wn),Wn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(lt.current&1)!==0?Ct===0&&(Ct=3):ud())),s.updateQueue!==null&&(s.flags|=4),Gt(s),null);case 4:return Co(),Qh(n,s),n===null&&Ra(s.stateNode.containerInfo),Gt(s),null;case 10:return Th(s.type._context),Gt(s),null;case 17:return an(s.type)&&su(),Gt(s),null;case 19:if(rt(lt),p=s.memoizedState,p===null)return Gt(s),null;if(c=(s.flags&128)!==0,w=p.rendering,w===null)if(c)$a(p,!1);else{if(Ct!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=mu(n),w!==null){for(s.flags|=128,$a(p,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(lt,lt.current&1|2),s.child}n=n.sibling}p.tail!==null&&tt()>Ro&&(s.flags|=128,c=!0,$a(p,!1),s.lanes=4194304)}else{if(!c)if(n=mu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$a(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!ot)return Gt(s),null}else 2*tt()-p.renderingStartTime>Ro&&a!==1073741824&&(s.flags|=128,c=!0,$a(p,!1),s.lanes=4194304);p.isBackwards?(w.sibling=s.child,s.child=w):(a=p.last,a!==null?a.sibling=w:s.child=w,p.last=w)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=tt(),s.sibling=null,a=lt.current,Ye(lt,c?a&1|2:a&1),s):(Gt(s),null);case 22:case 23:return ld(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(An&1073741824)!==0&&(Gt(s),s.subtreeFlags&6&&(s.flags|=8192)):Gt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function N0(n,s){switch(yh(s),s.tag){case 1:return an(s.type)&&su(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Co(),rt(on),rt(Wt),kh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return bh(s),null;case 13:if(rt(lt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));To()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return rt(lt),null;case 4:return Co(),null;case 10:return Th(s.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var Iu=!1,Qt=!1,k0=typeof WeakSet=="function"?WeakSet:Set,he=null;function No(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){dt(n,s,c)}else a.current=null}function Xh(n,s,a){try{a()}catch(c){dt(n,s,c)}}var eg=!1;function R0(n,s){if(lh=Ur,n=Pp(),eh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,A=-1,k=-1,z=0,Y=0,J=n,X=null;t:for(;;){for(var le;J!==a||d!==0&&J.nodeType!==3||(A=w+d),J!==p||c!==0&&J.nodeType!==3||(k=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(le=J.firstChild)!==null;)X=J,J=le;for(;;){if(J===n)break t;if(X===a&&++z===d&&(A=w),X===p&&++Y===c&&(k=w),(le=J.nextSibling)!==null)break;J=X,X=J.parentNode}J=le}a=A===-1||k===-1?null:{start:A,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(uh={focusedElem:n,selectionRange:a},Ur=!1,he=s;he!==null;)if(s=he,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,he=n;else for(;he!==null;){s=he;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,mt=de.memoizedState,F=s.stateNode,D=F.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Kn(s.type,fe),mt);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var M=s.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){dt(s,s.return,ee)}if(n=s.sibling,n!==null){n.return=s.return,he=n;break}he=s.return}return de=eg,eg=!1,de}function qa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Xh(s,a,p)}d=d.next}while(d!==c)}}function Su(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Yh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function tg(n){var s=n.alternate;s!==null&&(n.alternate=null,tg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[_r],delete s[Da],delete s[fh],delete s[f0],delete s[p0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ng(n){return n.tag===5||n.tag===3||n.tag===4}function rg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ng(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=nu));else if(c!==4&&(n=n.child,n!==null))for(Jh(n,s,a),n=n.sibling;n!==null;)Jh(n,s,a),n=n.sibling}function Zh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Zh(n,s,a),n=n.sibling;n!==null;)Zh(n,s,a),n=n.sibling}var Lt=null,Gn=!1;function Ps(n,s,a){for(a=a.child;a!==null;)sg(n,s,a),a=a.sibling}function sg(n,s,a){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(hi,a)}catch{}switch(a.tag){case 5:Qt||No(a,s);case 6:var c=Lt,d=Gn;Lt=null,Ps(n,s,a),Lt=c,Gn=d,Lt!==null&&(Gn?(n=Lt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Lt.removeChild(a.stateNode));break;case 18:Lt!==null&&(Gn?(n=Lt,a=a.stateNode,n.nodeType===8?dh(n.parentNode,a):n.nodeType===1&&dh(n,a),Es(n)):dh(Lt,a.stateNode));break;case 4:c=Lt,d=Gn,Lt=a.stateNode.containerInfo,Gn=!0,Ps(n,s,a),Lt=c,Gn=d;break;case 0:case 11:case 14:case 15:if(!Qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&Xh(a,s,w),d=d.next}while(d!==c)}Ps(n,s,a);break;case 1:if(!Qt&&(No(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){dt(a,s,A)}Ps(n,s,a);break;case 21:Ps(n,s,a);break;case 22:a.mode&1?(Qt=(c=Qt)||a.memoizedState!==null,Ps(n,s,a),Qt=c):Ps(n,s,a);break;default:Ps(n,s,a)}}function ig(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new k0),s.forEach(function(c){var d=U0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Qn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:Lt=A.stateNode,Gn=!1;break e;case 3:Lt=A.stateNode.containerInfo,Gn=!0;break e;case 4:Lt=A.stateNode.containerInfo,Gn=!0;break e}A=A.return}if(Lt===null)throw Error(t(160));sg(p,w,d),Lt=null,Gn=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch(z){dt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)og(s,n),s=s.sibling}function og(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Qn(s,n),xr(n),c&4){try{qa(3,n,n.return),Su(3,n)}catch(fe){dt(n,n.return,fe)}try{qa(5,n,n.return)}catch(fe){dt(n,n.return,fe)}}break;case 1:Qn(s,n),xr(n),c&512&&a!==null&&No(a,a.return);break;case 5:if(Qn(s,n),xr(n),c&512&&a!==null&&No(a,a.return),n.flags&32){var d=n.stateNode;try{jr(d,"")}catch(fe){dt(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&p.type==="radio"&&p.name!=null&&hs(d,p),gs(A,w);var z=gs(A,p);for(w=0;w<k.length;w+=2){var Y=k[w],J=k[w+1];Y==="style"?ms(d,J):Y==="dangerouslySetInnerHTML"?Qi(d,J):Y==="children"?jr(d,J):oe(d,Y,J,z)}switch(A){case"input":Dr(d,p);break;case"textarea":Gi(d,p);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?mn(d,!!p.multiple,le,!1):X!==!!p.multiple&&(p.defaultValue!=null?mn(d,!!p.multiple,p.defaultValue,!0):mn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Da]=p}catch(fe){dt(n,n.return,fe)}}break;case 6:if(Qn(s,n),xr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(fe){dt(n,n.return,fe)}}break;case 3:if(Qn(s,n),xr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Es(s.containerInfo)}catch(fe){dt(n,n.return,fe)}break;case 4:Qn(s,n),xr(n);break;case 13:Qn(s,n),xr(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(nd=tt())),c&4&&ig(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Qt=(z=Qt)||Y,Qn(s,n),Qt=z):Qn(s,n),xr(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(he=n,Y=n.child;Y!==null;){for(J=he=Y;he!==null;){switch(X=he,le=X.child,X.tag){case 0:case 11:case 14:case 15:qa(4,X,X.return);break;case 1:No(X,X.return);var de=X.stateNode;if(typeof de.componentWillUnmount=="function"){c=X,a=X.return;try{s=c,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(fe){dt(c,a,fe)}}break;case 5:No(X,X.return);break;case 22:if(X.memoizedState!==null){ug(J);continue}}le!==null?(le.return=X,he=le):ug(J)}Y=Y.sibling}e:for(Y=null,J=n;;){if(J.tag===5){if(Y===null){Y=J;try{d=J.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(A=J.stateNode,k=J.memoizedProps.style,w=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=Mn("display",w))}catch(fe){dt(n,n.return,fe)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=z?"":J.memoizedProps}catch(fe){dt(n,n.return,fe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Qn(s,n),xr(n),c&4&&ig(n);break;case 21:break;default:Qn(s,n),xr(n)}}function xr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(ng(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(jr(d,""),c.flags&=-33);var p=rg(n);Zh(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,A=rg(n);Jh(n,A,w);break;default:throw Error(t(161))}}catch(k){dt(n,n.return,k)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function P0(n,s,a){he=n,ag(n)}function ag(n,s,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Iu;if(!w){var A=d.alternate,k=A!==null&&A.memoizedState!==null||Qt;A=Iu;var z=Qt;if(Iu=w,(Qt=k)&&!z)for(he=d;he!==null;)w=he,k=w.child,w.tag===22&&w.memoizedState!==null?cg(d):k!==null?(k.return=w,he=k):cg(d);for(;p!==null;)he=p,ag(p),p=p.sibling;he=d,Iu=A,Qt=z}lg(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,he=p):lg(n)}}function lg(n){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Qt||Su(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Qt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Kn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&um(s,p,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}um(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&Es(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||s.flags&512&&Yh(s)}catch(X){dt(s,s.return,X)}}if(s===n){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function ug(n){for(;he!==null;){var s=he;if(s===n){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function cg(n){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Su(4,s)}catch(k){dt(s,a,k)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(k){dt(s,d,k)}}var p=s.return;try{Yh(s)}catch(k){dt(s,p,k)}break;case 5:var w=s.return;try{Yh(s)}catch(k){dt(s,w,k)}}}catch(k){dt(s,s.return,k)}if(s===n){he=null;break}var A=s.sibling;if(A!==null){A.return=s.return,he=A;break}he=s.return}}var D0=Math.ceil,Au=W.ReactCurrentDispatcher,ed=W.ReactCurrentOwner,jn=W.ReactCurrentBatchConfig,Le=0,Rt=null,wt=null,Mt=0,An=0,ko=Cs(0),Ct=0,Ha=null,Ci=0,Cu=0,td=0,Wa=null,un=null,nd=0,Ro=1/0,Xr=null,bu=!1,rd=null,Ds=null,Nu=!1,js=null,ku=0,Ka=0,sd=null,Ru=-1,Pu=0;function tn(){return(Le&6)!==0?tt():Ru!==-1?Ru:Ru=tt()}function Vs(n){return(n.mode&1)===0?1:(Le&2)!==0&&Mt!==0?Mt&-Mt:g0.transition!==null?(Pu===0&&(Pu=pa()),Pu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:io(n.type)),n)}function Xn(n,s,a,c){if(50<Ka)throw Ka=0,sd=null,Error(t(185));mi(n,a,c),((Le&2)===0||n!==Rt)&&(n===Rt&&((Le&2)===0&&(Cu|=a),Ct===4&&Fs(n,Mt)),cn(n,c),a===1&&Le===0&&(s.mode&1)===0&&(Ro=tt()+500,ou&&Ns()))}function cn(n,s){var a=n.callbackNode;pi(n,s);var c=Or(n,n===Rt?Mt:0);if(c===0)a!==null&&Ji(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Ji(a),s===1)n.tag===0?m0(dg.bind(null,n)):Yp(dg.bind(null,n)),h0(function(){(Le&6)===0&&Ns()}),a=null;else{switch(lr(c)){case 1:a=Zi;break;case 4:a=ha;break;case 16:a=ci;break;case 536870912:a=eo;break;default:a=ci}a=wg(a,hg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function hg(n,s){if(Ru=-1,Pu=0,(Le&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Po()&&n.callbackNode!==a)return null;var c=Or(n,n===Rt?Mt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Du(n,c);else{s=c;var d=Le;Le|=2;var p=pg();(Rt!==n||Mt!==s)&&(Xr=null,Ro=tt()+500,Ni(n,s));do try{F0();break}catch(A){fg(n,A)}while(!0);Eh(),Au.current=p,Le=d,wt!==null?s=0:(Rt=null,Mt=0,s=Ct)}if(s!==0){if(s===2&&(d=fa(n),d!==0&&(c=d,s=id(n,d))),s===1)throw a=Ha,Ni(n,0),Fs(n,c),cn(n,tt()),a;if(s===6)Fs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!j0(d)&&(s=Du(n,c),s===2&&(p=fa(n),p!==0&&(c=p,s=id(n,p))),s===1))throw a=Ha,Ni(n,0),Fs(n,c),cn(n,tt()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ki(n,un,Xr);break;case 3:if(Fs(n,c),(c&130023424)===c&&(s=nd+500-tt(),10<s)){if(Or(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){tn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=hh(ki.bind(null,n,un,Xr),s);break}ki(n,un,Xr);break;case 4:if(Fs(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-vn(c);p=1<<w,w=s[w],w>d&&(d=w),c&=~p}if(c=d,c=tt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*D0(c/1960))-c,10<c){n.timeoutHandle=hh(ki.bind(null,n,un,Xr),c);break}ki(n,un,Xr);break;case 5:ki(n,un,Xr);break;default:throw Error(t(329))}}}return cn(n,tt()),n.callbackNode===a?hg.bind(null,n):null}function id(n,s){var a=Wa;return n.current.memoizedState.isDehydrated&&(Ni(n,s).flags|=256),n=Du(n,s),n!==2&&(s=un,un=a,s!==null&&od(s)),n}function od(n){un===null?un=n:un.push.apply(un,n)}function j0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Hn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fs(n,s){for(s&=~td,s&=~Cu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-vn(s),c=1<<a;n[a]=-1,s&=~c}}function dg(n){if((Le&6)!==0)throw Error(t(327));Po();var s=Or(n,0);if((s&1)===0)return cn(n,tt()),null;var a=Du(n,s);if(n.tag!==0&&a===2){var c=fa(n);c!==0&&(s=c,a=id(n,c))}if(a===1)throw a=Ha,Ni(n,0),Fs(n,s),cn(n,tt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ki(n,un,Xr),cn(n,tt()),null}function ad(n,s){var a=Le;Le|=1;try{return n(s)}finally{Le=a,Le===0&&(Ro=tt()+500,ou&&Ns())}}function bi(n){js!==null&&js.tag===0&&(Le&6)===0&&Po();var s=Le;Le|=1;var a=jn.transition,c=Fe;try{if(jn.transition=null,Fe=1,n)return n()}finally{Fe=c,jn.transition=a,Le=s,(Le&6)===0&&Ns()}}function ld(){An=ko.current,rt(ko)}function Ni(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,c0(a)),wt!==null)for(a=wt.return;a!==null;){var c=a;switch(yh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&su();break;case 3:Co(),rt(on),rt(Wt),kh();break;case 5:bh(c);break;case 4:Co();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Th(c.type._context);break;case 22:case 23:ld()}a=a.return}if(Rt=n,wt=n=Os(n.current,null),Mt=An=s,Ct=0,Ha=null,td=Cu=Ci=0,un=Wa=null,Ii!==null){for(s=0;s<Ii.length;s++)if(a=Ii[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}Ii=null}return n}function fg(n,s){do{var a=wt;try{if(Eh(),gu.current=wu,yu){for(var c=ut.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}yu=!1}if(Ai=0,kt=At=ut=null,Ma=!1,Ua=0,ed.current=null,a===null||a.return===null){Ct=1,Ha=s,wt=null;break}e:{var p=n,w=a.return,A=a,k=s;if(s=Mt,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var z=k,Y=A,J=Y.tag;if((Y.mode&1)===0&&(J===0||J===11||J===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=Lm(w);if(le!==null){le.flags&=-257,Mm(le,w,A,p,s),le.mode&1&&Om(p,z,s),s=le,k=z;var de=s.updateQueue;if(de===null){var fe=new Set;fe.add(k),s.updateQueue=fe}else de.add(k);break e}else{if((s&1)===0){Om(p,z,s),ud();break e}k=Error(t(426))}}else if(ot&&A.mode&1){var mt=Lm(w);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),Mm(mt,w,A,p,s),wh(bo(k,A));break e}}p=k=bo(k,A),Ct!==4&&(Ct=2),Wa===null?Wa=[p]:Wa.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var F=Vm(p,k,s);lm(p,F);break e;case 1:A=k;var D=p.type,M=p.stateNode;if((p.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Ds===null||!Ds.has(M)))){p.flags|=65536,s&=-s,p.lanes|=s;var ee=Fm(p,A,s);lm(p,ee);break e}}p=p.return}while(p!==null)}gg(a)}catch(pe){s=pe,wt===a&&a!==null&&(wt=a=a.return);continue}break}while(!0)}function pg(){var n=Au.current;return Au.current=wu,n===null?wu:n}function ud(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Rt===null||(Ci&268435455)===0&&(Cu&268435455)===0||Fs(Rt,Mt)}function Du(n,s){var a=Le;Le|=2;var c=pg();(Rt!==n||Mt!==s)&&(Xr=null,Ni(n,s));do try{V0();break}catch(d){fg(n,d)}while(!0);if(Eh(),Le=a,Au.current=c,wt!==null)throw Error(t(261));return Rt=null,Mt=0,Ct}function V0(){for(;wt!==null;)mg(wt)}function F0(){for(;wt!==null&&!ui();)mg(wt)}function mg(n){var s=vg(n.alternate,n,An);n.memoizedProps=n.pendingProps,s===null?gg(n):wt=s,ed.current=null}function gg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=b0(a,s,An),a!==null){wt=a;return}}else{if(a=N0(a,s),a!==null){a.flags&=32767,wt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,wt=null;return}}if(s=s.sibling,s!==null){wt=s;return}wt=s=n}while(s!==null);Ct===0&&(Ct=5)}function ki(n,s,a){var c=Fe,d=jn.transition;try{jn.transition=null,Fe=1,O0(n,s,a,c)}finally{jn.transition=d,Fe=c}return null}function O0(n,s,a,c){do Po();while(js!==null);if((Le&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Qc(n,p),n===Rt&&(wt=Rt=null,Mt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nu||(Nu=!0,wg(ci,function(){return Po(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=jn.transition,jn.transition=null;var w=Fe;Fe=1;var A=Le;Le|=4,ed.current=null,R0(n,a),og(a,n),r0(uh),Ur=!!lh,uh=lh=null,n.current=a,P0(a),Fr(),Le=A,Fe=w,jn.transition=p}else n.current=a;if(Nu&&(Nu=!1,js=n,ku=d),p=n.pendingLanes,p===0&&(Ds=null),Ul(a.stateNode),cn(n,tt()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(bu)throw bu=!1,n=rd,rd=null,n;return(ku&1)!==0&&n.tag!==0&&Po(),p=n.pendingLanes,(p&1)!==0?n===sd?Ka++:(Ka=0,sd=n):Ka=0,Ns(),null}function Po(){if(js!==null){var n=lr(ku),s=jn.transition,a=Fe;try{if(jn.transition=null,Fe=16>n?16:n,js===null)var c=!1;else{if(n=js,js=null,ku=0,(Le&6)!==0)throw Error(t(331));var d=Le;for(Le|=4,he=n.current;he!==null;){var p=he,w=p.child;if((he.flags&16)!==0){var A=p.deletions;if(A!==null){for(var k=0;k<A.length;k++){var z=A[k];for(he=z;he!==null;){var Y=he;switch(Y.tag){case 0:case 11:case 15:qa(8,Y,p)}var J=Y.child;if(J!==null)J.return=Y,he=J;else for(;he!==null;){Y=he;var X=Y.sibling,le=Y.return;if(tg(Y),Y===z){he=null;break}if(X!==null){X.return=le,he=X;break}he=le}}}var de=p.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var mt=fe.sibling;fe.sibling=null,fe=mt}while(fe!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,he=w;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:qa(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,he=F;break e}he=p.return}}var D=n.current;for(he=D;he!==null;){w=he;var M=w.child;if((w.subtreeFlags&2064)!==0&&M!==null)M.return=w,he=M;else e:for(w=D;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Su(9,A)}}catch(pe){dt(A,A.return,pe)}if(A===w){he=null;break e}var ee=A.sibling;if(ee!==null){ee.return=A.return,he=ee;break e}he=A.return}}if(Le=d,Ns(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(hi,n)}catch{}c=!0}return c}finally{Fe=a,jn.transition=s}}return!1}function yg(n,s,a){s=bo(a,s),s=Vm(n,s,1),n=Rs(n,s,1),s=tn(),n!==null&&(mi(n,1,s),cn(n,s))}function dt(n,s,a){if(n.tag===3)yg(n,n,a);else for(;s!==null;){if(s.tag===3){yg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ds===null||!Ds.has(c))){n=bo(a,n),n=Fm(s,n,1),s=Rs(s,n,1),n=tn(),s!==null&&(mi(s,1,n),cn(s,n));break}}s=s.return}}function L0(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=tn(),n.pingedLanes|=n.suspendedLanes&a,Rt===n&&(Mt&a)===a&&(Ct===4||Ct===3&&(Mt&130023424)===Mt&&500>tt()-nd?Ni(n,0):td|=a),cn(n,s)}function _g(n,s){s===0&&((n.mode&1)===0?s=1:(s=vs,vs<<=1,(vs&130023424)===0&&(vs=4194304)));var a=tn();n=Kr(n,s),n!==null&&(mi(n,s,a),cn(n,a))}function M0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),_g(n,a)}function U0(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),_g(n,a)}var vg;vg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||on.current)ln=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return ln=!1,C0(n,s,a);ln=(n.flags&131072)!==0}else ln=!1,ot&&(s.flags&1048576)!==0&&Jp(s,lu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Tu(n,s),n=s.pendingProps;var d=wo(s,Wt.current);Ao(s,a),d=Dh(null,s,c,n,d,a);var p=jh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,an(c)?(p=!0,iu(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ah(s),d.updater=xu,s.stateNode=d,d._reactInternals=s,Uh(s,c,n,a),s=qh(null,s,c,!0,p,a)):(s.tag=0,ot&&p&&gh(s),en(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Tu(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=B0(c),n=Kn(c,n),d){case 0:s=$h(null,s,c,n,a);break e;case 1:s=Hm(null,s,c,n,a);break e;case 11:s=Um(null,s,c,n,a);break e;case 14:s=zm(null,s,c,Kn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),$h(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Hm(n,s,c,d,a);case 3:e:{if(Wm(s),n===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,am(n,s),pu(s,c,null,a);var w=s.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=bo(Error(t(423)),s),s=Km(n,s,c,a,d);break e}else if(c!==d){d=bo(Error(t(424)),s),s=Km(n,s,c,a,d);break e}else for(Sn=As(s.stateNode.containerInfo.firstChild),In=s,ot=!0,Wn=null,a=im(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(To(),c===d){s=Qr(n,s,a);break e}en(n,s,c,a)}s=s.child}return s;case 5:return cm(s),n===null&&vh(s),c=s.type,d=s.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,ch(c,d)?w=null:p!==null&&ch(c,p)&&(s.flags|=32),qm(n,s),en(n,s,w,a),s.child;case 6:return n===null&&vh(s),null;case 13:return Gm(n,s,a);case 4:return Ch(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Io(s,null,c,a):en(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Um(n,s,c,d,a);case 7:return en(n,s,s.pendingProps,a),s.child;case 8:return en(n,s,s.pendingProps.children,a),s.child;case 12:return en(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,w=d.value,Ye(hu,c._currentValue),c._currentValue=w,p!==null)if(Hn(p.value,w)){if(p.children===d.children&&!on.current){s=Qr(n,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var A=p.dependencies;if(A!==null){w=p.child;for(var k=A.firstContext;k!==null;){if(k.context===c){if(p.tag===1){k=Gr(-1,a&-a),k.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?k.next=k:(k.next=Y.next,Y.next=k),z.pending=k}}p.lanes|=a,k=p.alternate,k!==null&&(k.lanes|=a),Ih(p.return,a,s),A.lanes|=a;break}k=k.next}}else if(p.tag===10)w=p.type===s.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Ih(w,a,s),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}en(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Ao(s,a),d=Pn(d),c=c(d),s.flags|=1,en(n,s,c,a),s.child;case 14:return c=s.type,d=Kn(c,s.pendingProps),d=Kn(c.type,d),zm(n,s,c,d,a);case 15:return Bm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Kn(c,d),Tu(n,s),s.tag=1,an(c)?(n=!0,iu(s)):n=!1,Ao(s,a),Dm(s,c,d),Uh(s,c,d,a),qh(null,s,c,!0,n,a);case 19:return Xm(n,s,a);case 22:return $m(n,s,a)}throw Error(t(156,s.tag))};function wg(n,s){return ca(n,s)}function z0(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,s,a,c){return new z0(n,s,a,c)}function cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function B0(n){if(typeof n=="function")return cd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===Ze)return 14}return 2}function Os(n,s){var a=n.alternate;return a===null?(a=Vn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ju(n,s,a,c,d,p){var w=2;if(c=n,typeof n=="function")cd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case C:return Ri(a.children,d,p,s);case T:w=8,d|=8;break;case N:return n=Vn(12,a,s,d|2),n.elementType=N,n.lanes=p,n;case b:return n=Vn(13,a,s,d),n.elementType=b,n.lanes=p,n;case qe:return n=Vn(19,a,s,d),n.elementType=qe,n.lanes=p,n;case Xe:return Vu(a,d,p,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case R:w=9;break e;case V:w=11;break e;case Ze:w=14;break e;case Nt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Vn(w,a,s,d),s.elementType=n,s.type=c,s.lanes=p,s}function Ri(n,s,a,c){return n=Vn(7,n,c,s),n.lanes=a,n}function Vu(n,s,a,c){return n=Vn(22,n,c,s),n.elementType=Xe,n.lanes=a,n.stateNode={isHidden:!1},n}function hd(n,s,a){return n=Vn(6,n,null,s),n.lanes=a,n}function dd(n,s,a){return s=Vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function $0(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function fd(n,s,a,c,d,p,w,A,k){return n=new $0(n,s,a,A,k),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Vn(3,null,null,s),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ah(p),n}function q0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function xg(n){if(!n)return bs;n=n._reactInternals;e:{if($n(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(an(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(an(a))return Qp(n,a,s)}return s}function Eg(n,s,a,c,d,p,w,A,k){return n=fd(a,c,!0,n,d,p,w,A,k),n.context=xg(null),a=n.current,c=tn(),d=Vs(a),p=Gr(c,d),p.callback=s??null,Rs(a,p,d),n.current.lanes=d,mi(n,d,c),cn(n,c),n}function Fu(n,s,a,c){var d=s.current,p=tn(),w=Vs(d);return a=xg(a),s.context===null?s.context=a:s.pendingContext=a,s=Gr(p,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Rs(d,s,w),n!==null&&(Xn(n,d,w,p),fu(n,d,w)),w}function Ou(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Tg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function pd(n,s){Tg(n,s),(n=n.alternate)&&Tg(n,s)}function H0(){return null}var Ig=typeof reportError=="function"?reportError:function(n){console.error(n)};function md(n){this._internalRoot=n}Lu.prototype.render=md.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Fu(n,s,null,null)},Lu.prototype.unmount=md.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;bi(function(){Fu(null,n,null,null)}),s[$r]=null}};function Lu(n){this._internalRoot=n}Lu.prototype.unstable_scheduleHydration=function(n){if(n){var s=va();n={blockedOn:null,target:n,priority:s};for(var a=0;a<wn.length&&s!==0&&s<wn[a].priority;a++);wn.splice(a,0,n),a===0&&ro(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Mu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function W0(n,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=Ou(w);p.call(z)}}var w=Eg(s,c,n,0,null,!1,!1,"",Sg);return n._reactRootContainer=w,n[$r]=w.current,Ra(n.nodeType===8?n.parentNode:n),bi(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var z=Ou(k);A.call(z)}}var k=fd(n,0,!1,null,null,!1,!1,"",Sg);return n._reactRootContainer=k,n[$r]=k.current,Ra(n.nodeType===8?n.parentNode:n),bi(function(){Fu(s,k,a,c)}),k}function Uu(n,s,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var A=d;d=function(){var k=Ou(w);A.call(k)}}Fu(s,w,n,d)}else w=W0(a,s,n,d,c);return Ou(w)}ya=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Be(s.pendingLanes);a!==0&&(ga(s,a|1),cn(s,tt()),(Le&6)===0&&(Ro=tt()+500,Ns()))}break;case 13:bi(function(){var c=Kr(n,1);if(c!==null){var d=tn();Xn(c,n,1,d)}}),pd(n,1)}},to=function(n){if(n.tag===13){var s=Kr(n,134217728);if(s!==null){var a=tn();Xn(s,n,134217728,a)}pd(n,134217728)}},_a=function(n){if(n.tag===13){var s=Vs(n),a=Kr(n,s);if(a!==null){var c=tn();Xn(a,n,s,c)}pd(n,s)}},va=function(){return Fe},wa=function(n,s){var a=Fe;try{return Fe=n,s()}finally{Fe=a}},zn=function(n,s,a){switch(s){case"input":if(Dr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=ru(c);if(!d)throw Error(t(90));cs(c),Dr(c,d)}}}break;case"textarea":Gi(n,a);break;case"select":s=a.value,s!=null&&mn(n,!!a.multiple,s,!1)}},_t=ad,Vt=bi;var K0={usingClientEntryPoint:!1,Events:[ja,_o,ru,be,Ge,ad]},Ga={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G0={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ml(n),n===null?null:n.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||H0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{hi=zu.inject(G0),_n=zu}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K0,hn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(s))throw Error(t(200));return q0(n,s,null,a)},hn.createRoot=function(n,s){if(!gd(n))throw Error(t(299));var a=!1,c="",d=Ig;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=fd(n,1,!1,null,null,a,!1,c,d),n[$r]=s.current,Ra(n.nodeType===8?n.parentNode:n),new md(s)},hn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ml(s),n=n===null?null:n.stateNode,n},hn.flushSync=function(n){return bi(n)},hn.hydrate=function(n,s,a){if(!Mu(s))throw Error(t(200));return Uu(null,n,s,!0,a)},hn.hydrateRoot=function(n,s,a){if(!gd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Ig;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Eg(s,null,n,1,a??null,d,!1,p,w),n[$r]=s.current,Ra(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Lu(s)},hn.render=function(n,s,a){if(!Mu(s))throw Error(t(200));return Uu(null,n,s,!1,a)},hn.unmountComponentAtNode=function(n){if(!Mu(n))throw Error(t(40));return n._reactRootContainer?(bi(function(){Uu(null,null,n,!1,function(){n._reactRootContainer=null,n[$r]=null})}),!0):!1},hn.unstable_batchedUpdates=ad,hn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Mu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Uu(n,s,a,!1,c)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var Dg;function nx(){if(Dg)return vd.exports;Dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vd.exports=tx(),vd.exports}var jg;function rx(){if(jg)return Bu;jg=1;var r=nx();return Bu.createRoot=r.createRoot,Bu.hydrateRoot=r.hydrateRoot,Bu}var sx=rx();const ix=g_(sx),Ed={" ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]," ()":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","",""]},yf=[{id:"qualitative",name:"",desc:""},{id:"emotional",name:"",desc:""},{id:"friendly",name:"",desc:""},{id:"humorous",name:"",desc:""},{id:"internal",name:"",desc:""},{id:"philosophical",name:"",desc:""},{id:"practical",name:"",desc:""},{id:"resonance",name:"",desc:""},{id:"blessing",name:"",desc:""},{id:"scenario",name:"",desc:""},{id:"milestone",name:"",desc:""},{id:"journey",name:"",desc:""}],y_=()=>localStorage.getItem("gemini_api_key")||"",Vg=()=>!!y_(),Fg=async(r,e,t=[],i)=>{var q,$,U,G,te;const o=y_();if(!o)return"  API Key Gemini API Key";const l=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${o}`;let h="";t.length>0?h=t.map(oe=>{const W=yf.find(ie=>ie.id===oe);return W?`${W.name}${W.desc}`:""}).join(`
`):h="";const y=`${{normal:"",casual:"",formal:""}[i.tone]||""}`,v=` ${i.wordCount||80} `,x=`""

${r}
${e||""}

****
1. ${y}
2. ${v}

 ${t.length||1} 
${h}

****
1. 
2. 
3. ** Markdown ** ******# 
4. ****
5. 
6. 

...
()

...
`;let E=0;const S=5,O=[1e3,2e3,4e3,8e3,16e3];for(;E<=S;)try{const oe=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:x}]}]})});if(!oe.ok){if(oe.status===400||oe.status===401||oe.status===403)return" API Key ";throw new Error(`API Error: ${oe.status}`)}return((te=(G=(U=($=(q=(await oe.json()).candidates)==null?void 0:q[0])==null?void 0:$.content)==null?void 0:U.parts)==null?void 0:G[0])==null?void 0:te.text)||""}catch(oe){if(E===S)return console.error("Gemini API Failed:",oe),"";await new Promise(W=>setTimeout(W,O[E])),E++}},ox=(r,e)=>{let t="";e==="csv"?(t=`\uFEFF,,
`,r.forEach(h=>{const y=[...h.selectedTags,h.manualTraits].filter(Boolean).join("").replace(/,/g,""),v=h.comment.replace(/,/g,"").replace(/\n/g," ");t+=`${h.name},"${y}","${v}"
`})):r.forEach(h=>{const m=[...h.selectedTags,h.manualTraits].filter(Boolean).join("");t+=`${h.name}
${m||""}

${h.comment}
-------------------
`});const i=new Blob([t],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`_${new Date().toLocaleDateString()}.${e}`,l.click(),URL.revokeObjectURL(o)},ax=()=>{const[r,e]=Z.useState({isOpen:!1,type:"info",title:"",message:"",onConfirm:null}),t=Z.useCallback(()=>{e(l=>({...l,isOpen:!1}))},[]),i=Z.useCallback((l,h,m)=>{e({isOpen:!0,type:"confirm",title:l,message:h,onConfirm:m})},[]),o=Z.useCallback(l=>{e({isOpen:!0,type:"info",title:"",message:l,onConfirm:null})},[]);return{dialog:r,closeDialog:t,showConfirm:i,showAlert:o}},lx=()=>{};var Og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ux=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],y=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},v_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,x=l>>2,E=(l&3)<<4|m>>4;let S=(m&15)<<2|v>>6,O=v&63;y||(O=64,h||(S=64)),i.push(t[x],t[E],t[S],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(__(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ux(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||v==null||E==null)throw new cx;const S=l<<2|m>>4;if(i.push(S),v!==64){const O=m<<4&240|v>>2;if(i.push(O),E!==64){const q=v<<6&192|E;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class cx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hx=function(r){const e=__(r);return v_.encodeByteArray(e,!0)},ac=function(r){return hx(r).replace(/\./g,"")},w_=function(r){try{return v_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=()=>dx().__FIREBASE_DEFAULTS__,px=()=>{if(typeof process>"u"||typeof Og>"u")return;const r=Og.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},mx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&w_(r[1]);return e&&JSON.parse(e)},Ac=()=>{try{return lx()||fx()||px()||mx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},x_=r=>{var e,t;return(t=(e=Ac())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},gx=r=>{const e=x_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},E_=()=>{var r;return(r=Ac())==null?void 0:r.config},T_=r=>{var e;return(e=Ac())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ac(JSON.stringify(t)),ac(JSON.stringify(h)),""].join(".")}const el={};function vx(){const r={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?r.emulator.push(e):r.prod.push(e);return r}function wx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Lg=!1;function S_(r,e){if(typeof window>"u"||typeof document>"u"||!Jo(window.location.host)||el[r]===e||el[r]||Lg)return;el[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=vx().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Lg=!0,h()},S}function x(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=wx(i),O=t("text"),q=document.getElementById(O)||document.createElement("span"),$=t("learnmore"),U=document.getElementById($)||document.createElement("a"),G=t("preprendIcon"),te=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const oe=S.element;m(oe),x(U,$);const W=v();y(te,G),oe.append(te,q,U,W),document.body.appendChild(oe)}l?(q.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function Ex(){var e;const r=(e=Ac())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ix(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Sx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ax(){const r=Zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Cx(){return!Ex()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bx(){try{return typeof indexedDB=="object"}catch{return!1}}function Nx(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="FirebaseError";class ls extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=kx,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_l.prototype.create)}}class _l{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Rx(l,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ls(o,m,i)}}function Rx(r,e){return r.replace(Px,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Px=/\{\$([^}]+)}/g;function Dx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Mi(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Mg(l)&&Mg(h)){if(!Mi(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Mg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jx(r,e){const t=new Vx(r,e);return t.subscribe.bind(t)}class Vx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Fx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Td),o.error===void 0&&(o.error=Td),o.complete===void 0&&(o.complete=Td);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fx(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Td(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r){return r&&r._delegate?r._delegate:r}class Ui{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new yx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mx(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Lx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lx(r){return r===Pi?void 0:r}function Mx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ox(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const zx={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Bx=Pe.INFO,$x={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},qx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=$x[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _f{constructor(e){this.name=e,this._logLevel=Bx,this._logHandler=qx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const Hx=(r,e)=>e.some(t=>r instanceof t);let Ug,zg;function Wx(){return Ug||(Ug=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kx(){return zg||(zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A_=new WeakMap,Ld=new WeakMap,C_=new WeakMap,Id=new WeakMap,vf=new WeakMap;function Gx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ws(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&A_.set(t,r)}).catch(()=>{}),vf.set(e,r),e}function Qx(r){if(Ld.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Ld.set(r,e)}let Md={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ld.get(r);if(e==="objectStoreNames")return r.objectStoreNames||C_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Xx(r){Md=r(Md)}function Yx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Sd(this),e,...t);return C_.set(i,e.sort?e.sort():[e]),Ws(i)}:Kx().includes(r)?function(...e){return r.apply(Sd(this),e),Ws(A_.get(this))}:function(...e){return Ws(r.apply(Sd(this),e))}}function Jx(r){return typeof r=="function"?Yx(r):(r instanceof IDBTransaction&&Qx(r),Hx(r,Wx())?new Proxy(r,Md):r)}function Ws(r){if(r instanceof IDBRequest)return Gx(r);if(Id.has(r))return Id.get(r);const e=Jx(r);return e!==r&&(Id.set(r,e),vf.set(e,r)),e}const Sd=r=>vf.get(r);function Zx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=Ws(h);return i&&h.addEventListener("upgradeneeded",y=>{i(Ws(h.result),y.oldVersion,y.newVersion,Ws(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const eE=["get","getKey","getAll","getAllKeys","count"],tE=["put","add","delete","clear"],Ad=new Map;function Bg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=tE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||eE.includes(t)))return;const l=async function(h,...m){const y=this.transaction(h,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&y.done]))[0]};return Ad.set(e,l),l}Xx(r=>({...r,get:(e,t,i)=>Bg(e,t)||r.get(e,t,i),has:(e,t)=>!!Bg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function rE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ud="@firebase/app",$g="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new _f("@firebase/app"),sE="@firebase/app-compat",iE="@firebase/analytics-compat",oE="@firebase/analytics",aE="@firebase/app-check-compat",lE="@firebase/app-check",uE="@firebase/auth",cE="@firebase/auth-compat",hE="@firebase/database",dE="@firebase/data-connect",fE="@firebase/database-compat",pE="@firebase/functions",mE="@firebase/functions-compat",gE="@firebase/installations",yE="@firebase/installations-compat",_E="@firebase/messaging",vE="@firebase/messaging-compat",wE="@firebase/performance",xE="@firebase/performance-compat",EE="@firebase/remote-config",TE="@firebase/remote-config-compat",IE="@firebase/storage",SE="@firebase/storage-compat",AE="@firebase/firestore",CE="@firebase/ai",bE="@firebase/firestore-compat",NE="firebase",kE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",RE={[Ud]:"fire-core",[sE]:"fire-core-compat",[oE]:"fire-analytics",[iE]:"fire-analytics-compat",[lE]:"fire-app-check",[aE]:"fire-app-check-compat",[uE]:"fire-auth",[cE]:"fire-auth-compat",[hE]:"fire-rtdb",[dE]:"fire-data-connect",[fE]:"fire-rtdb-compat",[pE]:"fire-fn",[mE]:"fire-fn-compat",[gE]:"fire-iid",[yE]:"fire-iid-compat",[_E]:"fire-fcm",[vE]:"fire-fcm-compat",[wE]:"fire-perf",[xE]:"fire-perf-compat",[EE]:"fire-rc",[TE]:"fire-rc-compat",[IE]:"fire-gcs",[SE]:"fire-gcs-compat",[AE]:"fire-fst",[bE]:"fire-fst-compat",[CE]:"fire-vertex","fire-js":"fire-js",[NE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Map,PE=new Map,Bd=new Map;function qg(r,e){try{r.container.addComponent(e)}catch(t){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function $o(r){const e=r.name;if(Bd.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;Bd.set(e,r);for(const t of lc.values())qg(t,r);for(const t of PE.values())qg(t,r);return!0}function wf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Yn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new _l("app","Firebase",DE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=kE;function b_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:zd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ks.create("bad-app-name",{appName:String(o)});if(t||(t=E_()),!t)throw Ks.create("no-options");const l=lc.get(o);if(l){if(Mi(t,l.options)&&Mi(i,l.config))return l;throw Ks.create("duplicate-app",{appName:o})}const h=new Ux(o);for(const y of Bd.values())h.addComponent(y);const m=new jE(t,i,h);return lc.set(o,m),m}function N_(r=zd){const e=lc.get(r);if(!e&&r===zd&&E_())return b_();if(!e)throw Ks.create("no-app",{appName:r});return e}function Gs(r,e,t){let i=RE[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(h.join(" "));return}$o(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebase-heartbeat-database",FE=1,al="firebase-heartbeat-store";let Cd=null;function k_(){return Cd||(Cd=Zx(VE,FE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ks.create("idb-open",{originalErrorMessage:r.message})})),Cd}async function OE(r){try{const t=(await k_()).transaction(al),i=await t.objectStore(al).get(R_(r));return await t.done,i}catch(e){if(e instanceof ls)ss.warn(e.message);else{const t=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ss.warn(t.message)}}}async function Hg(r,e){try{const i=(await k_()).transaction(al,"readwrite");await i.objectStore(al).put(e,R_(r)),await i.done}catch(t){if(t instanceof ls)ss.warn(t.message);else{const i=Ks.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ss.warn(i.message)}}}function R_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=1024,ME=30;class UE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Wg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>ME){const h=$E(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ss.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Wg(),{heartbeatsToSend:i,unsentEntries:o}=zE(this._heartbeatsCache.heartbeats),l=ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ss.warn(t),""}}}function Wg(){return new Date().toISOString().substring(0,10)}function zE(r,e=LE){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Kg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Kg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class BE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bx()?Nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Kg(r){return ac(JSON.stringify({version:2,heartbeats:r})).length}function $E(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(r){$o(new Ui("platform-logger",e=>new nE(e),"PRIVATE")),$o(new Ui("heartbeat",e=>new UE(e),"PRIVATE")),Gs(Ud,$g,r),Gs(Ud,$g,"esm2020"),Gs("fire-js","")}qE("");var HE="firebase",WE="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs(HE,WE,"app");var Gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,P_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function N(){}N.prototype=T.prototype,C.F=T.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(P,R,V){for(var b=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)b[qe-2]=arguments[qe];return T.prototype[R].apply(P,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,N){N||(N=0);const P=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)P[R]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(R=0;R<16;++R)P[R]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=C.g[0],N=C.g[1],R=C.g[2];let V=C.g[3],b;b=T+(V^N&(R^V))+P[0]+3614090360&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[1]+3905402710&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[2]+606105819&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[3]+3250441966&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(V^N&(R^V))+P[4]+4118548399&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[5]+1200080426&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[6]+2821735955&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[7]+4249261313&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(V^N&(R^V))+P[8]+1770035416&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[9]+2336552879&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[10]+4294925233&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[11]+2304563134&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(V^N&(R^V))+P[12]+1804603682&4294967295,T=N+(b<<7&4294967295|b>>>25),b=V+(R^T&(N^R))+P[13]+4254626195&4294967295,V=T+(b<<12&4294967295|b>>>20),b=R+(N^V&(T^N))+P[14]+2792965006&4294967295,R=V+(b<<17&4294967295|b>>>15),b=N+(T^R&(V^T))+P[15]+1236535329&4294967295,N=R+(b<<22&4294967295|b>>>10),b=T+(R^V&(N^R))+P[1]+4129170786&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[6]+3225465664&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[11]+643717713&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[0]+3921069994&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^V&(N^R))+P[5]+3593408605&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[10]+38016083&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[15]+3634488961&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[4]+3889429448&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^V&(N^R))+P[9]+568446438&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[14]+3275163606&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[3]+4107603335&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[8]+1163531501&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(R^V&(N^R))+P[13]+2850285829&4294967295,T=N+(b<<5&4294967295|b>>>27),b=V+(N^R&(T^N))+P[2]+4243563512&4294967295,V=T+(b<<9&4294967295|b>>>23),b=R+(T^N&(V^T))+P[7]+1735328473&4294967295,R=V+(b<<14&4294967295|b>>>18),b=N+(V^T&(R^V))+P[12]+2368359562&4294967295,N=R+(b<<20&4294967295|b>>>12),b=T+(N^R^V)+P[5]+4294588738&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[8]+2272392833&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[11]+1839030562&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[14]+4259657740&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^V)+P[1]+2763975236&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[4]+1272893353&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[7]+4139469664&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[10]+3200236656&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^V)+P[13]+681279174&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[0]+3936430074&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[3]+3572445317&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[6]+76029189&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(N^R^V)+P[9]+3654602809&4294967295,T=N+(b<<4&4294967295|b>>>28),b=V+(T^N^R)+P[12]+3873151461&4294967295,V=T+(b<<11&4294967295|b>>>21),b=R+(V^T^N)+P[15]+530742520&4294967295,R=V+(b<<16&4294967295|b>>>16),b=N+(R^V^T)+P[2]+3299628645&4294967295,N=R+(b<<23&4294967295|b>>>9),b=T+(R^(N|~V))+P[0]+4096336452&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[7]+1126891415&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[14]+2878612391&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[5]+4237533241&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~V))+P[12]+1700485571&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[3]+2399980690&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[10]+4293915773&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[1]+2240044497&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~V))+P[8]+1873313359&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[15]+4264355552&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[6]+2734768916&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[13]+1309151649&4294967295,N=R+(b<<21&4294967295|b>>>11),b=T+(R^(N|~V))+P[4]+4149444226&4294967295,T=N+(b<<6&4294967295|b>>>26),b=V+(N^(T|~R))+P[11]+3174756917&4294967295,V=T+(b<<10&4294967295|b>>>22),b=R+(T^(V|~N))+P[2]+718787259&4294967295,R=V+(b<<15&4294967295|b>>>17),b=N+(V^(R|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.v=function(C,T){T===void 0&&(T=C.length);const N=T-this.blockSize,P=this.C;let R=this.h,V=0;for(;V<T;){if(R==0)for(;V<=N;)o(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<T;)if(P[R++]=C.charCodeAt(V++),R==this.blockSize){o(this,P),R=0;break}}else for(;V<T;)if(P[R++]=C[V++],R==this.blockSize){o(this,P),R=0;break}}this.h=R,this.o+=T},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)C[T++]=this.g[N]>>>P&255;return C};function l(C,T){var N=m;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=T(C)}function h(C,T){this.h=T;const N=[];let P=!0;for(let R=C.length-1;R>=0;R--){const V=C[R]|0;P&&V==T||(N[R]=V,P=!1)}this.g=N}var m={};function y(C){return-128<=C&&C<128?l(C,function(T){return new h([T|0],T<0?-1:0)}):new h([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return U(v(-C));const T=[];let N=1;for(let P=0;C>=N;P++)T[P]=C/N|0,N*=4294967296;return new h(T,0)}function x(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return U(x(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=v(Math.pow(T,8));let P=E;for(let V=0;V<C.length;V+=8){var R=Math.min(8,C.length-V);const b=parseInt(C.substring(V,V+R),T);R<8?(R=v(Math.pow(T,R)),P=P.j(R).add(v(b))):(P=P.j(N),P=P.add(v(b)))}return P}var E=y(0),S=y(1),O=y(16777216);r=h.prototype,r.m=function(){if($(this))return-U(this).m();let C=0,T=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);C+=(P>=0?P:4294967296+P)*T,T*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(q(this))return"0";if($(this))return"-"+U(this).toString(C);const T=v(Math.pow(C,6));var N=this;let P="";for(;;){const R=W(N,T).g;N=G(N,R.j(T));let V=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=R,q(N))return V+P;for(;V.length<6;)V="0"+V;P=V+P}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function q(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function $(C){return C.h==-1}r.l=function(C){return C=G(this,C),$(C)?-1:q(C)?0:1};function U(C){const T=C.g.length,N=[];for(let P=0;P<T;P++)N[P]=~C.g[P];return new h(N,~C.h).add(S)}r.abs=function(){return $(this)?U(this):this},r.add=function(C){const T=Math.max(this.g.length,C.g.length),N=[];let P=0;for(let R=0;R<=T;R++){let V=P+(this.i(R)&65535)+(C.i(R)&65535),b=(V>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);P=b>>>16,V&=65535,b&=65535,N[R]=b<<16|V}return new h(N,N[N.length-1]&-2147483648?-1:0)};function G(C,T){return C.add(U(T))}r.j=function(C){if(q(this)||q(C))return E;if($(this))return $(C)?U(this).j(U(C)):U(U(this).j(C));if($(C))return U(this.j(U(C)));if(this.l(O)<0&&C.l(O)<0)return v(this.m()*C.m());const T=this.g.length+C.g.length,N=[];for(var P=0;P<2*T;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let R=0;R<C.g.length;R++){const V=this.i(P)>>>16,b=this.i(P)&65535,qe=C.i(R)>>>16,Ze=C.i(R)&65535;N[2*P+2*R]+=b*Ze,te(N,2*P+2*R),N[2*P+2*R+1]+=V*Ze,te(N,2*P+2*R+1),N[2*P+2*R+1]+=b*qe,te(N,2*P+2*R+1),N[2*P+2*R+2]+=V*qe,te(N,2*P+2*R+2)}for(C=0;C<T;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=T;C<2*T;C++)N[C]=0;return new h(N,0)};function te(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function oe(C,T){this.g=C,this.h=T}function W(C,T){if(q(T))throw Error("division by zero");if(q(C))return new oe(E,E);if($(C))return T=W(U(C),T),new oe(U(T.g),U(T.h));if($(T))return T=W(C,U(T)),new oe(U(T.g),T.h);if(C.g.length>30){if($(C)||$(T))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=T;P.l(C)<=0;)N=ie(N),P=ie(P);var R=re(N,1),V=re(P,1);for(P=re(P,2),N=re(N,2);!q(P);){var b=V.add(P);b.l(C)<=0&&(R=R.add(N),V=b),P=re(P,1),N=re(N,1)}return T=G(C,R.j(T)),new oe(R,T)}for(R=E;C.l(T)>=0;){for(N=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),V=v(N),b=V.j(T);$(b)||b.l(C)>0;)N-=P,V=v(N),b=V.j(T);q(V)&&(V=S),R=R.add(V),C=G(C,b)}return new oe(R,C)}r.B=function(C){return W(this,C).h},r.and=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)&C.i(P);return new h(N,this.h&C.h)},r.or=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)|C.i(P);return new h(N,this.h|C.h)},r.xor=function(C){const T=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<T;P++)N[P]=this.i(P)^C.i(P);return new h(N,this.h^C.h)};function ie(C){const T=C.g.length+1,N=[];for(let P=0;P<T;P++)N[P]=C.i(P)<<1|C.i(P-1)>>>31;return new h(N,C.h)}function re(C,T){const N=T>>5;T%=32;const P=C.g.length-N,R=[];for(let V=0;V<P;V++)R[V]=T>0?C.i(V+N)>>>T|C.i(V+N+1)<<32-T:C.i(V+N);return new h(R,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,P_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=x,Qs=h}).apply(typeof Gg<"u"?Gg:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D_,Xa,j_,Qu,$d,V_,F_,O_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in _))break e;_=_[L]}u=u[u.length-1],I=_[u],g=g(I),g!=I&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],I;for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&_.push([I,g[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,_){return u.call.apply(u.bind,arguments)}function v(u,g,_){return v=y,v.apply(null,arguments)}function x(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function E(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(I,L,B){for(var ne=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ne[Ae-2]=arguments[Ae];return g.prototype[L].apply(I,ne)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const g=u.length;if(g>0){const _=Array(g);for(let I=0;I<g;I++)_[I]=u[I];return _}return[]}function q(u,g){for(let I=1;I<arguments.length;I++){const L=arguments[I];var _=typeof L;if(_=_!="object"?_:L?Array.isArray(L)?"array":_:"null",_=="array"||_=="object"&&typeof L.length=="number"){_=u.length||0;const B=L.length||0;u.length=_+B;for(let ne=0;ne<B;ne++)u[_+ne]=L[ne]}else u.push(L)}}class ${constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function U(u){h.setTimeout(()=>{throw u},0)}function G(){var u=C;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class te{constructor(){this.h=this.g=null}add(g,_){const I=oe.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var oe=new $(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,re=!1,C=new te,T=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(N)}};function N(){for(var u;u=G();){try{u.h.call(u.g)}catch(_){U(_)}var g=oe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}re=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return u})();function b(u){return/^[\s\xa0]*$/.test(u)}function qe(u,g){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(qe,R),qe.prototype.init=function(u,g){const _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),Nt=0;function Xe(u,g,_,I,L){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=L,this.key=++Nt,this.da=this.fa=!1}function se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,g,_){for(const I in u)g.call(_,u[I],I,u)}function ue(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function j(u){const g={};for(const _ in u)g[_]=u[_];return g}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,g){let _,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(_ in I)u[_]=I[_];for(let B=0;B<Q.length;B++)_=Q[B],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,g,_,I,L){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const ne=Ne(u,g,I,L);return ne>-1?(g=u[ne],_||(g.fa=!1)):(g=new Xe(g,this.src,B,!!I,L),g.fa=_,u.push(g)),g};function ke(u,g){const _=g.type;if(_ in u.g){var I=u.g[_],L=Array.prototype.indexOf.call(I,g,void 0),B;(B=L>=0)&&Array.prototype.splice.call(I,L,1),B&&(se(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ne(u,g,_,I){for(let L=0;L<u.length;++L){const B=u[L];if(!B.da&&B.listener==g&&B.capture==!!_&&B.ha==I)return L}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Ve={};function ze(u,g,_,I,L){if(Array.isArray(g)){for(let B=0;B<g.length;B++)ze(u,g[B],_,I,L);return null}return _=ds(_),u&&u[Ze]?u.J(g,_,m(I)?!!I.capture:!1,L):jt(u,g,_,!1,I,L)}function jt(u,g,_,I,L,B){if(!g)throw Error("Invalid event type");const ne=m(L)?!!L.capture:!!L;let Ae=hs(u);if(Ae||(u[Me]=Ae=new Te(u)),_=Ae.add(g,_,I,ne,B),_.proxy)return _;if(I=us(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)V||(L=ne),L===void 0&&(L=!1),u.addEventListener(g.toString(),I,L);else if(u.attachEvent)u.attachEvent(Pr(g.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function us(){function u(_){return g.call(u.src,u.listener,_)}const g=Wi;return u}function cs(u,g,_,I,L){if(Array.isArray(g))for(var B=0;B<g.length;B++)cs(u,g[B],_,I,L);else I=m(I)?!!I.capture:!!I,_=ds(_),u&&u[Ze]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],_=Ne(g,_,I,L),_>-1&&(se(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=hs(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ne(g,_,I,L)),(_=u>-1?g[u]:null)&&nr(_))}function nr(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ze])ke(g.i,u);else{var _=u.type,I=u.proxy;g.removeEventListener?g.removeEventListener(_,I,u.capture):g.detachEvent?g.detachEvent(Pr(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=hs(g))?(ke(_,u),_.h==0&&(_.src=null,g[Me]=null)):se(u)}}}function Pr(u){return u in Ve?Ve[u]:Ve[u]="on"+u}function Wi(u,g){if(u.da)u=!0;else{g=new qe(g,this);const _=u.listener,I=u.ha||u.src;u.fa&&nr(u),u=_.call(I,g)}return u}function hs(u){return u=u[Me],u instanceof Te?u:null}var Dr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ds(u){return typeof u=="function"?u:(u[Dr]||(u[Dr]=function(g){return u.handleEvent(g)}),u[Dr])}function et(){P.call(this),this.i=new Te(this),this.M=this,this.G=null}E(et,P),et.prototype[Ze]=!0,et.prototype.removeEventListener=function(u,g,_,I){cs(this,u,g,_,I)};function at(u,g){var _,I=u.G;if(I)for(_=[];I;I=I.G)_.push(I);if(u=u.M,I=g.type||g,typeof g=="string")g=new R(g,u);else if(g instanceof R)g.target=g.target||u;else{var L=g;g=new R(I,u),Se(g,L)}L=!0;let B,ne;if(_)for(ne=_.length-1;ne>=0;ne--)B=g.g=_[ne],L=mn(B,I,!0,g)&&L;if(B=g.g=u,L=mn(B,I,!0,g)&&L,L=mn(B,I,!1,g)&&L,_)for(ne=0;ne<_.length;ne++)B=g.g=_[ne],L=mn(B,I,!1,g)&&L}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let I=0;I<_.length;I++)se(_[I]);delete u.g[g],u.h--}}this.G=null},et.prototype.J=function(u,g,_,I){return this.i.add(String(u),g,!1,_,I)},et.prototype.K=function(u,g,_,I){return this.i.add(String(u),g,!0,_,I)};function mn(u,g,_,I){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let B=0;B<g.length;++B){const ne=g[B];if(ne&&!ne.da&&ne.capture==_){const Ae=ne.listener,pt=ne.ha||ne.src;ne.fa&&ke(u.i,ne),L=Ae.call(pt,I)!==!1&&L}}return L&&!I.defaultPrevented}function fs(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:h.setTimeout(u,g||0)}function Ki(u){u.g=fs(()=>{u.g=null,u.i&&(u.i=!1,Ki(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Gi extends P{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ki(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rr(u){P.call(this),this.h=u,this.g={}}E(rr,P);var ps=[];function On(u){me(u.g,function(g,_){this.g.hasOwnProperty(_)&&nr(g)},u),u.g={}}rr.prototype.N=function(){rr.Z.N.call(this),On(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=h.JSON.stringify,Qi=h.JSON.parse,jr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function sr(){}function Xi(){}var Mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ms(){R.call(this,"d")}E(ms,R);function oi(){R.call(this,"c")}E(oi,R);var gn={},gs=null;function Un(){return gs=gs||new et}gn.Ia="serverreachability";function ys(u){R.call(this,gn.Ia,u)}E(ys,R);function zn(u){const g=Un();at(g,new ys(g))}gn.STAT_EVENT="statevent";function Bn(u,g){R.call(this,gn.STAT_EVENT,u),this.stat=g}E(Bn,R);function it(u){const g=Un();at(g,new Bn(g,u))}gn.Ja="timingevent";function ve(u,g){R.call(this,gn.Ja,u),this.size=g}E(ve,R);function be(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function Ge(){this.g=!0}Ge.prototype.ua=function(){this.g=!1};function _t(u,g,_,I,L,B){u.info(function(){if(u.g)if(B){var ne="",Ae=B.split("&");for(let We=0;We<Ae.length;We++){var pt=Ae[We].split("=");if(pt.length>1){const vt=pt[0];pt=pt[1];const Tn=vt.split("_");ne=Tn.length>=2&&Tn[1]=="type"?ne+(vt+"="+pt+"&"):ne+(vt+"=redacted&")}}}else ne=null;else ne=B;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+g+`
`+_+`
`+ne})}function Vt(u,g,_,I,L,B,ne){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+g+`
`+_+`
`+B+" "+ne})}function $t(u,g,_,I){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+yn(u,_)+(I?" "+I:"")})}function ai(u,g){u.info(function(){return"TIMEOUT: "+g})}Ge.prototype.info=function(){};function yn(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var _=B[u];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ne=1;ne<I.length;ne++)I[ne]=""}}}}return Ln(B)}catch{return g}}var qt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_s={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jl;function Vr(){}E(Vr,sr),Vr.prototype.g=function(){return new XMLHttpRequest},jl=new Vr;function ir(u){return encodeURIComponent(String(u))}function Yi(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function bn(u,g,_,I){this.j=u,this.i=g,this.l=_,this.S=I||1,this.V=new rr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vl}function Vl(){this.i=null,this.g="",this.h=!1}var Fl={},la={};function $n(u,g,_){u.M=1,u.A=Or(Nn(g)),u.u=_,u.R=!0,ua(u,null)}function ua(u,g){u.F=Date.now(),li(u),u.B=Nn(u.A);var _=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),va(_.i,"t",I),u.C=0,_=u.j.L,u.h=new Vl,u.g=Wl(u.j,_?g:null,!u.u),u.P>0&&(u.O=new Gi(v(u.Y,u,u.g),u.P)),g=u.V,_=u.g,I=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(ps[0]=L.toString()),L=ps);for(let B=0;B<L.length;B++){const ne=ze(_,L[B],I||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),zn(),_t(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const g=this.O;g&&dr(u)==3?g.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const Ae=dr(this.g),pt=this.g.ya(),We=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||ql(this.g)))){this.K||Ae!=4||pt==7||(pt==8||We<=0?zn(3):zn(2)),Ji(this);var g=this.g.ca();this.X=g;var _=Ol(this);if(this.o=g==200,Vt(this.i,this.v,this.B,this.l,this.S,Ae,g),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(I)){var B=I;break t}}B=null}if(u=B)$t(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,u);else{this.o=!1,this.m=3,it(12),Fr(this),ui(this);break e}}if(this.R){u=!0;let vt;for(;!this.K&&this.C<_.length;)if(vt=Ml(this,_),vt==la){Ae==4&&(this.m=4,it(14),u=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Fl){this.m=4,it(15),$t(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else $t(this.i,this.l,vt,null),tt(this,vt);if(Ll(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)$t(this.i,this.l,_,"[Invalid Chunked Response]"),Fr(this),ui(this);else if(_.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),_i(ne),ne.P=!0,it(11))}}else $t(this.i,this.l,_,null),tt(this,_);Ae==4&&Fr(this),this.o&&!this.K&&(Ae==4?lo(this.j,this):(this.o=!1,li(this)))}else xa(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),Fr(this),ui(this)}}}catch{}finally{}};function Ol(u){if(!Ll(u))return u.g.la();const g=ql(u.g);if(g==="")return"";let _="";const I=g.length,L=dr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Fr(u),ui(u),"";u.h.i=new h.TextDecoder}for(let B=0;B<I;B++)u.h.h=!0,_+=u.h.i.decode(g[B],{stream:!(L&&B==I-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function Ll(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ml(u,g){var _=u.C,I=g.indexOf(`
`,_);return I==-1?la:(_=Number(g.substring(_,I)),isNaN(_)?Fl:(I+=1,I+_>g.length?la:(g=g.slice(I,I+_),u.C=I+_,g)))}bn.prototype.cancel=function(){this.K=!0,Fr(this)};function li(u){u.T=Date.now()+u.H,ca(u,u.H)}function ca(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=be(v(u.aa,u),g)}function Ji(u){u.D&&(h.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ai(this.i,this.B),this.M!=2&&(zn(),it(17)),Fr(this),this.m=2,ui(this)):ca(this,this.T-u)};function ui(u){u.j.I==0||u.K||lo(u.j,u)}function Fr(u){Ji(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,On(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function tt(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||da(_.h,u))){if(!u.L&&da(_.h,u)&&_.I==3){try{var I=_.Ba.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ao(_),xn(_);else break e;mr(_),it(18)}}else _.xa=L[1],0<_.xa-_.K&&L[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=be(v(_.Va,_),6e3));ci(_.h)<=1&&_.ta&&(_.ta=void 0)}else En(_,11)}else if((u.L||_.g==u)&&ao(_),!b(g))for(L=_.Ba.g.parse(g),g=0;g<L.length;g++){let We=L[g];const vt=We[0];if(!(vt<=_.K))if(_.K=vt,We=We[1],_.I==2)if(We[0]=="c"){_.M=We[1],_.ba=We[2];const Tn=We[3];Tn!=null&&(_.ka=Tn,_.j.info("VER="+_.ka));const Br=We[4];Br!=null&&(_.za=Br,_.j.info("SVER="+_.za));const gr=We[5];gr!=null&&typeof gr=="number"&&gr>0&&(I=1.5*gr,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const yr=u.g;if(yr){const ho=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ho){var B=I.h;B.g||ho.indexOf("spdy")==-1&&ho.indexOf("quic")==-1&&ho.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(eo(B,B.h),B.h=null))}if(I.G){const Ia=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(I.wa=Ia,Be(I.J,I.G,Ia))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var ne=u;if(I.na=Ta(I,I.L?I.ba:null,I.W),ne.L){hi(I.h,ne);var Ae=ne,pt=I.O;pt&&(Ae.H=pt),Ae.D&&(Ji(Ae),li(Ae)),I.g=ne}else Ht(I);_.i.length>0&&zr(_)}else We[0]!="stop"&&We[0]!="close"||En(_,7);else _.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?En(_,7):io(_):We[0]!="noop"&&_.l&&_.l.qa(We),_.A=0)}}zn(4)}catch{}}var Gc=class{constructor(u,g){this.g=u,this.map=g}};function Zi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ha(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ci(u){return u.h?1:u.g?u.g.size:0}function da(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function eo(u,g){u.g?u.g.add(g):u.h=g}function hi(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Zi.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _n(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return O(u.i)}var Ul=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vn(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const I=u[_].indexOf("=");let L,B=null;I>=0?(L=u[_].substring(0,I),B=u[_].substring(I+1)):L=u[_],g(L,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function or(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof or?(this.l=u.l,di(this,u.j),this.o=u.o,this.g=u.g,ar(this,u.u),this.h=u.h,vs(this,wa(u.i)),this.m=u.m):u&&(g=String(u).match(Ul))?(this.l=!1,di(this,g[1]||"",!0),this.o=fi(g[2]||""),this.g=fi(g[3]||"",!0),ar(this,g[4]),this.h=fi(g[5]||"",!0),vs(this,g[6]||"",!0),this.m=fi(g[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}or.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(pi(g,pa,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(pi(g,pa,!0),"@"),u.push(ir(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(pi(_,_.charAt(0)=="/"?mi:ma,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",pi(_,ga)),u.join("")},or.prototype.resolve=function(u){const g=Nn(this);let _=!!u.j;_?di(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var I=u.h;if(_)ar(g,u.u);else if(_=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=g.h.lastIndexOf("/");L!=-1&&(I=g.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const B=[];for(let ne=0;ne<L.length;){const Ae=L[ne++];Ae=="."?I&&ne==L.length&&B.push(""):Ae==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),I&&ne==L.length&&B.push("")):(B.push(Ae),I=!0)}I=B.join("/")}else I=L}return _?g.h=I:_=u.i.toString()!=="",_?vs(g,wa(u.i)):_=!!u.m,_&&(g.m=u.m),g};function Nn(u){return new or(u)}function di(u,g,_){u.j=_?fi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ar(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function vs(u,g,_){g instanceof Fe?(u.i=g,no(u.i,u.l)):(_||(g=pi(g,Qc)),u.i=new Fe(g,u.l))}function Be(u,g,_){u.i.set(g,_)}function Or(u){return Be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function fi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function pi(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,fa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var pa=/[#\/\?@]/g,ma=/[#\?:]/g,mi=/[#\?]/g,Qc=/[#\?@]/g,ga=/#/g;function Fe(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function lr(u){u.g||(u.g=new Map,u.h=0,u.i&&vn(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,g){lr(this),this.i=null,u=ur(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function ya(u,g){lr(u),g=ur(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function to(u,g){return lr(u),g=ur(u,g),u.g.has(g)}r.forEach=function(u,g){lr(this),this.g.forEach(function(_,I){_.forEach(function(L){u.call(g,L,I,this)},this)},this)};function _a(u,g){lr(u);let _=[];if(typeof g=="string")to(u,g)&&(_=_.concat(u.g.get(ur(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}r.set=function(u,g){return lr(this),this.i=null,u=ur(this,u),to(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=_a(this,u),u.length>0?String(u[0]):g):g};function va(u,g,_){ya(u,g),_.length>0&&(u.i=null,u.g.set(ur(u,g),O(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let I=0;I<g.length;I++){var _=g[I];const L=ir(_);_=_a(this,_);for(let B=0;B<_.length;B++){let ne=L;_[B]!==""&&(ne+="="+ir(_[B])),u.push(ne)}}return this.i=u.join("&")};function wa(u){const g=new Fe;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ur(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function no(u,g){g&&!u.j&&(lr(u),u.i=null,u.g.forEach(function(_,I){const L=I.toLowerCase();I!=L&&(ya(this,I),va(this,L,_))},u)),u.j=g}function cr(u,g){const _=new Ge;if(h.Image){const I=new Image;I.onload=x(Ft,_,"TestLoadImage: loaded",!0,g,I),I.onerror=x(Ft,_,"TestLoadImage: error",!1,g,I),I.onabort=x(Ft,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=x(Ft,_,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else g(!1)}function hr(u,g){const _=new Ge,I=new AbortController,L=setTimeout(()=>{I.abort(),Ft(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:I.signal}).then(B=>{clearTimeout(L),B.ok?Ft(_,"TestPingServer: ok",!0,g):Ft(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Ft(_,"TestPingServer: error",!1,g)})}function Ft(u,g,_,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(_)}catch{}}function gi(){this.g=new jr}function Lr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Lr,sr),Lr.prototype.g=function(){return new wn(this.i,this.h)};function wn(u,g){et.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(wn,et),r=wn.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,qn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||h).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function zl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ws(this):qn(this),this.readyState==3&&zl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ws(this))},r.Na=function(u){this.g&&(this.response=u,ws(this))},r.ga=function(){this.g&&ws(this)};function ws(u){u.readyState=4,u.l=null,u.j=null,u.B=null,qn(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Bl(u){let g="";return me(u,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function ro(u,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Bl(_),typeof u=="string"?_!=null&&ir(_):Be(u,g,_))}function Qe(u){et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Qe,et);var $l=/^https?$/i,Xc=["POST","PUT"];r=Qe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jl.g(),this.g.onreadystatechange=S(v(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){xs(this,B);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)_.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const B of I.keys())_.set(B,I.get(B));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),L=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Xc,g,void 0)>=0)||I||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ne]of _)this.g.setRequestHeader(B,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){xs(this,B)}};function xs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Es(u),Ur(u)}function Es(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,at(this,"complete"),at(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Qe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Mr(this):this.Xa())},r.Xa=function(){Mr(this)};function Mr(u){if(u.h&&typeof l<"u"){if(u.v&&dr(u)==4)setTimeout(u.Ca.bind(u),0);else if(at(u,"readystatechange"),dr(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=B===0){let ne=String(u.D).match(Ul)[1]||null;!ne&&h.self&&h.self.location&&(ne=h.self.location.protocol.slice(0,-1)),I=!$l.test(ne?ne.toLowerCase():"")}_=I}if(_)at(u,"complete"),at(u,"success");else{u.o=6;try{var L=dr(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Es(u)}}finally{Ur(u)}}}}function Ur(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||at(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function dr(u){return u.g?u.g.readyState:0}r.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Qi(g)}};function ql(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(u){const g={};u=(u.g&&dr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(b(u[I]))continue;var _=Yi(u[I]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=g[L]||[];g[L]=B,B.push(_)}ue(g,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function so(u){this.za=0,this.i=[],this.j=new Ge,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fr("baseRetryDelayMs",5e3,u),this.Za=fr("retryDelaySeedMs",1e4,u),this.Ta=fr("forwardChannelMaxRetries",2,u),this.va=fr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Zi(u&&u.concurrentRequestLimit),this.Ba=new gi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=so.prototype,r.ka=8,r.I=1,r.connect=function(u,g,_,I){it(0),this.W=u,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Ta(this,null,this.W),zr(this)};function io(u){if(oo(u),u.I==3){var g=u.V++,_=Nn(u.J);if(Be(_,"SID",u.M),Be(_,"RID",g),Be(_,"TYPE","terminate"),pr(u,_),g=new bn(u,u.j,g),g.M=2,g.A=Or(Nn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.A,_=!0),_||(g.g=Wl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),li(g)}vi(u)}function xn(u){u.g&&(_i(u),u.g.cancel(),u.g=null)}function oo(u){xn(u),u.v&&(h.clearTimeout(u.v),u.v=null),ao(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function zr(u){if(!ha(u.h)&&!u.m){u.m=!0;var g=u.Ea;ie||T(),re||(ie(),re=!0),C.add(g,u),u.D=0}}function Hl(u,g){return ci(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=be(v(u.Ea,u,g),uo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new bn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=j(B),Se(B,this.U)):B=this.U),this.u!==null||this.R||(L.J=B,B=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ea(this,L,g),_=Nn(this.J),Be(_,"RID",u),Be(_,"CVER",22),this.G&&Be(_,"X-HTTP-Session-Id",this.G),pr(this,_),B&&(this.R?g="headers="+ir(Bl(B))+"&"+g:this.u&&ro(_,this.u,B)),eo(this.h,L),this.Ra&&Be(_,"TYPE","init"),this.S?(Be(_,"$req",g),Be(_,"SID","null"),L.U=!0,$n(L,_,null)):$n(L,_,g),this.I=2}}else this.I==3&&(u?yi(this,u):this.i.length==0||ha(this.h)||yi(this))};function yi(u,g){var _;g?_=g.l:_=u.V++;const I=Nn(u.J);Be(I,"SID",u.M),Be(I,"RID",_),Be(I,"AID",u.K),pr(u,I),u.u&&u.o&&ro(I,u.u,u.o),_=new bn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ea(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),eo(u.h,_),$n(_,I,g)}function pr(u,g){u.H&&me(u.H,function(_,I){Be(g,I,_)}),u.l&&me({},function(_,I){Be(g,I,_)})}function Ea(u,g,_){_=Math.min(u.i.length,_);const I=u.l?v(u.l.Ka,u.l,u):null;e:{var L=u.i;let Ae=-1;for(;;){const pt=["count="+_];Ae==-1?_>0?(Ae=L[0].g,pt.push("ofs="+Ae)):Ae=0:pt.push("ofs="+Ae);let We=!0;for(let vt=0;vt<_;vt++){var B=L[vt].g;const Tn=L[vt].map;if(B-=Ae,B<0)Ae=Math.max(0,L[vt].g-100),We=!1;else try{B="req"+B+"_"||"";try{var ne=Tn instanceof Map?Tn:Object.entries(Tn);for(const[Br,gr]of ne){let yr=gr;m(gr)&&(yr=Ln(gr)),pt.push(B+Br+"="+encodeURIComponent(yr))}}catch(Br){throw pt.push(B+"type="+encodeURIComponent("_badmap")),Br}}catch{I&&I(Tn)}}if(We){ne=pt.join("&");break e}}ne=void 0}return u=u.i.splice(0,_),g.G=u,ne}function Ht(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ie||T(),re||(ie(),re=!0),C.add(g,u),u.A=0}}function mr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=be(v(u.Da,u),uo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Ts(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=be(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),xn(this),Ts(this))};function _i(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Ts(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Nn(u.na);Be(g,"RID","rpc"),Be(g,"SID",u.M),Be(g,"AID",u.K),Be(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Be(g,"TO",u.ia),Be(g,"TYPE","xmlhttp"),pr(u,g),u.u&&u.o&&ro(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Or(Nn(g)),_.u=null,_.R=!0,ua(_,u)}r.Va=function(){this.C!=null&&(this.C=null,xn(this),mr(this),it(19))};function ao(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function lo(u,g){var _=null;if(u.g==g){ao(u),_i(u),u.g=null;var I=2}else if(da(u.h,g))_=g.G,hi(u.h,g),I=1;else return;if(u.I!=0){if(g.o)if(I==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;I=Un(),at(I,new ve(I,_)),zr(u)}else Ht(u);else if(L=g.m,L==3||L==0&&g.X>0||!(I==1&&Hl(u,g)||I==2&&mr(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),L){case 1:En(u,5);break;case 4:En(u,10);break;case 3:En(u,6);break;default:En(u,2)}}}function uo(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function En(u,g){if(u.j.info("Error code "+g),g==2){var _=v(u.bb,u),I=u.Ua;const L=!I;I=new or(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||di(I,"https"),Or(I),L?cr(I.toString(),_):hr(I.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(g),vi(u),oo(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function vi(u){if(u.I=0,u.ja=[],u.l){const g=_n(u.h);(g.length!=0||u.i.length!=0)&&(q(u.ja,g),q(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Ta(u,g,_){var I=_ instanceof or?Nn(_):new or(_);if(I.g!="")g&&(I.g=g+"."+I.g),ar(I,I.u);else{var L=h.location;I=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const B=new or(null);I&&di(B,I),g&&(B.g=g),L&&ar(B,L),_&&(B.h=_),I=B}return _=u.G,g=u.wa,_&&g&&Be(I,_,g),Be(I,"VER",u.ka),pr(u,I),I}function Wl(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Qe(new Lr({ab:_})):new Qe(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kl(){}r=Kl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function co(){}co.prototype.g=function(u,g){return new Ot(u,g)};function Ot(u,g){et.call(this),this.g=new so(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!b(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Is(this)}E(Ot,et),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){io(this.g)},Ot.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Ln(u),u=_);g.i.push(new Gc(g.Ya++,u)),g.I==3&&zr(g)},Ot.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,Ot.Z.N.call(this)};function Gl(u){ms.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Gl,ms);function Ql(){oi.call(this),this.status=1}E(Ql,oi);function Is(u){this.g=u}E(Is,Kl),Is.prototype.ra=function(){at(this.g,"a")},Is.prototype.qa=function(u){at(this.g,new Gl(u))},Is.prototype.pa=function(u){at(this.g,new Ql)},Is.prototype.oa=function(){at(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,O_=function(){return new co},F_=function(){return Un()},V_=gn,$d={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,Qu=qt,_s.COMPLETE="complete",j_=_s,Xi.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",et.prototype.listen=et.prototype.J,Xa=Xi,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,D_=Qe}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const Qg="@firebase/firestore",Xg="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new _f("@firebase/firestore");function jo(){return zi.logLevel}function ce(r,...e){if(zi.logLevel<=Pe.DEBUG){const t=e.map(xf);zi.debug(`Firestore (${ea}): ${r}`,...t)}}function is(r,...e){if(zi.logLevel<=Pe.ERROR){const t=e.map(xf);zi.error(`Firestore (${ea}): ${r}`,...t)}}function qo(r,...e){if(zi.logLevel<=Pe.WARN){const t=e.map(xf);zi.warn(`Firestore (${ea}): ${r}`,...t)}}function xf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,L_(r,i,t)}function L_(r,e,t){let i=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw is(i),new Error(i)}function He(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||L_(e,o,i)}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yt.UNAUTHENTICATED)))}shutdown(){}}class GE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class QE{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new rs,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},m=y=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new rs)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new M_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class XE{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YE{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new XE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=ZE(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function De(r,e){return r<e?-1:r>e?1:0}function qd(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return bd(o)===bd(l)?De(o,l):bd(o)?1:-1}return De(r.length,e.length)}const e1=55296,t1=57343;function bd(r){const e=r.charCodeAt(0);return e>=e1&&e<=t1}function Ho(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="__name__";class Er{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Er.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const i=Er.isNumericId(e),o=Er.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Er.extractNumericId(e).compare(Er.extractNumericId(t)):qd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}}class Je extends Er{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const n1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Er{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return n1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jg}static keyField(){return new zt([Jg])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ae(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ae(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ae(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(l(),o++)}if(l(),h)throw new ae(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Je.fromString(e))}static fromName(e){return new ge(Je.fromString(e).popFirst(5))}static empty(){return new ge(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(r,e,t){if(!t)throw new ae(H.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function r1(r,e,t,i){if(e===!0&&i===!0)throw new ae(H.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Zg(r){if(!ge.isDocumentKey(r))throw new ae(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ey(r){if(ge.isDocumentKey(r))throw new ae(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function z_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Cc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function rn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cc(r);throw new ae(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function wl(r,e){if(!z_(r))throw new ae(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(H.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=-62135596800,ny=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ny);return new st(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ty)throw new ae(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ny}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wl(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:It("string",st._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new st(0,0))}static max(){return new Ie(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=-1;function s1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new st(t+1,0):new st(t,i));return new Ys(o,ge.empty(),e)}function i1(r){return new Ys(r.readTime,r.key,ll)}class Ys{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ys(Ie.min(),ge.empty(),ll)}static max(){return new Ys(Ie.max(),ge.empty(),ll)}}function o1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(r){if(r.code!==H.FAILED_PRECONDITION||r.message!==a1)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(y=>i(y)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((o=>o?K.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,o)=>{const l=e.length,h=new Array(l);let m=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((x=>{h[v]=x,++m,m===l&&i(h)}),(x=>o(x)))}}))}static doWhile(e,t){return new K(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function u1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function na(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=-1;function Nc(r){return r==null}function uc(r){return r===0&&1/r==-1/0}function c1(r){return typeof r=="number"&&Number.isInteger(r)&&!uc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="";function h1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ry(e)),e=d1(r.get(t),e);return ry(e)}function d1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case B_:t+="";break;default:t+=l}}return t}function ry(r){return r+B_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ri(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function $_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ut.RED,this.left=o??Ut.EMPTY,this.right=l??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ut(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iy(this.data.getIterator())}getIteratorFrom(e){return new iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new bt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new q_("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const f1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(r){if(He(!!r,39018),typeof r=="string"){let e=0;const t=f1.exec(r);if(He(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(r.seconds),nanos:gt(r.nanos)}}function gt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Zs(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="server_timestamp",W_="__type__",K_="__previous_value__",G_="__local_write_time__";function If(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[W_])==null?void 0:i.stringValue)===H_}function kc(r){const e=r.mapValue.fields[K_];return If(e)?kc(e):e}function ul(r){const e=Js(r.mapValue.fields[G_].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t,i,o,l,h,m,y,v,x){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=x}}const cc="(default)";class cl{constructor(e,t){this.projectId=e,this.database=t||cc}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database===cc}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="__type__",m1="__max__",Hu={mapValue:{}},X_="__vector__",hc="value";function ei(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?If(r)?4:y1(r)?9007199254740991:g1(r)?10:11:we(28295,{value:r})}function br(r,e){if(r===e)return!0;const t=ei(r);if(t!==ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ul(r).isEqual(ul(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Js(o.timestampValue),m=Js(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Zs(o.bytesValue).isEqual(Zs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return gt(o.geoPointValue.latitude)===gt(l.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return gt(o.integerValue)===gt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=gt(o.doubleValue),m=gt(l.doubleValue);return h===m?uc(h)===uc(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Ho(r.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(sy(h)!==sy(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!br(h[y],m[y])))return!1;return!0})(r,e);default:return we(52216,{left:r})}}function hl(r,e){return(r.values||[]).find((t=>br(t,e)))!==void 0}function Wo(r,e){if(r===e)return 0;const t=ei(r),i=ei(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=gt(l.integerValue||l.doubleValue),y=gt(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(r,e);case 3:return oy(r.timestampValue,e.timestampValue);case 4:return oy(ul(r),ul(e));case 5:return qd(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=Zs(l),y=Zs(h);return m.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),y=h.split("/");for(let v=0;v<m.length&&v<y.length;v++){const x=De(m[v],y[v]);if(x!==0)return x}return De(m.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=De(gt(l.latitude),gt(h.latitude));return m!==0?m:De(gt(l.longitude),gt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ay(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var S,O,q,$;const m=l.fields||{},y=h.fields||{},v=(S=m[hc])==null?void 0:S.arrayValue,x=(O=y[hc])==null?void 0:O.arrayValue,E=De(((q=v==null?void 0:v.values)==null?void 0:q.length)||0,(($=x==null?void 0:x.values)==null?void 0:$.length)||0);return E!==0?E:ay(v,x)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Hu.mapValue&&h===Hu.mapValue)return 0;if(l===Hu.mapValue)return 1;if(h===Hu.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),v=h.fields||{},x=Object.keys(v);y.sort(),x.sort();for(let E=0;E<y.length&&E<x.length;++E){const S=qd(y[E],x[E]);if(S!==0)return S;const O=Wo(m[y[E]],v[x[E]]);if(O!==0)return O}return De(y.length,x.length)})(r.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function oy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=Js(r),i=Js(e),o=De(t.seconds,i.seconds);return o!==0?o:De(t.nanos,i.nanos)}function ay(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Wo(t[o],i[o]);if(l)return l}return De(t.length,i.length)}function Ko(r){return Hd(r)}function Hd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Js(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Zs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ge.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Hd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Hd(t.fields[h])}`;return o+"}"})(r.mapValue):we(61005,{value:r})}function Xu(r){switch(ei(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kc(r);return e?16+Xu(e):16;case 5:return 2*r.stringValue.length;case 6:return Zs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Xu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ri(i.fields,((l,h)=>{o+=l.length+Xu(h)})),o})(r.mapValue);default:throw we(13486,{value:r})}}function ly(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wd(r){return!!r&&"integerValue"in r}function Sf(r){return!!r&&"arrayValue"in r}function uy(r){return!!r&&"nullValue"in r}function cy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Yu(r){return!!r&&"mapValue"in r}function g1(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Q_])==null?void 0:i.stringValue)===X_}function tl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ri(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=tl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(r.arrayValue.values[t]);return e}return{...r}}function y1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===m1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=zt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=tl(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Yu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ri(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new fn(tl(this.value))}}function Y_(r){const e=[];return ri(r.fields,((t,i)=>{const o=new zt([t]);if(Yu(i)){const l=Y_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,i,o,l,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Jt(e,0,Ie.min(),Ie.min(),Ie.min(),fn.empty(),0)}static newFoundDocument(e,t,i,o){return new Jt(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new Jt(e,2,t,Ie.min(),Ie.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Ie.min(),Ie.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.position=e,this.inclusive=t}}function hy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ge.comparator(ge.fromName(h.referenceValue),t.key):i=Wo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function dy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!br(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t="asc"){this.field=e,this.dir=t}}function _1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{}class Tt extends J_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new w1(e,t,i):t==="array-contains"?new T1(e,i):t==="in"?new I1(e,i):t==="not-in"?new S1(e,i):t==="array-contains-any"?new A1(e,i):new Tt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new x1(e,i):new E1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&ei(this.value)===ei(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends J_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new tr(e,t)}matches(e){return Z_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Z_(r){return r.op==="and"}function ev(r){return v1(r)&&Z_(r)}function v1(r){for(const e of r.filters)if(e instanceof tr)return!1;return!0}function Kd(r){if(r instanceof Tt)return r.field.canonicalString()+r.op.toString()+Ko(r.value);if(ev(r))return r.filters.map((e=>Kd(e))).join(",");{const e=r.filters.map((t=>Kd(t))).join(",");return`${r.op}(${e})`}}function tv(r,e){return r instanceof Tt?(function(i,o){return o instanceof Tt&&i.op===o.op&&i.field.isEqual(o.field)&&br(i.value,o.value)})(r,e):r instanceof tr?(function(i,o){return o instanceof tr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,m)=>l&&tv(h,o.filters[m])),!0):!1})(r,e):void we(19439)}function nv(r){return r instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ko(t.value)}`})(r):r instanceof tr?(function(t){return t.op.toString()+" {"+t.getFilters().map(nv).join(" ,")+"}"})(r):"Filter"}class w1 extends Tt{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class x1 extends Tt{constructor(e,t){super(e,"in",t),this.keys=rv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class E1 extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=rv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ge.fromName(i.referenceValue)))}class T1 extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sf(t)&&hl(t.arrayValue,this.value)}}class I1 extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hl(this.value.arrayValue,t)}}class S1 extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hl(this.value.arrayValue,t)}}class A1 extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>hl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,t=null,i=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function fy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new C1(r,e,t,i,o,l,h)}function Af(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Kd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ko(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ko(i))).join(",")),e.Te=t}return e.Te}function Cf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!_1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!tv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!dy(r.startAt,e.startAt)&&dy(r.endAt,e.endAt)}function Gd(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t=null,i=[],o=[],l=null,h="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function b1(r,e,t,i,o,l,h,m){return new ra(r,e,t,i,o,l,h,m)}function Rc(r){return new ra(r)}function py(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function sv(r){return r.collectionGroup!==null}function nl(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new bt(zt.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new dl(l,i))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new dl(zt.keyField(),i))}return e.Ie}function Tr(r){const e=Ce(r);return e.Ee||(e.Ee=N1(e,nl(r))),e.Ee}function N1(r,e){if(r.limitType==="F")return fy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new dl(o.field,l)}));const t=r.endAt?new dc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new dc(r.startAt.position,r.startAt.inclusive):null;return fy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Qd(r,e){const t=r.filters.concat([e]);return new ra(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Xd(r,e,t){return new ra(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Pc(r,e){return Cf(Tr(r),Tr(e))&&r.limitType===e.limitType}function iv(r){return`${Af(Tr(r))}|lt:${r.limitType}`}function Vo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>nv(o))).join(", ")}]`),Nc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ko(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ko(o))).join(",")),`Target(${i})`})(Tr(r))}; limitType=${r.limitType})`}function Dc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ge.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of nl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,y){const v=hy(h,m,y);return h.inclusive?v<=0:v<0})(i.startAt,nl(i),o)||i.endAt&&!(function(h,m,y){const v=hy(h,m,y);return h.inclusive?v>=0:v>0})(i.endAt,nl(i),o))})(r,e)}function k1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ov(r){return(e,t)=>{let i=!1;for(const o of nl(r)){const l=R1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function R1(r,e,t){const i=r.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,h,m){const y=h.data.field(l),v=m.data.field(l);return y!==null&&v!==null?Wo(y,v):we(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return $_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=new ht(ge.comparator);function os(){return P1}const av=new ht(ge.comparator);function Ya(...r){let e=av;for(const t of r)e=e.insert(t.key,t);return e}function lv(r){let e=av;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Di(){return rl()}function uv(){return rl()}function rl(){return new qi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const D1=new ht(ge.comparator),j1=new bt(ge.comparator);function je(...r){let e=j1;for(const t of r)e=e.add(t);return e}const V1=new bt(De);function F1(){return V1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function cv(r){return{integerValue:""+r}}function O1(r,e){return c1(e)?cv(e):bf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this._=void 0}}function L1(r,e,t){return r instanceof fl?(function(o,l){const h={fields:{[W_]:{stringValue:H_},[G_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&If(l)&&(l=kc(l)),l&&(h.fields[K_]=l),{mapValue:h}})(t,e):r instanceof pl?dv(r,e):r instanceof ml?fv(r,e):(function(o,l){const h=hv(o,l),m=my(h)+my(o.Ae);return Wd(h)&&Wd(o.Ae)?cv(m):bf(o.serializer,m)})(r,e)}function M1(r,e,t){return r instanceof pl?dv(r,e):r instanceof ml?fv(r,e):t}function hv(r,e){return r instanceof fc?(function(i){return Wd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class fl extends jc{}class pl extends jc{constructor(e){super(),this.elements=e}}function dv(r,e){const t=pv(e);for(const i of r.elements)t.some((o=>br(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ml extends jc{constructor(e){super(),this.elements=e}}function fv(r,e){let t=pv(e);for(const i of r.elements)t=t.filter((o=>!br(o,i)));return{arrayValue:{values:t}}}class fc extends jc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function my(r){return gt(r.integerValue||r.doubleValue)}function pv(r){return Sf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t){this.field=e,this.transform=t}}function z1(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof pl&&o instanceof pl||i instanceof ml&&o instanceof ml?Ho(i.elements,o.elements,br):i instanceof fc&&o instanceof fc?br(i.Ae,o.Ae):i instanceof fl&&o instanceof fl})(r.transform,e.transform)}class B1{constructor(e,t){this.version=e,this.transformResults=t}}class sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Vc{}function mv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Fc(r.key,sn.none()):new xl(r.key,r.data,sn.none());{const t=r.data,i=fn.empty();let o=new bt(zt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new si(r.key,i,new Cn(o.toArray()),sn.none())}}function $1(r,e,t){r instanceof xl?(function(o,l,h){const m=o.value.clone(),y=yy(o.fieldTransforms,l,h.transformResults);m.setAll(y),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof si?(function(o,l,h){if(!Ju(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=yy(o.fieldTransforms,l,h.transformResults),y=l.data;y.setAll(gv(o)),y.setAll(m),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function sl(r,e,t,i){return r instanceof xl?(function(l,h,m,y){if(!Ju(l.precondition,h))return m;const v=l.value.clone(),x=_y(l.fieldTransforms,y,h);return v.setAll(x),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof si?(function(l,h,m,y){if(!Ju(l.precondition,h))return m;const v=_y(l.fieldTransforms,y,h),x=h.data;return x.setAll(gv(l)),x.setAll(v),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(l,h,m){return Ju(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function q1(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=hv(i.transform,o||null);l!=null&&(t===null&&(t=fn.empty()),t.set(i.field,l))}return t||null}function gy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ho(i,o,((l,h)=>z1(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class xl extends Vc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class si extends Vc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function yy(r,e,t){const i=new Map;He(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);i.set(l.field,M1(h,m,t[o]))}return i}function _y(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,L1(l,h,e))}return i}class Fc extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H1 extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&$1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=uv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const y=mv(h,m);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,((t,i)=>gy(t,i)))&&Ho(this.baseMutations,e.baseMutations,((t,i)=>gy(t,i)))}}class Nf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return D1})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Nf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Oe;function Q1(r){switch(r){case H.OK:return we(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function yv(r){if(r===void 0)return is("GRPC error has no .code"),H.UNKNOWN;switch(r){case xt.OK:return H.OK;case xt.CANCELLED:return H.CANCELLED;case xt.UNKNOWN:return H.UNKNOWN;case xt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case xt.INTERNAL:return H.INTERNAL;case xt.UNAVAILABLE:return H.UNAVAILABLE;case xt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case xt.NOT_FOUND:return H.NOT_FOUND;case xt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case xt.ABORTED:return H.ABORTED;case xt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case xt.DATA_LOSS:return H.DATA_LOSS;default:return we(39323,{code:r})}}(Oe=xt||(xt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Qs([4294967295,4294967295],0);function vy(r){const e=X1().encode(r),t=new P_;return t.update(e),new Uint8Array(t.digest())}function wy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Qs([t,i],0),new Qs([o,l],0)]}class kf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ja(`Invalid padding: ${t}`);if(i<0)throw new Ja(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Qs.fromNumber(i)));return o.compare(Y1)===1&&(o=new Qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=vy(e),[i,o]=wy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new kf(l,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=vy(e),[i,o]=wy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Oc(Ie.min(),o,new ht(De),os(),je())}}class El{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new El(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class _v{constructor(e,t){this.targetId=e,this.Ce=t}}class vv{constructor(e,t,i=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class xy{constructor(){this.ve=0,this.Fe=Ey(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:l})}})),new El(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Ey()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class J1{constructor(e){this.Ge=e,this.ze=new Map,this.je=os(),this.Je=Wu(),this.He=Wu(),this.Ye=new ht(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Gd(l))if(i===0){const h=new ge(l.path);this.et(t,h,Jt.newNoDocument(h,Ie.min()))}else He(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),y=m?this.ct(m,e,h):1;if(y!==0){this.it(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=Zs(i).toUint8Array()}catch(y){if(y instanceof q_)return qo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new kf(h,o,l)}catch(y){return qo(y instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&Gd(m.target)){const y=new ge(m.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,Jt.newNoDocument(y,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=je();this.He.forEach(((l,h)=>{let m=!0;h.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Oc(e,t,this.Ye,this.je,i);return this.je=os(),this.Je=Wu(),this.He=Wu(),this.Ye=new ht(De),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new xy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wu(){return new ht(ge.comparator)}function Ey(){return new ht(ge.comparator)}const Z1={asc:"ASCENDING",desc:"DESCENDING"},eT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tT={and:"AND",or:"OR"};class nT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yd(r,e){return r.useProto3Json||Nc(e)?e:{value:e}}function pc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function rT(r,e){return pc(r,e.toTimestamp())}function Ir(r){return He(!!r,49232),Ie.fromTimestamp((function(t){const i=Js(t);return new st(i.seconds,i.nanos)})(r))}function Rf(r,e){return Jd(r,e).canonicalString()}function Jd(r,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function xv(r){const e=Je.fromString(r);return He(Av(e),10190,{key:e.toString()}),e}function Zd(r,e){return Rf(r.databaseId,e.path)}function Nd(r,e){const t=xv(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ge(Tv(t))}function Ev(r,e){return Rf(r.databaseId,e)}function sT(r){const e=xv(r);return e.length===4?Je.emptyPath():Tv(e)}function ef(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Tv(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ty(r,e,t){return{name:Zd(r,e),fields:t.value.mapValue.fields}}function iT(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:we(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,x){return v.useProto3Json?(He(x===void 0||typeof x=="string",58123),Bt.fromBase64String(x||"")):(He(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Bt.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const x=v.code===void 0?H.UNKNOWN:yv(v.code);return new ae(x,v.message||"")})(h);t=new vv(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Nd(r,i.document.name),l=Ir(i.document.updateTime),h=i.document.createTime?Ir(i.document.createTime):Ie.min(),m=new fn({mapValue:{fields:i.document.fields}}),y=Jt.newFoundDocument(o,l,h,m),v=i.targetIds||[],x=i.removedTargetIds||[];t=new Zu(v,x,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Nd(r,i.document),l=i.readTime?Ir(i.readTime):Ie.min(),h=Jt.newNoDocument(o,l),m=i.removedTargetIds||[];t=new Zu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Nd(r,i.document),l=i.removedTargetIds||[];t=new Zu([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new G1(o,l),m=i.targetId;t=new _v(m,h)}}return t}function oT(r,e){let t;if(e instanceof xl)t={update:Ty(r,e.key,e.value)};else if(e instanceof Fc)t={delete:Zd(r,e.key)};else if(e instanceof si)t={update:Ty(r,e.key,e.data),updateMask:mT(e.fieldMask)};else{if(!(e instanceof H1))return we(16599,{Vt:e.type});t={verify:Zd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const m=h.transform;if(m instanceof fl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof pl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ml)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof fc)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:rT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(r,e.precondition)),t}function aT(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Ir(o.updateTime):Ir(l);return h.isEqual(Ie.min())&&(h=Ir(l)),new B1(h,o.transformResults||[])})(t,e)))):[]}function lT(r,e){return{documents:[Ev(r,e.path)]}}function uT(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Ev(r,o);const l=(function(v){if(v.length!==0)return Sv(tr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((x=>(function(S){return{field:Fo(S.field),direction:dT(S.dir)}})(x)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Yd(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function cT(r){let e=sT(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(E){const S=Iv(E);return S instanceof tr&&ev(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((S=>(function(q){return new dl(Oo(q.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let S;return S=typeof E=="object"?E.value:E,Nc(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,O=E.values||[];return new dc(O,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const S=!E.before,O=E.values||[];return new dc(O,S)})(t.endAt)),b1(e,o,h,l,m,"F",y,v)}function hT(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Iv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Oo(t.unaryFilter.field);return Tt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(t.unaryFilter.field);return Tt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oo(t.unaryFilter.field);return Tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Oo(t.unaryFilter.field);return Tt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Tt.create(Oo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return tr.create(t.compositeFilter.filters.map((i=>Iv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(r):we(30097,{filter:r})}function dT(r){return Z1[r]}function fT(r){return eT[r]}function pT(r){return tT[r]}function Fo(r){return{fieldPath:r.canonicalString()}}function Oo(r){return zt.fromServerFormat(r.fieldPath)}function Sv(r){return r instanceof Tt?(function(t){if(t.op==="=="){if(cy(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if(uy(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cy(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NAN"}};if(uy(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:fT(t.op),value:t.value}}})(r):r instanceof tr?(function(t){const i=t.getFilters().map((o=>Sv(o)));return i.length===1?i[0]:{compositeFilter:{op:pT(t.op),filters:i}}})(r):we(54877,{filter:r})}function mT(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Av(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,i,o,l=Ie.min(),h=Ie.min(),m=Bt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.yt=e}}function yT(r){const e=cT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.Cn=new vT}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Ys.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class vT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new bt(Je.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new bt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cv=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(Cv,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Go(0)}static cr(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="LruGarbageCollector",wT=1048576;function Ay([r,e],[t,i]){const o=De(r,t);return o===0?De(e,i):o}class xT{constructor(e){this.Ir=e,this.buffer=new bt(Ay),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ay(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ET{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Sy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){na(t)?ce(Sy,"Ignoring IndexedDB error during garbage collection: ",t):await ta(t)}await this.Vr(3e5)}))}}class TT{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(bc.ce);const i=new xT(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Iy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,m,y,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,m=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(v=Date.now(),jo()<=Pe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${E} documents in `+(v-y)+`ms
Total Duration: ${v-x}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function IT(r,e){return new TT(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.changes=new qi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&sl(i.mutation,o,Cn.empty(),st.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const o=Di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ya();return l.forEach(((m,y)=>{h=h.insert(m,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Di();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let l=os();const h=rl(),m=(function(){return rl()})();return t.forEach(((y,v)=>{const x=i.get(v.key);o.has(v.key)&&(x===void 0||x.mutation instanceof si)?l=l.insert(v.key,v):x!==void 0?(h.set(v.key,x.mutation.getFieldMask()),sl(x.mutation,v,x.mutation.getFieldMask(),st.now())):h.set(v.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,x)=>h.set(v,x))),t.forEach(((v,x)=>m.set(v,new AT(x,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=rl();let o=new ht(((h,m)=>h-m)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let x=i.get(y)||Cn.empty();x=m.applyToLocalView(v,x),i.set(y,x);const E=(o.get(m.batchId)||je()).add(y);o=o.insert(m.batchId,E)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,x=y.value,E=uv();x.forEach((S=>{if(!l.has(S)){const O=mv(t.get(S),i.get(S));O!==null&&E.set(S,O),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,E))}return K.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(Di());let m=ll,y=l;return h.next((v=>K.forEach(v,((x,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(x)?K.resolve():this.remoteDocumentCache.getEntry(e,x).next((S=>{y=y.insert(x,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,je()))).next((x=>({batchId:m,changes:lv(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((i=>{let o=Ya();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ya();return this.indexManager.getCollectionParents(e,l).next((m=>K.forEach(m,(y=>{const v=(function(E,S){return new ra(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((x=>{x.forEach(((E,S)=>{h=h.insert(E,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((y,v)=>{const x=v.getKey();h.get(x)===null&&(h=h.insert(x,Jt.newInvalidDocument(x)))}));let m=Ya();return h.forEach(((y,v)=>{const x=l.get(y);x!==void 0&&sl(x.mutation,v,Cn.empty(),st.now()),Dc(t,v)&&(m=m.insert(y,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ir(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:yT(o.bundledQuery),readTime:Ir(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.overlays=new ht(ge.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Di();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=Di(),l=t.length+1,h=new ge(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new ht(((v,x)=>v-x));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let x=l.get(v.largestBatchId);x===null&&(x=Di(),l=l.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const m=Di(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,x)=>m.set(v,x))),!(m.size()>=o)););return K.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new K1(t,i));let l=this.qr.get(t);l===void 0&&(l=je(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this.Qr=new bt(Dt.$r),this.Ur=new bt(Dt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Dt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Dt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ge(new Je([])),i=new Dt(t,e),o=new Dt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new Je([])),i=new Dt(t,e),o=new Dt(t,e+1);let l=je();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Dt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Dt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Dt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new W1(l,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Dt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Tf:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Dt(t,0),o=new Dt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const m=this.Xr(h.Yr);l.push(m)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bt(De);return t.forEach((o=>{const l=new Dt(o,0),h=new Dt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(m=>{i=i.add(m.Yr)}))})),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ge.isDocumentKey(l)||(l=l.child(""));const h=new Dt(new ge(l),0);let m=new bt(De);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(m=m.add(y.Yr)),!0)}),h),K.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(t.mutations,(o=>{const l=new Dt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Dt(t,0),o=this.Zr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.ri=e,this.docs=(function(){return new ht(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let i=os();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Jt.newInvalidDocument(o))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=os();const h=t.path,m=new ge(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:x}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||o1(i1(x),i)<=0||(o.has(x.key)||Dc(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new DT(this)}getSize(e){return K.resolve(this.size)}}class DT extends ST{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.persistence=e,this.si=new qi((t=>Af(t)),Cf),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Pf,this.targetCount=0,this.ai=Go.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Go(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t){this.ui={},this.overlays={},this.ci=new bc(0),this.li=!1,this.li=!0,this.hi=new kT,this.referenceDelegate=e(this),this.Pi=new jT(this),this.indexManager=new _T,this.remoteDocumentCache=(function(o){return new PT(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new gT(t),this.Ii=new bT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new RT(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const o=new VT(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return K.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class VT extends l1{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Ri=new Pf,this.Vi=null}static mi(e){return new Df(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(i=>{const o=ge.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class mc{constructor(e,t){this.persistence=e,this.pi=new qi((i=>h1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=IT(this,t)}static mi(e,t){return new mc(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(i++,l.removeEntry(h,Ie.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xu(e.data.value)),t}br(e,t,i){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new jf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Cx()?8:u1(Zt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new FT;return this.Ss(e,t,h).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(jo()<=Pe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(jo()<=Pe.DEBUG&&ce("QueryEngine","Query:",Vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(jo()<=Pe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(t))):K.resolve())}ys(e,t){if(py(t))return K.resolve(null);let i=Tr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Xd(t,null,"F"),i=Tr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=je(...l);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.Ds(t,m);return this.Cs(t,v,h,y.readTime)?this.ys(e,Xd(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ws(e,t,i,o){return py(t)||o.isEqual(Ie.min())?K.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?K.resolve(null):(jo()<=Pe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vo(t)),this.vs(e,h,t,s1(o,ll)).next((m=>m)))}))}Ds(e,t){let i=new bt(ov(e));return t.forEach(((o,l)=>{Dc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return jo()<=Pe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ys.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="LocalStore",LT=3e8;class MT{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ht(De),this.xs=new qi((l=>Af(l)),Cf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function UT(r,e,t,i){return new MT(r,e,t,i)}async function Nv(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],m=[];let y=je();for(const v of o){h.push(v.batchId);for(const x of v.mutations)y=y.add(x.key)}for(const v of l){m.push(v.batchId);for(const x of v.mutations)y=y.add(x.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function zT(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,v,x){const E=v.batch,S=E.keys();let O=K.resolve();return S.forEach((q=>{O=O.next((()=>x.getEntry(y,q))).next(($=>{const U=v.docVersions.get(q);He(U!==null,48541),$.version.compareTo(U)<0&&(E.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),x.addEntry($)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(y,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let y=je();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function kv(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function BT(r,e){const t=Ce(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((x,E)=>{const S=o.get(E);if(!S)return;m.push(t.Pi.removeMatchingKeys(l,x.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,x.addedDocuments,E))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Bt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):x.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(x.resumeToken,i)),o=o.insert(E,O),(function($,U,G){return $.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=LT?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(S,O,x)&&m.push(t.Pi.updateTargetData(l,O))}));let y=os(),v=je();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),m.push($T(l,h,e.documentUpdates).next((x=>{y=x.ks,v=x.qs}))),!i.isEqual(Ie.min())){const x=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(x)}return K.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Ms=o,l)))}function $T(r,e,t){let i=je(),o=je();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=os();return t.forEach(((m,y)=>{const v=l.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Ie.min())?(e.removeEntry(m,y.readTime),h=h.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(m,y)):ce(Vf,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)})),{ks:h,qs:o}}))}function qT(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Tf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function HT(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,K.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new qs(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function tf(r,e,t){const i=Ce(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!na(h))throw h;ce(Vf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Cy(r,e,t){const i=Ce(r);let o=Ie.min(),l=je();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,v,x){const E=Ce(y),S=E.xs.get(x);return S!==void 0?K.resolve(E.Ms.get(S)):E.Pi.getTargetData(v,x)})(i,h,Tr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((y=>{l=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Ie.min(),t?l:je()))).next((m=>(WT(i,k1(e),m),{documents:m,Qs:l})))))}function WT(r,e,t){let i=r.Os.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class by{constructor(){this.activeTargetIds=F1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KT{constructor(){this.Mo=new by,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new by,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="ConnectivityMonitor";class ky{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Ny,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Ny,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=null;function nf(){return Ku===null?Ku=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ku++,"0x"+Ku.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="RestConnection",QT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===cc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=nf(),m=this.zo(e,t.toUriEncodedString());ce(kd,`Sending RPC '${e}' ${h}:`,m,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,l);const{host:v}=new URL(m),x=Jo(v);return this.Jo(e,m,y,i,x).then((E=>(ce(kd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw qo(kd,`RPC '${e}' ${h} failed with error: `,E,"url: ",m,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=QT[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class JT extends XT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=nf();return new Promise(((m,y)=>{const v=new D_;v.setWithCredentials(!0),v.listenOnce(j_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Qu.NO_ERROR:const E=v.getResponseJson();ce(Xt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),m(E);break;case Qu.TIMEOUT:ce(Xt,`RPC '${e}' ${h} timed out`),y(new ae(H.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:const S=v.getStatus();if(ce(Xt,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let O=v.getResponseJson();Array.isArray(O)&&(O=O[0]);const q=O==null?void 0:O.error;if(q&&q.status&&q.message){const $=(function(G){const te=G.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(te)>=0?te:H.UNKNOWN})(q.status);y(new ae($,q.message))}else y(new ae(H.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new ae(H.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ce(Xt,`RPC '${e}' ${h} completed.`)}}));const x=JSON.stringify(o);ce(Xt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",x,i,15)}))}T_(e,t,i){const o=nf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=O_(),m=F_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const x=l.join("");ce(Xt,`Creating RPC '${e}' stream ${o}: ${x}`,y);const E=h.createWebChannel(x,y);this.I_(E);let S=!1,O=!1;const q=new YT({Yo:U=>{O?ce(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(ce(Xt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ce(Xt,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),$=(U,G,te)=>{U.listen(G,(oe=>{try{te(oe)}catch(W){setTimeout((()=>{throw W}),0)}}))};return $(E,Xa.EventType.OPEN,(()=>{O||(ce(Xt,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),$(E,Xa.EventType.CLOSE,(()=>{O||(O=!0,ce(Xt,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(E))})),$(E,Xa.EventType.ERROR,(U=>{O||(O=!0,qo(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),q.a_(new ae(H.UNAVAILABLE,"The operation could not be completed")))})),$(E,Xa.EventType.MESSAGE,(U=>{var G;if(!O){const te=U.data[0];He(!!te,16349);const oe=te,W=(oe==null?void 0:oe.error)||((G=oe[0])==null?void 0:G.error);if(W){ce(Xt,`RPC '${e}' stream ${o} received error:`,W);const ie=W.status;let re=(function(N){const P=xt[N];if(P!==void 0)return yv(P)})(ie),C=W.message;re===void 0&&(re=H.INTERNAL,C="Unknown error status: "+ie+" with message "+W.message),O=!0,q.a_(new ae(re,C)),E.close()}else ce(Xt,`RPC '${e}' stream ${o} received:`,te),q.u_(te)}})),$(m,V_.STAT_EVENT,(U=>{U.stat===$d.PROXY?ce(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===$d.NOPROXY&&ce(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(r){return new nT(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="PersistentStream";class Pv{constructor(e,t,i,o,l,h,m,y){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ae(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Ry,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Ry,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZT extends Pv{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=iT(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ie.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?Ir(h.readTime):Ie.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ef(this.serializer),t.addTarget=(function(l,h){let m;const y=h.target;if(m=Gd(y)?{documents:lT(l,y)}:{query:uT(l,y).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=wv(l,h.resumeToken);const v=Yd(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ie.min())>0){m.readTime=pc(l,h.snapshotVersion.toTimestamp());const v=Yd(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const i=hT(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ef(this.serializer),t.removeTarget=e,this.q_(t)}}class e2 extends Pv{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aT(e.writeResults,e.commitTime),i=Ir(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ef(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>oT(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{}class n2 extends t2{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Jd(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(H.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Jd(t,i),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(H.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class r2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="RemoteStore";class s2{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Hi(this)&&(ce(Bi,"Restarting streams for network reachability change."),await(async function(y){const v=Ce(y);v.Ea.add(4),await Tl(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Mc(v)})(this))}))})),this.Ra=new r2(i,o)}}async function Mc(r){if(Hi(r))for(const e of r.da)await e(!0)}async function Tl(r){for(const e of r.da)await e(!1)}function Dv(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mf(t)?Lf(t):sa(t).O_()&&Of(t,e))}function Ff(r,e){const t=Ce(r),i=sa(t);t.Ia.delete(e),i.O_()&&jv(t,e),t.Ia.size===0&&(i.O_()?i.L_():Hi(t)&&t.Ra.set("Unknown"))}function Of(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sa(r).Y_(e)}function jv(r,e){r.Va.Ue(e),sa(r).Z_(e)}function Lf(r){r.Va=new J1({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),sa(r).start(),r.Ra.ua()}function Mf(r){return Hi(r)&&!sa(r).x_()&&r.Ia.size>0}function Hi(r){return Ce(r).Ea.size===0}function Vv(r){r.Va=void 0}async function i2(r){r.Ra.set("Online")}async function o2(r){r.Ia.forEach(((e,t)=>{Of(r,e)}))}async function a2(r,e){Vv(r),Mf(r)?(r.Ra.ha(e),Lf(r)):r.Ra.set("Unknown")}async function l2(r,e,t){if(r.Ra.set("Online"),e instanceof vv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(i){ce(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gc(r,i)}else if(e instanceof Zu?r.Va.Ze(e):e instanceof _v?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ie.min()))try{const i=await kv(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const m=l.Va.Tt(h);return m.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const x=l.Ia.get(v);x&&l.Ia.set(v,x.withResumeToken(y.resumeToken,h))}})),m.targetMismatches.forEach(((y,v)=>{const x=l.Ia.get(y);if(!x)return;l.Ia.set(y,x.withResumeToken(Bt.EMPTY_BYTE_STRING,x.snapshotVersion)),jv(l,y);const E=new qs(x.target,y,v,x.sequenceNumber);Of(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){ce(Bi,"Failed to raise snapshot:",i),await gc(r,i)}}async function gc(r,e,t){if(!na(e))throw e;r.Ea.add(1),await Tl(r),r.Ra.set("Offline"),t||(t=()=>kv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(Bi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Mc(r)}))}function Fv(r,e){return e().catch((t=>gc(r,t,e)))}async function Uc(r){const e=Ce(r),t=ti(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tf;for(;u2(e);)try{const o=await qT(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,c2(e,o)}catch(o){await gc(e,o)}Ov(e)&&Lv(e)}function u2(r){return Hi(r)&&r.Ta.length<10}function c2(r,e){r.Ta.push(e);const t=ti(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Ov(r){return Hi(r)&&!ti(r).x_()&&r.Ta.length>0}function Lv(r){ti(r).start()}async function h2(r){ti(r).ra()}async function d2(r){const e=ti(r);for(const t of r.Ta)e.ea(t.mutations)}async function f2(r,e,t){const i=r.Ta.shift(),o=Nf.from(i,e,t);await Fv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Uc(r)}async function p2(r,e){e&&ti(r).X_&&await(async function(i,o){if((function(h){return Q1(h)&&h!==H.ABORTED})(o.code)){const l=i.Ta.shift();ti(i).B_(),await Fv(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Uc(i)}})(r,e),Ov(r)&&Lv(r)}async function Py(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),ce(Bi,"RemoteStore received new credentials");const i=Hi(t);t.Ea.add(3),await Tl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Mc(t)}async function m2(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Mc(t)):e||(t.Ea.add(2),await Tl(t),t.Ra.set("Unknown"))}function sa(r){return r.ma||(r.ma=(function(t,i,o){const l=Ce(t);return l.sa(),new ZT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:i2.bind(null,r),t_:o2.bind(null,r),r_:a2.bind(null,r),H_:l2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Mf(r)?Lf(r):r.Ra.set("Unknown")):(await r.ma.stop(),Vv(r))}))),r.ma}function ti(r){return r.fa||(r.fa=(function(t,i,o){const l=Ce(t);return l.sa(),new e2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:h2.bind(null,r),r_:p2.bind(null,r),ta:d2.bind(null,r),na:f2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Uc(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(Bi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,m=new Uf(e,t,h,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zf(r,e){if(is("AsyncQueue",`${e}: ${r}`),na(r))return new ae(H.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=Ya(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.ga=new ht(ge.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Qo{constructor(e,t,i,o,l,h,m,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Qo(e,t,Mo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class y2{constructor(){this.queries=jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ce(t),l=o.queries;o.queries=jy(),l.forEach(((h,m)=>{for(const y of m.Sa)y.onError(i)}))})(this,new ae(H.ABORTED,"Firestore shutting down"))}}function jy(){return new qi((r=>iv(r)),Pc)}async function Bf(r,e){const t=Ce(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new g2,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=zf(h,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&qf(t)}async function $f(r,e){const t=Ce(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function _2(r,e){const t=Ce(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&qf(t)}function v2(r,e,t){const i=Ce(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function qf(r){r.Ca.forEach((e=>{e.next()}))}var rf,Vy;(Vy=rf||(rf={})).Ma="default",Vy.Cache="cache";class Hf{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Qo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this.key=e}}class Uv{constructor(e){this.key=e}}class w2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=ov(e),this.tu=new Mo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Dy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,E)=>{const S=o.get(x),O=Dc(this.query,E)?E:null,q=!!S&&this.mutatedKeys.has(S.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;S&&O?S.data.isEqual(O.data)?q!==$&&(i.track({type:3,doc:O}),U=!0):this.su(S,O)||(i.track({type:2,doc:O}),U=!0,(y&&this.eu(O,y)>0||v&&this.eu(O,v)<0)&&(m=!0)):!S&&O?(i.track({type:0,doc:O}),U=!0):S&&!O&&(i.track({type:1,doc:S}),U=!0,(y||v)&&(m=!0)),U&&(O?(h=h.add(O),l=$?l.add(x):l.delete(x)):(h=h.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),l=l.delete(x.key),i.track({type:1,doc:x})}return{tu:h,iu:i,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((x,E)=>(function(O,q){const $=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:U})}};return $(O)-$(q)})(x.type,E.type)||this.eu(x.doc,E.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,v=y!==this.Za;return this.Za=y,h.length!==0||v?{snapshot:new Qo(this.query,e.tu,l,h,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Uv(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Mv(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wf="SyncEngine";class x2{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class E2{constructor(e){this.key=e,this.hu=!1}}class T2{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new qi((m=>iv(m)),Pc),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ge.comparator),this.Au=new Map,this.Ru=new Pf,this.Vu={},this.mu=new Map,this.fu=Go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I2(r,e,t=!0){const i=Wv(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await zv(i,e,t,!0),o}async function S2(r,e){const t=Wv(r);await zv(t,e,!0,!1)}async function zv(r,e,t,i){const o=await HT(r.localStore,Tr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await A2(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Dv(r.remoteStore,o),m}async function A2(r,e,t,i,o){r.pu=(E,S,O)=>(async function($,U,G,te){let oe=U.view.ru(G);oe.Cs&&(oe=await Cy($.localStore,U.query,!1).then((({documents:C})=>U.view.ru(C,oe))));const W=te&&te.targetChanges.get(U.targetId),ie=te&&te.targetMismatches.get(U.targetId)!=null,re=U.view.applyChanges(oe,$.isPrimaryClient,W,ie);return Oy($,U.targetId,re.au),re.snapshot})(r,E,S,O);const l=await Cy(r.localStore,e,!0),h=new w2(e,l.Qs),m=h.ru(l.documents),y=El.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(m,r.isPrimaryClient,y);Oy(r,t,v.au);const x=new x2(e,t,h);return r.Tu.set(e,x),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function C2(r,e,t){const i=Ce(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Pc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await tf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ff(i.remoteStore,o.targetId),sf(i,o.targetId)})).catch(ta)):(sf(i,o.targetId),await tf(i.localStore,o.targetId,!0))}async function b2(r,e){const t=Ce(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ff(t.remoteStore,i.targetId))}async function N2(r,e,t){const i=F2(r);try{const o=await(function(h,m){const y=Ce(h),v=st.now(),x=m.reduce(((O,q)=>O.add(q.key)),je());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let q=os(),$=je();return y.Ns.getEntries(O,x).next((U=>{q=U,q.forEach(((G,te)=>{te.isValidDocument()||($=$.add(G))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,q))).next((U=>{E=U;const G=[];for(const te of m){const oe=q1(te,E.get(te.key).overlayedDocument);oe!=null&&G.push(new si(te.key,oe,Y_(oe.value.mapValue),sn.exists(!0)))}return y.mutationQueue.addMutationBatch(O,v,G,m)})).next((U=>{S=U;const G=U.applyToLocalDocumentSet(E,$);return y.documentOverlayCache.saveOverlays(O,U.batchId,G)}))})).then((()=>({batchId:S.batchId,changes:lv(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,y){let v=h.Vu[h.currentUser.toKey()];v||(v=new ht(De)),v=v.insert(m,y),h.Vu[h.currentUser.toKey()]=v})(i,o.batchId,t),await Il(i,o.changes),await Uc(i.remoteStore)}catch(o){const l=zf(o,"Failed to persist write");t.reject(l)}}async function Bv(r,e){const t=Ce(r);try{const i=await BT(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?He(h.hu,14607):o.removedDocuments.size>0&&(He(h.hu,42227),h.hu=!1))})),await Il(t,i,e)}catch(i){await ta(i)}}function Fy(r,e,t){const i=Ce(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const y=Ce(h);y.onlineState=m;let v=!1;y.queries.forEach(((x,E)=>{for(const S of E.Sa)S.va(m)&&(v=!0)})),v&&qf(y)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function k2(r,e,t){const i=Ce(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new ht(ge.comparator);h=h.insert(l,Jt.newNoDocument(l,Ie.min()));const m=je().add(l),y=new Oc(Ie.min(),new Map,new ht(De),h,m);await Bv(i,y),i.du=i.du.remove(l),i.Au.delete(e),Kf(i)}else await tf(i.localStore,e,!1).then((()=>sf(i,e,t))).catch(ta)}async function R2(r,e){const t=Ce(r),i=e.batch.batchId;try{const o=await zT(t.localStore,e);qv(t,i,null),$v(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Il(t,o)}catch(o){await ta(o)}}async function P2(r,e,t){const i=Ce(r);try{const o=await(function(h,m){const y=Ce(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let x;return y.mutationQueue.lookupMutationBatch(v,m).next((E=>(He(E!==null,37113),x=E.keys(),y.mutationQueue.removeMutationBatch(v,E)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,x,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,x))).next((()=>y.localDocuments.getDocuments(v,x)))}))})(i.localStore,e);qv(i,e,t),$v(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Il(i,o)}catch(o){await ta(o)}}function $v(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function qv(r,e,t){const i=Ce(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function sf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||Hv(r,i)}))}function Hv(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Ff(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Kf(r))}function Oy(r,e,t){for(const i of t)i instanceof Mv?(r.Ru.addReference(i.key,e),D2(r,i)):i instanceof Uv?(ce(Wf,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||Hv(r,i.key)):we(19791,{wu:i})}function D2(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ce(Wf,"New document in limbo: "+t),r.Eu.add(i),Kf(r))}function Kf(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ge(Je.fromString(e)),i=r.fu.next();r.Au.set(i,new E2(t)),r.du=r.du.insert(t,i),Dv(r.remoteStore,new qs(Tr(Rc(t.path)),i,"TargetPurposeLimboResolution",bc.ce))}}async function Il(r,e,t){const i=Ce(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,y)=>{h.push(i.pu(y,e,t).then((v=>{var x;if((v||t)&&i.isPrimaryClient){const E=v?!v.fromCache:(x=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:x.current;i.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(v){o.push(v);const E=jf.As(y.targetId,v);l.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(y,v){const x=Ce(y);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>K.forEach(v,(S=>K.forEach(S.Es,(O=>x.persistence.referenceDelegate.addReference(E,S.targetId,O))).next((()=>K.forEach(S.ds,(O=>x.persistence.referenceDelegate.removeReference(E,S.targetId,O)))))))))}catch(E){if(!na(E))throw E;ce(Vf,"Failed to update sequence numbers: "+E)}for(const E of v){const S=E.targetId;if(!E.fromCache){const O=x.Ms.get(S),q=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(q);x.Ms=x.Ms.insert(S,$)}}})(i.localStore,l))}async function j2(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){ce(Wf,"User change. New user:",e.toKey());const i=await Nv(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((y=>{y.reject(new ae(H.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Il(t,i.Ls)}}function V2(r,e){const t=Ce(r),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let o=je();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function Wv(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k2.bind(null,e),e.Pu.H_=_2.bind(null,e.eventManager),e.Pu.yu=v2.bind(null,e.eventManager),e}function F2(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P2.bind(null,e),e}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return UT(this.persistence,new OT,e.initialUser,this.serializer)}Cu(e){return new bv(Df.mi,this.serializer)}Du(e){return new KT}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class O2 extends yc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof mc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ET(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new bv((i=>mc.mi(i,t)),this.serializer)}}class of{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=j2.bind(null,this.syncEngine),await m2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new y2})()}createDatastore(e){const t=Lc(e.databaseInfo.databaseId),i=(function(l){return new JT(l)})(e.databaseInfo);return(function(l,h,m,y){return new n2(l,h,m,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,m){return new s2(i,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fy(this.syncEngine,t,0)),(function(){return ky.v()?new ky:new GT})())}createSyncEngine(e,t){return(function(o,l,h,m,y,v,x){const E=new T2(o,l,h,m,y,v);return x&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ce(o);ce(Bi,"RemoteStore shutting down."),l.Ea.add(5),await Tl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}of.provider={build:()=>new of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="FirestoreClient";class L2{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=Ef.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ce(ni,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ce(ni,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=zf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Pd(r,e){r.asyncQueue.verifyOperationInProgress(),ce(ni,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Nv(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Ly(r,e){r.asyncQueue.verifyOperationInProgress();const t=await M2(r);ce(ni,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Py(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Py(e.remoteStore,o))),r._onlineComponents=e}async function M2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(ni,"Using user provided OfflineComponentProvider");try{await Pd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;qo("Error using user provided cache. Falling back to memory cache: "+t),await Pd(r,new yc)}}else ce(ni,"Using default OfflineComponentProvider"),await Pd(r,new O2(void 0));return r._offlineComponents}async function Kv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(ni,"Using user provided OnlineComponentProvider"),await Ly(r,r._uninitializedComponentsProvider._online)):(ce(ni,"Using default OnlineComponentProvider"),await Ly(r,new of))),r._onlineComponents}function U2(r){return Kv(r).then((e=>e.syncEngine))}async function _c(r){const e=await Kv(r),t=e.eventManager;return t.onListen=I2.bind(null,e.syncEngine),t.onUnlisten=C2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b2.bind(null,e.syncEngine),t}function z2(r,e,t={}){const i=new rs;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,y,v){const x=new Gf({next:S=>{x.Nu(),h.enqueueAndForget((()=>$f(l,E)));const O=S.docs.has(m);!O&&S.fromCache?v.reject(new ae(H.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&y&&y.source==="server"?v.reject(new ae(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Hf(Rc(m.path),x,{includeMetadataChanges:!0,qa:!0});return Bf(l,E)})(await _c(r),r.asyncQueue,e,t,i))),i.promise}function B2(r,e,t={}){const i=new rs;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,y,v){const x=new Gf({next:S=>{x.Nu(),h.enqueueAndForget((()=>$f(l,E))),S.fromCache&&y.source==="server"?v.reject(new ae(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Hf(m,x,{includeMetadataChanges:!0,qa:!0});return Bf(l,E)})(await _c(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="firestore.googleapis.com",Uy=!0;class zy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qv,this.ssl=Uy}else this.host=e.host,this.ssl=e.ssl??Uy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wT)throw new ae(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gv(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new KE;switch(i.type){case"firstParty":return new YE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=My.get(t);i&&(ce("ComponentProvider","Removing Datastore"),My.delete(t),i.terminate())})(this),Promise.resolve()}}function $2(r,e,t,i={}){var v;r=rn(r,zc);const o=Jo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(I_(`https://${m}`),S_("Firestore",!0)),l.host!==Qv&&l.host!==m&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:m,ssl:o,emulatorOptions:i};if(!Mi(y,h)&&(r._setSettings(y),i.mockUserToken)){let x,E;if(typeof i.mockUserToken=="string")x=i.mockUserToken,E=Yt.MOCK_USER;else{x=_x(i.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ae(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Yt(S)}r._authCredentials=new GE(new M_(x,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class ft{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(wl(t,ft._jsonSchema))return new ft(e,i||null,new ge(Je.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:It("string",ft._jsonSchemaVersion),referencePath:It("string")};class Xs extends ii{constructor(e,t,i){super(e,t,Rc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ge(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Vi(r,e,...t){if(r=St(r),U_("collection","path",e),r instanceof zc){const i=Je.fromString(e,...t);return ey(i),new Xs(r,null,i)}{if(!(r instanceof ft||r instanceof Xs))throw new ae(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return ey(i),new Xs(r.firestore,null,i)}}function pn(r,e,...t){if(r=St(r),arguments.length===1&&(e=Ef.newId()),U_("doc","path",e),r instanceof zc){const i=Je.fromString(e,...t);return Zg(i),new ft(r,null,new ge(i))}{if(!(r instanceof ft||r instanceof Xs))throw new ae(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return Zg(i),new ft(r.firestore,r instanceof Xs?r.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="AsyncQueue";class $y{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rv(this,"async_queue_retry"),this._c=()=>{const i=Rd();i&&ce(By,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Rd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;ce(By,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",qy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Uf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:qy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Nr extends zc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new $y,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $y(e),this._firestoreClient=void 0,await e}}}function q2(r,e){const t=typeof r=="object"?r:N_(),i=typeof r=="string"?r:cc,o=wf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=gx("firestore");l&&$2(o,...l)}return o}function Sl(r){if(r._terminated)throw new ae(H.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||H2(r),r._firestoreClient}function H2(r){var i,o,l;const e=r._freezeSettings(),t=(function(m,y,v,x){return new p1(m,y,v,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Gv(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new L2(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Bt.fromBase64String(e))}catch(t){throw new ae(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wl(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:It("string",Fn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sr._jsonSchemaVersion}}static fromJSON(e){if(wl(e,Sr._jsonSchema))return new Sr(e.latitude,e.longitude)}}Sr._jsonSchemaVersion="firestore/geoPoint/1.0",Sr._jsonSchema={type:It("string",Sr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wl(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ar(e.vectorValues);throw new ae(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:It("string",Ar._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=/^__.*__$/;class K2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,t,this.fieldTransforms):new xl(e,this.data,t,this.fieldTransforms)}}class Xv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new si(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class Qf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Yv(this.Ac)&&W2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class G2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Lc(e)}Cc(e,t,i,o=!1){return new Qf({Ac:e,methodName:t,Dc:i,path:zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cl(r){const e=r._freezeSettings(),t=Lc(r._databaseId);return new G2(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Xf(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Jf("Data must be an object, but it was:",h,i);const m=ew(i,h);let y,v;if(l.merge)y=new Cn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const x=[];for(const E of l.mergeFields){const S=af(e,E,t);if(!h.contains(S))throw new ae(H.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);nw(x,S)||x.push(S)}y=new Cn(x),v=h.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,v=h.fieldTransforms;return new K2(new fn(m),y,v)}class $c extends Bc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $c}}class Yf extends Bc{_toFieldTransform(e){return new U1(e.path,new fl)}isEqual(e){return e instanceof Yf}}function Jv(r,e,t,i){const o=r.Cc(1,e,t);Jf("Data must be an object, but it was:",o,i);const l=[],h=fn.empty();ri(i,((y,v)=>{const x=Zf(e,y,t);v=St(v);const E=o.yc(x);if(v instanceof $c)l.push(x);else{const S=bl(v,E);S!=null&&(l.push(x),h.set(x,S))}}));const m=new Cn(l);return new Xv(h,m,o.fieldTransforms)}function Zv(r,e,t,i,o,l){const h=r.Cc(1,e,t),m=[af(e,i,t)],y=[o];if(l.length%2!=0)throw new ae(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(af(e,l[S])),y.push(l[S+1]);const v=[],x=fn.empty();for(let S=m.length-1;S>=0;--S)if(!nw(v,m[S])){const O=m[S];let q=y[S];q=St(q);const $=h.yc(O);if(q instanceof $c)v.push(O);else{const U=bl(q,$);U!=null&&(v.push(O),x.set(O,U))}}const E=new Cn(v);return new Xv(x,E,h.fieldTransforms)}function Q2(r,e,t,i=!1){return bl(t,r.Cc(i?4:3,e))}function bl(r,e){if(tw(r=St(r)))return Jf("Unsupported field value:",e,r),ew(r,e);if(r instanceof Bc)return(function(i,o){if(!Yv(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const m of i){let y=bl(m,o.wc(h));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return O1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=st.fromDate(i);return{timestampValue:pc(o.serializer,l)}}if(i instanceof st){const l=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:pc(o.serializer,l)}}if(i instanceof Sr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:wv(o.serializer,i._byteString)};if(i instanceof ft){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Rf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ar)return(function(h,m){return{mapValue:{fields:{[Q_]:{stringValue:X_},[hc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw m.Sc("VectorValues must only contain numeric values.");return bf(m.serializer,v)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Cc(i)}`)})(r,e)}function ew(r,e){const t={};return $_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(r,((i,o)=>{const l=bl(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function tw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof st||r instanceof Sr||r instanceof Fn||r instanceof ft||r instanceof Bc||r instanceof Ar)}function Jf(r,e,t){if(!tw(t)||!z_(t)){const i=Cc(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function af(r,e,t){if((e=St(e))instanceof Al)return e._internalPath;if(typeof e=="string")return Zf(r,e);throw vc("Field path arguments must be of type string or ",r,!1,void 0,t)}const X2=new RegExp("[~\\*/\\[\\]]");function Zf(r,e,t){if(e.search(X2)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Al(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function vc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||h)&&(y+=" (found",l&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new ae(H.INVALID_ARGUMENT,m+r+y)}function nw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Y2 extends rw{data(){return super.data()}}function ep(r,e){return typeof e=="string"?Zf(r,e):e instanceof Al?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}class iw extends tp{}function J2(r,e,...t){let i=[];e instanceof tp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((y=>y instanceof rp)).length,m=l.filter((y=>y instanceof np)).length;if(h>1||h>0&&m>0)throw new ae(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class np extends iw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new np(e,t,i)}_apply(e){const t=this._parse(e);return ow(e._query,t),new ii(e.firestore,e.converter,Qd(e._query,t))}_parse(e){const t=Cl(e.firestore);return(function(l,h,m,y,v,x,E){let S;if(v.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ae(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){Ky(E,x);const q=[];for(const $ of E)q.push(Wy(y,l,$));S={arrayValue:{values:q}}}else S=Wy(y,l,E)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||Ky(E,x),S=Q2(m,h,E,x==="in"||x==="not-in");return Tt.create(v,x,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class rp extends tp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:tr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const y of m)ow(h,y),h=Qd(h,y)})(e._query,t),new ii(e.firestore,e.converter,Qd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sp extends iw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new ae(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dl(l,h)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new ra(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Z2(r,e="asc"){const t=e,i=ep("orderBy",r);return sp._create(i,t)}function Wy(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new ae(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sv(e)&&t.indexOf("/")!==-1)throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!ge.isDocumentKey(i))throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ly(r,new ge(i))}if(t instanceof ft)return ly(r,t._key);throw new ae(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cc(t)}.`)}function Ky(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ow(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eI{convertValue(e,t="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ri(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[hc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>gt(h.doubleValue)));return new Ar(t)}convertGeoPoint(e){return new Sr(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=kc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const t=Js(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);He(Av(i),9688,{name:e});const o=new cl(i.get(1),i.get(3)),l=new ge(i.popFirst(5));return o.isEqual(t)||is(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fi extends rw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ep("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fi._jsonSchema={type:It("string",Fi._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class ec extends Fi{data(e={}){return super.data(e)}}class Oi{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Za(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ec(this._firestore,this._userDataWriter,i.key,i,new Za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const y=new ec(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Za(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const y=new ec(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Za(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,x=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),x=h.indexOf(m.doc.key)),{type:tI(m.type),doc:y,oldIndex:v,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ef.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(r){r=rn(r,ft);const e=rn(r.firestore,Nr);return z2(Sl(e),r._key).then((t=>lw(e,r,t)))}Oi._jsonSchemaVersion="firestore/querySnapshot/1.0",Oi._jsonSchema={type:It("string",Oi._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class op extends eI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function aw(r){r=rn(r,ii);const e=rn(r.firestore,Nr),t=Sl(e),i=new op(e);return sw(r._query),B2(t,r._query).then((o=>new Oi(e,i,r,o)))}function kr(r,e,t){r=rn(r,ft);const i=rn(r.firestore,Nr),o=ip(r.converter,e,t);return kl(i,[Xf(Cl(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,sn.none())])}function Dd(r,e,t,...i){r=rn(r,ft);const o=rn(r.firestore,Nr),l=Cl(o);let h;return h=typeof(e=St(e))=="string"||e instanceof Al?Zv(l,"updateDoc",r._key,e,t,i):Jv(l,"updateDoc",r._key,e),kl(o,[h.toMutation(r._key,sn.exists(!0))])}function Nl(r){return kl(rn(r.firestore,Nr),[new Fc(r._key,sn.none())])}function nI(r,e){const t=rn(r.firestore,Nr),i=pn(r),o=ip(r.converter,e);return kl(t,[Xf(Cl(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,sn.exists(!1))]).then((()=>i))}function ia(r,...e){var y,v,x;r=St(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Hy(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Hy(e[i])){const E=e[i];e[i]=(y=E.next)==null?void 0:y.bind(E),e[i+1]=(v=E.error)==null?void 0:v.bind(E),e[i+2]=(x=E.complete)==null?void 0:x.bind(E)}let l,h,m;if(r instanceof ft)h=rn(r.firestore,Nr),m=Rc(r._key.path),l={next:E=>{e[i]&&e[i](lw(h,r,E))},error:e[i+1],complete:e[i+2]};else{const E=rn(r,ii);h=rn(E.firestore,Nr),m=E._query;const S=new op(h);l={next:O=>{e[i]&&e[i](new Oi(h,S,E,O))},error:e[i+1],complete:e[i+2]},sw(r._query)}return(function(S,O,q,$){const U=new Gf($),G=new Hf(O,U,q);return S.asyncQueue.enqueueAndForget((async()=>Bf(await _c(S),G))),()=>{U.Nu(),S.asyncQueue.enqueueAndForget((async()=>$f(await _c(S),G)))}})(Sl(h),m,o,l)}function kl(r,e){return(function(i,o){const l=new rs;return i.asyncQueue.enqueueAndForget((async()=>N2(await U2(i),o,l))),l.promise})(Sl(r),e)}function lw(r,e,t){const i=t.docs.get(e._key),o=new op(r);return new Fi(r,o,e._key,i,new Za(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cl(e)}set(e,t,i){this._verifyNotCommitted();const o=jd(e,this._firestore),l=ip(o.converter,t,i),h=Xf(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,sn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=jd(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Al?Zv(this._dataReader,"WriteBatch.update",l._key,t,i,o):Jv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jd(e,this._firestore);return this._mutations=this._mutations.concat(new Fc(t._key,sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jd(r,e){if((r=St(r)).firestore!==e)throw new ae(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function yt(){return new Yf("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(r){return Sl(r=rn(r,Nr)),new rI(r,(e=>kl(r,e)))}(function(e,t=!0){(function(o){ea=o})(Zo),$o(new Ui("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),m=new Nr(new QE(i.getProvider("auth-internal")),new JE(h,i.getProvider("app-check-internal")),(function(v,x){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ae(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(v.options.projectId,x)})(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Gs(Qg,Xg,e),Gs(Qg,Xg,"esm2020")})();function uw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sI=uw,cw=new _l("auth","Firebase",uw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new _f("@firebase/auth");function iI(r,...e){wc.logLevel<=Pe.WARN&&wc.warn(`Auth (${Zo}): ${r}`,...e)}function tc(r,...e){wc.logLevel<=Pe.ERROR&&wc.error(`Auth (${Zo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(r,...e){throw lp(r,...e)}function Zn(r,...e){return lp(r,...e)}function ap(r,e,t){const i={...sI(),[e]:t};return new _l("auth","Firebase",i).create(e,{appName:r.name})}function Li(r){return ap(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Rr(r,"argument-error"),ap(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return cw.create(r,...e)}function Ee(r,e,...t){if(!r)throw lp(e,...t)}function Zr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw tc(e),new Error(e)}function as(r,e){r||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function aI(){return Gy()==="http:"||Gy()==="https:"}function Gy(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aI()||Ix()||"connection"in navigator)?navigator.onLine:!0}function uI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.shortDelay=e,this.longDelay=t,as(t>e,"Short delay should be less than long delay!"),this.isMobile=xx()||Sx()}get(){return lI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(r,e){as(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dI=new Rl(3e4,6e4);function cp(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function oa(r,e,t,i,o={}){return dw(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const m=vl({key:r.config.apiKey,...h}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:y,...l};return Tx()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Jo(r.emulatorConfig.host)&&(v.credentials="include"),hw.fetch()(await fw(r,r.config.apiHost,t,m),v)})}async function dw(r,e,t){r._canInitEmulator=!1;const i={...cI,...e};try{const o=new pI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Gu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[y,v]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(r,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw Gu(r,"email-already-in-use",h);if(y==="USER_DISABLED")throw Gu(r,"user-disabled",h);const x=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw ap(r,x,v);Rr(r,x)}}catch(o){if(o instanceof ls)throw o;Rr(r,"network-request-failed",{message:String(o)})}}async function fI(r,e,t,i,o={}){const l=await oa(r,e,t,i,o);return"mfaPendingCredential"in l&&Rr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function fw(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?up(r.config,o):`${r.config.apiScheme}://${o}`;return hI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class pI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Zn(this.auth,"network-request-failed")),dI.get())})}}function Gu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Zn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(r,e){return oa(r,"POST","/v1/accounts:delete",e)}async function xc(r,e){return oa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gI(r,e=!1){const t=St(r),i=await t.getIdToken(e),o=hp(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:il(Fd(o.auth_time)),issuedAtTime:il(Fd(o.iat)),expirationTime:il(Fd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Fd(r){return Number(r)*1e3}function hp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return tc("JWT malformed, contained fewer than 3 sections"),null;try{const o=w_(t);return o?JSON.parse(o):(tc("Failed to decode base64 JWT payload"),null)}catch(o){return tc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Qy(r){const e=hp(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ls&&yI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function yI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=il(this.lastLoginAt),this.creationTime=il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(r){var E;const e=r.auth,t=await r.getIdToken(),i=await gl(r,xc(e,{idToken:t}));Ee(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?pw(o.providerUserInfo):[],h=wI(r.providerData,l),m=r.isAnonymous,y=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),v=m?y:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new cf(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,x)}async function vI(r){const e=St(r);await Ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function pw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(r,e){const t=await dw(r,{},async()=>{const i=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await fw(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:i};return r.emulatorConfig&&Jo(r.emulatorConfig.host)&&(y.credentials="include"),hw.fetch()(h,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function EI(r,e){return oa(r,"POST","/v2/accounts:revokeToken",cp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=Qy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await xI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Uo;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new _I(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await gl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gI(this,e)}reload(){return vI(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ec(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await gl(this,mI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,v=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:O,providerData:q,stsTokenManager:$}=t;Ee(E&&$,e,"internal-error");const U=Uo.fromJSON(this.name,$);Ee(typeof E=="string",e,"internal-error"),Ms(i,e.name),Ms(o,e.name),Ee(typeof S=="boolean",e,"internal-error"),Ee(typeof O=="boolean",e,"internal-error"),Ms(l,e.name),Ms(h,e.name),Ms(m,e.name),Ms(y,e.name),Ms(v,e.name),Ms(x,e.name);const G=new Jn({uid:E,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:U,createdAt:v,lastLoginAt:x});return q&&Array.isArray(q)&&(G.providerData=q.map(te=>({...te}))),y&&(G._redirectEventId=y),G}static async _fromIdTokenResponse(e,t,i=!1){const o=new Uo;o.updateFromServerResponse(t);const l=new Jn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ec(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?pw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new Uo;m.updateFromIdToken(i);const y=new Jn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new cf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=new Map;function es(r){as(r instanceof Function,"Expected a class definition");let e=Xy.get(r);return e?(as(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Xy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mw.type="NONE";const Yy=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(r,e,t){return`firebase:${r}:${e}:${t}`}class zo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=nc(this.userKey,o.apiKey,l),this.fullPersistenceKey=nc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xc(this.auth,{idToken:e}).catch(()=>{});return t?Jn._fromGetAccountInfoResponse(this.auth,t,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new zo(es(Yy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||es(Yy);const h=nc(i,e.config.apiKey,e.name);let m=null;for(const v of t)try{const x=await v._get(h);if(x){let E;if(typeof x=="string"){const S=await xc(e,{idToken:x}).catch(()=>{});if(!S)break;E=await Jn._fromGetAccountInfoResponse(e,S,x)}else E=Jn._fromJSON(e,x);v!==l&&(m=E),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new zo(l,e,i):(l=y[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new zo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xw(e))return"Blackberry";if(Ew(e))return"Webos";if(yw(e))return"Safari";if((e.includes("chrome/")||_w(e))&&!e.includes("edge/"))return"Chrome";if(ww(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gw(r=Zt()){return/firefox\//i.test(r)}function yw(r=Zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _w(r=Zt()){return/crios\//i.test(r)}function vw(r=Zt()){return/iemobile/i.test(r)}function ww(r=Zt()){return/android/i.test(r)}function xw(r=Zt()){return/blackberry/i.test(r)}function Ew(r=Zt()){return/webos/i.test(r)}function dp(r=Zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function TI(r=Zt()){var e;return dp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function II(){return Ax()&&document.documentMode===10}function Tw(r=Zt()){return dp(r)||ww(r)||Ew(r)||xw(r)||/windows phone/i.test(r)||vw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(r,e=[]){let t;switch(r){case"Browser":t=Jy(Zt());break;case"Worker":t=`${Jy(Zt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,m)=>{try{const y=e(l);h(y)}catch(y){m(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI(r,e={}){return oa(r,"GET","/v2/passwordPolicy",cp(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=6;class bI{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??CI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zy(this),this.idTokenSubscription=new Zy(this),this.beforeStateQueue=new SI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xc(this,{idToken:e}),i=await Jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Yn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===m)&&(y!=null&&y.user)&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ec(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(Li(this));const t=e?St(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AI(this),t=new bI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _l("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await EI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&es(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Iw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&iI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qc(r){return St(r)}class Zy{constructor(e){this.auth=e,this.observer=null,this.addObserver=jx(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kI(r){fp=r}function RI(r){return fp.loadJS(r)}function PI(){return fp.gapiScript}function DI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(r,e){const t=wf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Mi(l,e??{}))return o;Rr(o,"already-initialized")}return t.initialize({options:e})}function VI(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(es);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function FI(r,e,t){const i=qc(r);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Sw(e),{host:h,port:m}=OI(e),y=m===null?"":`:${m}`,v={url:`${l}//${h}${y}/`},x=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(Mi(v,i.config.emulator)&&Mi(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,Jo(h)?(I_(`${l}//${h}${y}`),S_("Auth",!0)):LI()}function Sw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function OI(r){const e=Sw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:e_(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:e_(h)}}}function e_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function LI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(r,e){return fI(r,"POST","/v1/accounts:signInWithIdp",cp(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="http://localhost";class $i extends Aw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new $i(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Bo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bo(e,t)}buildRequest(){const e={requestUri:MI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends pp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Pl{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $i._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Jr.credential(t,i)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Pl{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Pl{constructor(){super("twitter.com")}static credential(e,t){return $i._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Bs.credential(t,i)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Jn._fromIdTokenResponse(e,i,o),h=t_(i);return new Xo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=t_(i);return new Xo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function t_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends ls{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Tc(e,t,i,o)}}function Cw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Tc._fromErrorAndOperation(r,l,e,i):l})}async function UI(r,e,t=!1){const i=await gl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Xo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(r,e,t=!1){const{auth:i}=r;if(Yn(i.app))return Promise.reject(Li(i));const o="reauthenticate";try{const l=await gl(r,Cw(i,o,e,r),t);Ee(l.idToken,i,"internal-error");const h=hp(l.idToken);Ee(h,i,"internal-error");const{sub:m}=h;return Ee(r.uid===m,i,"user-mismatch"),Xo._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Rr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(r,e,t=!1){if(Yn(r.app))return Promise.reject(Li(r));const i="signIn",o=await Cw(r,i,e),l=await Xo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function $I(r,e,t,i){return St(r).onIdTokenChanged(e,t,i)}function qI(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function HI(r,e,t,i){return St(r).onAuthStateChanged(e,t,i)}function WI(r){return St(r).signOut()}const Ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ic,"1"),this.storage.removeItem(Ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=1e3,GI=10;class Nw extends bw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,y)=>{this.notifyListeners(h,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);II()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GI):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},KI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nw.type="LOCAL";const QI=Nw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends bw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kw.type="SESSION";const Rw=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Hc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),y=await XI(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,y)=>{const v=mp("",20);o.port1.start();const x=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(S.data.response);break;default:clearTimeout(x),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return window}function JI(r){Cr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function ZI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function tS(){return Pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firebaseLocalStorageDb",nS=1,Sc="firebaseLocalStorage",jw="fbase_key";class Dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wc(r,e){return r.transaction([Sc],e?"readwrite":"readonly").objectStore(Sc)}function rS(){const r=indexedDB.deleteDatabase(Dw);return new Dl(r).toPromise()}function hf(){const r=indexedDB.open(Dw,nS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Sc,{keyPath:jw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Sc)?e(i):(i.close(),await rS(),e(await hf()))})})}async function n_(r,e,t){const i=Wc(r,!0).put({[jw]:e,value:t});return new Dl(i).toPromise()}async function sS(r,e){const t=Wc(r,!1).get(e),i=await new Dl(t).toPromise();return i===void 0?null:i.value}function r_(r,e){const t=Wc(r,!0).delete(e);return new Dl(t).toPromise()}const iS=800,oS=3;class Vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>oS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hc._getInstance(tS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await ZI(),!this.activeServiceWorker)return;this.sender=new YI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await n_(e,Ic,"1"),await r_(e,Ic),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>n_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>sS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>r_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Wc(o,!1).getAll();return new Dl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vw.type="LOCAL";const aS=Vw;new Rl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(r,e){return e?es(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends Aw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lS(r){return BI(r.auth,new gp(r),r.bypassAuthState)}function uS(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),zI(t,new gp(r),r.bypassAuthState)}async function cS(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),UI(t,new gp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lS;case"linkViaPopup":case"linkViaRedirect":return cS;case"reauthViaPopup":case"reauthViaRedirect":return uS;default:Rr(this.auth,"internal-error")}}resolve(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new Rl(2e3,1e4);async function dS(r,e,t){if(Yn(r.app))return Promise.reject(Zn(r,"operation-not-supported-in-this-environment"));const i=qc(r);oI(r,e,pp);const o=Fw(i,t);return new ji(i,"signInViaPopup",e,o).executeNotNull()}class ji extends Ow{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){as(this.filter.length===1,"Popup operations only handle one event");const e=mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hS.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="pendingRedirect",rc=new Map;class pS extends Ow{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const i=await mS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mS(r,e){const t=_S(e),i=yS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function gS(r,e){rc.set(r._key(),e)}function yS(r){return es(r._redirectPersistence)}function _S(r){return nc(fS,r.config.apiKey,r.name)}async function vS(r,e,t=!1){if(Yn(r.app))return Promise.reject(Li(r));const i=qc(r),o=Fw(i,e),h=await new pS(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=600*1e3;class xS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ES(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Lw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Zn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wS&&this.cachedEventUids.clear(),this.cachedEventUids.has(s_(e))}saveEventToCache(e){this.cachedEventUids.add(s_(e)),this.lastProcessedEventTime=Date.now()}}function s_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Lw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ES(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(r,e={}){return oa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SS=/^https?/;async function AS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TS(r);for(const t of e)try{if(CS(t))return}catch{}Rr(r,"unauthorized-domain")}function CS(r){const e=uf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!SS.test(t))return!1;if(IS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Rl(3e4,6e4);function i_(){const r=Cr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function NS(r){return new Promise((e,t)=>{var o,l,h;function i(){i_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i_(),t(Zn(r,"network-request-failed"))},timeout:bS.get()})}if((l=(o=Cr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=Cr().gapi)!=null&&h.load)i();else{const m=DI("iframefcb");return Cr()[m]=()=>{gapi.load?i():t(Zn(r,"network-request-failed"))},RI(`${PI()}?onload=${m}`).catch(y=>t(y))}}).catch(e=>{throw sc=null,e})}let sc=null;function kS(r){return sc=sc||NS(r),sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Rl(5e3,15e3),PS="__/auth/iframe",DS="emulator/auth/iframe",jS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FS(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?up(e,DS):`https://${r.config.authDomain}/${PS}`,i={apiKey:e.apiKey,appName:r.name,v:Zo},o=VS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${vl(i).slice(1)}`}async function OS(r){const e=await kS(r),t=Cr().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:FS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Zn(r,"network-request-failed"),m=Cr().setTimeout(()=>{l(h)},RS.get());function y(){Cr().clearTimeout(m),o(i)}i.ping(y).then(y,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MS=500,US=600,zS="_blank",BS="http://localhost";class o_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $S(r,e,t,i=MS,o=US){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const y={...LS,width:i.toString(),height:o.toString(),top:l,left:h},v=Zt().toLowerCase();t&&(m=_w(v)?zS:t),gw(v)&&(e=e||BS,y.scrollbars="yes");const x=Object.entries(y).reduce((S,[O,q])=>`${S}${O}=${q},`,"");if(TI(v)&&m!=="_self")return qS(e||"",m),new o_(null);const E=window.open(e||"",m,x);Ee(E,r,"popup-blocked");try{E.focus()}catch{}return new o_(E)}function qS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="__/auth/handler",WS="emulator/auth/handler",KS=encodeURIComponent("fac");async function a_(r,e,t,i,o,l){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Zo,eventId:o};if(e instanceof pp){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",Dx(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,E]of Object.entries({}))h[x]=E}if(e instanceof Pl){const x=e.getScopes().filter(E=>E!=="");x.length>0&&(h.scopes=x.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const y=await r._getAppCheckToken(),v=y?`#${KS}=${encodeURIComponent(y)}`:"";return`${GS(r)}?${vl(m).slice(1)}${v}`}function GS({config:r}){return r.emulator?up(r,WS):`https://${r.authDomain}/${HS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="webStorageSupport";class QS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rw,this._completeRedirectFn=vS,this._overrideRedirectResult=gS}async _openPopup(e,t,i,o){var h;as((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await a_(e,t,i,uf(),o);return $S(e,l,mp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await a_(e,t,i,uf(),o);return JI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(as(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await OS(e),i=new xS(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Od,{type:Od},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Od];l!==void 0&&t(!!l),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tw()||yw()||dp()}}const XS=QS;var l_="@firebase/auth",u_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZS(r){$o(new Ui("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Iw(r)},v=new NI(i,o,l,y);return VI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),$o(new Ui("auth-internal",e=>{const t=qc(e.getProvider("auth").getImmediate());return(i=>new YS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(l_,u_,JS(r)),Gs(l_,u_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=300,tA=T_("authIdTokenMaxAge")||eA;let c_=null;const nA=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>tA)return;const o=t==null?void 0:t.token;c_!==o&&(c_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function rA(r=N_()){const e=wf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=jI(r,{popupRedirectResolver:XS,persistence:[aS,QI,Rw]}),i=T_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=nA(l.toString());qI(t,h,()=>h(t.currentUser)),$I(t,m=>h(m))}}const o=x_("auth");return o&&FI(t,`http://${o}`),t}function sA(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}kI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Zn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",sA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZS("Browser");const iA={apiKey:"AIzaSyBBfpg8D4bqcqOTTuO5ONIQRInRCPOZM5k",authDomain:"comments-67079.firebaseapp.com",projectId:"comments-67079",storageBucket:"comments-67079.firebasestorage.app",messagingSenderId:"36001866008",appId:"1:36001866008:web:448de13685ad843551be6d"},Mw=b_(iA),ct=q2(Mw),Lo=rA(Mw),Uw=new Jr;Uw.setCustomParameters({prompt:"select_account"});let nn=null;const oA=r=>{nn=r},Ke={USERS:"users",STUDENTS:"students",SETTINGS:"settings",TEMPLATES:"templates",CLASSES:"classes",SCHOOLS:"schools"},df=r=>{if(!nn)throw new Error(" ID  setCurrentUserId()");return Vi(ct,Ke.USERS,nn,r)},$s=(r,e)=>{if(!nn)throw new Error(" ID  setCurrentUserId()");return pn(ct,Ke.USERS,nn,r,e)},Yr={subscribe:(r,e=null)=>{if(!nn)return console.error(" ID "),r([]),()=>{};const t=df(Ke.STUDENTS);return ia(t,i=>{let o=[];i.forEach(l=>{const h={id:l.id,...l.data()};(!e||h.classId===e)&&o.push(h)}),o.sort((l,h)=>{var m,y,v,x;return(((y=(m=l.createdAt)==null?void 0:m.toMillis)==null?void 0:y.call(m))||0)-(((x=(v=h.createdAt)==null?void 0:v.toMillis)==null?void 0:x.call(v))||0)}),r(o)},i=>{console.error("Firestore :",i),r([])})},add:async r=>{try{const e=$s(Ke.STUDENTS,r.id.toString());await kr(e,{...r,createdAt:yt(),updatedAt:yt()})}catch(e){throw console.error(":",e),e}},addBatch:async r=>{try{const e=Vd(ct);r.forEach(t=>{const i=$s(Ke.STUDENTS,t.id.toString());e.set(i,{...t,createdAt:yt(),updatedAt:yt()})}),await e.commit()}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=$s(Ke.STUDENTS,r.toString());await kr(t,{...e,updatedAt:yt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=$s(Ke.STUDENTS,r.toString());await Nl(e)}catch(e){throw console.error(":",e),e}},deleteBatch:async r=>{try{const e=Vd(ct);r.forEach(t=>{const i=$s(Ke.STUDENTS,t.toString());e.delete(i)}),await e.commit()}catch(e){throw console.error(":",e),e}},deleteAll:async()=>{try{const r=df(Ke.STUDENTS),e=await aw(r),t=Vd(ct);e.forEach(i=>{t.delete(i.ref)}),await t.commit()}catch(r){throw console.error(":",r),r}}},ol={subscribe:r=>{if(!nn)return console.error(" ID "),r([]),()=>{};const e=df(Ke.TEMPLATES);return ia(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,m,y,v;return(((m=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:m.call(h))||0)-(((v=(y=o.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)}),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=$s(Ke.TEMPLATES,e);return await kr(t,{...r,createdAt:yt(),usageCount:0}),e}catch(e){throw console.error(":",e),e}},delete:async r=>{try{const e=$s(Ke.TEMPLATES,r.toString());await Nl(e)}catch(e){throw console.error(":",e),e}},incrementUsage:async r=>{try{const e=$s(Ke.TEMPLATES,r.toString()),t=await lf(e);t.exists()&&await kr(e,{usageCount:(t.data().usageCount||0)+1,updatedAt:yt()},{merge:!0})}catch(e){console.error(":",e)}}},ts={subscribe:r=>{const e=Vi(ct,Ke.CLASSES);return ia(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,m,y,v;return(((m=(h=o.createdAt)==null?void 0:h.toMillis)==null?void 0:m.call(h))||0)-(((v=(y=l.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)}),r(i)},t=>{console.error(":",t)})},add:async r=>{try{const e=Date.now().toString(),t=pn(ct,Ke.CLASSES,e);return await kr(t,{...r,createdAt:yt(),updatedAt:yt()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=pn(ct,Ke.CLASSES,r.toString());await kr(t,{...e,updatedAt:yt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=pn(ct,Ke.CLASSES,r.toString());await Nl(e)}catch(e){throw console.error(":",e),e}}},ic={subscribe:r=>{const e=Vi(ct,Ke.SCHOOLS);return ia(e,t=>{const i=[];t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>(o.name||"").localeCompare(l.name||"","zh-TW")),r(i)},t=>{console.error(":",t),r([])})},add:async r=>{try{const e=Date.now().toString(),t=pn(ct,Ke.SCHOOLS,e);return await kr(t,{...r,createdAt:yt(),updatedAt:yt()}),e}catch(e){throw console.error(":",e),e}},update:async(r,e)=>{try{const t=pn(ct,Ke.SCHOOLS,r.toString());await kr(t,{...e,updatedAt:yt()},{merge:!0})}catch(t){throw console.error(":",t),t}},delete:async r=>{try{const e=pn(ct,Ke.SCHOOLS,r.toString());await Nl(e)}catch(e){throw console.error(":",e),e}}},ff={subscribe:(r,e)=>{if(!nn)return console.error(" ID "),e([]),()=>{};const t=Vi(ct,Ke.USERS,nn,Ke.STUDENTS,r.toString(),"history");return ia(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),o.sort((l,h)=>{var m,y,v,x;return(((y=(m=h.createdAt)==null?void 0:m.toMillis)==null?void 0:y.call(m))||0)-(((x=(v=l.createdAt)==null?void 0:v.toMillis)==null?void 0:x.call(v))||0)}),e(o)},i=>{console.error(":",i),e([])})},add:async(r,e,t=[])=>{if(!nn)throw new Error(" ID ");try{const i=Vi(ct,Ke.USERS,nn,Ke.STUDENTS,r.toString(),"history");await nI(i,{comment:e,styles:t,createdAt:yt()})}catch(i){throw console.error(":",i),i}},getAll:async r=>{if(!nn)return console.error(" ID "),[];try{const e=Vi(ct,Ke.USERS,nn,Ke.STUDENTS,r.toString(),"history"),t=await aw(e),i=[];return t.forEach(o=>{i.push({id:o.id,...o.data()})}),i.sort((o,l)=>{var h,m,y,v;return(((m=(h=l.createdAt)==null?void 0:h.toMillis)==null?void 0:m.call(h))||0)-(((v=(y=o.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))||0)})}catch(e){return console.error(":",e),[]}},delete:async(r,e)=>{if(!nn)throw new Error(" ID ");try{const t=pn(ct,Ke.USERS,nn,Ke.STUDENTS,r.toString(),"history",e);await Nl(t)}catch(t){throw console.error(":",t),t}}},aA="cagooo@gmail.com",Do={USERS:"users"},Et={ADMIN:"admin",TEACHER:"teacher",PENDING:"pending"},pf={getCurrentUser:()=>Lo.currentUser,onAuthStateChange:r=>HI(Lo,async e=>{if(e){const t=await ns.getOrCreate(e);r({...e,...t})}else r(null)}),signInWithGoogle:async()=>{try{const e=(await dS(Lo,Uw)).user;return await ns.getOrCreate(e),{success:!0,user:e}}catch(r){return console.error("Google :",r),{success:!1,error:r.message}}},signOut:async()=>{try{return await WI(Lo),{success:!0}}catch(r){return console.error(":",r),{success:!1,error:r.message}}}},ns={getOrCreate:async r=>{const e=pn(ct,Do.USERS,r.uid),t=await lf(e);if(t.exists())return await kr(e,{lastLoginAt:yt()},{merge:!0}),{id:t.id,...t.data()};const i=r.email===aA,o={uid:r.uid,email:r.email,displayName:r.displayName||"",photoURL:r.photoURL||null,role:i?Et.ADMIN:Et.PENDING,assignedClasses:[],createdAt:yt(),lastLoginAt:yt(),approvedAt:i?yt():null,approvedBy:i?"system":null};return await kr(e,o),{id:r.uid,...o}},get:async r=>{const e=pn(ct,Do.USERS,r),t=await lf(e);return t.exists()?{id:t.id,...t.data()}:null},subscribeAll:r=>{const e=Vi(ct,Do.USERS),t=J2(e,Z2("createdAt","desc"));return ia(t,i=>{const o=[];i.forEach(l=>{o.push({id:l.id,...l.data()})}),r(o)},i=>{console.error(":",i)})},approve:async(r,e=[],t=null)=>{var i;try{const o=pn(ct,Do.USERS,r),l={role:Et.TEACHER,assignedClasses:e,approvedAt:yt(),approvedBy:((i=Lo.currentUser)==null?void 0:i.uid)||"unknown"};return t&&(l.schoolId=t),await Dd(o,l),{success:!0}}catch(o){return console.error(":",o),{success:!1,error:o.message}}},updateAssignedClasses:async(r,e,t=null)=>{try{const i=pn(ct,Do.USERS,r),o={assignedClasses:e,updatedAt:yt()};return t!==void 0&&(o.schoolId=t),await Dd(i,o),{success:!0}}catch(i){return console.error(":",i),{success:!1,error:i.message}}},reject:async r=>{var e;try{const t=pn(ct,Do.USERS,r);return await Dd(t,{role:Et.PENDING,assignedClasses:[],rejectedAt:yt(),rejectedBy:((e=Lo.currentUser)==null?void 0:e.uid)||"unknown"}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},isAdmin:r=>(r==null?void 0:r.role)===Et.ADMIN,isApproved:r=>(r==null?void 0:r.role)===Et.ADMIN||(r==null?void 0:r.role)===Et.TEACHER},lA=r=>{const[e,t]=Z.useState([]),[i,o]=Z.useState(new Set),[l,h]=Z.useState(!0),[m,y]=Z.useState(!1);Z.useEffect(()=>{if(!r){t([]),h(!1);return}oA(r),h(!0);const W=Yr.subscribe(ie=>{const re=ie.map(C=>({...C,id:parseInt(C.id)||C.id,selectedTags:C.selectedTags||[],manualTraits:C.manualTraits||"",comment:C.comment||""}));t(re),h(!1)});return()=>W()},[r]);const v=Z.useCallback(async W=>{const ie=W.split(`
`).map(C=>C.trim()).filter(C=>C!=="");if(ie.length===0)return[];const re=ie.map((C,T)=>({id:Date.now()+T,name:C,selectedTags:[],manualTraits:"",comment:""}));y(!0);try{await Yr.addBatch(re)}catch(C){console.error(":",C)}return y(!1),re},[]),x=Z.useCallback(async(W,ie,re)=>{t(C=>C.map(T=>T.id===W?{...T,[ie]:re}:T));try{const C=e.find(T=>T.id===W);C&&await Yr.update(W,{...C,[ie]:re})}catch(C){console.error(":",C)}},[e]),E=Z.useCallback(async W=>{t(ie=>ie.filter(re=>re.id!==W)),o(ie=>{const re=new Set(ie);return re.delete(W),re});try{await Yr.delete(W)}catch(ie){console.error(":",ie)}},[]),S=Z.useCallback(async()=>{const W=Array.from(i);t(ie=>ie.filter(re=>!i.has(re.id))),o(new Set);try{await Yr.deleteBatch(W)}catch(ie){console.error(":",ie)}},[i]),O=Z.useCallback(async()=>{t([]),o(new Set);try{await Yr.deleteAll()}catch(W){console.error(":",W)}},[]),q=Z.useCallback(W=>{o(ie=>{const re=new Set(ie);return re.has(W)?re.delete(W):re.add(W),re})},[]),$=Z.useCallback(()=>{if(i.size===e.length&&e.length>0)o(new Set);else{const W=new Set(e.map(ie=>ie.id));o(W)}},[i.size,e]),U=Z.useCallback(async(W,ie)=>{t(re=>re.map(C=>W.includes(C.id)?C.selectedTags.includes(ie)?C:{...C,selectedTags:[...C.selectedTags,ie]}:C));try{for(const re of W){const C=e.find(T=>T.id===re);C&&!C.selectedTags.includes(ie)&&await Yr.update(re,{selectedTags:[...C.selectedTags,ie]})}}catch(re){console.error(":",re)}},[e]),G=Z.useCallback(async(W,ie)=>{t(re=>re.map(C=>C.id===W?{...C,selectedTags:C.selectedTags.filter(T=>T!==ie)}:C));try{const re=e.find(C=>C.id===W);re&&await Yr.update(W,{selectedTags:re.selectedTags.filter(C=>C!==ie)})}catch(re){console.error(":",re)}},[e]),te=Z.useCallback(W=>{t(ie=>typeof W=="function"?W(ie):W)},[]),oe=Z.useCallback(async(W,ie)=>{try{await Yr.update(W,{comment:ie})}catch(re){console.error(":",re)}},[]);return{students:e,setStudents:te,selectedIds:i,isLoading:l,isSyncing:m,generateStudents:v,updateStudent:x,deleteStudent:E,deleteSelected:S,resetStudents:O,toggleSelection:q,toggleAllSelection:$,addTagToStudents:U,removeTag:G,syncComment:oe}};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zw=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=Z.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...m},y)=>Z.createElement("svg",{ref:y,...cA,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:zw("lucide",o),...m},[...h.map(([v,x])=>Z.createElement(v,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(r,e)=>{const t=Z.forwardRef(({className:i,...o},l)=>Z.createElement(hA,{ref:l,iconNode:e,className:zw(`lucide-${uA(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=$e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=$e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=$e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=$e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=$e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=$e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=$e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=$e("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=$e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=$e("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=$e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=$e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=$e("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=$e("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=$e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),RA=({isSidebarOpen:r,setIsSidebarOpen:e,onOpenSettings:t,onOpenTemplates:i,onOpenClasses:o,onOpenAdmin:l,onLogout:h,hasApiKey:m,templateCount:y=0,currentClassName:v="",currentUser:x,isAdmin:E})=>f.jsxs("header",{className:"bg-[#FFF9E6] border-b-4 border-[#2D3436] h-16 sm:h-20 flex items-center justify-between px-3 sm:px-6 shrink-0 z-20 sticky top-0 shadow-[0_4px_0_#2D3436]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[f.jsx("div",{className:"bg-[#FECA57] text-[#2D3436] p-2 sm:p-3 border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] transform rotate-[-2deg] rounded-lg",children:f.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-lg sm:text-2xl font-black text-[#2D3436] tracking-wide",children:[f.jsxs("span",{className:"hidden sm:inline relative",children:[f.jsx("span",{className:"relative z-10",children:""}),f.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]}),f.jsx("span",{className:"hidden sm:inline ml-1",children:""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsxs("button",{onClick:o,className:"text-xs font-bold text-[#636E72] hover:text-[#A29BFE] transition-colors flex items-center gap-1 mt-0.5",children:[f.jsx(yl,{size:12}),v,f.jsx("span",{className:"text-[10px]",children:""})]})]})]}),f.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[E&&f.jsxs("button",{onClick:l,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#FF6B9D] text-white flex items-center gap-1 text-sm",title:"",children:[f.jsx($w,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:""})]}),f.jsxs("button",{onClick:i,className:"btn-pop p-2 sm:px-3 sm:py-2 bg-[#A29BFE] text-white flex items-center gap-1 text-sm relative",title:"",children:[f.jsx(Kc,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:""}),y>0&&f.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[#2D3436] text-white text-xs font-bold rounded-full flex items-center justify-center",children:y>9?"9+":y})]}),f.jsxs("button",{onClick:t,className:`btn-pop p-2 sm:px-3 sm:py-2 flex items-center gap-1 text-sm
            ${m?"bg-[#1DD1A1] text-white":"bg-[#FF6B6B] text-white animate-pulse"}`,title:m?"API Key ":" API Key",children:[f.jsx(CA,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:m?"":""})]}),f.jsxs("button",{onClick:()=>e(!r),className:`btn-pop px-3 sm:px-4 py-2 flex items-center gap-1 sm:gap-2 text-sm sm:text-base
            ${r?"bg-[#FF6B9D] text-white":"bg-[#54A0FF] text-white"}`,children:[r?f.jsx(er,{size:18}):f.jsx(xA,{size:18}),f.jsx("span",{className:"hidden sm:inline",children:r?"":""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsxs("div",{className:"relative group",children:[x!=null&&x.photoURL?f.jsx("img",{src:x.photoURL,alt:x.displayName,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full border-2 border-[#2D3436] cursor-pointer hover:ring-2 hover:ring-[#FECA57] transition-all"}):f.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center cursor-pointer",children:f.jsx("span",{className:"text-lg",children:""})}),f.jsxs("div",{className:"absolute right-0 top-12 bg-white border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] p-3 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[f.jsx("div",{className:"text-sm font-bold text-[#2D3436] truncate",children:x==null?void 0:x.displayName}),f.jsx("div",{className:"text-xs text-[#636E72] truncate",children:x==null?void 0:x.email}),(x==null?void 0:x.schoolName)&&f.jsx("div",{className:"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]",children:f.jsxs("div",{className:"text-xs text-[#636E72] flex items-center gap-1",children:[" ",f.jsx("span",{className:"font-bold text-[#A29BFE]",children:x.schoolName})]})}),(x==null?void 0:x.assignedClassNames)&&x.assignedClassNames.length>0&&f.jsx("div",{className:`${x!=null&&x.schoolName?"mt-1":"mt-2 pt-2 border-t border-dashed border-[#E8DCC8]"}`,children:f.jsxs("div",{className:"text-xs text-[#636E72] flex items-start gap-1",children:[f.jsx(yl,{size:12,className:"mt-0.5 shrink-0"}),f.jsx("span",{className:"font-bold text-[#54A0FF]",children:x.assignedClassNames.join("")})]})}),f.jsxs("button",{onClick:h,className:"w-full btn-pop px-3 py-2 bg-[#636E72] text-white text-xs font-bold flex items-center justify-center gap-2 mt-3",children:[f.jsx(wA,{size:14}),""]})]})]})]})]}),PA=()=>f.jsx("footer",{className:"bg-[#FECA57] text-[#2D3436] text-xs sm:text-sm py-3 sm:py-4 text-center border-t-4 border-[#2D3436] shrink-0 font-bold",children:f.jsxs("p",{className:"flex items-center justify-center gap-2",children:[f.jsx("span",{children:""}),f.jsx("span",{children:" "}),f.jsx("span",{children:""})]})}),DA=({dialog:r,closeDialog:e})=>r.isOpen?f.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-sm overflow-hidden animate-in",children:[f.jsx("div",{className:"p-4 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436]",children:f.jsxs("h3",{className:"font-black text-lg sm:text-xl text-white flex items-center gap-2",children:[r.type==="confirm"?f.jsx(NA,{size:24}):f.jsx(_A,{size:24}),r.title]})}),f.jsx("div",{className:"p-4 sm:p-6 bg-[#FFFDF5] text-[#2D3436] font-bold text-base sm:text-lg",children:r.message}),f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFF9E6] flex justify-end gap-2 sm:gap-3 border-t-2 border-dashed border-[#E8DCC8]",children:r.type==="confirm"?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-white text-[#2D3436] text-sm sm:text-base",children:" "}),f.jsx("button",{onClick:r.onConfirm,className:"btn-pop px-4 sm:px-6 py-2 bg-[#FF6B6B] text-white text-sm sm:text-base",children:" "})]}):f.jsx("button",{onClick:e,className:"btn-pop px-4 sm:px-6 py-2 bg-[#1DD1A1] text-white text-sm sm:text-base",children:" "})})]})}):null,jA=({progress:r})=>{const e=r.total>0?r.current/r.total*100:0;return f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#2D3436]/70 backdrop-blur-md p-4",children:f.jsxs("div",{className:"card-pop w-[95%] sm:w-[90%] max-w-2xl flex flex-col items-center justify-center p-6 sm:p-10 text-center animate-in bg-[#FFF9E6]",children:[f.jsx("div",{className:"mb-4 sm:mb-6 text-6xl sm:text-8xl animate-bounce-soft",children:""}),f.jsxs("h2",{className:"text-2xl sm:text-4xl md:text-5xl font-black text-[#2D3436] mb-4 sm:mb-6",children:[f.jsxs("span",{className:"relative inline-block",children:["",f.jsx("span",{className:"absolute bottom-1 left-0 right-0 h-3 bg-[#FECA57] -z-10 transform rotate-1"})]}),f.jsx("span",{className:"animate-pulse",children:"..."})]}),f.jsx("div",{className:"w-full max-w-md bg-white border-3 border-[#2D3436] h-8 sm:h-10 mb-3 sm:mb-4 overflow-hidden rounded-full shadow-[4px_4px_0_#2D3436]",children:f.jsx("div",{className:"h-full transition-all duration-300 ease-out bg-gradient-to-r from-[#FF6B9D] via-[#FECA57] to-[#1DD1A1]",style:{width:`${e}%`}})}),f.jsxs("p",{className:"text-lg sm:text-2xl text-[#2D3436] font-bold mb-4 sm:mb-6",children:[" ",r.current," / ",r.total," "]}),f.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-[#FF6B9D] font-black",children:" "})]})})},VA=({isOpen:r,onClose:e,globalStyles:t,toggleGlobalStyle:i})=>{if(!r)return null;const o=["#FF6B9D","#FF9F43","#FECA57","#1DD1A1","#54A0FF","#A29BFE","#FF6B6B","#FF6B9D","#FF9F43","#FECA57","#1DD1A1","#54A0FF"];return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-3xl max-h-[95vh] sm:max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#A29BFE] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 sm:gap-3 text-lg sm:text-2xl",children:[f.jsx("span",{className:"text-2xl",children:""}),f.jsx("span",{className:"hidden sm:inline",children:""}),f.jsx("span",{className:"sm:hidden",children:""})]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsxs("div",{className:"p-3 sm:p-6 overflow-y-auto flex-1 mobile-scroll-hide",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 sm:p-3 bg-[#FECA57] border-2 border-[#2D3436] rounded-lg text-sm sm:text-base font-bold text-[#2D3436]",children:[f.jsx("span",{className:"text-xl",children:""})," 2 "]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:yf.map((l,h)=>{const m=t.includes(l.id),y=!m&&t.length>=2,v=o[h%o.length];return f.jsx("div",{onClick:()=>!y&&i(l.id),className:`
                    p-3 sm:p-4 cursor-pointer transition-all border-3 border-[#2D3436] rounded-lg
                    ${m?"shadow-[4px_4px_0_#2D3436] transform -translate-y-1":"shadow-[2px_2px_0_#2D3436]"}
                    ${y?"opacity-50 cursor-not-allowed":"hover:-translate-y-1 hover:shadow-[4px_4px_0_#2D3436]"}
                  `,style:{backgroundColor:m?v:"#FFFDF5"},children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:`w-6 h-6 sm:w-7 sm:h-7 border-2 border-[#2D3436] rounded flex items-center justify-center shrink-0
                      ${m?"bg-[#2D3436] text-white":"bg-white"}`,children:m&&f.jsx("span",{className:"text-sm",children:""})}),f.jsxs("div",{children:[f.jsx("h4",{className:`font-black text-base sm:text-lg ${m?"text-white":"text-[#2D3436]"}`,children:l.name}),f.jsx("p",{className:`text-xs sm:text-sm mt-1 leading-relaxed ${m?"text-white/90":"text-[#636E72]"}`,children:l.desc})]})]})},l.id)})})]}),f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FFF9E6] flex justify-between items-center border-t-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("span",{className:"text-sm sm:text-lg font-bold text-[#2D3436]",children:[" ",t.length," / 2  "]}),f.jsx("button",{onClick:e,className:"btn-pop bg-[#1DD1A1] text-white px-6 sm:px-8 py-2 sm:py-3 text-sm sm:text-base",children:" "})]})]})})},FA=({rawInput:r,setRawInput:e,numberCount:t,setNumberCount:i,onGenerateStudents:o,onGenerateNumbers:l,onResetList:h,isGenerating:m})=>f.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 p-3 sm:p-4 bg-[#FF9F43] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[-0.5deg]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl mb-1",children:[f.jsx("span",{className:"text-2xl",children:""}),"1. "]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[f.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[f.jsx("textarea",{className:"flex-1 min-h-[100px] sm:min-h-[120px] p-3 sm:p-4 border-3 border-[#2D3436] rounded-lg outline-none text-sm sm:text-base resize-none font-medium placeholder:text-[#2D3436]/40 text-[#2D3436] leading-relaxed bg-white shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1)]",placeholder:`...


`,value:r,onChange:y=>e(y.target.value),disabled:m}),f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 bg-white p-2 sm:p-3 border-2 border-[#2D3436] rounded-lg",children:[f.jsxs("span",{className:"text-[#2D3436] font-bold text-xs sm:text-sm flex items-center gap-1",children:[f.jsx(yA,{size:14})," "]}),f.jsx("input",{type:"number",min:"1",max:"100",value:t,onChange:y=>i(Number(y.target.value)),className:"w-14 sm:w-16 text-center border-2 border-[#2D3436] text-[#2D3436] font-bold text-xs sm:text-sm py-1.5 outline-none rounded"}),f.jsx("span",{className:"text-[#2D3436] text-xs sm:text-sm font-bold",children:""}),f.jsx("button",{onClick:l,className:"btn-pop ml-auto bg-[#FECA57] text-[#2D3436] px-3 py-1 text-xs sm:text-sm",children:" "})]})]}),f.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 sm:gap-3 sm:w-24",children:[f.jsxs("button",{onClick:o,disabled:m,className:"flex-1 btn-pop bg-[#1DD1A1] text-white font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(Bw,{size:20}),f.jsx("span",{children:""})]}),f.jsxs("button",{onClick:h,disabled:m,className:"flex-1 btn-pop bg-white text-[#FF6B6B] font-bold px-3 sm:px-2 py-3 sm:py-4 text-sm sm:text-base flex flex-row sm:flex-col items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(IA,{size:18}),f.jsx("span",{children:""})]})]})]})]}),OA=({students:r,selectedIds:e,isGenerating:t,extraSettings:i,setExtraSettings:o,onGenerateSelected:l,onGenerateAll:h,onDownload:m,onDeleteSelected:y,onResetList:v})=>f.jsxs("div",{className:"flex-1 w-full flex flex-col gap-3 sm:gap-4 p-3 sm:p-4 bg-[#54A0FF] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436] transform rotate-[0.5deg]",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-white font-black text-base sm:text-xl",children:[f.jsx("span",{className:"text-2xl",children:""}),"2. AI "]}),f.jsxs("div",{className:"bg-white/90 border-2 border-[#2D3436] rounded-lg p-2 sm:p-3 flex flex-col gap-2 sm:gap-3",children:[f.jsx("div",{className:"flex items-center justify-between text-xs sm:text-sm font-bold text-[#2D3436] border-b-2 border-dashed border-[#E8DCC8] pb-2",children:f.jsx("span",{className:"flex items-center gap-1",children:" "})}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[f.jsx("div",{className:"flex bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg overflow-hidden",children:[{val:"normal",label:"",emoji:""},{val:"casual",label:"",emoji:""},{val:"formal",label:"",emoji:""}].map(x=>f.jsxs("button",{onClick:()=>o(E=>({...E,tone:x.val})),className:`px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-bold transition-colors 
                  ${i.tone===x.val?"bg-[#FF6B9D] text-white":"text-[#2D3436] hover:bg-[#FECA57]"}`,children:[f.jsx("span",{className:"hidden sm:inline",children:x.emoji})," ",x.label]},x.val))}),f.jsxs("div",{className:"flex items-center gap-2 bg-[#FFF9E6] border-2 border-[#2D3436] rounded-lg px-2 sm:px-3 py-1.5 ml-auto",children:[f.jsx("span",{className:"text-xs sm:text-sm font-bold text-[#2D3436]",children:" "}),f.jsx("input",{type:"number",min:"20",max:"500",step:"10",value:i.wordCount,onChange:x=>o(E=>({...E,wordCount:Number(x.target.value)})),className:"w-12 text-xs sm:text-sm font-bold text-[#2D3436] text-center outline-none bg-white border-2 border-[#2D3436] rounded"})]})]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[f.jsxs("button",{onClick:l,disabled:e.size===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2 
            ${e.size>0&&!t?"bg-white text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[f.jsx(bA,{size:18}),t?"...":` (${e.size})`]}),f.jsxs("button",{onClick:h,disabled:r.length===0||t,className:`flex-1 btn-pop py-3 sm:py-4 text-sm sm:text-base font-black flex items-center justify-center gap-2
            ${r.length>0&&!t?"bg-[#FECA57] text-[#2D3436]":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-60"}`,children:[f.jsx("span",{className:"text-xl",children:""}),t?"AI ...":""]})]}),f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs sm:text-sm pt-2 border-t-2 border-dashed border-white/50",children:[f.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[f.jsxs("button",{onClick:()=>m("txt"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[f.jsx(mf,{size:14})," TXT"]}),f.jsxs("button",{onClick:()=>m("csv"),disabled:r.length===0,className:"btn-pop bg-white text-[#2D3436] px-2 sm:px-3 py-1 flex items-center gap-1 disabled:opacity-50",children:[f.jsx(mf,{size:14})," CSV"]})]}),f.jsxs("div",{className:"flex gap-2",children:[e.size>0&&f.jsxs("button",{onClick:y,disabled:t,className:"btn-pop bg-[#FF6B6B] text-white px-2 sm:px-3 py-1 flex items-center gap-1 text-xs sm:text-sm disabled:opacity-50",children:[f.jsx(aa,{size:12}),"  (",e.size,")"]}),f.jsx("button",{onClick:v,disabled:t||r.length===0,className:"text-white/80 hover:text-white font-bold transition-colors disabled:opacity-50",children:" "})]})]})]}),LA=({globalStyles:r,onOpenStyleModal:e,isGenerating:t})=>{const i={qualitative:"#FF6B9D",emotional:"#FF9F43",friendly:"#FECA57",humorous:"#1DD1A1",internal:"#54A0FF",philosophical:"#A29BFE",practical:"#FF6B6B",resonance:"#FF6B9D",blessing:"#FF9F43",scenario:"#FECA57",milestone:"#1DD1A1",journey:"#54A0FF"};return f.jsxs("div",{className:"mb-4 sm:mb-6 bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 shadow-[4px_4px_0_#2D3436]",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-[#2D3436] text-sm sm:text-base font-black",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsx("span",{children:""}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:r.length>0?r.map(o=>{var l;return f.jsx("span",{className:"px-3 py-1 border-2 border-[#2D3436] rounded-full text-xs sm:text-sm font-bold text-white shadow-[2px_2px_0_#2D3436]",style:{backgroundColor:i[o]||"#A29BFE"},children:(l=yf.find(h=>h.id===o))==null?void 0:l.name},o)}):f.jsx("span",{className:"text-[#636E72] font-medium text-xs sm:text-sm bg-[#E8DCC8] px-3 py-1 rounded-full",children:" (: )"})})]}),f.jsxs("button",{onClick:e,disabled:t,className:"btn-pop w-full sm:w-auto bg-[#A29BFE] text-white px-4 sm:px-6 py-2 text-xs sm:text-sm font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[f.jsx(EA,{size:14})," "]})]})},MA=({student:r,isSelected:e,isFocused:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:h,onOpenSidebar:m,onRemoveTag:y,onUpdateStudent:v,onDeleteStudent:x,onGenerateSingle:E,onSaveTemplate:S,onOpenHistory:O})=>{const q=["-1deg","0.5deg","-0.5deg","1deg","0deg"],$=q[r.id%q.length],U=o===r.id,G=te=>te<50?"text-[#FF6B6B]":te>120?"text-[#FF9F43]":"text-[#1DD1A1]";return f.jsxs("div",{className:`bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg overflow-hidden shadow-[4px_4px_0_#2D3436] transition-all
        ${e?"ring-4 ring-[#FF6B9D]":""}
        ${t?"ring-4 ring-[#54A0FF]":""}
        ${U?"ring-4 ring-[#FECA57] animate-pulse":""}`,style:{transform:`rotate(${$})`},children:[f.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FECA57] border-b-2 border-[#2D3436]",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>l(r.id),disabled:i||U,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center
              ${e?"bg-[#FF6B9D] text-white":"bg-white"}`,children:e&&f.jsx("span",{className:"text-sm font-bold",children:""})}),f.jsxs("span",{className:"font-black text-[#2D3436] text-base",children:[" ",r.name]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("button",{onClick:()=>E(r.id),disabled:i||U,className:"btn-pop px-2 py-1 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50",children:[U?f.jsx(yp,{size:14,className:"animate-spin"}):f.jsx(f.Fragment,{children:""}),f.jsx("span",{className:"hidden sm:inline",children:U?"":""})]}),f.jsx("button",{onClick:()=>x(r.id),disabled:i||U,className:"text-[#2D3436]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30 p-1",children:f.jsx(aa,{size:18})})]})]}),f.jsxs("div",{className:"p-3 border-b-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{className:"text-xs font-bold text-[#636E72] mb-2",children:" "}),f.jsx("div",{onClick:()=>{h(r.id),m()},className:`p-2 border-2 border-dashed bg-white min-h-[50px] flex flex-col gap-2 cursor-pointer transition-colors rounded-lg
            ${t?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8]"}`,children:r.selectedTags.length>0?f.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.selectedTags.map((te,oe)=>f.jsxs("span",{className:"tag-handwrite text-xs",children:[te,f.jsx("button",{onClick:W=>{W.stopPropagation(),y(r.id,te)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},oe))}):f.jsx("span",{className:"text-[#636E72]/50 text-xs",children:" ..."})}),f.jsx("input",{type:"text",value:r.manualTraits,onChange:te=>v(r.id,"manualTraits",te.target.value),placeholder:" ...",disabled:i||U,className:"w-full mt-2 p-2 text-sm font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40"})]}),f.jsxs("div",{className:"p-3 bg-[#FFF9E6]",children:[f.jsxs("div",{className:"text-xs font-bold text-[#636E72] mb-2 flex items-center justify-between",children:[f.jsx("span",{className:"flex items-center gap-1",children:" AI "}),f.jsxs("div",{className:"flex items-center gap-2",children:[O&&f.jsxs("button",{onClick:()=>O(r),className:"flex items-center gap-1 text-[#54A0FF] hover:text-[#2D3436] transition-colors",title:"",children:[f.jsx(Yo,{size:14}),f.jsx("span",{children:""})]}),r.comment&&!r.comment.includes("")&&!r.comment.includes("")&&f.jsxs("button",{onClick:()=>S(r),className:"flex items-center gap-1 text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors",title:"",children:[f.jsx(Kc,{size:14}),f.jsx("span",{children:""})]})]})]}),f.jsx("textarea",{value:r.comment,onChange:te=>v(r.id,"comment",te.target.value),placeholder:" AI ...",disabled:U,className:`w-full text-sm p-3 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[100px] leading-relaxed font-medium text-[#2D3436] rounded-lg
            ${U?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),r.comment&&f.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${G(r.comment.length)}`,children:[r.comment.length," "]})]})]})},UA=({students:r,selectedIds:e,focusedStudentId:t,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onToggleAllSelection:h,onFocusStudent:m,onOpenSidebar:y,onRemoveTag:v,onUpdateStudent:x,onDeleteStudent:E,onGenerateSingle:S,onSaveTemplate:O,onOpenHistory:q})=>{const $=typeof window<"u"&&window.innerWidth<768,U=G=>G<50?"text-[#FF6B6B]":G>120?"text-[#FF9F43]":"text-[#1DD1A1]";return $?f.jsx("div",{className:"space-y-4",children:r.length===0?f.jsxs("div",{className:"p-10 text-center font-bold text-lg bg-[#FFFDF5] border-3 border-[#2D3436] rounded-lg shadow-[4px_4px_0_#2D3436]",children:[f.jsx("span",{className:"text-4xl block mb-3",children:""}),f.jsx("span",{className:"text-[#636E72]",children:""})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex items-center justify-between bg-[#A29BFE] text-white border-3 border-[#2D3436] p-3 rounded-lg shadow-[3px_3px_0_#2D3436]",children:f.jsxs("button",{onClick:h,className:"flex items-center gap-2 font-bold text-sm",disabled:i,children:[f.jsx("span",{className:`w-5 h-5 border-2 border-white rounded flex items-center justify-center ${e.size===r.length&&r.length>0?"bg-white text-[#A29BFE]":""}`,children:e.size===r.length&&r.length>0&&f.jsx("span",{className:"text-xs",children:""})})," (",e.size,"/",r.length,")"]})}),r.map(G=>f.jsx(MA,{student:G,isSelected:e.has(G.id),isFocused:t===G.id,isGenerating:i,isGeneratingSingle:o,onToggleSelection:l,onFocus:m,onOpenSidebar:y,onRemoveTag:v,onUpdateStudent:x,onDeleteStudent:E,onGenerateSingle:S,onSaveTemplate:O,onOpenHistory:q},G.id))]})}):f.jsx("div",{className:"card-pop overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left border-collapse min-w-[1000px]",children:[f.jsx("thead",{className:"bg-[#FF6B9D] text-white",children:f.jsxs("tr",{className:"text-base font-black",children:[f.jsx("th",{className:"p-4 lg:p-5 w-12 text-center border-r-2 border-[#2D3436]/20",children:f.jsx("button",{onClick:h,className:"w-6 h-6 border-2 border-white rounded flex items-center justify-center mx-auto bg-white/20 hover:bg-white/40 transition",disabled:i,children:e.size===r.length&&r.length>0&&f.jsx("span",{className:"text-sm",children:""})})}),f.jsx("th",{className:"p-4 lg:p-5 w-32 lg:w-40 border-r-2 border-[#2D3436]/20",children:" "}),f.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20 w-1/4",children:" "}),f.jsx("th",{className:"p-4 lg:p-5 border-r-2 border-[#2D3436]/20",children:" AI "}),f.jsx("th",{className:"p-4 lg:p-5 w-20 text-center",children:""})]})}),f.jsxs("tbody",{className:"bg-[#FFFDF5]",children:[r.length===0&&f.jsx("tr",{children:f.jsxs("td",{colSpan:"5",className:"p-16 lg:p-20 text-center font-bold text-xl text-[#636E72]",children:[f.jsx("span",{className:"text-5xl block mb-4",children:""}),""]})}),r.map(G=>{const te=o===G.id;return f.jsxs("tr",{className:`border-t-2 border-dashed border-[#E8DCC8] hover:bg-[#FECA57]/20 transition-colors ${e.has(G.id)?"bg-[#FF6B9D]/10":""} ${te?"bg-[#FECA57]/30":""}`,children:[f.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:f.jsx("button",{onClick:()=>l(G.id),disabled:i||te,className:`w-6 h-6 border-2 border-[#2D3436] rounded flex items-center justify-center mx-auto transition ${e.has(G.id)?"bg-[#FF6B9D] text-white":"bg-white hover:bg-[#FECA57]"}`,children:e.has(G.id)&&f.jsx("span",{className:"text-sm font-bold",children:""})})}),f.jsxs("td",{className:"p-4 lg:p-5 align-top pt-6 lg:pt-8 border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{className:"font-black text-[#2D3436] text-base lg:text-lg mb-2",children:G.name}),f.jsx("button",{onClick:()=>S(G.id),disabled:i||te,className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1 disabled:opacity-50 w-full justify-center",children:te?f.jsxs(f.Fragment,{children:[f.jsx(yp,{size:14,className:"animate-spin"})," ..."]}):f.jsx(f.Fragment,{children:" "})})]}),f.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsx("div",{onClick:()=>{m(G.id),y()},className:`p-3 border-2 border-dashed bg-white min-h-[80px] lg:min-h-[100px] flex flex-col gap-3 cursor-pointer transition-colors rounded-lg ${t===G.id?"border-[#54A0FF] bg-[#54A0FF]/10":"border-[#E8DCC8] hover:border-[#FF9F43]"}`,children:G.selectedTags.length>0?f.jsx("div",{className:"flex flex-wrap gap-2",children:G.selectedTags.map((oe,W)=>f.jsxs("span",{className:"tag-handwrite text-sm",children:[oe,f.jsx("button",{onClick:ie=>{ie.stopPropagation(),v(G.id,oe)},className:"hover:text-[#FF6B6B] ml-1",children:""})]},W))}):f.jsx("span",{className:"text-[#636E72]/50 text-sm",children:" ..."})}),f.jsx("input",{type:"text",value:G.manualTraits,onChange:oe=>x(G.id,"manualTraits",oe.target.value),placeholder:" ...",disabled:i||te,className:"w-full mt-3 p-3 text-sm lg:text-base font-medium outline-none border-2 border-[#E8DCC8] focus:border-[#FF9F43] rounded-lg bg-white text-[#2D3436] placeholder:text-[#636E72]/40 transition-all"})]}),f.jsxs("td",{className:"p-4 lg:p-5 align-top border-r-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs font-bold text-[#636E72]",children:""}),f.jsxs("div",{className:"flex items-center gap-2",children:[q&&f.jsxs("button",{onClick:()=>q(G),className:"flex items-center gap-1 text-xs text-[#54A0FF] hover:text-[#2D3436] transition-colors font-bold",title:"",children:[f.jsx(Yo,{size:12})," "]}),G.comment&&!G.comment.includes("")&&!G.comment.includes("")&&f.jsxs("button",{onClick:()=>O(G),className:"flex items-center gap-1 text-xs text-[#FF6B9D] hover:text-[#FF6B6B] transition-colors font-bold",title:"",children:[f.jsx(Kc,{size:12})," "]})]})]}),f.jsx("textarea",{value:G.comment,onChange:oe=>x(G.id,"comment",oe.target.value),placeholder:" AI ...",disabled:te,className:`w-full text-sm lg:text-base p-3 lg:p-4 border-2 border-[#E8DCC8] focus:border-[#1DD1A1] outline-none resize-y min-h-[180px] lg:min-h-[200px] leading-relaxed font-medium text-[#2D3436] rounded-lg transition-all ${te?"bg-[#FECA57]/30 animate-pulse":"bg-white"}`}),G.comment&&f.jsxs("div",{className:`text-right text-xs mt-1 font-bold ${U(G.comment.length)}`,children:[G.comment.length," "]})]}),f.jsx("td",{className:"p-4 lg:p-5 text-center align-top pt-6 lg:pt-8",children:f.jsx("button",{onClick:()=>E(G.id),disabled:i||te,className:"text-[#636E72]/50 hover:text-[#FF6B6B] transition-colors disabled:opacity-30",children:f.jsx(aa,{size:18})})})]},G.id)})]})]})})},zA=({isOpen:r,onClose:e,selectedIds:t,expandedCategories:i,onToggleCategory:o,onIdiomClick:l})=>{const[h,m]=Z.useState(""),y={" ()":"#1DD1A1"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#FECA57"," ()":"#FF9F43"," ()":"#A29BFE"," ()":"#FF6B9D"," ()":"#1DD1A1"," ()":"#FECA57"," ()":"#FF6B6B"," ()":"#54A0FF"," ()":"#A29BFE"," ()":"#FF9F43",:"#FF6B9D",:"#636E72"},v=$=>{try{return JSON.parse(localStorage.getItem("idiom_usage")||"{}")[$]||0}catch{return 0}},x=$=>{try{const U=JSON.parse(localStorage.getItem("idiom_usage")||"{}");U[$]=(U[$]||0)+1,localStorage.setItem("idiom_usage",JSON.stringify(U))}catch(U){console.error(":",U)}},E=$=>{x($),l($)},S=Z.useMemo(()=>{if(!h.trim())return Ed;const $=h.trim().toLowerCase(),U={};return Object.entries(Ed).forEach(([G,te])=>{const oe=te.filter(W=>W.toLowerCase().includes($));oe.length>0&&(U[G]=oe)}),U},[h]),O=Z.useMemo(()=>Object.values(Ed).flat().map(G=>({idiom:G,count:v(G)})).filter(G=>G.count>0).sort((G,te)=>te.count-G.count).slice(0,12).map(G=>G.idiom),[r]),q=Object.values(S).reduce(($,U)=>$+U.length,0);return f.jsxs(f.Fragment,{children:[r&&f.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 backdrop-blur-[2px] transition-opacity",onClick:e}),f.jsxs("div",{className:`fixed top-0 right-0 bottom-0 bg-[#FFF9E6] border-l-4 border-[#2D3436] shadow-[-8px_0_0_#2D3436] transform transition-transform duration-300 ease-in-out flex flex-col z-50
          ${r?"translate-x-0":"translate-x-full"}
          w-full sm:w-[80%] md:w-[50%] lg:w-[35%] xl:w-[30%] max-w-[400px]`,children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#1DD1A1] border-b-3 border-[#2D3436] flex items-center justify-between shrink-0",children:[f.jsxs("h2",{className:"font-black text-white flex items-center gap-2 sm:gap-3 text-base sm:text-xl",children:[f.jsx("span",{className:"text-2xl",children:""})," "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsxs("div",{className:"p-3 sm:p-4 bg-white border-b-2 border-dashed border-[#E8DCC8]",children:[f.jsxs("div",{className:"relative",children:[f.jsx(AA,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#636E72]"}),f.jsx("input",{type:"text",value:h,onChange:$=>m($.target.value),placeholder:" ...",className:"w-full pl-10 pr-4 py-2.5 border-2 border-[#2D3436] rounded-lg text-sm font-medium outline-none focus:border-[#1DD1A1] bg-[#FFFDF5]"}),h&&f.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#636E72] hover:text-[#FF6B6B]",children:""})]}),h&&f.jsxs("div",{className:"mt-2 text-xs text-[#636E72] font-bold",children:[" ",q," "]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4 mobile-scroll-hide",children:[f.jsxs("div",{className:"text-sm font-bold text-[#2D3436] bg-[#FECA57] px-3 py-2 border-2 border-[#2D3436] rounded-lg inline-flex items-center gap-2 shadow-[2px_2px_0_#2D3436]",children:[f.jsx("span",{children:""})," "]}),t.size>0&&f.jsxs("div",{className:"bg-[#54A0FF] text-white p-3 sm:p-4 border-2 border-[#2D3436] text-xs sm:text-sm font-bold rounded-lg shadow-[3px_3px_0_#2D3436]",children:[f.jsx("span",{className:"block mb-1 text-white/80",children:" "})," ",f.jsx("strong",{children:t.size})," "]}),O.length>0&&!h&&f.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white bg-[#FF6B9D]",children:[f.jsx("span",{children:" "}),f.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:O.length})]}),f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:O.map(($,U)=>f.jsx("button",{onClick:()=>E($),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-[#FF6B9D] border-2 border-[#2D3436] text-white font-bold rounded-lg hover:bg-[#FF5291] transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5",children:$},`popular-${$}-${U}`))})]}),Object.entries(S).map(([$,U])=>{const G=y[$]||"#A29BFE";return f.jsxs("div",{className:"border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("button",{onClick:()=>o($),className:"w-full flex items-center justify-between p-3 sm:p-4 text-left text-sm sm:text-base font-black text-white transition-colors",style:{backgroundColor:G},children:[f.jsx("span",{children:$}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:U.length}),f.jsx("span",{className:"bg-white/20 rounded-full w-6 h-6 flex items-center justify-center",children:i[$]?"":""})]})]}),(i[$]||h)&&f.jsx("div",{className:"p-3 sm:p-4 bg-[#FFFDF5] flex flex-wrap gap-1.5 sm:gap-2 border-t-2 border-dashed border-[#E8DCC8]",children:U.map((te,oe)=>f.jsx("button",{onClick:()=>E(te),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm bg-white border-2 border-[#2D3436] text-[#2D3436] font-bold rounded-lg hover:text-white transition-all shadow-[2px_2px_0_#2D3436] hover:-translate-y-0.5 hover:shadow-[3px_3px_0_#2D3436] active:translate-y-0 active:shadow-[1px_1px_0_#2D3436]",style:{"--hover-bg":G},onMouseEnter:W=>W.target.style.backgroundColor=G,onMouseLeave:W=>W.target.style.backgroundColor="white",children:h&&te.includes(h)?f.jsx("span",{dangerouslySetInnerHTML:{__html:te.replace(new RegExp(`(${h})`,"gi"),'<mark class="bg-[#FECA57] px-0.5 rounded">$1</mark>')}}):te},`${te}-${oe}`))})]},$)}),h&&Object.keys(S).length===0&&f.jsxs("div",{className:"text-center py-10",children:[f.jsx("div",{className:"text-4xl mb-3",children:""}),f.jsxs("p",{className:"text-[#636E72] font-bold",children:["",h,""]})]})]})]})]})},BA=()=>f.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-[#FFF9E6]",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),f.jsx("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:"..."}),f.jsx("p",{className:"text-[#636E72] font-medium",children:""}),f.jsxs("div",{className:"mt-4 flex justify-center gap-1",children:[f.jsx("span",{className:"w-3 h-3 bg-[#FF6B9D] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("span",{className:"w-3 h-3 bg-[#FECA57] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("span",{className:"w-3 h-3 bg-[#1DD1A1] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),$A=({isOpen:r,onClose:e})=>{const[t,i]=Z.useState(""),[o,l]=Z.useState(!1),[h,m]=Z.useState(null),[y,v]=Z.useState("");Z.useEffect(()=>{const q=localStorage.getItem("gemini_api_key")||"";v(q),i(q)},[r]);const x=()=>{localStorage.setItem("gemini_api_key",t.trim()),v(t.trim()),m(null)},E=()=>{localStorage.removeItem("gemini_api_key"),i(""),v(""),m(null)},S=async()=>{if(!t.trim()){m("error");return}l(!0),m(null);try{const q=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${t.trim()}`;(await fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:""}]}]})})).ok?(m("success"),localStorage.setItem("gemini_api_key",t.trim()),v(t.trim())):m("error")}catch(q){console.error("API :",q),m("error")}l(!1)},O=q=>!q||q.length<10?q:q.substring(0,6)+""+q.substring(q.length-4);return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF9F43] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(vA,{size:24}),"API Key "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[f.jsxs("div",{className:"bg-[#54A0FF]/20 border-2 border-[#54A0FF] rounded-lg p-3 text-sm text-[#2D3436]",children:[f.jsx("p",{className:"font-bold mb-1",children:"  API Key"}),f.jsx("p",{className:"text-[#636E72]",children:" Google AI Studio  Gemini API Key"}),f.jsxs("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-[#54A0FF] hover:underline font-bold mt-2",children:[f.jsx(gA,{size:14})," API Key"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"font-bold text-[#2D3436]",children:""}),y?f.jsxs("span",{className:"flex items-center gap-1 text-[#1DD1A1] font-bold",children:[f.jsx(d_,{size:16})," (",O(y),")"]}):f.jsxs("span",{className:"flex items-center gap-1 text-[#FF6B6B] font-bold",children:[f.jsx(h_,{size:16}),""]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-[#2D3436] mb-2",children:" Gemini API Key"}),f.jsx("input",{type:"password",value:t,onChange:q=>{i(q.target.value),m(null)},placeholder:" API Key...",className:"w-full p-3 border-3 border-[#2D3436] rounded-lg text-[#2D3436] font-medium placeholder:text-[#636E72]/50 focus:border-[#FF9F43] outline-none"})]}),h&&f.jsx("div",{className:`p-3 rounded-lg border-2 flex items-center gap-2 text-sm font-bold
              ${h==="success"?"bg-[#1DD1A1]/20 border-[#1DD1A1] text-[#1DD1A1]":"bg-[#FF6B6B]/20 border-[#FF6B6B] text-[#FF6B6B]"}`,children:h==="success"?f.jsxs(f.Fragment,{children:[f.jsx(d_,{size:18}),"API Key  "]}):f.jsxs(f.Fragment,{children:[f.jsx(h_,{size:18})," API Key "]})}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[f.jsx("button",{onClick:S,disabled:!t.trim()||o,className:"btn-pop flex-1 py-3 bg-[#54A0FF] text-white font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:o?f.jsxs(f.Fragment,{children:[f.jsx(yp,{size:18,className:"animate-spin"}),"..."]}):f.jsx(f.Fragment,{children:" "})}),f.jsx("button",{onClick:x,disabled:!t.trim(),className:"btn-pop flex-1 py-3 bg-[#1DD1A1] text-white font-bold disabled:opacity-50",children:" "})]}),y&&f.jsx("button",{onClick:E,className:"w-full text-center text-sm text-[#FF6B6B] hover:underline font-bold",children:"  API Key"})]}),f.jsx("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:"API Key "})]})}):null},qA=({isOpen:r,onClose:e,onApplyTemplate:t})=>{const[i,o]=Z.useState([]),[l,h]=Z.useState(!0);Z.useEffect(()=>{if(!r)return;h(!0);const x=ol.subscribe(E=>{o(E),h(!1)});return()=>x()},[r]);const m=async x=>{try{await ol.delete(x)}catch(E){console.error(":",E)}},y=async x=>{try{await ol.incrementUsage(x.id),t(x.content),e()}catch(E){console.error(":",E)}},v=async x=>{try{await navigator.clipboard.writeText(x)}catch(E){console.error(":",E)}};return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-2xl max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(Kc,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:l?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):i.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("p",{className:"text-lg font-bold text-[#636E72]",children:""}),f.jsx("p",{className:"text-sm text-[#636E72]/70 mt-2",children:"   "})]}):f.jsx("div",{className:"space-y-4",children:i.map(x=>f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"p-3 bg-[#FECA57] border-b-2 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-bold text-[#2D3436]",children:x.studentName||""}),x.tags&&x.tags.length>0&&f.jsxs("div",{className:"flex gap-1 flex-wrap",children:[x.tags.slice(0,3).map((E,S)=>f.jsx("span",{className:"px-2 py-0.5 bg-white text-[#2D3436] text-xs rounded-full border border-[#2D3436]",children:E},S)),x.tags.length>3&&f.jsxs("span",{className:"text-xs text-[#2D3436]",children:["+",x.tags.length-3]})]})]}),f.jsxs("span",{className:"text-xs text-[#2D3436]/70",children:[" ",x.usageCount||0," "]})]}),f.jsx("div",{className:"p-3 text-sm text-[#2D3436] leading-relaxed max-h-[120px] overflow-y-auto",children:x.content}),f.jsxs("div",{className:"p-2 bg-[#FFF9E6] border-t border-dashed border-[#E8DCC8] flex items-center justify-end gap-2",children:[f.jsxs("button",{onClick:()=>v(x.content),className:"btn-pop px-3 py-1.5 bg-white text-[#2D3436] text-xs font-bold flex items-center gap-1",children:[f.jsx(mA,{size:12}),""]}),f.jsxs("button",{onClick:()=>y(x),className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(dA,{size:12}),""]}),f.jsxs("button",{onClick:()=>m(x.id),className:"btn-pop px-3 py-1.5 bg-[#FF6B6B] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(aa,{size:12}),""]})]})]},x.id))})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",i.length,"  | "]})]})}):null},HA=()=>{const[r,e]=Z.useState(null),[t,i]=Z.useState(!1);Z.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const m=localStorage.getItem("pwa_install_dismissed");if(m&&Date.now()-parseInt(m)<1e3*60*60*24*7)return;const y=v=>{v.preventDefault(),e(v),i(!0)};return window.addEventListener("beforeinstallprompt",y),()=>window.removeEventListener("beforeinstallprompt",y)},[]);const o=async()=>{if(!r)return;r.prompt();const{outcome:h}=await r.userChoice;h==="accepted"&&i(!1),e(null)},l=()=>{i(!1),localStorage.setItem("pwa_install_dismissed",Date.now().toString())};return t?f.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-sm z-[100] animate-in",children:f.jsxs("div",{className:"bg-[#2D3436] text-white p-4 rounded-lg border-3 border-[#FECA57] shadow-[4px_4px_0_#FECA57] flex items-center gap-3",children:[f.jsx("div",{className:"text-3xl",children:""}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-black text-sm",children:""}),f.jsx("p",{className:"text-xs text-white/70 mt-0.5",children:""})]}),f.jsxs("button",{onClick:o,className:"btn-pop px-3 py-2 bg-[#FECA57] text-[#2D3436] text-xs font-bold flex items-center gap-1",children:[f.jsx(mf,{size:14}),""]}),f.jsx("button",{onClick:l,className:"text-white/50 hover:text-white p-1",children:f.jsx(er,{size:16})})]})}):null},WA=({isOpen:r,onClose:e,currentClassId:t,onSelectClass:i})=>{const[o,l]=Z.useState([]),[h,m]=Z.useState(!0),[y,v]=Z.useState(!1),[x,E]=Z.useState(null),[S,O]=Z.useState(""),[q,$]=Z.useState("");Z.useEffect(()=>{if(!r)return;m(!0);const W=ts.subscribe(ie=>{l(ie),m(!1)});return()=>W()},[r]);const U=async()=>{if(S.trim())try{await ts.add({name:S.trim(),year:new Date().getFullYear()}),O(""),v(!1)}catch(W){console.error(":",W)}},G=async W=>{if(q.trim())try{await ts.update(W,{name:q.trim()}),E(null),$("")}catch(ie){console.error(":",ie)}},te=async W=>{if(window.confirm(""))try{await ts.delete(W),t===W&&i(null)}catch(ie){console.error(":",ie)}},oe=W=>{i(W),e()};return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#A29BFE] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(yl,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:h?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>oe(null),className:`w-full p-4 border-2 border-[#2D3436] rounded-lg flex items-center justify-between transition-all shadow-[3px_3px_0_#2D3436]
                  ${t?"bg-white hover:bg-[#FECA57]/20":"bg-[#1DD1A1] text-white"}`,children:[f.jsxs("span",{className:"font-bold flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:""})," "]}),!t&&f.jsx(Hs,{size:20})]}),o.map(W=>f.jsx("div",{className:`p-4 border-2 border-[#2D3436] rounded-lg shadow-[3px_3px_0_#2D3436] transition-all
                    ${t===W.id?"bg-[#54A0FF] text-white":"bg-white"}`,children:x===W.id?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:q,onChange:ie=>$(ie.target.value),className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg text-[#2D3436] font-bold",autoFocus:!0}),f.jsx("button",{onClick:()=>G(W.id),className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:f.jsx(Hs,{size:16})}),f.jsx("button",{onClick:()=>E(null),className:"btn-pop p-2 bg-[#636E72] text-white",children:f.jsx(er,{size:16})})]}):f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>oe(W.id),className:"flex-1 text-left font-bold flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:""})," ",W.name,t===W.id&&f.jsx(Hs,{size:18})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>{E(W.id),$(W.name)},className:"p-2 hover:text-[#54A0FF] transition-colors",children:f.jsx(TA,{size:16})}),f.jsx("button",{onClick:()=>te(W.id),className:"p-2 hover:text-[#FF6B6B] transition-colors",children:f.jsx(aa,{size:16})})]})]})},W.id)),y?f.jsx("div",{className:"p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg bg-[#1DD1A1]/10",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:S,onChange:W=>O(W.target.value),placeholder:"...",className:"flex-1 p-2 border-2 border-[#2D3436] rounded-lg font-bold",autoFocus:!0,onKeyDown:W=>W.key==="Enter"&&U()}),f.jsx("button",{onClick:U,className:"btn-pop p-2 bg-[#1DD1A1] text-white",children:f.jsx(Hs,{size:16})}),f.jsx("button",{onClick:()=>{v(!1),O("")},className:"btn-pop p-2 bg-[#636E72] text-white",children:f.jsx(er,{size:16})})]})}):f.jsxs("button",{onClick:()=>v(!0),className:"w-full p-4 border-2 border-dashed border-[#1DD1A1] rounded-lg text-[#1DD1A1] font-bold flex items-center justify-center gap-2 hover:bg-[#1DD1A1]/10 transition-colors",children:[f.jsx(Bw,{size:20}),""]}),o.length===0&&!y&&f.jsxs("div",{className:"text-center py-8 text-[#636E72]",children:[f.jsx("div",{className:"text-4xl mb-3",children:""}),f.jsx("p",{className:"font-bold",children:""}),f.jsx("p",{className:"text-sm mt-1",children:""})]})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",o.length,"  | "]})]})}):null},KA=({isOpen:r,onClose:e,student:t,onRestore:i})=>{const[o,l]=Z.useState([]),[h,m]=Z.useState(!0);Z.useEffect(()=>{if(!r||!t)return;m(!0);const E=ff.subscribe(t.id,S=>{l(S),m(!1)});return()=>E()},[r,t]);const y=E=>{i(E),e()},v=async E=>{if(window.confirm(""))try{await ff.delete(t.id,E)}catch(S){console.error(":",S)}},x=E=>E!=null&&E.toDate?E.toDate().toLocaleString("zh-TW",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return!r||!t?null:f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-lg max-h-[85vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#54A0FF] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx(Yo,{size:24}),t.name," "]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:h?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):o.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-5xl mb-4",children:""}),f.jsx("p",{className:"text-lg font-bold text-[#636E72]",children:""}),f.jsx("p",{className:"text-sm text-[#636E72]/70 mt-2",children:""})]}):f.jsx("div",{className:"space-y-3",children:o.map((E,S)=>{var O;return f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg overflow-hidden shadow-[3px_3px_0_#2D3436]",children:[f.jsxs("div",{className:"px-3 py-2 bg-[#E8DCC8] border-b border-dashed border-[#2D3436]/20 flex items-center justify-between",children:[f.jsxs("span",{className:"text-xs font-bold text-[#636E72] flex items-center gap-1",children:[f.jsx(Yo,{size:12}),x(E.createdAt),S===0&&f.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#1DD1A1] text-white rounded-full text-[10px]",children:""})]}),f.jsxs("span",{className:"text-xs text-[#636E72]",children:[((O=E.comment)==null?void 0:O.length)||0," "]})]}),f.jsx("div",{className:"p-3 text-sm text-[#2D3436] leading-relaxed max-h-[120px] overflow-y-auto",children:E.comment}),f.jsxs("div",{className:"p-2 bg-[#FFF9E6] border-t border-dashed border-[#E8DCC8] flex items-center justify-end gap-2",children:[f.jsxs("button",{onClick:()=>y(E.comment),className:"btn-pop px-3 py-1.5 bg-[#54A0FF] text-white text-xs font-bold flex items-center gap-1",children:[f.jsx(SA,{size:12}),""]}),f.jsx("button",{onClick:()=>v(E.id),className:"btn-pop px-3 py-1.5 bg-[#FF6B6B] text-white text-xs font-bold flex items-center gap-1",children:f.jsx(aa,{size:12})})]})]},E.id)})})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",o.length,"  | "]})]})})},GA=({isOpen:r,onClose:e,currentUser:t})=>{const[i,o]=Z.useState([]),[l,h]=Z.useState([]),[m,y]=Z.useState([]),[v,x]=Z.useState(!0),[E,S]=Z.useState(null),[O,q]=Z.useState([]),[$,U]=Z.useState(null);Z.useEffect(()=>{if(!r)return;x(!0);const T=ns.subscribeAll(R=>{o(R),x(!1)}),N=ts.subscribe(R=>{h(R)}),P=ic.subscribe(R=>{y(R)});return()=>{T(),N(),P()}},[r]);const G=T=>{S(T),q(T.assignedClasses||[]),U(T.schoolId||null)},te=T=>{q(N=>N.includes(T)?N.filter(P=>P!==T):[...N,T])},oe=async()=>{E&&(await ns.approve(E.id,O,$),S(null),q([]),U(null))},W=async()=>{E&&(await ns.updateAssignedClasses(E.id,O,$),S(null),q([]),U(null))},ie=async T=>{window.confirm("/")&&await ns.reject(T)},re=T=>{switch(T){case Et.ADMIN:return f.jsx("span",{className:"px-2 py-0.5 bg-[#FF6B9D] text-white text-xs font-bold rounded-full",children:""});case Et.TEACHER:return f.jsx("span",{className:"px-2 py-0.5 bg-[#1DD1A1] text-white text-xs font-bold rounded-full",children:""});default:return f.jsx("span",{className:"px-2 py-0.5 bg-[#FECA57] text-[#2D3436] text-xs font-bold rounded-full",children:""})}},C=T=>T!=null&&T.toDate?T.toDate().toLocaleDateString("zh-TW"):"-";return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-2 sm:p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-4xl max-h-[90vh] flex flex-col animate-in bg-[#FFF9E6]",children:[f.jsxs("div",{className:"p-3 sm:p-5 bg-[#FF6B9D] border-b-3 border-[#2D3436] flex items-center justify-between",children:[f.jsxs("h3",{className:"font-black text-white flex items-center gap-2 text-lg sm:text-xl",children:[f.jsx($w,{size:24}),""]}),f.jsx("button",{onClick:e,className:"btn-pop p-2 bg-white text-[#2D3436]",children:f.jsx(er,{size:20})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 mobile-scroll-hide",children:v?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"text-4xl animate-bounce",children:""})}):E?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border-2 border-[#2D3436] rounded-lg",children:[E.photoURL?f.jsx("img",{src:E.photoURL,alt:"",className:"w-12 h-12 rounded-full border-2 border-[#2D3436]"}):f.jsx("div",{className:"w-12 h-12 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center",children:""}),f.jsxs("div",{children:[f.jsx("div",{className:"font-bold text-[#2D3436]",children:E.displayName}),f.jsx("div",{className:"text-sm text-[#636E72]",children:E.email})]}),re(E.role)]}),f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg p-4",children:[f.jsxs("h4",{className:"font-bold text-[#2D3436] mb-3 flex items-center gap-2",children:[f.jsx(fA,{size:18}),""]}),m.length===0?f.jsx(m_,{onAdd:async(T,N,P)=>{await ic.add({name:T,city:N,district:P})}}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(T=>f.jsxs("button",{onClick:()=>U($===T.id?null:T.id),className:`px-3 py-2 border-2 border-[#2D3436] rounded-lg font-bold text-sm transition-all
                                                      ${$===T.id?"bg-[#A29BFE] text-white shadow-[2px_2px_0_#2D3436]":"bg-white hover:bg-[#A29BFE]/20"}`,children:[$===T.id&&f.jsx(Hs,{size:14,className:"inline mr-1"})," ",T.name,T.city&&f.jsxs("span",{className:"text-xs opacity-70 ml-1",children:["(",T.city,")"]})]},T.id))}),f.jsx(m_,{compact:!0,onAdd:async(T,N,P)=>{await ic.add({name:T,city:N,district:P})}})]})]}),f.jsxs("div",{className:"bg-white border-2 border-[#2D3436] rounded-lg p-4",children:[f.jsxs("h4",{className:"font-bold text-[#2D3436] mb-3 flex items-center gap-2",children:[f.jsx(yl,{size:18}),""]}),l.length===0?f.jsx(p_,{onAdd:async T=>{await ts.add({name:T})}}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(T=>f.jsxs("button",{onClick:()=>te(T.id),className:`px-3 py-2 border-2 border-[#2D3436] rounded-lg font-bold text-sm transition-all
                          ${O.includes(T.id)?"bg-[#54A0FF] text-white shadow-[2px_2px_0_#2D3436]":"bg-white hover:bg-[#FECA57]/20"}`,children:[O.includes(T.id)&&f.jsx(Hs,{size:14,className:"inline mr-1"}),T.name]},T.id))}),f.jsx(p_,{compact:!0,onAdd:async T=>{await ts.add({name:T})}})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>{S(null),q([])},className:"btn-pop px-4 py-2 bg-[#636E72] text-white font-bold",children:""}),E.role===Et.PENDING?f.jsxs("button",{onClick:oe,className:"btn-pop px-4 py-2 bg-[#1DD1A1] text-white font-bold flex-1 flex items-center justify-center gap-2",children:[f.jsx(Hs,{size:18}),""]}):f.jsxs("button",{onClick:W,className:"btn-pop px-4 py-2 bg-[#54A0FF] text-white font-bold flex-1 flex items-center justify-center gap-2",children:[f.jsx(Hs,{size:18}),""]})]})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[f.jsxs("div",{className:"bg-[#FECA57] text-[#2D3436] p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===Et.PENDING).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]}),f.jsxs("div",{className:"bg-[#1DD1A1] text-white p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===Et.TEACHER).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]}),f.jsxs("div",{className:"bg-[#FF6B9D] text-white p-3 border-2 border-[#2D3436] rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-black",children:i.filter(T=>T.role===Et.ADMIN).length}),f.jsx("div",{className:"text-xs font-bold",children:""})]})]}),i.filter(T=>T.role===Et.PENDING).length>0&&f.jsxs("div",{className:"mb-4",children:[f.jsxs("h4",{className:"font-bold text-[#FECA57] mb-2 flex items-center gap-2",children:[f.jsx(Yo,{size:18})," (",i.filter(T=>T.role===Et.PENDING).length,")"]}),i.filter(T=>T.role===Et.PENDING).map(T=>f.jsx(f_,{user:T,onEdit:G,onReject:ie,getRoleBadge:re,formatTime:C,classes:l},T.id))]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-[#1DD1A1] mb-2 flex items-center gap-2",children:[f.jsx(kA,{size:18}),""]}),i.filter(T=>T.role!==Et.PENDING).map(T=>f.jsx(f_,{user:T,onEdit:G,onReject:ie,getRoleBadge:re,formatTime:C,classes:l,isCurrentUser:T.id===(t==null?void 0:t.uid)},T.id))]})]})}),f.jsxs("div",{className:"p-3 sm:p-4 bg-[#E8DCC8] border-t-2 border-dashed border-[#2D3436]/20 text-xs text-[#636E72] text-center",children:[" ",i.length,"  | "]})]})}):null},f_=({user:r,onEdit:e,onReject:t,getRoleBadge:i,formatTime:o,classes:l,isCurrentUser:h})=>{const m=(r.assignedClasses||[]).map(y=>{var v;return(v=l.find(x=>x.id===y))==null?void 0:v.name}).filter(Boolean).join(", ");return f.jsxs("div",{className:`p-3 bg-white border-2 border-[#2D3436] rounded-lg mb-2 flex items-center justify-between
      ${h?"ring-2 ring-[#FF6B9D]":""}`,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[r.photoURL?f.jsx("img",{src:r.photoURL,alt:"",className:"w-10 h-10 rounded-full border-2 border-[#2D3436]"}):f.jsx("div",{className:"w-10 h-10 bg-[#FECA57] rounded-full border-2 border-[#2D3436] flex items-center justify-center text-lg",children:""}),f.jsxs("div",{children:[f.jsxs("div",{className:"font-bold text-[#2D3436] text-sm flex items-center gap-2",children:[r.displayName,i(r.role),h&&f.jsx("span",{className:"text-xs text-[#636E72]",children:"()"})]}),f.jsx("div",{className:"text-xs text-[#636E72]",children:r.email}),m&&f.jsxs("div",{className:"text-xs text-[#54A0FF] flex items-center gap-1 mt-0.5",children:[f.jsx(yl,{size:10}),m]})]})]}),f.jsx("div",{className:"flex items-center gap-1",children:r.role!==Et.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>e(r),className:"btn-pop px-3 py-1.5 bg-[#54A0FF] text-white text-xs font-bold",children:r.role===Et.PENDING?"":""}),r.role===Et.TEACHER&&f.jsx("button",{onClick:()=>t(r.id),className:"btn-pop p-1.5 bg-[#FF6B6B] text-white",children:f.jsx(pA,{size:14})})]})})]})},p_=({onAdd:r,compact:e=!1})=>{const[t,i]=Z.useState(""),[o,l]=Z.useState(!1),h=async()=>{if(t.trim()){l(!0);try{await r(t.trim()),i("")}catch(y){console.error(":",y)}l(!1)}},m=y=>{y.key==="Enter"&&h()};return e?f.jsxs("div",{className:"flex gap-2 items-center pt-2 border-t border-dashed border-[#2D3436]/20",children:[f.jsx("input",{type:"text",value:t,onChange:y=>i(y.target.value),onKeyDown:m,placeholder:"...",className:"flex-1 px-3 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm",disabled:o}),f.jsx("button",{onClick:h,disabled:!t.trim()||o,className:"btn-pop px-3 py-1.5 bg-[#1DD1A1] text-white text-xs font-bold disabled:opacity-50",children:o?"...":"+ "})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-[#636E72]",children:""}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:t,onChange:y=>i(y.target.value),onKeyDown:m,placeholder:" ()",className:"flex-1 px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium",disabled:o}),f.jsx("button",{onClick:h,disabled:!t.trim()||o,className:"btn-pop px-4 py-2 bg-[#1DD1A1] text-white font-bold disabled:opacity-50 flex items-center gap-1",children:o?"...":f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"+"})," "]})})]})]})},m_=({onAdd:r,compact:e=!1})=>{const[t,i]=Z.useState(""),[o,l]=Z.useState(""),[h,m]=Z.useState(!1),y=async()=>{if(t.trim()){m(!0);try{await r(t.trim(),o.trim()||null,null),i(""),l("")}catch(E){console.error(":",E)}m(!1)}},v=E=>{E.key==="Enter"&&y()},x=["","","","","","","","","","","","","","","","","","","","","",""];return e?f.jsxs("div",{className:"flex gap-2 items-center pt-2 border-t border-dashed border-[#2D3436]/20",children:[f.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"px-2 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm bg-white",disabled:h,children:[f.jsx("option",{value:"",children:""}),x.map(E=>f.jsx("option",{value:E,children:E},E))]}),f.jsx("input",{type:"text",value:t,onChange:E=>i(E.target.value),onKeyDown:v,placeholder:"...",className:"flex-1 px-3 py-1.5 border-2 border-[#2D3436] rounded-lg text-sm",disabled:h}),f.jsx("button",{onClick:y,disabled:!t.trim()||h,className:"btn-pop px-3 py-1.5 bg-[#A29BFE] text-white text-xs font-bold disabled:opacity-50",children:h?"...":"+ "})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-[#636E72]",children:""}),f.jsxs("div",{className:"flex gap-2 flex-wrap",children:[f.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium bg-white",disabled:h,children:[f.jsx("option",{value:"",children:""}),x.map(E=>f.jsx("option",{value:E,children:E},E))]}),f.jsx("input",{type:"text",value:t,onChange:E=>i(E.target.value),onKeyDown:v,placeholder:" ()",className:"flex-1 min-w-[200px] px-3 py-2 border-2 border-[#2D3436] rounded-lg font-medium",disabled:h}),f.jsx("button",{onClick:y,disabled:!t.trim()||h,className:"btn-pop px-4 py-2 bg-[#A29BFE] text-white font-bold disabled:opacity-50 flex items-center gap-1",children:h?"...":f.jsxs(f.Fragment,{children:[f.jsx("span",{children:""})," "]})})]})]})},QA=({currentUser:r,onLogout:e,isAdmin:t})=>{const{dialog:i,closeDialog:o,showConfirm:l,showAlert:h}=ax(),[m,y]=Z.useState(!1),{students:v,setStudents:x,selectedIds:E,isLoading:S,generateStudents:O,updateStudent:q,deleteStudent:$,deleteSelected:U,resetStudents:G,toggleSelection:te,toggleAllSelection:oe,addTagToStudents:W,removeTag:ie,syncComment:re}=lA(r==null?void 0:r.uid),[C,T]=Z.useState(`

`),[N,P]=Z.useState(30),[R,V]=Z.useState(!1),[b,qe]=Z.useState(!1),[Ze,Nt]=Z.useState(null),[Xe,se]=Z.useState({current:0,total:0}),[me,ue]=Z.useState(!1),[j,Q]=Z.useState(["qualitative"]),[Se,Te]=Z.useState(!1),[ke,Ne]=Z.useState(!1),[Me,Ve]=Z.useState(Vg()),[ze,jt]=Z.useState({tone:"normal",wordCount:80}),[us,cs]=Z.useState(null),[nr,Pr]=Z.useState(!1),[Wi,hs]=Z.useState(0),[Dr,ds]=Z.useState(!1),[et,at]=Z.useState(null),[mn,fs]=Z.useState(""),[Ki,Gi]=Z.useState([]),[rr,ps]=Z.useState(!1),[On,Ln]=Z.useState(null);Z.useEffect(()=>{const ve=ol.subscribe(be=>{hs(be.length)});return()=>ve()},[]),Z.useEffect(()=>{const ve=ts.subscribe(be=>{if(Gi(be),et){const Ge=be.find(_t=>_t.id===et);fs(Ge?Ge.name:"")}});return()=>ve()},[et]);const[Qi,jr]=Z.useState({" ()":!0," ()":!0});Z.useEffect(()=>{const ve=()=>ue(window.innerWidth<768);return ve(),window.addEventListener("resize",ve),()=>window.removeEventListener("resize",ve)},[]);const sr=()=>{C.trim()&&(O(C),T(""))},Xi=()=>{if(N<1)return;const ve=[];for(let Ge=1;Ge<=N;Ge++){const _t=Ge<10?`0${Ge}`:`${Ge}`;ve.push(`${_t}`)}const be=ve.join(`
`);T(Ge=>Ge?`${Ge}
${be}`:be)},Mn=()=>{l("","",()=>{G(),o()})},ms=()=>{E.size!==0&&l("",` ${E.size} `,()=>{U(),o()})},oi=ve=>{let be=[];if(E.size>0?be=Array.from(E):Ze&&(be=[Ze]),be.length===0){h("");return}W(be,ve)},gn=ve=>{jr(be=>({...be,[ve]:!be[ve]}))},gs=ve=>{Q(be=>be.includes(ve)?be.filter(_t=>_t!==ve):be.length>=2?be:[...be,ve])},Un=async(ve=!1)=>{qe(!0);const be=v.filter(_t=>ve?E.has(_t.id):!0),Ge=be.length;if(Ge===0){qe(!1);return}se({current:0,total:Ge});for(let _t=0;_t<Ge;_t++){const Vt=be[_t];x(yn=>yn.map(qt=>qt.id===Vt.id?{...qt,comment:""}:qt));const $t=[...Vt.selectedTags,Vt.manualTraits].filter(Boolean).join(""),ai=await Fg(Vt.name,$t,j,ze);x(yn=>yn.map(qt=>qt.id===Vt.id?{...qt,comment:ai}:qt)),await re(Vt.id,ai),se(yn=>({...yn,current:_t+1}))}qe(!1),se({current:0,total:0})},ys=ve=>{ox(v,ve)},zn=async ve=>{const be=v.find(Vt=>Vt.id===ve);if(!be)return;if(cs(ve),be.comment&&!be.comment.includes(""))try{await ff.add(ve,be.comment,j)}catch(Vt){console.error(":",Vt)}const Ge=[...be.selectedTags,be.manualTraits].filter(Boolean).join(""),_t=await Fg(be.name,Ge,j,ze);x(Vt=>Vt.map($t=>$t.id===ve?{...$t,comment:_t}:$t)),await re(ve,_t),cs(null)},Bn=async ve=>{try{await ol.add({content:ve.comment,studentName:ve.name,tags:ve.selectedTags,styles:j}),h(" ")}catch(be){console.error(":",be)}},it=ve=>{Ze&&(q(Ze,"comment",ve),re(Ze,ve))};return f.jsxs("div",{className:"min-h-screen text-[#2D3436] font-sans flex flex-col relative",children:[S&&f.jsx(BA,{}),f.jsx(DA,{dialog:i,closeDialog:o}),b&&f.jsx(jA,{progress:Xe}),f.jsx(VA,{isOpen:Se,onClose:()=>Te(!1),globalStyles:j,toggleGlobalStyle:gs}),f.jsx($A,{isOpen:ke,onClose:()=>{Ne(!1),Ve(Vg())}}),f.jsx(qA,{isOpen:nr,onClose:()=>Pr(!1),onApplyTemplate:it}),f.jsx(WA,{isOpen:Dr,onClose:()=>ds(!1),currentClassId:et,onSelectClass:ve=>{at(ve),ve||fs("")}}),f.jsx(KA,{isOpen:rr,onClose:()=>{ps(!1),Ln(null)},student:On,onRestore:ve=>{On&&(q(On.id,"comment",ve),re(On.id,ve))}}),f.jsx(GA,{isOpen:m,onClose:()=>y(!1),currentUser:r}),f.jsx(RA,{isSidebarOpen:R,setIsSidebarOpen:V,onOpenSettings:()=>Ne(!0),onOpenTemplates:()=>Pr(!0),onOpenClasses:()=>ds(!0),onOpenAdmin:()=>y(!0),onLogout:e,hasApiKey:Me,templateCount:Wi,currentClassName:mn,currentUser:r,isAdmin:t}),f.jsxs("div",{className:"flex flex-col flex-1 w-full mx-auto relative",children:[f.jsxs("div",{className:"p-3 sm:p-6 bg-[#FFFDF5] border-b-4 border-[#2D3436] flex flex-col lg:flex-row gap-4 sm:gap-6 items-stretch",children:[f.jsx(FA,{rawInput:C,setRawInput:T,numberCount:N,setNumberCount:P,onGenerateStudents:sr,onGenerateNumbers:Xi,onResetList:Mn,isGenerating:b}),f.jsx(OA,{students:v,selectedIds:E,isGenerating:b,extraSettings:ze,setExtraSettings:jt,onGenerateSelected:()=>Un(!0),onGenerateAll:()=>Un(!1),onDownload:ys,onDeleteSelected:ms,onResetList:Mn})]}),f.jsxs("div",{className:"flex-1 p-3 sm:p-6",children:[f.jsx(LA,{globalStyles:j,onOpenStyleModal:()=>Te(!0),isGenerating:b}),f.jsx(UA,{students:v,selectedIds:E,focusedStudentId:Ze,isGenerating:b,isGeneratingSingle:us,onToggleSelection:te,onToggleAllSelection:oe,onFocusStudent:Nt,onOpenSidebar:()=>V(!0),onRemoveTag:ie,onUpdateStudent:q,onDeleteStudent:$,onGenerateSingle:zn,onSaveTemplate:Bn,onOpenHistory:ve=>{Ln(ve),ps(!0)}})]}),f.jsx(zA,{isOpen:R,onClose:()=>V(!1),selectedIds:E,expandedCategories:Qi,onToggleCategory:gn,onIdiomClick:oi})]}),f.jsx(PA,{}),f.jsx(HA,{})]})},XA=({onLogin:r})=>{const[e,t]=oc.useState(!1),[i,o]=oc.useState(null),l=async()=>{t(!0),o(null);const h=await pf.signInWithGoogle();h.success||o(h.error),t(!1)};return f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"inline-block bg-[#FECA57] text-[#2D3436] p-4 border-3 border-[#2D3436] shadow-[4px_4px_0_#2D3436] transform rotate-[-3deg] rounded-lg mb-4",children:f.jsx("span",{className:"text-5xl",children:""})}),f.jsx("h1",{className:"text-3xl font-black text-[#2D3436]",children:f.jsxs("span",{className:"relative",children:[f.jsx("span",{className:"relative z-10",children:""}),f.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-[#FF6B9D] -z-0 transform -rotate-1"})]})}),f.jsx("p",{className:"text-[#636E72] font-bold mt-2",children:"AI "})]}),f.jsx("div",{className:"bg-[#54A0FF]/20 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:f.jsx("p",{className:"text-sm text-[#2D3436] font-medium",children:"  Google "})}),i&&f.jsxs("div",{className:"bg-[#FF6B6B]/20 border-2 border-[#FF6B6B] rounded-lg p-3 mb-4 text-sm text-[#FF6B6B] font-bold",children:[" ",i]}),f.jsx("button",{onClick:l,disabled:e,className:"btn-pop w-full py-4 bg-white text-[#2D3436] font-bold flex items-center justify-center gap-3 text-lg disabled:opacity-50",children:e?f.jsx("span",{className:"animate-spin text-2xl",children:""}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})," Google "]})}),f.jsx("p",{className:"text-xs text-[#636E72]/50 mt-6",children:" 2026 "})]})})},YA=({user:r,onLogout:e})=>f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center p-4",children:f.jsxs("div",{className:"card-pop w-full max-w-md p-8 text-center",children:[f.jsx("div",{className:"mb-6",children:r!=null&&r.photoURL?f.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-20 h-20 rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto"}):f.jsx("div",{className:"w-20 h-20 bg-[#FECA57] rounded-full border-3 border-[#2D3436] shadow-[3px_3px_0_#2D3436] mx-auto flex items-center justify-center",children:f.jsx("span",{className:"text-4xl",children:""})})}),f.jsxs("h2",{className:"text-2xl font-black text-[#2D3436] mb-2",children:["",(r==null?void 0:r.displayName)||"",""]}),f.jsx("p",{className:"text-[#636E72] text-sm mb-6",children:r==null?void 0:r.email}),f.jsxs("div",{className:"bg-[#FECA57]/30 border-3 border-[#FECA57] rounded-lg p-6 mb-6",children:[f.jsx("div",{className:"text-4xl mb-3 animate-bounce",children:f.jsx(Yo,{size:48,className:"mx-auto text-[#FF9F43]"})}),f.jsx("h3",{className:"text-xl font-black text-[#2D3436] mb-2",children:" "}),f.jsxs("p",{className:"text-sm text-[#636E72] font-medium",children:["",f.jsx("br",{}),""]})]}),f.jsx("div",{className:"bg-[#54A0FF]/10 border-2 border-dashed border-[#54A0FF] rounded-lg p-4 mb-6 text-left",children:f.jsxs("p",{className:"text-xs text-[#636E72]",children:[" ",f.jsx("strong",{children:""})," (cagooo@gmail.com) "]})}),f.jsx("button",{onClick:e,className:"btn-pop px-6 py-3 bg-[#636E72] text-white font-bold",children:""})]})}),JA=({children:r})=>{var E;const[e,t]=Z.useState(null),[i,o]=Z.useState(!0),[l,h]=Z.useState([]),[m,y]=Z.useState([]);Z.useEffect(()=>{const S=pf.onAuthStateChange(O=>{t(O),o(!1)});return()=>S()},[]),Z.useEffect(()=>{if(!e||!ns.isApproved(e))return;const S=ic.subscribe(q=>{h(q)}),O=ts.subscribe(q=>{y(q)});return()=>{S(),O()}},[e]);const v=e?{...e,schoolName:e.schoolId?(E=l.find(S=>S.id===e.schoolId))==null?void 0:E.name:null,assignedClassNames:(e.assignedClasses||[]).map(S=>{var O;return(O=m.find(q=>q.id===S))==null?void 0:O.name}).filter(Boolean)}:null,x=async()=>{await pf.signOut(),t(null)};return i?f.jsx("div",{className:"min-h-screen bg-[#FFF9E6] flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-6xl animate-bounce mb-4",children:""}),f.jsx("p",{className:"font-bold text-[#2D3436]",children:"..."})]})}):e?ns.isApproved(e)?oc.cloneElement(r,{currentUser:v,onLogout:x,isAdmin:ns.isAdmin(e)}):f.jsx(YA,{user:e,onLogout:x}):f.jsx(XA,{})};ix.createRoot(document.getElementById("root")).render(f.jsx(oc.StrictMode,{children:f.jsx(JA,{children:f.jsx(QA,{})})}));
